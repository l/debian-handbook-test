<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.8. Atualizações Automáticas</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-pt-BR-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="O Manual do Administrador Debian" /><link
        rel="up"
        href="apt.html"
        title="Capítulo 6. Manutenções e atualizações: As ferramentas APT" /><link
        rel="prev"
        href="sect.regular-upgrades.html"
        title="6.7. Mantendo um Sistema Atualizado" /><link
        rel="next"
        href="sect.searching-packages.html"
        title="6.9. Buscando por Pacotes" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/pt-BR/stable/sect.automatic-upgrades.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Anterior</strong></a></li><li
          class="home">O Manual do Administrador Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>Próxima</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automatic-upgrades"></a>6.8. Atualizações Automáticas</h2></div></div></div><a
          id="id-1.9.17.2"
          class="indexterm"></a><a
          id="id-1.9.17.3"
          class="indexterm"></a><div
          class="para">
			Como a Falcot Corp tem muitos computadores mas pouca mão de obra, seus administradores tentam tornar as atualizações o mais automáticas possível. Os programas encarregados destes processos devem portanto rodar sem intervenção humana.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.5"></a>6.8.1. Configurando <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				Como já mencionamos (veja a barra lateral <a
              class="xref"
              href="sect.package-meta-information.html#sidebar.questions-conffiles"><span
                class="emphasis"><em>INDO ALÉM</em></span> Evitando as perguntas do arquivo de configuração</a>), o <code
              class="command">dpkg</code> pode ser instruído a não pedir confirmação quando for substituir um arquivo de configuração (com as opções <code
              class="literal">--force-confdef --force-confold</code>). Interações podem, entretanto, vir de outras origens: algumas vêm do próprio APT, algumas são manipuladas pelo <code
              class="command">debconf</code> e algumas acontecem na linha de comando devido a scripts de configuração do pacote.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.6"></a>6.8.2. Configurando APT</h3></div></div></div><div
            class="para">
				No caso do APT é simples: a opção <code
              class="literal">-y</code> (ou <code
              class="literal">--assume-yes</code>) diz ao APT para considerar a resposta a todas as perguntas como sendo “sim”.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.7"></a>6.8.3. Configurando <code
                    class="command">debconf</code></h3></div></div></div><div
            class="para">
				o caso do <code
              class="command">debconf</code> merece mais detalhes. Este programa foi, desde sua concepção, projetado para controlar a relevância e a quantidade das perguntas mostradas ao usuário, assim como a forma como são exibidas. É por isto que sua configuração requer uma prioridade mínima para perguntas; apenas perguntas acima da prioridade mínima são exibidas. O <code
              class="command">debconf</code> supõe a resposta padrão (definida pelo mantenedor do pacote) para perguntas que ele decidiu pular.
			</div><div
            class="para">
				O outro elemento de configuração relevante é a interface usada pelo front-end. Se você escolher <code
              class="literal">noninteractive</code>, toda interface de usuário será desabilitada. Se um pacote tenta exibir uma nota informativa, ele vai ser enviado ao administrador via email.
			</div><div
            class="para">
				Para reconfigurar o <code
              class="command">debconf</code>, use a ferramenta <code
              class="command">dpkg-reconfigure</code> do pacote <span
              class="pkg pkg">debconf</span>; o comando relevante é o <code
              class="command">dpkg-reconfigure debconf</code>. Note que os valores configurados podem ser temporariamente sobreescritos com variáveis de ambiente quando necessário (por exemplo, <code
              class="varname">DEBIAN_FRONTEND</code> controla a interface, como documentado na página de manual <span
              class="citerefentry"><span
                class="refentrytitle">debconf</span>(7)</span>).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.8"></a>6.8.4. Lidando com Interações Via Linha de Comando</h3></div></div></div><div
            class="para">
				A última fonte de interações, e a mais difícil de esconder, são os scripts de configuração executados pelo <code
              class="command">dpkg</code>. infelizmente não existe solução padrão, e nenhuma resposta é substancialmente melhor que outra.
			</div><div
            class="para">
				A abordagem normal é suprimir a entrada padrão redirecionando o conteúdo vazio de <code
              class="filename">/dev/null</code> nela com <code
              class="command"><em
                class="replaceable">comando</em> &lt;/dev/null</code>, ou alimentá-la com um fluxo infinito de newlines. Nenhum destes métodos é 100% confiável, mas eles em geral levam a respostas padrão sendo preenchidas, uma vez que a maioria dos scripts consideram a ausência de resposta como uma aceitação do valor padrão.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.9"></a>6.8.5. A Combinação Miraculosa</h3></div></div></div><div
            class="para">
				Combinando os elementos anteriores, é possível projetar um scrips pequeno mas muito confiável que possa manipular atualizações automáticas.
			</div><div
            class="example"><a
              xmlns=""
              id="example.non-interactive-upgrade"></a><p
              class="title"><strong>Exemplo 6.4. Roteiro de atualização não interativa</strong></p><div
              class="example-contents"><pre
                class="programlisting">export DEBIAN_FRONTEND=noninteractive
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NÁ PRÁTICA</em></span> O caso Falcot Corp</strong></p></div></div></div><div
              class="para">
				Os computadores da Falcot formam um sistema heterogêneo, com máquinas tendo muitas funções. Os administradores vão portanto pegar a solução mais relevante para cada computador.
			</div><div
              class="para">
				Na prática, os servidores rodando <span
                class="distribution distribution">Jessie</span> são configurados com a “combinação milagrosa” acima, e são mantidos atualizados automaticamente. Apenas os servidores mais críticos (firewalls, por exemplo) são configurados com <code
                class="command">apticron</code>, de forma que atualizações sempre aconteçam sob a supervisão de um administrador.
			</div><div
              class="para">
				As estações de escritório para serviços administrativos também rodam <span
                class="distribution distribution">Jessie</span>, mas elas estão equipadas com <span
                class="pkg pkg">gnome-packagekit</span>, para que os usuários iniciem as próprias atualizações. A razão para esta decisão é que se atualizações acontecem sem alguém disparar, o comportamento do computador pode mudar inesperadamente, o que pode gerar confusão nos principais usuários.
			</div><div
              class="para">
				No laboratório, os poucos computadores que usam <span
                class="distribution distribution">Testing</span> — para usufruir das últimas atualizações de software — também não são atualizados automaticamente. Os administradores configuraram o APT apenas para preparar as atualizações mas não para as ativarem; quando eles decidem atualizar (manualmente), a parte chata de renovar a lista de pacotes e baixar os pacotes é evitada, e os administradores podem focar na parte realmente útil.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Anterior</strong>6.7. Mantendo um Sistema Atualizado</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Acima</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Principal</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>Próxima</strong>6.9. Buscando por Pacotes</a></li></ul></body></html>
