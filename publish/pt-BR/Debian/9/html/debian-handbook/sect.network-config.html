<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.2. Configurando a Rede</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-pt-BR-1.0-1" /><meta
        name="keywords"
        content="Configuração, Localização, Localidades, Rede, Resolução de nomes, Usuários, Grupos, Contas, Interpretador de linha de comando, Shell, Impressão, Sistema de iniciação, Compilação de kernel" /><link
        rel="home"
        href="index.html"
        title="O Manual do Administrador Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Capítulo 8. Configuração Básica: Rede, Contas, Impressão..." /><link
        rel="prev"
        href="basic-configuration.html"
        title="Capítulo 8. Configuração Básica: Rede, Contas, Impressão..." /><link
        rel="next"
        href="sect.hostname-name-service.html"
        title="8.3. Ajustando o Nome de Host e Configurando o Serviço de Nomes" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/pt-BR/stable/sect.network-config.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Anterior</strong></a></li><li
          class="home">O Manual do Administrador Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Próxima</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.network-config"></a>8.2. Configurando a Rede</h2></div></div></div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.networking-basics"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>DE VOLTA AO BÁSICO</em></span> Conceitos essenciais de rede (Ethernet, endereço IP, sub-rede, broadcast)</strong></p></div></div></div><a
            id="id-1.11.6.2.2"
            class="indexterm"></a><a
            id="id-1.11.6.2.3"
            class="indexterm"></a><a
            id="id-1.11.6.2.4"
            class="indexterm"></a><a
            id="id-1.11.6.2.5"
            class="indexterm"></a><a
            id="id-1.11.6.2.6"
            class="indexterm"></a><a
            id="id-1.11.6.2.7"
            class="indexterm"></a><a
            id="id-1.11.6.2.8"
            class="indexterm"></a><div
            class="para">
			A maioria das redes locais modernas usam o protocolo Ethernet, onde dados são quebrados em pequenos blocos chamados quadros (frames, em inglês) e transmitidos através do fio um quadro por vez. As velocidades de transmissão de dados variam de 10 Mb/s para placas Ethernet antigas a 10 Gb/s nas mais novas (com as taxas mais comuns atualmente crescendo de 100 Mb/s a 1 Gb/s). Os cabos mais amplamente usados são chamados 10BASE-T, 100BASE-T, 1000BASE-T ou 10GBASE-T dependendo da vazão que eles podem fornecer confiavelmente (o T significa "twisted pair", ou "par trançado"); estes cabos terminam num conector RJ45. Existem outros tipos de cabos, usados normalmente para velocidades de 1 Gb/s ou mais.
		</div><a
            id="id-1.11.6.2.10"
            class="indexterm"></a><a
            id="id-1.11.6.2.11"
            class="indexterm"></a><div
            class="para">
			Um endereço IP é um número usado para identificar uma interface de rede num computador em uma rede local ou na internet. Na sua versão mais utilizada atualmente (IPv4), este número é codificado em 32 bits, e é normalmente representado como 4 números separados por pontos (e.g. <code
              class="literal">192.168.0.1</code>), cada número entre 0 e 255 (inclusive, o que corresponde a 8 bits de dados). A próxima versão do protocolo, IPv6, estende este espaço de endereçamento para 128 bits, e os endereços são geralmente representados como uma série de números hexadecimais separados por dois-pontos (e.g., 2001:0db8:13bb:0002:0000:0000:0000:0020, ou 2001:db8:13bb:2::20 resumidamente).
		</div><a
            id="id-1.11.6.2.13"
            class="indexterm"></a><a
            id="id-1.11.6.2.14"
            class="indexterm"></a><a
            id="id-1.11.6.2.15"
            class="indexterm"></a><div
            class="para">
			Uma máscara de subrede (máscara de rede) define no seu código binário que porções de um endereço IP correspondem à rede, e o restante especifica a máquina. No exemplo de configurar um endereço IPv4 estático dado aqui, a máscara de subrede, <code
              class="literal">255.255.255.0</code> (24 “1”s seguidos de 8 “0”s na representação binária) indica que os primeiros 24 bits do endereço IP correspondem ao endereço de rede, e os outros 8 são específicos da máquina. Em IPv6, por legibilidade, apenas os números “1”s são mostrados; a máscara de rede para uma rede IPv6 poderia ser, portanto, <code
              class="literal">64</code>.
		</div><div
            class="para">
			O endereço de rede é um endereço IP no qual a parte descrevendo o número da máquina é 0. O intervalo de endereços IPv4 em uma rede é às vezes indicado pela sintaxe, <span
              class="emphasis"><em>a.b.c.d/x</em></span>, onde <span
              class="emphasis"><em>a.b.c.d</em></span> é o endereço de rede e <span
              class="emphasis"><em>x</em></span> é o número de bits afetados pela parte da rede no endereço IP. A rede de exemplo pode então ser escrita: <code
              class="literal">192.168.0.0/24</code>. A sintaxe é similar no IPv6: <code
              class="literal">2001:db8:13bb:2::/64</code>.
		</div><a
            id="id-1.11.6.2.18"
            class="indexterm"></a><a
            id="id-1.11.6.2.19"
            class="indexterm"></a><div
            class="para">
			Um roteador é uma máquina que conecta várias redes umas às outras. Todo o tráfego que passa por um roteador é direcionado para a rede correta. Para fazer isto, o roteador analisa pacotes entrando e os redireciona de acordo com o endereço IP de destino. O roteador é às vezes conhecido como um gateway; nesta configuração, ele funciona como uma máquina que ajuda a alcançar mais do que a rede local (indo por uma rede extendida, como a Internet).
		</div><a
            id="id-1.11.6.2.21"
            class="indexterm"></a><div
            class="para">
			O endereço especial de broadcast conecta todas as estações numa rede. Quase nunca é "roteado", ele apenas funciona na rede em questão. Especificamente, significa que um pacote de dados endereçado para o broadcast nunca atravessa o roteador.
		</div><div
            class="para">
			Este capítulo foca nos endereços IPv4, já que eles são os mais comumente usados. Os detalhes sobre o protocolo IPv6 são discutidos aqui <a
              class="xref"
              href="sect.ipv6.html">Seção 10.5, “IPv6”</a>, mas os conceitos se mantém os mesmos.
		</div></div><div
          class="para">
			The network is automatically configured during the initial installation. If Network Manager gets installed (which is generally the case for full desktop installations), then it might be that no configuration is actually required (for example, if you rely on DHCP on a wired connection and have no specific requirements). If a configuration is required (for example for a WiFi interface), then it will create the appropriate file in <code
            class="filename">/etc/NetworkManager/system-connections/</code>.
		</div><div
          class="para">
			If Network Manager is not installed, then the installer will configure <span
            class="pkg pkg">ifupdown</span> by creating the <code
            class="filename">/etc/network/interfaces</code> file. A line starting with <code
            class="literal">auto</code> gives a list of interfaces to be automatically configured on boot by the <code
            class="literal">networking</code> service.
		</div><div
          class="para">
			In a server context, <span
            class="pkg pkg">ifupdown</span> is thus the network configuration tool that you usually get. That is why we will cover it in the next sections.
		</div><a
          id="id-1.11.6.6"
          class="indexterm"></a><a
          id="id-1.11.6.7"
          class="indexterm"></a><a
          id="id-1.11.6.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVO</em></span> NetworkManager</strong></p></div></div></div><a
            id="id-1.11.6.9.2"
            class="indexterm"></a><div
            class="para">
			If Network Manager is particularly recommended in roaming setups (see <a
              class="xref"
              href="sect.network-config.html#sect.roaming-network-config">Seção 8.2.5, “Configuração Automática de Rede para Usuários em Roaming”</a>), it is also perfectly usable as the default network management tool. You can create “System connections” that are used as soon as the computer boots either manually with a <code
              class="filename">.ini</code>-like file in <code
              class="filename">/etc/NetworkManager/system-connections/</code> or through a graphical tool (<code
              class="command">nm-connection-editor</code>). Just remember to deactivate all entries in <code
              class="filename">/etc/network/interfaces</code> if you want Network Manager to handle them. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings</a></div> <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://developer.gnome.org/NetworkManager/1.6/ref-settings.html">https://developer.gnome.org/NetworkManager/1.6/ref-settings.html</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.interface-ethernet"></a>8.2.1. Interface de Rede</h3></div></div></div><div
            class="para">
				Se o computador tem uma placa Ethernet, a rede IP que é associada a ela deve ser configurada escolhendo um de dois métodos. O método mais simples é a configuração dinâmica com DHCP, e requer um servidor DHCP na rede local. Ele pode indicar um hostname ("nome de máquina") desejado, correspondendo à configuração de <code
              class="literal">hostname</code> no exemplo abaixo. O servidor DHCP então manda as configurações para a rede apropriada.
			</div><a
            id="id-1.11.6.10.3"
            class="indexterm"></a><a
            id="id-1.11.6.10.4"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.config-dhcp"></a><p
              class="title"><strong>Exemplo 8.1. Configuração DHCP</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet dhcp
  hostname arrakis
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IN PRACTICE</em></span> Names of network interfaces</strong></p></div></div></div><a
              id="id-1.11.6.10.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.3"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.4"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.5"
              class="indexterm"></a><div
              class="para">
				By default, the kernel attributes generic names such a <code
                class="literal">eth0</code> (for wired Ethernet) or <code
                class="literal">wlan0</code> (for WiFi) to the network interfaces. The number in those names is a simple incremental counter representing the order in which they have been detected. With modern hardware, that order might change for each reboot and thus the default names are not reliable.
			</div><div
              class="para">
				Fortunately, systemd and udev are able to rename the interfaces as soon as they appear. The default name policy is defined by <code
                class="filename">/lib/systemd/network/99-default.link</code> (see <span
                class="citerefentry"><span
                  class="refentrytitle">systemd.link</span>(5)</span> for an explanation of the <code
                class="literal">NamePolicy</code> entry in that file). In practice, the names are often based on the device's physical location (as guessed by where they are connected) and you will see names starting with <code
                class="literal">en</code> for wired ethernet and <code
                class="literal">wl</code> for WiFi. In the example above, the rest of the name indicates, in abbreviated form, a PCI (<code
                class="literal">p</code>) bus number (<code
                class="literal">0</code>), a slot number (<code
                class="literal">s31</code>), a function number (<code
                class="literal">f6</code>).
			</div><div
              class="para">
				Obviously, you are free to override this policy and/or to complement it to customize the names of some specific interfaces. You can find out the names of the network interfaces in the output of <code
                class="command">ip addr</code> (or as filenames in <code
                class="filename">/sys/class/net/</code>).
			</div></div><div
            class="para">
				Uma configuração "static" deve indicar uma configuração de rede de maneira fixa. Isto incluí ao menos o endereço IP e uma máscara de sub rede; endereços de rede e brodcasts são algumas vezes listados também. Um roteador conectado ao exterior será especificado como um gateway.
			</div><div
            class="example"><a
              xmlns=""
              id="example.static-network"></a><p
              class="title"><strong>Exemplo 8.2. Configuração estática</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTA</em></span> Múltiplos endereços</strong></p></div></div></div><div
              class="para">
				É possível associar não só várias interfaces de rede a uma única placa de rede, como também vários endereços IP a uma única interface. Lembre também que um endereço IP pode corresponder a qualquer número de nomes via DNS, e que um nome pode corresponder a qualquer número de endereços IP.
			</div><div
              class="para">
				Como você pode imaginar, as configurações podem ser complexas, mas estas opções são usadas somente em casos especiais. Os exemplos citados aqui são configurações habituais típicas.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.interface-wireless"></a>8.2.2. Wireless Interface</h3></div></div></div><a
            id="id-1.11.6.11.2"
            class="indexterm"></a><div
            class="para">
				Getting wireless network cards to work can be a bit more challenging. First of all, they often require the installation of proprietary firmwares which are not installed by default in Debian. Then wireless networks rely on cryptography to restrict access to authorized users only, this implies storing some secret key in the network configuration. Let's tackle those topics one by one.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.11.6.11.4"></a>8.2.2.1. Installing the required firmwares</h4></div></div></div><a
              id="id-1.11.6.11.4.2"
              class="indexterm"></a><a
              id="id-1.11.6.11.4.3"
              class="indexterm"></a><div
              class="para">
					First you have to enable the non-free repository in APT's sources.list file: see <a
                class="xref"
                href="apt.html#sect.apt-sources.list">Seção 6.1, “Preenchendo no arquivo <code
                  class="filename">sources.list</code> Arquivo”</a> for details about this file. Many firmware are proprietary and are thus located in this repository. You can try to skip this step if you want, but if the next step doesn't find the required firmware, retry after having enabled the non-free section.
				</div><div
              class="para">
					Then you have to install the appropriate <code
                class="literal">firmware-*</code> packages. If you don't know which package you need, you can install the <span
                class="pkg pkg">isenkram</span> package and run its <code
                class="command">isenkram-autoinstall-firmware</code> command. The packages are often named after the hardware manufacturer or the corresponding kernel module: <span
                class="pkg pkg">firmware-iwlwifi</span> for Intel wireless cards, <span
                class="pkg pkg">firmware-atheros</span> for Qualcomm Atheros, <span
                class="pkg pkg">firmware-ralink</span> for Ralink, etc. A reboot is then recommended because the kernel driver usually looks for the firmware files when it is first loaded and no longer afterwards.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.11.6.11.5"></a>8.2.2.2. Wireless specific entries in <code
                      class="filename">/etc/network/interfaces</code></h4></div></div></div><a
              id="id-1.11.6.11.5.2"
              class="indexterm"></a><div
              class="para">
					<span
                class="emphasis"><em>ifupdown</em></span> is able to manage wireless interfaces but it needs the help of the <span
                class="pkg pkg">wpasupplicant</span> package which provides the required integration between <span
                class="emphasis"><em>ifupdown</em></span> and the <code
                class="command">wpa_supplicant</code> command used to configure the wireless interfaces (when using WPA/WPA2 encryption). The usual entry in <code
                class="filename">/etc/network/interfaces</code> needs to be extended with two supplementary parameters to specify the name of the wireless network (aka its SSID) and the <span
                class="emphasis"><em>Pre-Shared Key</em></span> (PSK).
				</div><div
              class="example"><a
                xmlns=""
                id="example.config-wireless"></a><p
                class="title"><strong>Exemplo 8.3. DHCP configuration for a wireless interface</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
auto wlp4s0
iface wlp4s0 inet dhcp
  wpa-ssid Falcot
  wpa-psk ccb290fd4fe6b22935cbae31449e050edd02ad44627b16ce0151668f5f53c01b
</pre></div></div><div
              class="para">
					The <code
                class="literal">wpa-psk</code> parameter can contain either the plain text passphrase or its hashed version generated with <code
                class="command">wpa_passphrase <em
                  class="replaceable">SSID</em> <em
                  class="replaceable">passphrase</em></code>. If you use an unencrypted wireless connection, then you should put a <code
                class="literal">wpa-key-mgmt NONE</code> and no <code
                class="literal">wpa-psk</code> entry. For more information about the possible configuration options, have a look at <code
                class="filename">/usr/share/doc/wpasupplicant/README.Debian.gz</code>.
				</div><div
              class="para">
					At this point, you should consider restricting the read permissions on <code
                class="filename">/etc/network/interfaces</code> to the root user only since the file contains a private key that not all users should have access to.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HISTORY</em></span> WEP encryption</strong></p></div></div></div><a
                id="id-1.11.6.11.5.7.2"
                class="indexterm"></a><div
                class="para">
					Usage of the deprecated WEP encryption protocol is possible with the <span
                  class="pkg pkg">wireless-tools</span> package. See <code
                  class="filename">/usr/share/doc/wireless-tools/README.Debian</code> for instructions.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ppp-rtc"></a>8.2.3. Conectando com PPP através de um modem PSTN</h3></div></div></div><a
            id="id-1.11.6.12.2"
            class="indexterm"></a><a
            id="id-1.11.6.12.3"
            class="indexterm"></a><a
            id="id-1.11.6.12.4"
            class="indexterm"></a><a
            id="id-1.11.6.12.5"
            class="indexterm"></a><div
            class="para">
				Uma conexão ponto a ponto (PPP) cria uma conexão intermitente; está é a solução mais comum para conexão feitas com um modem telefônico ("modem PSTN", já que a conexão vai pela rede de telefonia).
			</div><div
            class="para">
				Uma conexão via modem telefônico precisa de uma conta com um provedor de acesso, incluindo um número telefônico, usuário, senha e às vezes o protocolo de autenticação a ser usado. tal conexão é configurada usando a ferramenta <code
              class="command">pppconfig</code> do pacote Debian de mesmo nome. Por padrão, ela configura uma conexão chamada <code
              class="literal">provider</code> (de provedor de acesso). Quando em dúvida sobre o protocolo de autenticação, escolha <span
              class="emphasis"><em>PAP</em></span>: ele é o oferecido pela maioria dos provedores de acesso a Internet.
			</div><a
            id="id-1.11.6.12.8"
            class="indexterm"></a><a
            id="id-1.11.6.12.9"
            class="indexterm"></a><div
            class="para">
				Depois da configuração, é possível conectar usando o comando <code
              class="command">pon</code> (dando a ele o nome da conexão como parâmetro, quando o valor padrão de <code
              class="literal">provedor</code> não for apropriado). O link é desconectado com o comando <code
              class="command">poff</code>. Estes dois comandos podem ser executados pelo usuário root, ou por qualquer outro usuário que esteja no grupo <code
              class="literal">dip</code>.
			</div><a
            id="id-1.11.6.12.11"
            class="indexterm"></a><a
            id="id-1.11.6.12.12"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.adsl"></a>8.2.4. Conectando através de um modem ADSL</h3></div></div></div><a
            id="id-1.11.6.13.2"
            class="indexterm"></a><a
            id="id-1.11.6.13.3"
            class="indexterm"></a><a
            id="id-1.11.6.13.4"
            class="indexterm"></a><div
            class="para">
				O termo genérico "modem ADSL" cobre uma infinidade de dispositivos com fuções muito diferentes. Os modems que são os mais simples de usar com Linux são aqueles que tem uma interface Ethernet (e não aqueles que só tem interface USB). Estes tendem a ser bastatne populares; a maioria dos provedores de serviços internet ADSL emprestam ou fazem "leasing" de um aparelho com interfaces Ethernet. Dependendo do tipo de modem, a configuração necessária pode variar grandemente.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pppoe"></a>8.2.4.1. Modems que Suportam PPPOE</h4></div></div></div><a
              id="id-1.11.6.13.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.13.6.3"
              class="indexterm"></a><div
              class="para">
					Alguns modens Ethernet funcionam com o protocolo PPPOE (Point to Point Protocol over Ethernet). A ferramenta <code
                class="command">pppoeconf</code> (do pacote de mesmo nome) vai configurar a conexão. Para isto, ele modifica o arquivo <code
                class="filename">/etc/ppp/peers/dsl-provider</code> com as configurações fornecidas e grava a informação de login nos arquivos <code
                class="filename">/etc/ppp/pap-secrets</code> e <code
                class="filename">/etc/ppp/chap-secrets</code>. Ele é recomendado para aceitar todas as modificações que se propõe.
				</div><div
              class="para">
					Uma vez que essa configuração está completa, você pode iniciar a conexão ADSL com o comando, <code
                class="command">pon dsl-provider</code> ou desconectar com <code
                class="command">poff dsl-provider</code>.
				</div><a
              id="id-1.11.6.13.6.6"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DICA</em></span> Iniciando o <code
                          class="command">ppp</code> na inicialização</strong></p></div></div></div><a
                id="id-1.11.6.13.6.7.2"
                class="indexterm"></a><a
                id="id-1.11.6.13.6.7.3"
                class="indexterm"></a><div
                class="para">
					As conexões PPP sobre ADSL são, por definição, intermitentes. Como elas normalmente não são cobradas por tempo, existem poucos problemas com relação a tentação de mantê-las abertas sempre. O padrão para se fazer isto é usar o sistema init.
				</div><div
                class="para">
					With systemd, adding an automatically restarting task for the ADSL connection is a simple matter of creating a “unit file” such as <code
                  class="filename">/etc/systemd/system/adsl-connection.service</code>, with contents such as the following:
				</div><pre
                class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div
                class="para">
					Uma vez que esse arquivo unit tenha sido definido, ele precisa ser habilitado com <code
                  class="command">systemctl enable adsl-connection</code>. Então o "loop" pode ser iniciado manualmente com <code
                  class="command">systemctl start adsl-connection</code>; ele também será iniciado automaticamente na inicialização.
				</div><div
                class="para">
					Em sistemas em que não é usado o <code
                  class="command">systemd</code> (incluíndo <span
                  class="distribution distribution">Wheezy</span> e versões anteriores do Debian), o init System V padrão funciona de maneira diferente. Em tais sistemas, tudo que é preciso é adicionar uma linha como a seguinte no final do arquivo <code
                  class="filename">/etc/inittab</code>; então, a qualquer momento que a conexão cai, o <code
                  class="command">init</code> reconecta.
				</div><pre
                class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider</pre><div
                class="para">
					Para conexões ADSL que se auto desconectam diariamente, este método reduz a duração da interrupção.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pptp"></a>8.2.4.2. Modems que Suportam PPTP</h4></div></div></div><a
              id="id-1.11.6.13.7.2"
              class="indexterm"></a><div
              class="para">
					O protocolo PPTP (Point-to-Point Tunneling Protocol) foi criado pela Microsoft. Publicado no começo da ADSL, foi rapidamente substituído pelo PPPOE. Se você for obrigado a usar este protocolo, veja <a
                class="xref"
                href="sect.virtual-private-network.html#sect.pptp">Seção 10.2.4, “PPTP”</a>.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-dhcp"></a>8.2.4.3. Modems que Suportam DHCP</h4></div></div></div><div
              class="para">
					Quando um modem está conectado ao computador via cabo ethernet (crossover) você tipicamente configura uma conexão de rede pelo DHCP no computador; o modem age automaticamente como um gateway por padrão e cuida do roteamento (o que significa que ele gerencia o tráfego de rede entre o computador e a Internet).
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DE VOLTA AO BÁSICO</em></span> Cabos de par trançado para conexão de rede direta</strong></p></div></div></div><a
                id="id-1.11.6.13.8.3.2"
                class="indexterm"></a><div
                class="para">
					Placas de rede de computadores esperam receber dados em certos fios do cabo, e enviar por outros. Quando você conecta um computador em uma rede local, você normalmente conecta um cabo (normal ou crossover) entre a placa de rede e o repetidor ou switch. Entretanto, se você quer conectar dois computadores diretamente (sem um switch ou repetidor intermediário), você deve rotear o sinal enviado por uma placa para o lado receptor da outra placa, e vice-versa. Este é o objetivo de um cabo crossover, e a razão para usá-lo.
				</div><div
                class="para">
					Note que esta distinção tem se tornado quase que irrelevante com o passar do tempo, já que placas de rede modernas são capazes de detectar o tipo de cabo presente e se adaptar a ele. Portanto, não é raro que ambos os tipos de cabo funcionem em vários locais.
				</div></div><div
              class="para">
					A maioria dos “roteadores ADSL” no mercado podem ser usados desta forma, assim como a maioria dos modens ADSL fornecidos por provedores de serviço de Internet.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.roaming-network-config"></a>8.2.5. Configuração Automática de Rede para Usuários em Roaming</h3></div></div></div><a
            id="id-1.11.6.14.2"
            class="indexterm"></a><a
            id="id-1.11.6.14.3"
            class="indexterm"></a><div
            class="para">
				Muitos engenheiros da Falcot tem um laptop que, por motivos pessoais, também são usados em casa. A configuração de rede muda de acordo com o local. Em casa, pode ser uma rede sem fio (protegida por uma chave WPA), enquanto que no trabalho se usa uma rede cabeada para mais segurança e mais banda.
			</div><div
            class="para">
				Para evitar ter que conectar ou desconectar manualmente as interface de rede correspondentes, os administradores instalaram o pacote <span
              class="pkg pkg">network-manager</span> nestas "roaming machines". Com este software o usuário pode mudar de uma rede para outra usando um pequeno ícone exibido na área de notificação de suas área de trabalho gráficas. Ao clicar nestes ícones é exibida uma lista de redes disponíveis (com e sem fios), para o usuário simplesmente escolher qual ele deseja usar. O programa grava a configuração das redes que o usuário já tenha usado e automaticamente troca para a melhor rede disponível quando a rede atual cai.
			</div><div
            class="para">
				Para fazer isto, o programa é estruturado em duas partes: um daemon rodando como root cuida da ativação e configuração das interfaces de rede e uma interface de usuário controla este daemon. O PolicyKit cuida das autorizações necessárias para controlar este programa e o Debian configura o PolicyKit de forma que os membros do grupo netdev possam adicionar ou mudar as conexões do Network Manager.
			</div><div
            class="para">
				O Network Manager sabe como manipular vários tipos de conexões (DHCP, manual, rede local), mas apenas se a configuração for ajustada com o próprio programa. É por isto que ele vai ignorar sistematicamente todas as interfaces de rede no <code
              class="filename">/etc/network/interfaces</code> para as quais ele não foi projetado. Já que o Network Manager não dá detalhes quando nenhuma conexão de rede é mostrada, a forma fácil é apagar do <code
              class="filename">/etc/network/interfaces</code> quaisquer configurações de todas as interfaces que devem ser gerenciadas pelo Network Manager.
			</div><div
            class="para">
				Note que este programa já é instalado por padrão quando a tarefa "Desktop Environment" é escolhida durante a instalação.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Anterior</strong>Capítulo 8. Configuração Básica: Rede, Contas, Im...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Acima</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Principal</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Próxima</strong>8.3. Ajustando o Nome de Host e Configurando o Se...</a></li></ul></body></html>
