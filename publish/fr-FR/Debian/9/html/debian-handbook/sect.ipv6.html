<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.5. IPv6</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Réseau, Passerelle, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="network-infrastructure.html"
        title="Chapitre 10. Infrastructure réseau" /><link
        rel="prev"
        href="sect.dynamic-routing.html"
        title="10.4. Routage dynamique" /><link
        rel="next"
        href="sect.domain-name-servers.html"
        title="10.6. Serveur de noms (DNS)" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.ipv6.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.dynamic-routing.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.domain-name-servers.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.ipv6"></a>10.5. IPv6</h2></div></div></div><div
          class="para">
			IPv6 — successeur d'IPv4 — est une nouvelle version du protocole IP, qui doit en corriger les défauts et notamment le nombre trop faible d'adresses IP existantes. Ce protocole gère la couche réseau, il offre ainsi la possibilité d'adresser les machines (c'est-à-dire de faire parvenir les données à leur destination connue par une adresse) et de fragmenter les données (à savoir de les découper en tronçons dépendants de la taille des différents liens empruntés en chemin, et de les réassembler à l'arrivée).
		</div><div
          class="para">
			Les noyaux Debian prennent systématiquement IPv6 en charge, le code correspondant étant intégré à l'image de base (à part pour certaines architectures, qui ne le proposent que dans un module <code
            class="literal">ipv6</code> optionnel). Les outils de base comme <code
            class="command">ping</code> et <code
            class="command">traceroute</code> ont pour équivalents IPv6 <code
            class="command">ping6</code> et <code
            class="command">traceroute6</code>, respectivement disponibles dans les paquets Debian <span
            class="pkg pkg">iputils-ping</span> et <span
            class="pkg pkg">iputils-tracepath</span>.
		</div><a
          id="id-1.13.8.4"
          class="indexterm"></a><a
          id="id-1.13.8.5"
          class="indexterm"></a><a
          id="id-1.13.8.6"
          class="indexterm"></a><div
          class="para">
			On peut configurer le réseau IPv6 comme un réseau IPv4, à travers le fichier <code
            class="filename">/etc/network/interfaces</code>. Pour ne pas se contenter d'un réseau IPv6 privé, il faut cependant disposer d'un routeur capable de relayer le trafic sur le réseau IPv6 global.
		</div><div
          class="example"><a
            xmlns=""
            id="example.network-interfaces-ipv6"></a><p
            class="title"><strong>Exemple 10.10. Exemple de configuration IPv6</strong></p><div
            class="example-contents"><pre
              class="programlisting">
iface eth0 inet6 static
    address 2001:db8:1234:5::1:1
    netmask 64
    # Pour désactiver l'auto-configuration:
    # autoconf 0
    # Le routeur est auto-configuré et n'a pas d'adresse fixe.
    # (/proc/sys/net/ipv6/conf/all/accept_ra). Sinon pour le forcer:
    # gateway 2001:db8:1234:5::1</pre></div></div><div
          class="para">
			Les sous-réseaux IPv6 ont généralement un masque de 64 bits, ce qui autorise 2<sup>64</sup> adresses dans le sous-réseau. Cela permet l'autoconfiguration d'adresses sans état (<span
            class="foreignphrase"><em
              class="foreignphrase">Stateless Address Autoconfiguration</em></span> ou <acronym
            class="acronym">SLAAC</acronym>), qui choisit une adresse IPv6 à partir de l'adresse MAC de l'interface. Par défaut, si <acronym
            class="acronym">SLAAC</acronym> est actif sur le réseau et IPv6 actif sur un ordinateur, le noyau va automatiquement trouver les routeurs IPv6 et configurer les interfaces.
		</div><div
          class="para">
			Ce comportement a des implications en termes de fuites d'information. Lorsqu'on change fréquemment de réseau, par exemple avec un ordinateur portable, on ne souhaite pas forcément que l'adresse <acronym
            class="acronym">MAC</acronym> fasse partie de l'adresse IPv6 publique, puisque cela permet d'identifier aisément le même ordinateur sur des réseaux différents. Ce problème se résout grâce à une extension d'IPv6 (que Debian active par défaut si une connexion IPv6 fonctionnelle est détectée à l'installation initiale), qui remplace cette adresse <acronym
            class="acronym">MAC</acronym> par un composant aléatoire, qui renouvelle ce composant de manière régulière et qui utilise l'adresse résultante pour les connexions sortantes. Les connexions entrantes peuvent continuer d'utiliser les adresses générées par <acronym
            class="acronym">SLAAC</acronym>. L'exemple qui suit, à insérer dans <code
            class="filename">/etc/network/interfaces</code>, active cette extension.
		</div><div
          class="example"><a
            xmlns=""
            id="example.network-interface-ipv6-privext"></a><p
            class="title"><strong>Exemple 10.11. Extension d'IPv6 pour la protection des données personnelles</strong></p><div
            class="example-contents"><pre
              class="programlisting">
iface eth0 inet6 auto
    # Préférer l'adresse générée aléatoirement pour les connexions sortantes
    privext 2</pre></div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ASTUCE</em></span> Programmes compilés avec IPv6</strong></p></div></div></div><div
            class="para">
			De nombreux logiciels ont besoin d'être adaptés à IPv6. La plupart des paquets de Debian l'ont déjà été, mais il reste des exceptions. Si votre paquet favori ne fonctionne pas encore avec IPv6, vous pouvez demander de l'aide sur la liste de diffusion <span
              class="emphasis"><em>debian-ipv6</em></span>. Les abonnés de cette liste pourront selon les cas vous suggérer un substitut qui prend en charge IPv6 ou vous aider à soumettre un rapport de bogue pour que le problème soit correctement référencé. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://lists.debian.org/debian-ipv6/">http://lists.debian.org/debian-ipv6/</a></div>
		</div></div><a
          id="id-1.13.8.13"
          class="indexterm"></a><a
          id="id-1.13.8.14"
          class="indexterm"></a><a
          id="id-1.13.8.15"
          class="indexterm"></a><div
          class="para">
			Les connexions IPv6 peuvent être filtrées et restreintes comme avec IPv4 : il existe une adaptation de <code
            class="command">netfilter</code> pour l'IPv6 compilée dans les noyaux Debian. Elle se configure comme la version classique, mais avec le programme <code
            class="command">ip6tables</code> en lieu et place d'<code
            class="command">iptables</code>.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ipv6-tunneling"></a>10.5.1. Tunnel</h3></div></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENTION</em></span> Tunnels IPv6 et pare-feu</strong></p></div></div></div><div
              class="para">
				Le transport d'IPv6 dans un tunnel IPv4 (par opposition à l'IPv6 natif) a besoin que le pare-feu laisse passer le trafic utilisant le protocole IPv4 numéro 41.
			</div></div><div
            class="para">
				En l'absence d'une connexion native en IPv6, on peut toujours s'y connecter via un tunnel sur IPv4. Gogo6 est un fournisseur gratuit de tels tunnels : <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.gogo6.com/freenet6/tunnelbroker">http://www.gogo6.com/freenet6/tunnelbroker</a></div>
			</div><a
            id="id-1.13.8.17.4"
            class="indexterm"></a><a
            id="id-1.13.8.17.5"
            class="indexterm"></a><div
            class="para">
				Pour exploiter cette possibilité, il faut s'inscrire et créer un compte Freenet6 Pro sur ce site web puis installer le paquet Debian <span
              class="pkg pkg">gogoc</span> et configurer ce tunnel. On intégrera au fichier <code
              class="filename">/etc/gogoc/gogoc.conf</code> les lignes <code
              class="literal">userid</code> et <code
              class="literal">password</code> reçues par courrier électronique et on remplacera <code
              class="literal">server</code> par <code
              class="literal">authenticated.freenet6.net</code>.
			</div><div
            class="para">
				On proposera une connectivité IPv6 à toutes les machines du réseau local en modifiant dans le fichier <code
              class="filename">/etc/gogoc/gogoc.conf</code> les trois directives ci-dessous (le réseau local est supposé connecté à l'interface eth0) :
			</div><pre
            class="programlisting">
host_type=router
prefixlen=56
if_prefix=eth0</pre><div
            class="para">
				La machine est alors le routeur d'accès à un sous-réseau dont le préfixe fait 56 bits. Le tunnel désormais averti, il faut encore informer le réseau local de cette caractéristique en installant le démon <code
              class="command">radvd</code> (du paquet éponyme). C'est un démon de configuration IPv6 jouant le même rôle que <code
              class="command">dhcpd</code> pour le monde IPv4.
			</div><div
            class="para">
				Il faut ensuite créer son fichier de configuration <code
              class="filename">/etc/radvd.conf</code> (par exemple en adaptant le fichier <code
              class="filename">/usr/share/doc/radvd/examples/simple-radvd.conf</code>). En l'occurrence, le seul changement nécessaire est le préfixe, qu'il faut remplacer par celui fourni par Freenet6 (que l'on retrouvera dans la sortie de la commande <code
              class="command">ifconfig</code> dans le bloc relatif à l'interface <code
              class="literal">tun</code>).
			</div><a
            id="id-1.13.8.17.11"
            class="indexterm"></a><div
            class="para">
				Après les commandes <code
              class="command">service gogoc restart</code> et <code
              class="command">service radvd start</code>, le réseau IPv6 sera enfin fonctionnel.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.dynamic-routing.html"><strong>Précédent</strong>10.4. Routage dynamique</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.domain-name-servers.html"><strong>Suivant</strong>10.6. Serveur de noms (DNS)</a></li></ul></body></html>
