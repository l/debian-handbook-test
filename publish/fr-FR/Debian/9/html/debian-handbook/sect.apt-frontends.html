<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.4. Frontaux : aptitude, synaptic</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fr-FR-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="apt.html"
        title="Chapitre 6. Maintenance et mise à jour : les outils APT" /><link
        rel="prev"
        href="sect.apt-cache.html"
        title="6.3. Commande apt-cache" /><link
        rel="next"
        href="sect.package-authentication.html"
        title="6.5. Vérification d'authenticité des paquets" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.apt-frontends.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.apt-cache.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-authentication.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.apt-frontends"></a>6.4. Frontaux : <code
                  class="command">aptitude</code>, <code
                  class="command">synaptic</code></h2></div></div></div><a
          id="id-1.9.13.2"
          class="indexterm"></a><a
          id="id-1.9.13.3"
          class="indexterm"></a><a
          id="id-1.9.13.4"
          class="indexterm"></a><div
          class="para">
			APT est un programme C++ dont la majorité du code est déportée dans la bibliothèque partagée <code
            class="command">libapt-pkg</code>. La raison de ce choix est qu'il rend relativement facile de réaliser une interface (un « frontal »), puisqu'il suffit de faire appel au code placé dans la bibliothèque. <code
            class="command">apt-get</code> n'était d'ailleurs à l'origine qu'un frontal développé pour tester <code
            class="command">libapt-pkg</code>, bien que son succès ait tendance à le faire oublier.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.aptitude"></a>6.4.1. <code
                    class="command">aptitude</code></h3></div></div></div><div
            class="para">
				<code
              class="command">aptitude</code> est un programme interactif en mode semi-graphique, utilisable sur la console, qui permet de naviguer dans la liste des paquets installés et disponibles, de consulter l'ensemble des informations et de les marquer en vue d'une installation ou d'une suppression. Comme il s'agit cette fois d'un programme réellement conçu pour être utilisé par les administrateurs, on y trouve des comportements par défaut plus intelligents que dans <code
              class="command">apt-get</code>, en plus d'une interface plus abordable.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.9.13.6.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/aptitude.png"
                  alt="Gestionnaire de paquets aptitude" /></div></div><p
              class="title"><strong>Figure 6.1. Gestionnaire de paquets <code
                  class="command">aptitude</code></strong></p></div><div
            class="para">
				When it starts, <code
              class="command">aptitude</code> shows a list of packages sorted by state (installed, non-installed, or installed but not available on the mirrors — other sections display tasks, virtual packages, and new packages that appeared recently on mirrors). To facilitate thematic browsing, other views are available. In all cases, <code
              class="command">aptitude</code> displays a list combining categories and packages on the screen. Categories are organized through a tree structure, whose branches can respectively be unfolded or closed with the <span
              class="keycap"><strong>Enter</strong></span>, <span
              class="keycap"><strong>[</strong></span> and <span
              class="keycap"><strong>]</strong></span> keys. <span
              class="keycap"><strong>+</strong></span> should be used to mark a package for installation, <span
              class="keycap"><strong>-</strong></span> to mark it for removal and <span
              class="keycap"><strong>_</strong></span> to purge it (note that these keys can also be used for categories, in which case the corresponding actions will be applied to all the packages of the category). <span
              class="keycap"><strong>u</strong></span> updates the lists of available packages and <span
              class="keycap"><strong>Shift</strong></span>+<span
              class="keycap"><strong>u</strong></span> prepares a global system upgrade. <span
              class="keycap"><strong>g</strong></span> switches to a summary view of the requested changes (and typing <span
              class="keycap"><strong>g</strong></span> again will apply the changes), and <span
              class="keycap"><strong>q</strong></span> quits the current view. If you are in the initial view, this will effectively close <code
              class="command">aptitude</code>.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOCUMENTATION</em></span> <code
                        class="command">aptitude</code></strong></p></div></div></div><div
              class="para">
				Nous n'entrons pas ici dans tous les détails de l'utilisation de ce frontal, en nous contentant de donner le minimum de survie. <code
                class="command">aptitude</code> est relativement bien documenté et l'on consultera donc le mode d'emploi complet, qui est disponible lorsque le paquet <span
                class="pkg pkg">aptitude-doc-fr</span> est installé (voir <code
                class="filename">/usr/share/doc/aptitude/html/fr/index.html</code>).
			</div></div><div
            class="para">
				Pour chercher un paquet, on utilisera <span
              class="keycap"><strong>/</strong></span>, suivi d'un motif de recherche. Ce motif peut porter sur le nom du paquet, mais aussi sur sa description (si on le fait précéder de <code
              class="literal">~d</code>), sa section (avec <code
              class="literal">~s</code>) ou d'autres caractéristiques détaillées dans la documentation. Les mêmes motifs peuvent servir à filtrer les paquets affichés, fonctionnalité accessible grâce à la touche <span
              class="keycap"><strong>l</strong></span> (comme <span
              class="foreignphrase"><em
                class="foreignphrase">limit</em></span>).
			</div><div
            class="para">
				<code
              class="command">aptitude</code> facilite grandement la gestion du marquage « automatique » des paquets Debian (voir <a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">Section 6.2.7, « Suivi des paquets installés automatiquement »</a>). Il permet de parcourir la liste des paquets installés, d'en marquer comme automatiques avec <span
              class="keycap"><strong>Maj</strong></span>+<span
              class="keycap"><strong>m</strong></span> et d'enlever cette marque avec la touche <span
              class="keycap"><strong>m</strong></span>. Les paquets « automatiques » sont marqués d'un « A » dans la liste des paquets. Cette fonctionnalité permet également de visualiser les paquets dont on se sert « consciemment » sur une machine, sans lister toutes les bibliothèques et dépendances qui ne nous intéressent pas. Le motif de recherche, qui peut être utilisé avec <span
              class="keycap"><strong>l</strong></span> (pour activer le mode filtrage), est <code
              class="literal">~i!~M</code>. Il spécifie de n'afficher que les paquets installés (<code
              class="literal">~i</code>) non marqués comme automatiques (<code
              class="literal">!~M</code>).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>OUTIL</em></span> <code
                        class="command">aptitude</code> en ligne de commande</strong></p></div></div></div><div
              class="para">
				La plupart des fonctionnalités d'<code
                class="command">aptitude</code> sont accessibles aussi bien par l'interface interactive que par la ligne de commande et cette dernière ne dépaysera pas trop les habitués d'<code
                class="command">apt-get</code> et <code
                class="command">apt-cache</code>.
			</div><div
              class="para">
				Les fonctionnalités évoluées d'<code
                class="command">aptitude</code> se retrouvent également sur la ligne de commande. On retrouve ainsi les mêmes motifs de recherche de paquets qu'en version interactive. Ainsi, si on veut faire le ménage des paquets « installés manuellement » et si on sait qu'aucun programme localement installé n'a besoin de bibliothèques particulières ou de modules Perl, on pourra marquer les paquets correspondants comme automatiques en une seule commande :
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>aptitude markauto '~slibs|~sperl'</code></strong></pre><div
              class="para">
				On voit ici la puissance du système de motifs de recherche d'<code
                class="command">aptitude</code>, qui permet de sélectionner d'un coup l'ensemble des paquets des sections <code
                class="literal">libs</code> et <code
                class="literal">perl</code>.
			</div><div
              class="para">
				Attention, s'il existe des paquets que cette commande marque comme automatiques, et si aucun autre paquet n'en dépend, ils seront immédiatement supprimés (avec une demande de confirmation).
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.9.13.6.9"></a>6.4.1.1. Gestion des recommandations, suggestions et tâches</h4></div></div></div><div
              class="para">
					Another interesting feature of <code
                class="command">aptitude</code> is the fact that it respects recommendations between packages while still giving users the choice not to install them on a case by case basis. For example, the <span
                class="pkg pkg">gnome</span> package recommends <span
                class="pkg pkg">brasero</span> (among others). When you select the former for installation, the latter will also be selected (and marked as automatic if not already installed on the system). Typing <span
                class="keycap"><strong>g</strong></span> will make it obvious: <span
                class="pkg pkg">brasero</span> appears on the summary screen of pending actions in the list of packages installed automatically to satisfy dependencies. However, you can decide not to install it by deselecting it before confirming the operations.
				</div><div
              class="para">
					On notera que cette fonction de suivi des recommandations ne s'applique pas lors d'une mise à jour. Ainsi, si une nouvelle version de <span
                class="pkg pkg">gnome</span> recommande un paquet qu'il ne recommandait pas auparavant, il ne sera pas marqué pour l'installation. En revanche, il sera mentionné dans l'écran de mise à jour, afin de vous laisser la possibilité de l'installer malgré tout.
				</div><div
              class="para">
					Suggestions between packages are also taken into account, but in a manner adapted to their specific status. For example, since <span
                class="pkg pkg">gnome</span> suggests <span
                class="pkg pkg">empathy</span>, the latter will be displayed on the summary screen of pending actions (in the section of packages suggested by other packages). This way, it is visible and the administrator can decide whether to take the suggestion into account or not. Since it is only a suggestion and not a dependency or a recommendation, the package will not be selected automatically — its selection requires a manual intervention from the user (thus, the package will not be marked as automatic).
				</div><div
              class="para">
					Dans la même veine, rappelons qu'<span
                class="pkg pkg">aptitude</span> exploite intelligemment le concept de tâche. Ces tâches étant affichées comme des catégories dans les écrans de listes de paquets, on peut soit choisir une tâche complète à installer ou supprimer, soit consulter la liste des paquets inclus dans une tâche afin d'en sélectionner un sous-ensemble plus limité.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.9.13.6.10"></a>6.4.1.2. Meilleurs algorithmes de résolution</h4></div></div></div><div
              class="para">
					Enfin, signalons pour terminer cette section qu'<code
                class="command">aptitude</code> dispose d'algorithmes plus évolués qu'<code
                class="command">apt-get</code> en ce qui concerne la résolution des situations délicates. Si un ensemble d'actions est demandé, qui, menées conjointement, aboutissent à un système incohérent, <code
                class="command">aptitude</code> évalue plusieurs scénarios possibles et les propose par ordre de pertinence décroissante. Ces algorithmes ne sont cependant pas infaillibles ; heureusement, il reste la possibilité de sélectionner manuellement les actions à effectuer. Si les actions actuellement sélectionnées mènent à des contradictions, le haut de l'écran mentionne un nombre de paquets « cassés » (et on peut naviguer directement vers ces paquets en appuyant sur <span
                class="keycap"><strong>b</strong></span>). Il est alors possible de construire manuellement une solution aux problèmes constatés. On peut notamment, en sélectionnant un paquet avec <span
                class="keycap"><strong>Entrée</strong></span>, avoir accès aux différentes versions disponibles. Si le choix d'une de ces versions plutôt que d'une autre permet de résoudre le problème, on n'hésitera pas à utiliser cette fonction. Lorsque le nombre de paquets cassés descendra à zéro, on pourra en toute confiance passer par le résumé des actions à effectuer pour une dernière vérification avant leur mise en application.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NOTE</em></span> Journal d'<code
                          class="command">aptitude</code></strong></p></div></div></div><div
                class="para">
					De même que <code
                  class="command">dpkg</code>, <code
                  class="command">aptitude</code> garde dans son journal (<code
                  class="filename">/var/log/aptitude</code>) la trace des actions effectuées. Cependant, comme les deux commandes fonctionnent à un niveau bien différent, on ne trouve pas les mêmes informations dans les journaux respectifs. Là où celui de <code
                  class="command">dpkg</code> liste pas à pas les opérations exécutées sur chaque paquet individuel, celui d'<code
                  class="command">aptitude</code> donne une vue d'ensemble sur les opérations de plus haut niveau comme une mise à jour globale du système.
				</div><div
                class="para">
					Attention, ce journal ne contient que le résumé des opérations initiées par <code
                  class="command">aptitude</code>. Si l'on utilise occasionnellement d'autres frontaux (voire directement <code
                  class="command">dpkg</code>), le journal d'<code
                  class="command">aptitude</code> n'aura qu'une vision partielle des choses et on ne pourra pas s'en servir pour reconstituer un historique fiable du système.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.13.7"></a>6.4.2. <code
                    class="command">synaptic</code></h3></div></div></div><div
            class="para">
				<code
              class="command">synaptic</code> est un gestionnaire de paquets Debian en mode graphique (il utilise GTK+/GNOME). Il dispose d'une interface graphique efficace et propre. Ses nombreux filtres prêts à l'emploi permettent de voir rapidement les nouveaux paquets disponibles, les paquets installés, ceux que l'on peut mettre à jour, les paquets obsolètes, etc. En naviguant ainsi dans les différentes listes, on indique progressivement les opérations à effectuer (installer, mettre à jour, supprimer, purger). Un simple clic suffit à valider l'ensemble de ces choix et toutes les opérations enregistrées sont alors effectuées en une seule passe.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.9.13.7.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/synaptic.png"
                  alt="Gestionnaire de paquets synaptic" /></div></div><p
              class="title"><strong>Figure 6.2. Gestionnaire de paquets <code
                  class="command">synaptic</code></strong></p></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.apt-cache.html"><strong>Précédent</strong>6.3. Commande apt-cache</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-authentication.html"><strong>Suivant</strong>6.5. Vérification d'authenticité des paquets</a></li></ul></body></html>
