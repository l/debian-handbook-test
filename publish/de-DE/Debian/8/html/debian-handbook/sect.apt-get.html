<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.2. aptitude, apt-get und apt Befehle</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-de-DE-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Das Debian Administrationshandbuch" /><link
        rel="up"
        href="apt.html"
        title="Kapitel 6. Wartung und Aktualisierung: Die APT-Tools" /><link
        rel="prev"
        href="apt.html"
        title="Kapitel 6. Wartung und Aktualisierung: Die APT-Tools" /><link
        rel="next"
        href="sect.apt-cache.html"
        title="6.3. Der Befehl apt-cache" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/de-DE/stable/sect.apt-get.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Zurück</strong></a></li><li
          class="home">Das Debian Administrationshandbuch</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Weiter</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.apt-get"></a>6.2. <code
                  class="command">aptitude</code>, <code
                  class="command">apt-get</code> und <code
                  class="command">apt</code> Befehle</h2></div></div></div><a
          id="id-1.9.11.2"
          class="indexterm"></a><a
          id="id-1.9.11.3"
          class="indexterm"></a><a
          id="id-1.9.11.4"
          class="indexterm"></a><div
          class="para">
			APT is a vast project, whose original plans included a graphical interface. It is based on a library which contains the core application, and <code
            class="command">apt-get</code> is the first front end — command-line based — which was developed within the project. <code
            class="command">apt</code> is a second command-line based front end provided by APT which overcomes some design mistakes of <code
            class="command">apt-get</code>.
		</div><div
          class="para">
			Numerous other graphical interfaces then appeared as external projects: <code
            class="command">synaptic</code>, <code
            class="command">aptitude</code> (which includes both a text mode interface and a graphical one — even if not complete yet), <code
            class="command">wajig</code>, etc. The most recommended interface, <code
            class="command">apt</code>, is the one that we will use in the examples given in this section. Note however that <code
            class="command">apt-get</code> and <code
            class="command">aptitude</code> have a very similar command line syntax. When there are major differences between <code
            class="command">apt</code>, <code
            class="command">apt-get</code> and <code
            class="command">aptitude</code>, these differences will be detailed.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.7"></a>6.2.1. Initialisierung</h3></div></div></div><div
            class="para">
				For any work with APT, the list of available packages needs to be updated; this can be done simply through <code
              class="command">apt update</code>. Depending on the speed of your connection, the operation can take a while since it involves downloading a certain number of <code
              class="filename">Packages</code>/<code
              class="filename">Sources</code>/<code
              class="filename">Translation-<em
                class="replaceable">language-code</em></code> files, which have gradually become bigger and bigger as Debian has developed (at least 10 MB of data for the <code
              class="literal">main</code> section). Of course, installing from a CD-ROM set does not require any downloading — in this case, the operation is very fast.
			</div><a
            id="id-1.9.11.7.3"
            class="indexterm"></a><a
            id="id-1.9.11.7.4"
            class="indexterm"></a><a
            id="id-1.9.11.7.5"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.8"></a>6.2.2. Installieren und Entfernen</h3></div></div></div><a
            id="id-1.9.11.8.2"
            class="indexterm"></a><a
            id="id-1.9.11.8.3"
            class="indexterm"></a><a
            id="id-1.9.11.8.4"
            class="indexterm"></a><a
            id="id-1.9.11.8.5"
            class="indexterm"></a><div
            class="para">
				With APT, packages can be added or removed from the system, respectively with <code
              class="command">apt install <em
                class="replaceable">package</em></code> and <code
              class="command">apt remove <em
                class="replaceable">package</em></code>. In both cases, APT will automatically install the necessary dependencies or delete the packages which depend on the package that is being removed. The <code
              class="command">apt purge <em
                class="replaceable">package</em></code> command involves a complete uninstallation — the configuration files are also deleted.
			</div><a
            id="id-1.9.11.8.7"
            class="indexterm"></a><a
            id="id-1.9.11.8.8"
            class="indexterm"></a><a
            id="id-1.9.11.8.9"
            class="indexterm"></a><a
            id="id-1.9.11.8.10"
            class="indexterm"></a><a
            id="id-1.9.11.8.11"
            class="indexterm"></a><a
            id="id-1.9.11.8.12"
            class="indexterm"></a><a
            id="id-1.9.11.8.13"
            class="indexterm"></a><a
            id="id-1.9.11.8.14"
            class="indexterm"></a><a
            id="id-1.9.11.8.15"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> Die gleiche Paketauswahl mehrfach installieren</strong></p></div></div></div><div
              class="para">
				Manchmal ist es wünschenswert, die gleiche Paketauswahl auf mehreren Computern zu installieren. Das ist sehr einfach möglich.
			</div><div
              class="para">
				Zuerst erzeugen Sie eine Liste der installierten Pakte auf dem Computer, der als "Kopiervorlage" dient.
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --get-selections &gt;pkg-list</code></strong></pre><div
              class="para">
				The <code
                class="filename">pkg-list</code> file then contains the list of installed packages. Next, transfer the <code
                class="filename">pkg-list</code> file onto the computers you want to update and use the following commands:
			</div><pre
              class="screen">## bekannte Pakete in der Datenbank von dpkg aktualisieren
# <strong
                class="userinput"><code>avail=`mktemp`</code></strong>
# <strong
                class="userinput"><code>apt-cache dumpavail &gt; "$avail"</code></strong>
# <strong
                class="userinput"><code>dpkg --merge-avail "$avail"</code></strong>
# <strong
                class="userinput"><code>rm -f "$avail"</code></strong>
## die Auswahl von dpkg aktualisieren
# <strong
                class="userinput"><code>dpkg --set-selections &lt; pkg-list</code></strong>
## mit apt-get die gewählten Pakete installieren
# <strong
                class="userinput"><code>apt-get dselect-upgrade</code></strong></pre><div
              class="para">
				Der erste Befehl zeichnet die verfügbaren Pakete in der Datenbank dpkg auf und anschließend stellt <code
                class="command">dpkg --set-selections</code> die Liste der Pakete wieder her, die Sie installieren wollen und der Aufruf von <code
                class="command">apt-get</code> führt die erforderlichen Operationen aus. Der Befehl <code
                class="command">aptitude</code> hat diese Möglichkeit nicht.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> Entfernen und installieren in einem Durchgang</strong></p></div></div></div><div
              class="para">
				It is possible to ask <code
                class="command">apt</code> (or <code
                class="command">apt-get</code>, or <code
                class="command">aptitude</code>) to install certain packages and remove others on the same command line by adding a suffix. With an <code
                class="command">apt install</code> command, add “<code
                class="literal">-</code>” to the names of the packages you wish to remove. With an <code
                class="command">apt remove</code> command, add “<code
                class="literal">+</code>” to the names of the packages you wish to install.
			</div><div
              class="para">
				Das nächste Bespiel zeigt zwei verschiedene Wege, <em
                class="replaceable">Paket1</em> zu installieren und <em
                class="replaceable">Paket2</em> zu entfernen.
			</div><pre
              class="screen"># <strong
                class="userinput"><code>apt install <em
                    class="replaceable">package1</em> <em
                    class="replaceable">package2-</em></code></strong>
[...]
# <strong
                class="userinput"><code>apt remove <em
                    class="replaceable">package1+</em> <em
                    class="replaceable">package2</em></code></strong>
[...]
</pre><div
              class="para">
				Damit kann man auch Pakete ausschließen, die sonst installiert würden, beispielsweise aufgrund eines <code
                class="literal">Recommends</code>-Vorschlags. Normalerweise wird das Programm zur Auflösung von Abhängigkeiten aufgrund dieser Information nach alternativen Lösungen zu suchen.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt --reinstall</code> and <code
                        class="command">aptitude reinstall</code></strong></p></div></div></div><a
              id="id-1.9.11.8.18.2"
              class="indexterm"></a><div
              class="para">
				The system can sometimes be damaged after the removal or modification of files in a package. The easiest way to retrieve these files is to reinstall the affected package. Unfortunately, the packaging system finds that the latter is already installed and politely refuses to reinstall it; to avoid this, use the <code
                class="literal">--reinstall</code> option of the <code
                class="command">apt</code> and <code
                class="command">apt-get</code> commands. The following command reinstalls <span
                class="pkg pkg">postfix</span> even if it is already present:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt --reinstall install postfix</code></strong></pre><div
              class="para">
				Die Syntax von <code
                class="command">aptitude</code> ist ein wenig anders, erzielt aber dasselbe Ergebnis mit <code
                class="command">aptitude reinstall postfix</code>.
			</div><div
              class="para">
				Das Problem tritt bei <code
                class="command">dpkg</code> nicht auf, jedoch wird es selten direkt durch den Administrator genutzt.
			</div><div
              class="para">
				Be careful! Using <code
                class="command">apt --reinstall</code> to restore packages modified during an attack will certainly not recover the system as it was. <a
                class="xref"
                href="sect.dealing-with-compromised-machine.html">Abschnitt 14.7, „Umgang mit einem kompromittierten Rechner“</a> details the necessary steps to take with a compromised system.
			</div></div><div
            class="para">
				If the file <code
              class="filename">sources.list</code> mentions several distributions, it is possible to give the version of the package to install. A specific version number can be requested with <code
              class="command">apt install <em
                class="replaceable">package</em>=<em
                class="replaceable">version</em></code>, but indicating its distribution of origin (<span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span>) — with <code
              class="command">apt install <em
                class="replaceable">package</em>/<em
                class="replaceable">distribution</em></code> — is usually preferred. With this command, it is possible to go back to an older version of a package (if for instance you know that it works well), provided that it is still available in one of the sources referenced by the <code
              class="filename">sources.list</code> file. Otherwise the <code
              class="literal">snapshot.debian.org</code> archive can come to the rescue (see sidebar <a
              class="xref"
              href="apt.html#sidebar.snapshot.debian.org"><span
                class="emphasis"><em>WEITERE SCHRITTE</em></span> Alte Paketversionen: <code
                class="literal">snapshot.debian.org</code></a>).
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.9.11.8.20"></a><p
              class="title"><strong>Beispiel 6.3. Installation der <span
                  class="distribution distribution">unstable</span> Version von <span
                  class="pkg pkg">spamassassin</span></strong></p><div
              class="example-contents"><pre
                class="screen"><code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>apt install spamassassin/unstable</code></strong></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NÄCHSTE SCHRITTE</em></span> Der Zwischenspeicher für <code
                        class="filename">.deb</code> Dateien</strong></p></div></div></div><div
              class="para">
				APT keeps a copy of each downloaded <code
                class="filename">.deb</code> file in the directory <code
                class="filename">/var/cache/apt/archives/</code>. In case of frequent updates, this directory can quickly take a lot of disk space with several versions of each package; you should regularly sort through them. Two commands can be used: <code
                class="command">apt-get clean</code> entirely empties the directory; <code
                class="command">apt-get autoclean</code> only removes packages which can no longer be downloaded (because they have disappeared from the Debian mirror) and are therefore clearly useless (the configuration parameter <code
                class="literal">APT::Clean-Installed</code> can prevent the removal of <code
                class="filename">.deb</code> files that are currently installed). Note that <code
                class="command">apt</code> does not support those commands.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-upgrade"></a>6.2.3. Das System aktualisieren</h3></div></div></div><a
            id="id-1.9.11.9.2"
            class="indexterm"></a><a
            id="id-1.9.11.9.3"
            class="indexterm"></a><a
            id="id-1.9.11.9.4"
            class="indexterm"></a><a
            id="id-1.9.11.9.5"
            class="indexterm"></a><div
            class="para">
				Regular upgrades are recommended, because they include the latest security updates. To upgrade, use <code
              class="command">apt upgrade</code>, <code
              class="command">apt-get upgrade</code> or <code
              class="command">aptitude safe-upgrade</code> (of course after <code
              class="command">apt update</code>). This command looks for installed packages which can be upgraded without removing any packages. In other words, the goal is to ensure the least intrusive upgrade possible. <code
              class="command">apt-get</code> is slightly more demanding than <code
              class="command">aptitude</code> or <code
              class="command">apt</code> because it will refuse to install packages which were not installed beforehand.
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-pdiff"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> Inkrementelle Aktualisierung</strong></p></div></div></div><div
              class="para">
				As we explained earlier, the aim of the <code
                class="command">apt update</code> command is to download for each package source the corresponding <code
                class="filename">Packages</code> (or <code
                class="filename">Sources</code>) file. However, even after a <code
                class="command">bzip2</code> compression, these files can remain rather large (the <code
                class="filename">Packages.xz</code> for the <span
                class="foreignphrase"><em
                  class="foreignphrase">main</em></span> section of <span
                class="distribution distribution">Jessie</span> takes more than 6 MB). If you wish to upgrade regularly, these downloads can take up a lot of time.
			</div><div
              class="para">
				To speed up the process APT can download “diff” files containing the changes since the previous update, as opposed to the entire file. To achieve this, official Debian mirrors distribute different files which list the differences between one version of the <code
                class="filename">Packages</code> file and the following version. They are generated at each update of the archives and a history of one week is kept. Each of these “diff” files only takes a few dozen kilobytes for <span
                class="distribution distribution">Unstable</span>, so that the amount of data downloaded by a weekly <code
                class="command">apt update</code> is often divided by 10. For distributions like <span
                class="distribution distribution">Stable</span> and <span
                class="distribution distribution">Testing</span>, which change less, the gain is even more noticeable.
			</div><div
              class="para">
				Manchmal jedoch kann es wünschenswert sein, das Herunterladen der gesamten <code
                class="filename">Packages</code>-Datei zu erzwingen, besonders wenn die letzte Aktualisierung lange zurück liegt oder die Gesamtgröße der inkrementellen Differenz-Dateien nur wenig geringer ist. Dies kann auch interessant sein, wenn der Netzwerkzugriff sehr schnell aber der Prozessor der zu aktualisierenden Maschine ziemlich langsam ist, weil das Herunterladen schneller geht, als wiederholt die neue Version dieser Dateien zu berechnen (immer wieder die Unterschiede der jeweils ältesten Differenz-Datei auf die Paketliste anzuwenden). Dazu setzen Sie den Konfigurationsparameter <code
                class="literal">Acquire::Pdiff</code> verwenden auf <code
                class="literal">false</code>.
			</div></div><div
            class="para">
				<code
              class="command">apt</code> will generally select the most recent version number (except for packages from <span
              class="distribution distribution">Experimental</span> and <span
              class="distribution distribution">stable-backports</span>, which are ignored by default whatever their version number). If you specified <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span> in your <code
              class="filename">sources.list</code>, <code
              class="command">apt upgrade</code> will switch most of your <span
              class="distribution distribution">Stable</span> system to <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span>, which might not be what you intended.
			</div><div
            class="para">
				To tell <code
              class="command">apt</code> to use a specific distribution when searching for upgraded packages, you need to use the <code
              class="literal">-t</code> or <code
              class="literal">--target-release</code> option, followed by the name of the distribution you want (for example: <code
              class="command">apt -t stable upgrade</code>). To avoid specifying this option every time you use <code
              class="command">apt</code>, you can add <code
              class="literal">APT::Default-Release "stable";</code> in the file <code
              class="filename">/etc/apt/apt.conf.d/local</code>.
			</div><a
            id="id-1.9.11.9.10"
            class="indexterm"></a><a
            id="id-1.9.11.9.11"
            class="indexterm"></a><a
            id="id-1.9.11.9.12"
            class="indexterm"></a><a
            id="id-1.9.11.9.13"
            class="indexterm"></a><a
            id="id-1.9.11.9.14"
            class="indexterm"></a><div
            class="para">
				For more important upgrades, such as the change from one major Debian version to the next, you need to use <code
              class="command">apt full-upgrade</code>. With this instruction, <code
              class="command">apt</code> will complete the upgrade even if it has to remove some obsolete packages or install new dependencies. This is also the command used by users who work daily with the Debian <span
              class="distribution distribution">Unstable</span> release and follow its evolution day by day. It is so simple that it hardly needs explanation: APT's reputation is based on this great functionality.
			</div><div
            class="para">
				Anders als <code
              class="command">apt</code> und <code
              class="command">aptitude</code>, kennt <code
              class="command">apt-get</code> nicht den <code
              class="command"> full-upgrade</code> Befehl. Sie sollten statt dessen <code
              class="command">apt-get dist-upgrade</code> (”distribution upgrade”) verwenden, den historischen und gut bekannten Befehl, der auch von <code
              class="command">apt</code> und <code
              class="command">aptitude</code> zur Vereinfachung für den Benutzer verwendbar ist.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-config"></a>6.2.4. Konfigurationsoptionen</h3></div></div></div><a
            id="id-1.9.11.10.2"
            class="indexterm"></a><a
            id="id-1.9.11.10.3"
            class="indexterm"></a><a
            id="id-1.9.11.10.4"
            class="indexterm"></a><div
            class="para">
				Besides the configuration elements already mentioned, it is possible to configure certain aspects of APT by adding directives in a file of the <code
              class="filename">/etc/apt/apt.conf.d/</code> directory. Remember for instance that it is possible for APT to tell <code
              class="command">dpkg</code> to ignore file conflict errors by specifying <code
              class="literal">DPkg::options { "--force-overwrite"; }</code>.
			</div><div
            class="para">
				Falls auf das Web nur über einen Web-Proxy zugegriffen werden kann, fügen Sie eine Zeile wie <code
              class="literal">Acquire::http::proxy "http://<em
                class="replaceable">IhrProxy</em>:3128"</code> hinzu. Für einen FTP-Proxy schreiben Sie <code
              class="literal">Acquire::ftp::proxy "ftp://<em
                class="replaceable">IhrProxy</em>"</code>. Um mehr über die Konfigurationsoptionen heraus zu finden, lesen Sie die Handbuchseite <span
              class="citerefentry"><span
                class="refentrytitle">apt.conf</span>(5)</span> mit dem Befehl <code
              class="command">man apt.conf</code> (für Einzelheiten zu Handbuchseiten siehe <a
              class="xref"
              href="solving-problems.html#sect.manual-pages">Abschnitt 7.1.1, „Handbuchseiten“</a>).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.directory.d"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ZURÜCK ZU DEN GRUNDLAGEN</em></span> Auf <code
                        class="filename">.d</code> endende Verzeichnisse</strong></p></div></div></div><a
              id="id-1.9.11.10.7.2"
              class="indexterm"></a><div
              class="para">
				Verzeichnisse mit angehängtem <code
                class="filename">.d</code> werden immer häufiger benutzt. Jedes Verzeichnis steht für eine Konfigurationsdatei, die auf mehrere Dateien aufgeteilt ist. In diesem Sinne sind alle Dateien in <code
                class="filename">/etc/apt/apt.conf.d</code> Anweisungen für die Konfiguration von APT. APT bezieht sie in alphabetischer Reihenfolge ein, so dass Anweisungen aus den weiter hinten stehenden Dateien bereits zuvor definierte Konfigurationselemente verändern können.
			</div><div
              class="para">
				Diese Struktur gibt dem Administrator der Maschine und den Paket-Betreuern einiges an Flexibilität. Tatsächlich kann der Administrator die Konfiguration der Software verändern, indem er dem fraglichen Verzeichnis eine ein gebrauchsfertige Datei hinzufügt, ohne eine bestehende Datei verändern zu müssen. Paket-Betreuer nutzen denselben Ansatz, wenn sie die Konfiguration einer anderen Software anpassen müssen, um sicher zu stellen, dass beide Konfigurationen friedlich koexistieren können. Die Debian-Richtlinien (policy) verbieten jedoch ausdrücklich das Verändern von Konfigurationsdateien anderer Pakete — nur den Anwendern wird dieses gestattet. Erinnern Sie sich, dass während einer Paketaktualisierung der Benutzer eine Auswahlmöglichkeit erhält, welche Version der Konfigurationsdatei verwendet werden soll, falls eine Veränderung erkannt wurde. Jede fremde Änderung würde eine solche Abfrage auslösen, zur Verwunderung des Administrators, der sich sicher ist, nichts verändert zu haben.
			</div><div
              class="para">
				Without a <code
                class="filename">.d</code> directory, it is impossible for an external package to change the settings of a program without modifying its configuration file. Instead it must invite the user to do it themselves and lists the operations to be done in the file <code
                class="filename">/usr/share/doc/<em
                  class="replaceable">package</em>/README.Debian</code>.
			</div><div
              class="para">
				Abhängig von der Anwendung wird das <code
                class="filename">.d</code>-Verzeichnis direkt benutzt oder von einem externen Skript verwaltet, welches alle Dateien zu der eigentlichen Konfigurationsdatei zusammenfügt. Wichtig ist, dieses Skript nach jeder Änderung in dem Verzeichnis auszuführen, so dass die jüngsten Änderungen angewendet werden. Ebenso wichtig ist es, die automatisch erzeugte Konfigurationsdatei nicht direkt zu bearbeiten, weil alle manuellen Änderungen bei der nächsten Ausführung des Skripts verloren gehen. Die gewählte Methode (das <code
                class="filename">.d</code>-Verzeichnis direkt zu nutzen oder eine aus dem Verzeichnis generierte Datei) wird üblicherweise bestimmt durch die Rahmenbedingungen bei der Entwicklung, in beiden Fällen aber macht die höhere Konfigurationsflexibilität die kleinen Komplikationen, die sie mit sich bringt, mehr als wett. Der Mailserver Exim4 ist ein Beispiel für die Methode der generierten Datei: er kann durch mehrere Dateien (<code
                class="filename">/etc/exim4/conf.d/*</code>) konfiguriert werden, die vom Befehl <code
                class="command">update-exim4.conf</code> zu <code
                class="filename">/var/lib/exim4/config.autogenerated</code> verknüpft werden.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt.priorities"></a>6.2.5. Paketprioritäten verwalten</h3></div></div></div><div
            class="para">
				Einer der wichtigsten Aspekte bei der Konfiguration von APT ist die Verwaltung der Prioritäten, die jeder Paketquelle zugeordnet sind. Möchten Sie zum Beispiel eine stabile Distribution durch ein oder zwei neuere Pakete aus <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span> oder <span
              class="distribution distribution">Experimental</span> erweitern? Es ist möglich, jedem verfügbaren Paket eine Priorität zuzuweisen (dasselbe Paket kann mehrere Prioritäten haben, abhängig von seiner Version oder der Distribution, in der es vorkommt). Diese Prioritäten beeinflussen APTs Verhalten: Für jedes Paket wird die Version mit der höchsten Priorität ausgewählt (außer wenn diese Version älter ist, als die installierte und wenn ihre Priorität geringer als 1000 ist).
			</div><a
            id="id-1.9.11.11.3"
            class="indexterm"></a><a
            id="id-1.9.11.11.4"
            class="indexterm"></a><a
            id="id-1.9.11.11.5"
            class="indexterm"></a><a
            id="id-1.9.11.11.6"
            class="indexterm"></a><a
            id="id-1.9.11.11.7"
            class="indexterm"></a><a
            id="id-1.9.11.11.8"
            class="indexterm"></a><a
            id="id-1.9.11.11.9"
            class="indexterm"></a><div
            class="para">
				APT definiert verschiedene Standard-Prioritäten. Jede installierte Paketversion hat die Priorität 100. Eine nicht installierte Version erhält standardmäßig die Priorität 500, diese kann aber auf 990 angehoben werden, falls sie Teil der Ziel-Veröffentlichung ist (diese wird durch die Befehlszeilenoption <code
              class="literal">-t</code> oder die Konfigurationsanweisung <code
              class="literal">APT::Default-Release</code> festgelegt).
			</div><div
            class="para">
				Sie können die Prioritäten ändern, indem Sie der Datei <code
              class="filename">/etc/apt/preferences</code> Einträge mit den Namen der betroffenen Pakete, ihrer Version und Herkunft, sowie ihrer neuen Priorität hinzufügen.
			</div><div
            class="para">
				APT installiert keine ältere Version eines Pakets (das heißt, ein Paket, dessen Versionsnummer niedriger ist als die des gegenwärtig installierten Paketes), außer wenn deren Priorität höher als 1000 ist. APT installiert immer das Paket mit der höchsten Priorität, das dieser Bedingung entspricht. Falls zwei Pakete dieselbe Priorität haben, installiert APT das neuere (das, mit der höheren Versionsnummer). Falls zwei Pakete mit der derselben Version und derselben Priorität, unterschiedlichen Inhalt haben, installiert APT die Version, die nicht installiert ist. (Diese Regel wurde entworfen, um den Fall einer Paket-Aktualisierung ohne die eigentlich nötige Erhöhung der Revisionsnummer abzudecken).
			</div><div
            class="para">
				Konkret wird ein Paket mit einer Priorität kleiner als 0 niemals installiert. Ein Paket mit einer Priorität zwischen 0 und 100 wird nur dann installiert, wenn keine andere Version des Pakets bereits installiert ist. Bei einer Priorität zwischen 100 und 500 wird das Paket nur dann installiert, wenn keine neuere Version installiert oder in einer anderen Distribution verfügbar ist. Zwischen einer Priorität von 501 und 990 wird ein Paket nur dann installiert, wenn keine neuere Version installiert oder in der Zieldistribution verfügbar ist. Liegt die Priorität zwischen 990 und 1000 wird das Paket nur dann installiert, wenn keine neuere Version installiert ist. Mit einer Priorität größer 1000 wird das Paket in jedem Fall installiert, selbst wenn dies APT zu einem Downgrade auf eine ältere Version zwingt.
			</div><div
            class="para">
				When APT checks <code
              class="filename">/etc/apt/preferences</code>, it first takes into account the most specific entries (often those specifying the concerned package), then the more generic ones (including for example all the packages of a distribution). If several generic entries exist, the first match is used. The available selection criteria include the package's name and the source providing it. Every package source is identified by the information contained in a <code
              class="filename">Release</code> file that APT downloads together with the <code
              class="filename">Packages</code> files. It specifies the origin (usually “Debian” for the packages of official mirrors, but it can also be a person's or an organization's name for third-party repositories). It also gives the name of the distribution (usually <span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span> or <span
              class="distribution distribution">Experimental</span> for the standard distributions provided by Debian) together with its version (for example 8 for Debian <span
              class="distribution distribution">Jessie</span>). Let's have a look at its syntax through some realistic case studies of this mechanism.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SPEZIFISCHER FALL</em></span> Priorität von <span
                        class="distribution distribution">experimental</span></strong></p></div></div></div><a
              id="id-1.9.11.11.15.2"
              class="indexterm"></a><div
              class="para">
				Auch wenn Sie <span
                class="distribution distribution">Experimental</span> zu Ihrer <code
                class="filename">sources.list</code>-Datei hinzugefügt haben, werden die darin enthaltenen Pakete wahrscheinlich niemals installiert, da deren Priorität auf 1 voreingestellt ist. Dabei handelt es sich um eine Sicherheitsvorkehrung, die verhindern soll, dass Anwender <span
                class="distribution distribution">Experimental</span> Pakete aus Versehen installieren. Diese Pakete lassen sich nur mittels <code
                class="command">aptitude install <em
                  class="replaceable">Paket</em>/experimental</code> installieren – Anwender, die diesen Befehl eingeben, müssen sich der Risiken bewusst sein, die sie damit eingehen. Es ist dennoch möglich (wenn auch <span
                class="emphasis"><em>nicht</em></span> empfohlen), Pakete aus <span
                class="distribution distribution">Experimental</span> wie Pakete anderer Distributionen zu behandeln, indem Sie ihnen eine Priorität von 500 zuweisen. Sie erreichen dies über einen Eintrag in <code
                class="filename">/etc/apt/preferences</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">Package: *
Pin: release a=experimental
Pin-Priority: 500</pre></div></div><div
            class="para">
				Angenommen, Sie wollen nur Pakete aus der stable-Version von Debian verwenden. Pakete anderer Versionen sollen nicht installiert werden, es sei denn, dies wird explizit gewünscht. In dem Falle können Sie folgenden Eintrag in der Datei <code
              class="filename">/etc/apt/preferences</code> vornehmen:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: *
Pin: release a=stable
Pin-Priority: 900

Package: *
Pin: release o=Debian
Pin-Priority: -10</pre></div><div
            class="para">
				<code
              class="literal">a=stable</code> bestimmt den Namen der ausgewählten Distribution. <code
              class="literal">o=Debian</code> beschränkt den Umfang auf Pakete mit der Herkunft "Debian".
			</div><div
            class="para">
				Let's now assume that you have a server with several local programs depending on the version 5.14 of Perl and that you want to ensure that upgrades will not install another version of it. You could use this entry:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: perl
Pin: version 5.14*
Pin-Priority: 1001</pre></div><div
            class="para">
				Die Referenzdokumentation für diese Konfigurationsdatei finden Sie auf der Handbuchseite <span
              class="citerefentry"><span
                class="refentrytitle">apt_preferences</span>(5)</span>, die Sie mit <code
              class="command">man apt_preferences</code> anzeigen lassen können.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> Kommentare in <code
                        class="filename">/etc/apt/preferences</code></strong></p></div></div></div><a
              id="id-1.9.11.11.22.2"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.3"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.4"
              class="indexterm"></a><div
              class="para">
				Es existiert keine offzielle Syntax für Kommentare in der <code
                class="filename">/etc/apt/preferences</code> Datei, aber Beschreibungen lassen sich mittels einer oder mehrerer “<code
                class="literal">Explanation</code>” Felder zu Beginn jedes Eintrags einfügen:
			</div><div
              class="informalexample"><pre
                class="programlisting">Explanation: The package xserver-xorg-video-intel provided
Explanation: in experimental can be used safely
Package: xserver-xorg-video-intel
Pin: release a=experimental
Pin-Priority: 500</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-mix-distros"></a>6.2.6. Mit mehreren Distributionen arbeiten</h3></div></div></div><div
            class="para">
				<code
              class="command">apt</code> being such a marvelous tool, it is tempting to pick packages coming from other distributions. For example, after having installed a <span
              class="distribution distribution">Stable</span> system, you might want to try out a software package available in <span
              class="distribution distribution">Testing</span> or <span
              class="distribution distribution">Unstable</span> without diverging too much from the system's initial state.
			</div><div
            class="para">
				Even if you will occasionally encounter problems while mixing packages from different distributions, <code
              class="command">apt</code> manages such coexistence very well and limits risks very effectively. The best way to proceed is to list all distributions used in <code
              class="filename">/etc/apt/sources.list</code> (some people always put the three distributions, but remember that <span
              class="distribution distribution">Unstable</span> is reserved for experienced users) and to define your reference distribution with the <code
              class="literal">APT::Default-Release</code> parameter (see <a
              class="xref"
              href="sect.apt-get.html#sect.apt-upgrade">Abschnitt 6.2.3, „Das System aktualisieren“</a>).
			</div><div
            class="para">
				Let's suppose that <span
              class="distribution distribution">Stable</span> is your reference distribution but that <span
              class="distribution distribution">Testing</span> and <span
              class="distribution distribution">Unstable</span> are also listed in your <code
              class="filename">sources.list</code> file. In this case, you can use <code
              class="command">apt install <em
                class="replaceable">package</em>/testing</code> to install a package from <span
              class="distribution distribution">Testing</span>. If the installation fails due to some unsatisfiable dependencies, let it solve those dependencies within <span
              class="distribution distribution">Testing</span> by adding the <code
              class="literal">-t testing</code> parameter. The same obviously applies to <span
              class="distribution distribution">Unstable</span>.
			</div><div
            class="para">
				In this situation, upgrades (<code
              class="command">upgrade</code> and <code
              class="command">full-upgrade</code>) are done within <span
              class="distribution distribution">Stable</span> except for packages already upgraded to another distribution: those will follow updates available in the other distributions. We will explain this behavior with the help of the default priorities set by APT below. Do not hesitate to use <code
              class="command">apt-cache policy</code> (see sidebar <a
              class="xref"
              href="sect.apt-get.html#sidebar.apt-cache-policy"><span
                class="emphasis"><em>TIPP</em></span> <code
                class="command">apt-cache policy</code></a>) to verify the given priorities.
			</div><div
            class="para">
				Alles beruht auf der Tatsache, dass APT nur Pakete gleich oder höher der installierten Version in Betracht zieht (unter der Annahme das <code
              class="filename">/etc/apt/preferences</code> für kein Paket eine Priorität größer als 1000 erzwingt).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-cache-policy"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> <code
                        class="command">apt-cache policy</code></strong></p></div></div></div><div
              class="para">
				Zögern Sie nicht, sich die mit einer Paketquelle verbundenen Standardprioritäten mittels <code
                class="command">apt-cache policy</code> anzeigen zu lassen, um ein besseres Verständnis des Prioritäten-Mechanismus zu gewinnen. Sie können ebenfalls <code
                class="command">apt-cache policy <em
                  class="replaceable">Paket</em></code> verwenden, um sich die Prioritäten aller verfügbaren Versionen eines gegebenen Paketes anzeigen zu lassen.
			</div></div><div
            class="para">
				Lassen Sie uns annehmen, Sie hätten Version 1 eines ersten Pakets aus <span
              class="distribution distribution">Stable</span> installiert und Version 2 und 3 wären in <span
              class="distribution distribution">Testing</span> bzw. in <span
              class="distribution distribution">Unstable</span> verfügbar. Die installierte Version hat eine Priorität von 100 aber die Version aus <span
              class="distribution distribution">Stable</span> (genau die gleiche) hat eine Priorität von 990 (weil sie Bestandteil der Zieldistribution ist). Pakete in <span
              class="distribution distribution">Testing</span> und <span
              class="distribution distribution">Unstable</span> haben eine Priorität von 500 (die Standardpriorität einer nicht installierten Version). Der Gewinner ist daher die Version 1 mit der Priorität 990. Das Paket "bleibt in <span
              class="distribution distribution">Stable</span>”.
			</div><div
            class="para">
				Nehmen wir ein anderes Beispiel: Die Version 2 eines Pakets wurde aus <span
              class="distribution distribution">Testing</span> installiert. Version 1 ist in <span
              class="distribution distribution">Stable</span> verfügbar und Version 3 in <span
              class="distribution distribution">Unstable</span>. Version 1 (mit der Priorität 990 – also niedriger als 1000) wird verworfen, da die Versionsnummer geringer als die der installierten Version ist. Bleiben nur Version 2 und 3, beide mit einer Priorität von 500. Mit dieser Alternative konfrontiert, wählt APT die neueste Version aus, die Version aus <span
              class="distribution distribution">Unstable</span>. Wenn Sie nicht wollen, das ein installiertes Paket aus <span
              class="distribution distribution">Testing</span> nach <span
              class="distribution distribution">Unstable</span> migriert, müssen Sie Paketen aus <span
              class="distribution distribution">Unstable</span> eine Priorität kleiner als 500 (490 zum Beispiel) zuweisen. Dazu können Sie <code
              class="filename">/etc/apt/preferences</code> anpassen:
			</div><pre
            class="programlisting">Package: *
Pin: release a=unstable
Pin-Priority: 490</pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.automatic-tracking"></a>6.2.7. Automatisch installierte Pakete nachverfolgen</h3></div></div></div><div
            class="para">
				One of the essential functionalities of <code
              class="command">apt</code> is the tracking of packages installed only through dependencies. These packages are called “automatic”, and often include libraries for instance.
			</div><div
            class="para">
				With this information, when packages are removed, the package managers can compute a list of automatic packages that are no longer needed (because there is no “manually installed” packages depending on them). <code
              class="command">apt-get autoremove</code> will get rid of those packages. <code
              class="command">aptitude</code> and <code
              class="command">apt</code> do not have this command: the former because it removes them automatically as soon as they are identified, and the latter probably because the user should not have to manually run such a command. In all cases, the tools display a clear message listing the affected packages.
			</div><a
            id="id-1.9.11.13.4"
            class="indexterm"></a><a
            id="id-1.9.11.13.5"
            class="indexterm"></a><a
            id="id-1.9.11.13.6"
            class="indexterm"></a><a
            id="id-1.9.11.13.7"
            class="indexterm"></a><div
            class="para">
				Es ist eine gute Idee, jedes Paket als automatisch zu markieren, das man nicht direkt benötigt, damit diese automatisch entfernt werden, wenn sie nicht weiter benötigt werden. <code
              class="command">apt-mark auto <em
                class="replaceable">Paket</em></code> markiert das betreffenbde Paket als automatisch, während <code
              class="command">apt-mark manual <em
                class="replaceable">Paket</em></code> das Gegenteil tut. <code
              class="command">aptitude markauto</code> und <code
              class="command">aptitude unmarkauto</code> arbeiten gleichermaßen, obwohl sie mehr Möglichkeiten bieten, viele Pakete auf einmal zu markieren (siehe <a
              class="xref"
              href="sect.apt-frontends.html#sect.aptitude">Abschnitt 6.4.1, „<code
                class="command">aptitude</code>“</a>). Die konsolenbasierte interaktive Benutzerschnittstelle von <code
              class="command">aptitude</code> macht es ebenfalls leicht, das "automatisch"-Flag zu überprüfen.
			</div><a
            id="id-1.9.11.13.9"
            class="indexterm"></a><div
            class="para">
				People might want to know why an automatically installed package is present on the system. To get this information from the command line, you can use <code
              class="command">aptitude why <em
                class="replaceable">package</em></code> (<code
              class="command">apt</code> and <code
              class="command">apt-get</code> have no similar feature):
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>aptitude why python-debian
</code></strong><code
              class="computeroutput">i   aptitude         Recommends apt-xapian-index         
i A apt-xapian-index Depends    python-debian (&gt;= 0.1.15)
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVE</em></span> <code
                        class="command">deborphan</code> und <code
                        class="command">debfoster</code></strong></p></div></div></div><a
              id="id-1.9.11.13.12.2"
              class="indexterm"></a><a
              id="id-1.9.11.13.12.3"
              class="indexterm"></a><div
              class="para">
				In days where <code
                class="command">apt</code>, <code
                class="command">apt-get</code> and <code
                class="command">aptitude</code> were not able to track automatic packages, there were two utilities producing lists of unnecessary packages: <code
                class="command">deborphan</code> and <code
                class="command">debfoster</code>.
			</div><div
              class="para">
				<code
                class="command">deborphan</code> is the most rudimentary of both. It simply scans the <code
                class="literal">libs</code> and <code
                class="literal">oldlibs</code> sections (in the absence of supplementary instructions) looking for the packages that are currently installed and that no other package depends on. The resulting list can then serve as a basis to remove unneeded packages.
			</div><div
              class="para">
				<code
                class="command">debfoster</code> verfolgt einen komplexeren Ansatz, ähnlich dem von APT: Es verwaltet eine Liste von Paketen, die ausdrücklich installiert wurden und merkt sich, welche Pakete zwischen zwei Aufrufen wirklich benötigt wurden. Wenn neue Pakete im System auftauchen und wenn <code
                class="command">debfoster</code> diese nicht als benötigte Pakete kennt, werden diese zusammen mit ihren Abhängigkeiten angezeigt. Das Programm bietet dann die Wahl: Entfernen der Pakete (wenn möglich mit den Abhängigkeiten), als explizit benötigt markieren oder temporär ignorieren.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Zurück</strong>Kapitel 6. Wartung und Aktualisierung: Die APT-To...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nach oben</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Zum Anfang</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Weiter</strong>6.3. Der Befehl apt-cache</a></li></ul></body></html>
