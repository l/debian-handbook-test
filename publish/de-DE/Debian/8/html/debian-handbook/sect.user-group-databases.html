<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.4. Benutzer- und Gruppendatenbanken</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-de-DE-1.0-1" /><meta
        name="keywords"
        content="Konfigurierung, Lokalisierung, Sprachumgebungen, Netzwerk, Namensauflösung, Benutzer, Gruppen, Benutzerkonten, Befehlszeileninterpreter, Shell, Drucken, Boot-Loader, Kernel-Kompilierung" /><link
        rel="home"
        href="index.html"
        title="Das Debian Administrationshandbuch" /><link
        rel="up"
        href="basic-configuration.html"
        title="Kapitel 8. Basis-Konfigurierung: Netzwerk, Benutzerkonten, Drucken..." /><link
        rel="prev"
        href="sect.hostname-name-service.html"
        title="8.3. Den Hostnamen einstellen und den Namensservice konfigurieren" /><link
        rel="next"
        href="sect.creating-accounts.html"
        title="8.5. Konten erstellen" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/de-DE/stable/sect.user-group-databases.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Zurück</strong></a></li><li
          class="home">Das Debian Administrationshandbuch</li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Weiter</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.user-group-databases"></a>8.4. Benutzer- und Gruppendatenbanken</h2></div></div></div><a
          id="id-1.11.8.2"
          class="indexterm"></a><a
          id="id-1.11.8.3"
          class="indexterm"></a><a
          id="id-1.11.8.4"
          class="indexterm"></a><a
          id="id-1.11.8.5"
          class="indexterm"></a><div
          class="para">
			Die Liste der Benutzer ist normalerweise in der Datei <code
            class="filename">/etc/passwd</code> gespeichert, während die Datei <code
            class="filename">/etc/shadow</code> verschlüsselte Passwörter speichert. Beide sind Textdateien in einem recht einfachen Format, das mit einem Texteditor gelesen und geändert werden kann. Jeder Benutzer ist darin in einer Zeile mit mehreren durch einen Doppelpunkt („<code
            class="literal">:</code>“) getrennten Feldern aufgeführt.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>HINWEIS</em></span> Systemdateien editieren</strong></p></div></div></div><div
            class="para">
			Die in diesem Kapitel erwähnten Systemdateien sind alle reine Textdateien und können mit einem Texteditor editiert werden. Angesichts ihrer Bedeutung für die Funktionalität des Kernsystems empfiehlt es sich, bei ihrer Bearbeitung besondere Vorsicht walten zu lassen. Erstens sollten Sie eine Systemdatei immer kopieren oder sichern, bevor Sie sie öffnen oder verändern. Und zweitens sollten Sie auf Servern und auf Rechnern, bei denen möglicherweise zur gleichen Zeit mehr als eine Person auf dieselbe Datei zugreifen könnte, besondere Maßnahmen zum Schutz vor Dateibeschädigungen treffen.
		</div><div
            class="para">
			Hierzu genügt es, den Befehl <code
              class="command">vipw</code> zum Editieren der Datei <code
              class="filename">/etc/passwd</code> oder <code
              class="command">vigr</code> zum Editieren der Datei <code
              class="filename">/etc/group</code> zu benutzen. Diese Befehle sperren die entsprechende Datei vor dem Start des Texteditors (standardmäßig <code
              class="command">vi</code>, es sei denn, dass die Umgebungsvariable <code
              class="varname">EDITOR</code> verändert worden ist). Durch die Option <code
              class="literal">-s</code> ist es bei diesen Befehlen möglich, die entsprechende <span
              class="foreignphrase"><em
                class="foreignphrase">shadow</em></span>-Datei zu editieren.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ZURÜCK ZU DEN GRUNDLAGEN</em></span> Crypt, eine Einwegfunktion</strong></p></div></div></div><a
            id="id-1.11.8.8.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="command">crypt</code> ist eine Einwegfunktion, die eine Zeichenkette (<code
              class="varname">A</code>) derart in eine andere Zeichenkette (<code
              class="varname">B</code>) umwandelt, dass <code
              class="varname">A</code> nicht von <code
              class="varname">B</code> abgeleitet werden kann. Der einzige Weg, <code
              class="varname">A</code> zu bestimmen, besteht darin, alle möglichen Werte auszuprobieren und jeden dahingehend zu überprüfen, ob seine Umwandlung durch diese Funktion <code
              class="varname">B</code> ergibt oder nicht. Sie verwendet als Eingabe 8 Zeichen (Zeichenkette <code
              class="varname">A</code>) und erzeugt eine Zeichenkette von 13 druckbaren ASCII-Zeichen (Zeichenkette <code
              class="varname">B</code>).
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-passwd"></a>8.4.1. Benutzerliste: <code
                    class="filename">/etc/passwd</code></h3></div></div></div><div
            class="para">
				Hier ist die Liste der Felder in der Datei <code
              class="filename">/etc/passwd</code>:
			</div><a
            id="id-1.11.8.9.3"
            class="indexterm"></a><a
            id="id-1.11.8.9.4"
            class="indexterm"></a><a
            id="id-1.11.8.9.5"
            class="indexterm"></a><a
            id="id-1.11.8.9.6"
            class="indexterm"></a><a
            id="id-1.11.8.9.7"
            class="indexterm"></a><a
            id="id-1.11.8.9.8"
            class="indexterm"></a><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						login, zum Beispiel <code
                    class="literal">rhertzog</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						password: dies ist ein mit einer Einwegfunktion (<code
                    class="command">crypt</code>) basierend auf <code
                    class="literal">DES</code>, <code
                    class="literal">MD5</code>, <code
                    class="literal">SHA-256</code> or <code
                    class="literal">SHA-512</code>verschlüsseltes Passwort. Der besondere Wert „<code
                    class="literal">x</code>" bedeutet, dass das verschlüsselte Passwort in der Datei <code
                    class="filename">/etc/shadow</code> gespeichert ist;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uid</code>: eine eindeutige Zahl zur Identifizierung jeden Benutzers;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: eine eindeutige Zahl für die Hauptgruppe des Benutzers (Debian erstellt standardmäßig für jeden Benutzer eine besondere Gruppe);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">GECOS</code>: Datenfeld, das gewöhnlich den vollständigen Namen des Benutzers enthält;
					</div></li><li
                class="listitem"><div
                  class="para">
						Benutzerverzeichnis, das dem Benutzer zur Speicherung seiner persönlichen Dateien zugewiesen ist (die Umgebungsvariable <code
                    class="varname">$HOME</code> verweist üblicherweise hierauf);
					</div></li><li
                class="listitem"><div
                  class="para">
						program to execute upon login. This is usually a command interpreter (shell), giving the user free rein. If you specify <code
                    class="command">/bin/false</code> (which does nothing and returns control immediately), the user cannot login.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ZURÜCK ZU DEN GRUNDLAGEN</em></span> Unix-Gruppen</strong></p></div></div></div><a
              id="id-1.11.8.9.10.2"
              class="indexterm"></a><div
              class="para">
				Eine Unix-Gruppe ist eine Einheit, die mehrere Benutzer umfasst, so dass diese auf einfache Weise Dateien unter Verwendung des integrierten Berechtigungssystems gemeinsam benutzen können (wobei sie von den gleichen Berechtigungen profitieren). Man kann auch die Verwendung bestimmter Programme auf eine besondere Gruppe begrenzen.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-shadow"></a>8.4.2. Die versteckte und verschlüsselte Passwortdatei: <code
                    class="filename">/etc/shadow</code></h3></div></div></div><a
            id="id-1.11.8.10.2"
            class="indexterm"></a><a
            id="id-1.11.8.10.3"
            class="indexterm"></a><div
            class="para">
				Die Datei <code
              class="filename">/etc/shadow</code> enthält die folgenden Felder:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						Anmeldung;
					</div></li><li
                class="listitem"><div
                  class="para">
						verschlüsseltes Passwort;
					</div></li><li
                class="listitem"><div
                  class="para">
						mehrere Felder zur Verwaltung des Verfalls der Passwörter.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOKUMENTATION</em></span> Dateiformate von <code
                        class="filename">/etc/passwd</code>, <code
                        class="filename">/etc/shadow</code> und <code
                        class="filename">/etc/group</code></strong></p></div></div></div><div
              class="para">
				Diese Formate sind auf den folgenden Handbuchseiten dokumentiert: <span
                class="citerefentry"><span
                  class="refentrytitle">passwd</span>(5)</span>, <span
                class="citerefentry"><span
                  class="refentrytitle">shadow</span>(5)</span> und <span
                class="citerefentry"><span
                  class="refentrytitle">group</span>(5)</span>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SICHERHEIT</em></span> Dateisicherheit von <code
                        class="filename">/etc/shadow</code></strong></p></div></div></div><div
              class="para">
				Im Gegensatz zu ihrem Alter Ego <code
                class="filename">/etc/passwd</code> kann die Datei <code
                class="filename">/etc/shadow</code> nicht von normalen Benutzern gelesen werden. Jedes in <code
                class="filename">/etc/passwd</code> gespeicherte verschlüsselte Passwort kann von jedem gelesen werden; ein Cracker könnte versuchen, durch eine von verschiedenen „Brute-Force-Methoden“, die einfach gesagt häufig verwendete Zeichenkombinationen raten, ein Passwort zu „knacken“ (oder aufzudecken). Diese - „Wörterbuchangriff“ genannte - Attacke ist auf Systemen, die <code
                class="filename">/etc/shadow</code> verwenden, nicht mehr möglich.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.account-modification"></a>8.4.3. Ein bestehende Konto oder Passwort ändern</h3></div></div></div><a
            id="id-1.11.8.11.2"
            class="indexterm"></a><a
            id="id-1.11.8.11.3"
            class="indexterm"></a><a
            id="id-1.11.8.11.4"
            class="indexterm"></a><a
            id="id-1.11.8.11.5"
            class="indexterm"></a><a
            id="id-1.11.8.11.6"
            class="indexterm"></a><div
            class="para">
				Mit den folgenden Befehlen ist es möglich, die in bestimmten Feldern der Benutzerdatenbanken gespeicherten Informationen zu verändern: <code
              class="command">passwd</code> erlaubt es einem normalen Benutzer, sein Passwort zu ändern, wodurch wiederum die Datei <code
              class="filename">/etc/shadow</code> aktualisiert wird; <code
              class="command">chfn</code> (CHange Full Name) ist für den Superuser (Root) reserviert und verändert das Feld <code
              class="literal">GECOS</code>. <code
              class="command">chsh</code> (CHange SHell) ermöglicht es dem Benutzer, seine Anmelde-Shell zu wechseln, jedoch ist dabei die Auswahl auf diejenigen begrenzt, die in der Datei <code
              class="filename">/etc/shells</code> aufgeführt sind; dagegen ist der Administrator nicht an diese Einschränkung gebunden und kann als Shell jedes von ihm gewählte Programm einstellen.
			</div><div
            class="para">
				Schließlich ermöglicht der Befehl <code
              class="command">chage</code> (CHange AGE) es dem Administrator, die Passwort-Verfallseinstellungen zu ändern (mit der Option <code
              class="literal">-l <em
                class="replaceable">benutzer</em></code> werden die aktuellen Einstellungen aufgelistet). Man kann auch den Verfall eines Passworts mit dem Befehl <code
              class="command">passwd -e <em
                class="replaceable">benutzer</em></code> erzwingen, wodurch der Benutzer bei der nächsten Anmeldung sein Passwort ändern muss.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.disabling-account"></a>8.4.4. Ein Konto sperren</h3></div></div></div><a
            id="id-1.11.8.12.2"
            class="indexterm"></a><a
            id="id-1.11.8.12.3"
            class="indexterm"></a><div
            class="para">
				Es kann sein, dass Sie als Disziplinarmaßnahme, zum Zweck einer Untersuchung oder einfach im Falle einer längeren oder endgültigen Abwesenheit eines Benutzers ein „Konto sperren“ (einen Benutzer ausschließen) müssen. Ein gesperrtes Konto bedeutet, dass sich der Benutzer nicht mehr anmelden und Zugang zum Rechner erhalten kann. Das Konto bleibt unversehrt auf dem Rechner, und weder Dateien noch Daten werden gelöscht; es ist einfach nur nicht mehr zugänglich. Dies wird mit dem Befehl <code
              class="command">passwd -l <em
                class="replaceable">benutzer</em></code> erreicht (zum Sperren). Die erneute Freigabe des Kontos geschieht auf ähnliche Weise mit der Option <code
              class="literal">-u</code> (zum Entsperren).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.intro-nss"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>WEITERE SCHRITTE</em></span> NSS und Systemdatenbanken</strong></p></div></div></div><a
              id="id-1.11.8.12.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.12.5.3"
              class="indexterm"></a><div
              class="para">
				Anstatt die üblichen Dateien zur Verwaltung der Benutzer- und Gruppenlisten zu benutzen, könnten Sie andere Arten von Datenbanken verwenden, wie zum Beispiel LDAP oder <code
                class="command">db</code>, indem sie ein passendes NSS-Modul (Name Service Switch) einsetzen. Die verwendeten Module werden in der Datei <code
                class="filename">/etc/nsswitch.conf</code> unter den Einträgen <code
                class="literal">passwd</code>, <code
                class="literal">shadow</code> und <code
                class="literal">group</code> aufgeführt. Siehe <a
                class="xref"
                href="sect.ldap-directory.html#sect.config-nss">Abschnitt 11.7.3.1, „NSS konfigurieren“</a> für ein konkretes Beispiel zum Einsatz eines NSS-Moduls durch LDAP.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-group"></a>8.4.5. Gruppenliste: <code
                    class="filename">/etc/group</code></h3></div></div></div><div
            class="para">
				Gruppen sind in der Datei <code
              class="filename">/etc/group</code> aufgelistet, einer einfachen Textdatenbank in einem der Datei <code
              class="filename">/etc/passwd</code> ähnlichen Format mit folgenden Feldern:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						Gruppenname;
					</div></li><li
                class="listitem"><div
                  class="para">
						password (optional): This is only used to join a group when one is not a usual member (with the <code
                    class="command">newgrp</code> or <code
                    class="command">sg</code> commands, see sidebar <a
                    class="xref"
                    href="sect.user-group-databases.html#sidebar.working-with-several-groups"><span
                      class="emphasis"><em>ZURÜCK ZU DEN GRUNDLAGEN</em></span> Mit mehreren Gruppen arbeiten</a>);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: eindeutige Gruppenidentifikationsnummer;
					</div></li><li
                class="listitem"><div
                  class="para">
						Mitgliederliste: Liste mit den Namen der Benutzer, die Mitglieder der Gruppe sind, getrennt durch Kommata.
					</div></li></ul></div><div
            class="para">
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.working-with-several-groups"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ZURÜCK ZU DEN GRUNDLAGEN</em></span> Mit mehreren Gruppen arbeiten</strong></p></div></div></div><a
              id="id-1.11.8.13.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.3"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.4"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.5"
              class="indexterm"></a><div
              class="para">
				Jeder Benutzer kann Mitglied zahlreicher Gruppen sein; von diesen ist eine seine „Hauptgruppe“. Die Hauptgruppe eines Benutzers wird standardmäßig während der ursprünglichen Benutzerkonfigurierung erstellt. Gemäß der Voreinstellung gehört jede Datei, die ein Benutzer erstellt, ihm selbst sowie auch seiner Hauptgruppe. Dies ist nicht immer wünschenswert; wenn zum Beispiel der Benutzer in einem Verzeichnis arbeiten muss, das von einer anderen Gruppe als seiner Hauptgruppe gemeinsam genutzt wird. In diesem Fall muss der Benutzer seine Hauptgruppe mit einem der folgenden Befehle wechseln: <code
                class="command">newgrp</code>, der eine neue Shell startet, oder <code
                class="command">sg</code>, der einfach einen Befehl unter Verwendung der angegebenen alternativen Gruppe ausführt. Diese Befehle ermöglichen es dem Benutzer also, einer Gruppe beizutreten, der er nicht angehört. Falls die Gruppe durch ein Passwort geschützt ist, muss er das richtige Passwort angeben, bevor der Befehl ausgeführt wird.
			</div><div
              class="para">
				Stattdessen kann der Benutzer das <code
                class="literal">setgid</code>-Bit auf das Verzeichnis setzen, wodurch in diesem Verzeichnis erstellte Dateien automatisch zur richtigen Gruppe gehören. Zu weiteren Einzelheiten siehe <a
                class="xref"
                href="sect.rights-management.html#sidebar.setgid-dir"><span
                  class="emphasis"><em>SICHERHEIT</em></span> <code
                  class="literal">setgid</code>-Verzeichnis und <span
                  class="emphasis"><em>Sticky-Bit</em></span></a> in der Seitenleiste.
			</div><div
              class="para">
				Der Befehl <code
                class="command">id</code> zeigt den aktuellen Status eines Benutzers an mit seiner persönlichen Kennung (Variable <code
                class="varname">uid</code>), der aktuellen Hauptgruppe (Variable <code
                class="varname">gid</code>) und der Liste der Gruppen, zu denen er gehört (Variable <code
                class="varname">Gruppen</code>).
			</div></div><a
            id="id-1.11.8.13.6"
            class="indexterm"></a><a
            id="id-1.11.8.13.7"
            class="indexterm"></a><div
            class="para">
				Die Befehle <code
              class="command">groupadd</code> und <code
              class="command">groupdel</code> fügen eine Gruppe hinzu beziehungsweise löschen sie. Der Befehl <code
              class="command">groupmod</code> ändert die Informationen über eine Gruppe (sein <code
              class="literal">gid</code>, das heißt seine Kennung). Der Befehl <code
              class="command">passwd -g <em
                class="replaceable">gruppe</em></code> ändert das Passwort der Gruppe, während der Befehl <code
              class="command">passwd -r -g <em
                class="replaceable">gruppe</em></code> es löscht.
			</div><a
            id="id-1.11.8.13.9"
            class="indexterm"></a><a
            id="id-1.11.8.13.10"
            class="indexterm"></a><a
            id="id-1.11.8.13.11"
            class="indexterm"></a><a
            id="id-1.11.8.13.12"
            class="indexterm"></a><a
            id="id-1.11.8.13.13"
            class="indexterm"></a><a
            id="id-1.11.8.13.14"
            class="indexterm"></a><a
            id="id-1.11.8.13.15"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPP</em></span> <code
                        class="command">getent</code></strong></p></div></div></div><a
              id="id-1.11.8.13.16.2"
              class="indexterm"></a><div
              class="para">
				Der Befehl <code
                class="command">getent</code> (get entries) überprüft die Systemdatenbanken auf dem normalen Weg unter Verwendung der passenden Bibliotheksfunktionen, die ihrerseits die in der Datei <code
                class="filename">/etc/nsswitch.conf</code> konfigurierten NSS-Module aufrufen. Der Befehl nimmt ein oder zwei Argumente an: den Namen der zu überprüfenden Datenbank und möglicherweise einen Suchbegriff. So zeigt der Befehl <code
                class="command">getent passwd rhertzog</code> Informationen aus der Benutzerdatenbank über den Benutzer <code
                class="literal">rhertzog</code> an.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Zurück</strong>8.3. Den Hostnamen einstellen und den Namensservi...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nach oben</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Zum Anfang</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Weiter</strong>8.5. Konten erstellen</a></li></ul></body></html>
