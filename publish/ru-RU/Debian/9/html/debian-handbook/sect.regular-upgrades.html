<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.7. Содержание системы с периодическими обновлениями</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="apt.html"
        title="Глава 6. Обслуживание и обновление: инструменты APT" /><link
        rel="prev"
        href="sect.dist-upgrade.html"
        title="6.6. Обновление Одного Стабильного Дистибутива в Следующий" /><link
        rel="next"
        href="sect.automatic-upgrades.html"
        title="6.8. Автоматическое Обновление" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.regular-upgrades.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.dist-upgrade.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.automatic-upgrades.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.regular-upgrades"></a>6.7. Содержание системы с периодическими обновлениями</h2></div></div></div><div
          class="para">
			Debian дистибутив постоянно развивается и изменения в него вносятся непрерывно. Большинство изменений располагаются в версиях <span
            class="distribution distribution">Тестируемый</span> и <span
            class="distribution distribution">Нестабильный</span>, но сходный с ними <span
            class="distribution distribution">Стабильный</span> обновляется время от время, в большинстве случаев это касается обновлений безопасности. Какая бы ни была запущена версия Debian, хорошей идеей будет обновляться время от времени, так чтобы вы могли получить все преимущества от недавних изменений и устранения ошибок.
		</div><div
          class="para">
			Несмотря на то, что есть возможность периодически запускать средства для проверки доступных обновлениий и выполнять загрузку-обновления, такие однотипные постоянно повторяющиеся действия являются скучным и утомительный занятием, особенно в случае выполнения их - на нескольких машинах. К счастью, как и в случае с часто повторяющимися задачами, эту рутинную работу можно частично автоматизировать, и набор средств для этого уже создан.
		</div><div
          class="para">
			Первым из этих инструментов является <code
            class="command">apticron</code>, в пакете с похожим именем. Его основное действие запускать скрипт ежедневно (через <code
            class="command">cron</code>). Скрипт обновляет перечень доступных пакетов. Если некоторые установленные пакеты не являются последней версией, он посылает email с перечнем тех пакетов, с краткой информацией, что включено в новой версии по каждому пакету. Очевидно, что данный пакет в большинстве случаев рассчитан на пользователей дистибутива Debian <span
            class="distribution distribution">Stable</span>, поскольку периодичность обновления в 1 день с информированием по emails не обеспечит быстрой смены версии Debian. Когда обновления станут доступны, <code
            class="command">apticron</code> автоматически загрузит их. Этот скрипт не устанавливает их, только лишь администратор сможет сделать это, но уже загруженные, и находящиеся в локальном кэше (в кэше APT-а), пакеты намного убыстрят сам процесс обновления пакетов.
		</div><div
          class="para">
			Administrators in charge of several computers will no doubt appreciate being informed of pending upgrades, but the upgrades themselves are still as tedious as they used to be. Periodic upgrades can be enabled: it uses a <code
            class="command">systemd</code> timer unit or <code
            class="command">cron</code>. If <span
            class="pkg pkg">systemd</span> is not installed the <code
            class="filename">/etc/cron.daily/apt-compat</code> script (in the <span
            class="pkg pkg">apt</span> package) comes in handy. This script is run daily (and non-interactively) by <code
            class="command">cron</code>. To control the behavior, use APT configuration variables (which are therefore stored in a file <code
            class="filename">/etc/apt/apt.conf.d/10periodic</code>). The main variables are:
		</div><div
          class="variablelist"><dl
            class="variablelist"><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Update-Package-Lists</code></span></dt><dd><div
                class="para">
						Эта опция позволит вам определить частоту (в днях) обновления перечня пакетов (доступного на зеркалах). Пользователи программы <code
                  class="command">apticron</code> могут сделать это без этих переменных, так как <code
                  class="command">apticron</code> всегда сама делает зто.
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Download-Upgradeable-Packages</code></span></dt><dd><div
                class="para">
						Похожая на предыдущую, эта опция показывает частоту (в днях) загрузки актуальных пакетов для обновления. И снова пользователи программы <code
                  class="command">apticron</code> не нуждаются в этом.
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::AutocleanInterval</code></span></dt><dd><div
                class="para">
						Эта опция имеет возможности, которых нет в <code
                  class="command">apticron</code>. Она контролирует, как часто устаревшие пакеты (те которые больше не относятся ни к каким дистрибутивам) удаляются из кэша APT. Это сохраняет размер кэша APT в разумных размерах и это значит, что вам нет нужды беспокоиться об этом.
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Unattended-Upgrade</code></span></dt><dd><a
                id="id-1.9.16.6.4.2.1"
                class="indexterm"></a><div
                class="para">
						Когда эта опция подключена, ежедневный скрипт будет выполнять <code
                  class="command">unattended-upgrade</code> (из пакета <span
                  class="pkg pkg">unattended-upgrades</span>). Эта программа - само ее название говорит за себя - может автоматизировать процесс загрузки и обновления для некоторых пакетов (по умолчанию она только берет заботу об обновлениях безопасности, но можно сделать это же и по своему желанию в <code
                  class="filename">/etc/apt/apt.conf.d/50unattended-upgrades</code>). Запомни, что для этого надо чуть подправить (реконфигурировать) программу с помощью debconf выполнив <code
                  class="command">dpkg-reconfigure -plow unattended-upgrades</code>.
					</div></dd></dl></div><div
          class="para">
			Other options can allow you to control the cache cleaning behavior with more precision. They are not listed here, but they are described in the <code
            class="filename">/usr/lib/apt/apt.systemd.daily</code> script.
		</div><a
          id="id-1.9.16.8"
          class="indexterm"></a><div
          class="para">
			These tools work very well for servers, but desktop users generally prefer a more interactive system. The package <span
            class="pkg pkg">gnome-packagekit</span> provides an icon in the notification area of desktop environments when updates are available; clicking on this icon then runs <code
            class="command">gpk-update-viewer</code>, a simplified interface to perform updates. You can browse through available updates, read the short description of the relevant packages and the corresponding <code
            class="filename">changelog</code> entries, and select whether to apply the update or not on a case-by-case basis.
		</div><div
          class="figure"><a
            xmlns=""
            id="id-1.9.16.10"></a><div
            class="figure-contents"><div
              class="mediaobject"><img
                src="images/gnome-packagekit.png"
                alt="Обновление с программой gpk-update-viewer" /></div></div><p
            class="title"><strong>Рисунок 6.3. Обновление с программой <code
                class="command">gpk-update-viewer</code></strong></p></div><div
          class="para">
			This tool is no longer installed in the default GNOME desktop. The new philosophy is that security updates should be automatically installed, either in the background or, preferably, when you shutdown your computer so as to not confuse any running application.
		</div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.dist-upgrade.html"><strong>Пред.</strong>6.6. Обновление Одного Стабильного Дистибутива в ...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.automatic-upgrades.html"><strong>След.</strong>6.8. Автоматическое Обновление</a></li></ul></body></html>
