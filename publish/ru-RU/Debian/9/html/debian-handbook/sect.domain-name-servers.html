<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.6. Система Доменных Имен Серверов (DNS)</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Сеть, Шлюз, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="network-infrastructure.html"
        title="Глава 10. Сетевая инфраструктура" /><link
        rel="prev"
        href="sect.ipv6.html"
        title="10.5. IPv6" /><link
        rel="next"
        href="sect.dhcp.html"
        title="10.7. DHCP" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.domain-name-servers.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.domain-name-servers"></a>10.6. Система Доменных Имен Серверов (DNS)</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-principe"></a>10.6.1. Принципы и механизм</h3></div></div></div><a
            id="id-1.13.9.2.2"
            class="indexterm"></a><a
            id="id-1.13.9.2.3"
            class="indexterm"></a><div
            class="para">
				Система Доменных Имен Серверов или <span
              class="emphasis"><em>Domain Name Service</em></span> (DNS) является одним из фундаментальных понятий сети Internet: она представляет из себя таблицу преобразования узлов сети в IP адреса (и наоборот), что позволяет использовать строку вида <code
              class="literal">www.debian.org</code> взамен цифровых <code
              class="literal">5.153.231.4</code> или <code
              class="literal">2001:41c8:1000:21::21:4</code>.
			</div><div
            class="para">
				Записи DNS организованы по зонам; каждая зона соответствует какому-нибудь домену (или субдомену) или указанному диапазону IP адресов (в котором IP адреса, включённые в диапазон, расположены обычно последовательно). Главный сервер является авторитетным и содержит таблицу по зоне; вторичные серверы, обычно располагаемые на отдельных машинах, содержат регулярно обновляемые копии файла таблицы главной зоны.
			</div><a
            id="id-1.13.9.2.6"
            class="indexterm"></a><a
            id="id-1.13.9.2.7"
            class="indexterm"></a><div
            class="para">
				Каждая зона может содержать записи различных видов (<span
              class="emphasis"><em>Resource Records</em></span>):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">A</code>: адрес IPv4. <a
                    id="id-1.13.9.2.9.1.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">CNAME</code>: псевдоним или alias (<span
                    class="emphasis"><em>canonical name</em></span>). <a
                    id="id-1.13.9.2.9.2.1.3"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">MX</code>: <span
                    class="emphasis"><em>mail exchange</em></span>, почтовый сервер. Эту информацию используют другие почтовые серверы для определения способа отправки письма по указанному адресу. Каждой записи MX присвоен свой приоритет. Сервер с наивысшим приоритетом (с наименьшим номером) используется в первую очередь (смотри вкладку <a
                    class="xref"
                    href="network-services.html#sidebar.smtp"><span
                      class="emphasis"><em>НАЗАД К ОСНОВАМ</em></span> SMTP</a>); с другими серверами связываются в порядке уменьшения их приоритетов в случае, если первый сервер не отвечает. <a
                    id="id-1.13.9.2.9.3.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">PTR</code>: преобразование IP адресов в текстовое имя. Такая запись хранится в зоне, названной “reverse DNS” (“обратная DNS”) после диапазона IP адресов. Для примера, <code
                    class="literal">1.168.192.in-addr.arpa</code> является зоной, содержащей обратное отображение всех адресов в диапазоне <code
                    class="literal">192.168.1.0/24</code>. <a
                    id="id-1.13.9.2.9.4.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">AAAA</code>: адреса IPv6. <a
                    id="id-1.13.9.2.9.5.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">NS</code>: отображает имя сервера имён (name server или NS). Каждый домен должен иметь по крайней мере хотя бы одну запись NS. Эти записи указывают на DNS сервер, который может ответить на запросы касательно данного домена; они обычно указывают на главный или вторичный серверы для данного домена. Кроме этого записи могут также позволить делегировать часть полномочий DNS кому-то; например, зона <code
                    class="literal">falcot.com</code> может быть включена как NS запись для <code
                    class="literal">internal.falcot.com</code>, а это означает, что внутренняя зона <code
                    class="literal">internal.falcot.com</code> будет обрабатываться другим (не первым) сервером. Конечно в этом случае данный сервер должен быть предварительно объявлен в зоне <code
                    class="literal">internal.falcot.com</code>. <a
                    id="id-1.13.9.2.9.6.1.6"
                    class="indexterm"></a>
					</div></li></ul></div><a
            id="id-1.13.9.2.10"
            class="indexterm"></a><a
            id="id-1.13.9.2.11"
            class="indexterm"></a><div
            class="para">
				The reference name server, Bind, was developed and is maintained by ISC (<span
              class="emphasis"><em>Internet Software Consortium</em></span>). It is provided in Debian by the <span
              class="pkg pkg">bind9</span> package. Version 9 brings two major changes compared to previous versions. First, the DNS server can now run under an unprivileged user, so that a security vulnerability in the server does not grant root privileges to the attacker (as was seen repeatedly with versions 8.x).
			</div><div
            class="para">
				Furthermore, Bind supports the DNSSEC standard for signing (and therefore authenticating) DNS records, which allows blocking any spoofing of this data during man-in-the-middle attacks.
			</div><a
            id="id-1.13.9.2.14"
            class="indexterm"></a><a
            id="id-1.13.9.2.15"
            class="indexterm"></a><a
            id="id-1.13.9.2.16"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> DNSSEC</strong></p></div></div></div><a
              id="id-1.13.9.2.17.2"
              class="indexterm"></a><div
              class="para">
				The DNSSEC norm is quite complex; this partly explains why it is not in widespread usage yet (even if it perfectly coexists with DNS servers unaware of DNSSEC). To understand all the ins and outs, you should check the following article. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions">http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions</a></div>
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-config"></a>10.6.2. Настройка</h3></div></div></div><div
            class="para">
				Configuration files for <code
              class="command">bind</code>, irrespective of version, have the same structure.
			</div><div
            class="para">
				The Falcot administrators created a primary <code
              class="literal">falcot.com</code> zone to store information related to this domain, and a <code
              class="literal">168.192.in-addr.arpa</code> zone for reverse mapping of IP addresses in the local networks.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Names of reverse zones</strong></p></div></div></div><a
              id="id-1.13.9.3.4.2"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.3"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.4"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.5"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.6"
              class="indexterm"></a><div
              class="para">
				Reverse zones have a particular name. The zone covering the <code
                class="literal">192.168.0.0/16</code> network needs to be named <code
                class="literal">168.192.in-addr.arpa</code>: the IP address components are reversed, and followed by the <code
                class="literal">in-addr.arpa</code> suffix.
			</div><div
              class="para">
				For IPv6 networks, the suffix is <code
                class="literal">ip6.arpa</code> and the IP address components which are reversed are each character in the full hexadecimal representation of the IP address. As such, the <code
                class="literal">2001:0bc8:31a0::/48</code> network would use a zone named <code
                class="literal">0.a.1.3.8.c.b.0.1.0.0.2.ip6.arpa</code>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Testing the DNS server</strong></p></div></div></div><div
              class="para">
				The <code
                class="command">host</code> command (in the <span
                class="pkg pkg">bind9-host</span> package) queries a DNS server, and can be used to test the server configuration. For example, <code
                class="command">host machine.falcot.com localhost</code> checks the local server's reply for the <code
                class="literal">machine.falcot.com</code> query. <code
                class="command">host <em
                  class="replaceable">ipaddress</em> localhost</code> tests the reverse resolution.
			</div><a
              id="id-1.13.9.3.5.3"
              class="indexterm"></a></div><div
            class="para">
				The following configuration excerpts, taken from the Falcot files, can serve as starting points to configure a DNS server:
			</div><a
            id="id-1.13.9.3.7"
            class="indexterm"></a><a
            id="id-1.13.9.3.8"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.bind-named.conf.local"></a><p
              class="title"><strong>Пример 10.12. Excerpt of <code
                  class="filename">/etc/bind/named.conf.local</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
zone "falcot.com" {
        type master;
        file "/etc/bind/db.falcot.com";
        allow-query { any; };
        allow-transfer {
                195.20.105.149/32 ; // ns0.xname.org
                193.23.158.13/32 ; // ns1.xname.org
        };
};

zone "internal.falcot.com" {
        type master;
        file "/etc/bind/db.internal.falcot.com";
        allow-query { 192.168.0.0/16; };
};

zone "168.192.in-addr.arpa" {
        type master;
        file "/etc/bind/db.192.168";
        allow-query { 192.168.0.0/16; };
};
</pre></div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.falcot.com"></a><p
              class="title"><strong>Пример 10.13. Excerpt of <code
                  class="filename">/etc/bind/db.falcot.com</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; falcot.com Zone 
; admin.falcot.com. =&gt; zone contact: admin@falcot.com
$TTL    604800
@       IN      SOA     falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
; The @ refers to the zone name ("falcot.com" here)
; or to $ORIGIN if that directive has been used
;
@       IN      NS      ns
@       IN      NS      ns0.xname.org.

internal IN      NS      192.168.0.2

@       IN      A       212.94.201.10
@       IN      MX      5 mail
@       IN      MX      10 mail2

ns      IN      A       212.94.201.10
mail    IN      A       212.94.201.10
mail2   IN      A       212.94.201.11
www     IN      A       212.94.201.11

dns     IN      CNAME   ns
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Syntax of a name</strong></p></div></div></div><div
              class="para">
				The syntax of machine names follows strict rules. For instance, <code
                class="literal">machine</code> implies <code
                class="literal">machine.<em
                  class="replaceable">domain</em></code>. If the domain name should not be appended to a name, said name must be written as <code
                class="literal">machine.</code> (with a dot as suffix). Indicating a DNS name outside the current domain therefore requires a syntax such as <code
                class="literal">machine.otherdomain.com.</code> (with the final dot).
			</div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.192.168"></a><p
              class="title"><strong>Пример 10.14. Excerpt of <code
                  class="filename">/etc/bind/db.192.168</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; Reverse zone for 192.168.0.0/16
; admin.falcot.com. =&gt; zone contact: admin@falcot.com
$TTL    604800
@       IN      SOA     ns.internal.falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL

        IN      NS      ns.internal.falcot.com.

; 192.168.0.1 -&gt; arrakis
1.0     IN      PTR     arrakis.internal.falcot.com.
; 192.168.0.2 -&gt; neptune
2.0     IN      PTR     neptune.internal.falcot.com.

; 192.168.3.1 -&gt; pau
1.3     IN      PTR     pau.internal.falcot.com.
</pre></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>Пред.</strong>10.5. IPv6</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>След.</strong>10.7. DHCP</a></li></ul></body></html>
