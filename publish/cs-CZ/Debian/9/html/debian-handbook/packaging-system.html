<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Kapitola 5. Balíčkový systém: Nástroje a základní principy</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-cs-CZ-1.0-1" /><meta
        name="keywords"
        content="Binární balíček, Zdrojový balíček, dpdg, závislosti, konflikt" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="prev"
        href="sect.after-first-boot.html"
        title="4.3. Po prvním bootování" /><link
        rel="next"
        href="sect.package-meta-information.html"
        title="5.2. Meta-informace balíčku" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/cs-CZ/stable/packaging-system.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Předcházející</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>Další</strong></a></li></ul><div
        xml:lang="cs-CZ"
        class="chapter"
        lang="cs-CZ"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  xmlns=""
                  id="packaging-system"></a>Kapitola 5. Balíčkový systém: Nástroje a základní principy</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="packaging-system.html#sect.binary-package-structure">5.1. Struktura binárních balíčků</a></span></dt><dt><span
                class="section"><a
                  href="sect.package-meta-information.html">5.2. Meta-informace balíčku</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.control">5.2.1. Popis: <code
                        class="filename">kontrolní</code> soubor</a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.configuration-scripts">5.2.2. Nastavovací skripty</a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.conffiles">5.2.3. Checksums, seznam souborů nastavení</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.source-package-structure.html">5.3. Struktura zdrojového balíčku</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#id-1.8.7.4">5.3.1. Formát</a></span></dt><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#id-1.8.7.5">5.3.2. Usage within Debian</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.manipulating-packages-with-dpkg.html">5.4. Manipulating Packages with <code
                    class="command">dpkg</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.5">5.4.1. Installing Packages</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.6">5.4.2. Odstranění balíčků</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.7">5.4.3. Querying <code
                        class="command">dpkg</code>'s Database and Inspecting <code
                        class="filename">.deb</code> Files</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.8">5.4.4. <code
                        class="command">dpkg</code>'s Log File</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#sect.multi-arch">5.4.5. Multi-Arch Support</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.coexistence-with-other-packaging-systems.html">5.5. Coexistence with Other Packaging Systems</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Jako administrátor systému Debian budete běžně pracovat s balíčky <code
              class="filename">.deb</code>, protože obsahují stálé funkční jednotky (aplikace, dokumentaci, apod.), jejichž instalaci a údržbu zjednodušují. Proto je dobrý nápad vědět, co jsou a jak je používat.
	</div></div><div
          class="para">
		Tato kapitola popisuje strukturu a obsah “binárních” a “zdrojových” balíčků. Ty první jmenované jsou <code
            class="filename">.deb</code> soubory, přímo použitelné příkazem <code
            class="command">dpkg</code>, zatímco ty druhé obsahují zdrojový kód, stejně jako instrukce pro sestavení binárních balíčků.
	</div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    xmlns=""
                    id="sect.binary-package-structure"></a>5.1. Struktura binárních balíčků</h2></div></div></div><a
            id="id-1.8.5.2"
            class="indexterm"></a><a
            id="id-1.8.5.3"
            class="indexterm"></a><div
            class="para">
			The Debian package format is designed so that its content may be extracted on any Unix system that has the classic commands <code
              class="command">ar</code>, <code
              class="command">tar</code>, and <code
              class="command">xz</code> (sometimes <code
              class="command">gzip</code> or <code
              class="command">bzip2</code>). This seemingly trivial property is important for portability and disaster recovery.
		</div><div
            class="para">
			Imagine, for example, that you mistakenly deleted the <code
              class="command">dpkg</code> program, and that you could thus no longer install Debian packages. <code
              class="command">dpkg</code> being a Debian package itself, it would seem your system would be done for... Fortunately, you know the format of a package and can therefore download the <code
              class="filename">.deb</code> file of the <span
              class="pkg pkg">dpkg</span> package and install it manually (see sidebar <a
              class="xref"
              href="packaging-system.html#sidebar.dpkg-apt-ar"><span
                class="emphasis"><em>NÁSTROJE</em></span> <code
                class="command">dpkg</code>, <code
                class="command">APT</code> a <code
                class="command">ar</code></a>). If by some misfortune one or more of the programs <code
              class="command">ar</code>, <code
              class="command">tar</code> or <code
              class="command">gzip</code>/<code
              class="command">xz</code>/<code
              class="command">bzip2</code> have disappeared, you will only need to copy the missing program from another system (since each of these operates in a completely autonomous manner, without dependencies, a simple copy will suffice). If your system suffered some even more outrageous fortune, and even these don't work (maybe the deepest system libraries are missing?), you should try the static version of <code
              class="command">busybox</code> (provided in the <span
              class="pkg pkg">busybox-static</span> package), which is even more self-contained, and provides subcommands such as <code
              class="command">busybox ar</code>, <code
              class="command">busybox tar</code> and <code
              class="command">busybox xz</code>.
		</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.dpkg-apt-ar"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NÁSTROJE</em></span> <code
                        class="command">dpkg</code>, <code
                        class="command">APT</code> a <code
                        class="command">ar</code></strong></p></div></div></div><a
              id="id-1.8.5.6.2"
              class="indexterm"></a><a
              id="id-1.8.5.6.3"
              class="indexterm"></a><a
              id="id-1.8.5.6.4"
              class="indexterm"></a><div
              class="para">
			<code
                class="command">dpkg</code> je program, který manipuluje se soubory <code
                class="filename">.deb</code>, zejména je extrahuje, analyzuje a rozbaluje.
		</div><div
              class="para">
			<code
                class="command">APT</code> je skupina programů, která umožňuje provádění vysokoúrovňových modifikací na systému: instalování nebo odstraňování balíčku (za zachování závislostí), aktualizování systému, poskytování seznamů balíčků, apod.
		</div><a
              id="id-1.8.5.6.7"
              class="indexterm"></a><div
              class="para">
			As for the <code
                class="command">ar</code> program, it allows handling files of the same name: <code
                class="command">ar t <em
                  class="replaceable">archive</em></code> displays the list of files contained in such an archive, <code
                class="command">ar x <em
                  class="replaceable">archive</em></code> extracts the files from the archive into the current working directory, <code
                class="command">ar d <em
                  class="replaceable">archive</em> <em
                  class="replaceable">file</em></code> deletes a file from the archive, etc. Its man page (<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>) documents all its other features. <code
                class="command">ar</code> is a very rudimentary tool that a Unix administrator would only use on rare occasions, but admins routinely use <code
                class="command">tar</code>, a more evolved archive and file management program. This is why it is easy to restore <code
                class="command">dpkg</code> in the event of an erroneous deletion. You would only have to download the Debian package and extract the content from the <code
                class="filename">data.tar.xz</code> archive in the system's root (<code
                class="filename">/</code>):
		</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>ar x dpkg_1.18.24_amd64.deb</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>tar -C / -p -xJf data.tar.xz</code></strong></pre></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ZPĚT K ZÁKLADŮM</em></span> Zápis manuálové stránky</strong></p></div></div></div><div
              class="para">
			Pro začátečníky může být matoucí hledat odkazy na “<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>” v literatuře. Všeobecně pohodlným prostředek je nahlédnutí do manuálové stránky pojmenované <code
                class="literal">ar</code> v sekci 1.
		</div><div
              class="para">
			Někdy se tento zápis také používá k odstranění nejasností, například k rozlišení mezi příkazem <code
                class="command">printf</code>, který může být také označován <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(1)</span> a funkcí <code
                class="function">printf</code> programovacího jazyka C, který může být také zavolán jako <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(3)</span>.
		</div><div
              class="para">
			<a
                class="xref"
                href="solving-problems.html">7 – „<em>Solving Problems and Finding Relevant Information</em>“</a> manuálovým stránkám se detailněji věnuje (viz. <a
                class="xref"
                href="solving-problems.html#sect.manual-pages">7.1.1 – „Manual Pages“</a>).
		</div></div><div
            class="para">
			Podívejme se na obsah souboru <code
              class="filename">.deb</code>:
		</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ar t dpkg_1.18.24_amd64.deb</code></strong>
<code
              class="computeroutput">debian-binary
control.tar.gz
data.tar.xz
$ </code><strong
              class="userinput"><code>ar x dpkg_1.18.24_amd64.deb</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ls</code></strong>
<code
              class="computeroutput">control.tar.gz  data.tar.xz  debian-binary  dpkg_1.18.24_amd64.deb
$ </code><strong
              class="userinput"><code>tar tJf data.tar.xz | head -n 15</code></strong>
<code
              class="computeroutput">./
./etc/
./etc/alternatives/
./etc/alternatives/README
./etc/cron.daily/
./etc/cron.daily/dpkg
./etc/dpkg/
./etc/dpkg/dpkg.cfg
./etc/dpkg/dpkg.cfg.d/
./etc/logrotate.d/
./etc/logrotate.d/dpkg
./sbin/
./sbin/start-stop-daemon
./usr/
./usr/bin/
$ </code><strong
              class="userinput"><code>tar tzf control.tar.gz</code></strong>
<code
              class="computeroutput">./
./conffiles
./postinst
./md5sums
./prerm
./control
./postrm
$ </code><strong
              class="userinput"><code>cat debian-binary</code></strong>
<code
              class="computeroutput">2.0</code></pre><div
            class="para">
			Jak můžete vidět, archiv <code
              class="command">ar</code> balíčku Debianu se skládá ze tří souborů:
		</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">debian-binary</code>. This is a text file which simply indicates the version of the <code
                    class="filename">.deb</code> file used (in 2017: version 2.0).
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">control.tar.gz</code>. Tento archivovaný soubor obsahuje všechny dostupné meta-informace, jako jméno a verzi balíčku. Některé z těchto meta-informací umožňují nástrojůmpro správu balíčků určit, zda je jej možno instalovat nebo odinstalovat, například na základě seznamu balíčků již přítomných na zařízení.
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">data.tar.xz</code>. This archive contains all of the files to be extracted from the package; this is where the executable files, documentation, etc., are all stored. Some packages may use other compression formats, in which case the file will be named differently (<code
                    class="filename">data.tar.bz2</code> for bzip2, <code
                    class="filename">data.tar.gz</code> for gzip).
				</div></li></ul></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>Předcházející</strong>4.3. Po prvním bootování</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nahoru</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Domů</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>Další</strong>5.2. Meta-informace balíčku</a></li></ul></body></html>
