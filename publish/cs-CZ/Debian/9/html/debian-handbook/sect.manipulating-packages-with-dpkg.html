<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.4. Manipulace s balíčkem za použití dpkg</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-cs-CZ-1.0-1" /><meta
        name="keywords"
        content="Binární balíček, Zdrojový balíček, dpdg, závislosti, konflikt" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="packaging-system.html"
        title="Kapitola 5. Balíčkový systém: Nástroje a základní principy" /><link
        rel="prev"
        href="sect.source-package-structure.html"
        title="5.3. Struktura zdrojového balíčku" /><link
        rel="next"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. Soužití s jiným balíčkovacím systémem" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/cs-CZ/stable/sect.manipulating-packages-with-dpkg.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.source-package-structure.html"><strong>Předcházející</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Další</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.manipulating-packages-with-dpkg"></a>5.4. Manipulace s balíčkem za použití <code
                  class="command">dpkg</code></h2></div></div></div><a
          id="id-1.8.8.2"
          class="indexterm"></a><div
          class="para">
			<code
            class="command">dpkg</code> je základní příkaz pro manipulaci s balíčky Debianu v systému. Pokud máte balíčky <code
            class="filename">.deb</code>, je to <code
            class="command">dpkg</code>, co vám umožní instalaci nebo analýzu jejich obsahu. Tento program má ovšem pouze částečný přehled o vesmíru Debianu: ví, co je v systému nainstalováno a co je uvedeno na příkazovém řádku, ale neví nic o ostatních dostupných balíčcích. A tak selže, pokud závislosti nejsou naplněny. Oproti tomu nástroje jako je <code
            class="command">apt</code>, vytvoří seznam závislostí za účelem instalace všeho, automaticky, jak jen to bude možné.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>POZNÁMKA</em></span> <code
                      class="command">dpkg</code> nebo <code
                      class="command">apt</code>?</strong></p></div></div></div><div
            class="para">
			Na <code
              class="command">dpkg</code> by se mělo nazírat jako na systémový nástroj (backend) a na <code
              class="command">apt</code> jako na nástroj bližší uživateli, což překonává omezení prvně jmenovaného. Tyto nástroje pracují společně, každý se svými zvláštnostmi, hodícími se pro specifické úkoly.
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.5"></a>5.4.1. Instalace balíčků</h3></div></div></div><a
            id="id-1.8.8.5.2"
            class="indexterm"></a><a
            id="id-1.8.8.5.3"
            class="indexterm"></a><div
            class="para">
				<code
              class="command">dpkg</code> je, mimo jiné, nástroj pro instalaci již dostupných balíčků Debianu (protože tento nástroj nic nestahuje). Abychom tak učinili, používáme volbu <code
              class="literal">-i</code> nebo <code
              class="literal">--install</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.5.5"></a><p
              class="title"><strong>Příklad 5.2. Instalace balíčku za použití <code
                  class="command">dpkg</code></strong></p><div
              class="example-contents"><pre
                class="screen scale">
<code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>dpkg -i man-db_2.7.6.1-2_amd64.deb</code></strong>
<code
                  class="computeroutput">(Reading database ... 110431 files and directories currently installed.)
Preparing to unpack man-db_2.7.6.1-2_amd64.deb ...
Unpacking man-db (2.7.6.1-2) over (2.7.6.1-1) ...
Setting up man-db (2.7.6.1-2) ...
Updating database of manual pages ...
Processing triggers for mime-support (3.60) ...</code></pre></div></div><div
            class="para">
				Můžeme vidět různé kroky, které <code
              class="command">dpkg</code> vykonal; tak víme, ve kterém bodě se mohla jakákoli vyskytnout. Instalace se také může uskutečnit ve dvou fázích: nejdříve rozbalení a potom nastavení. <code
              class="command">apt-get</code> toho využívá a omezuje počet volání <code
              class="command">dpkg</code> (protože každé volání je nákladné, z důvodu nahrávání databáze do paměti, především pak seznamu již nainstalovaných souborů).
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.5.7"></a><p
              class="title"><strong>Příklad 5.3. Oddělené rozbalení a nastavení</strong></p><div
              class="example-contents"><pre
                class="screen scale">
<code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>dpkg --unpack man-db_2.7.6.1-2_amd64.deb</code></strong>
<code
                  class="computeroutput">(Reading database ... 110431 files and directories currently installed.)
Preparing to unpack man-db_2.7.6.1-2_amd64.deb ...
Unpacking man-db (2.7.6.1-2) over (2.7.6.1-2) ...
Processing triggers for mime-support (3.60) ...
# </code><strong
                  class="userinput"><code>dpkg --configure man-db</code></strong>
<code
                  class="computeroutput">Setting up man-db (2.7.6.1-2) ...
Updating database of manual pages ...
</code></pre></div></div><a
            id="id-1.8.8.5.8"
            class="indexterm"></a><a
            id="id-1.8.8.5.9"
            class="indexterm"></a><div
            class="para">
				Někdy <code
              class="command">dpkg</code> při instalaci selže a vrátí nějakou chybu; pokud to uživatel přikáže ignorovat, pouze zobrazí varování; je to z toho důvodu, že máme různé <code
              class="literal">--force-*</code> volby. Příkaz <code
              class="command">dpkg --force-help</code>, nebo dokumentace tohoto příkazu, poskytne úplný výpis těchto možností. Nejčastější chybou, se kterou se musíte dříve nebo později setkat, je kolize souborů. Pokud balíček obsahuje soubor, který už nainstaloval jiný balíček, <code
              class="command">dpkg</code> jej odmítne instalovat. Potom se objeví následující sdělení:
			</div><pre
            class="screen">
<code
              class="computeroutput">Unpacking libgdm (from .../libgdm_3.8.3-2_amd64.deb) ...
dpkg: error processing /var/cache/apt/archives/libgdm_3.8.3-2_amd64.deb (--unpack):
 trying to overwrite '/usr/bin/gdmflexiserver', which is also in package gdm3 3.4.1-9</code></pre><div
            class="para">
				V tomto případě, pokud si myslíte, že nahrazení tohoto souboru neznamená podstatnou hrozbu pro stabilitu vašeho systému (což je obvyklý případ), můžete použít volbu <code
              class="literal">--force-overwrite</code>, což řekne <code
              class="command">dpkg</code>, aby tuto chybu ignoroval a přepsal soubor.
			</div><div
            class="para">
				Zatímco existuje mnoho <code
              class="literal">--force-*</code> možností, pouze u <code
              class="literal">--force-overwrite</code> se předpokládá jeho častné používání. Tyto volby jsou určeny pouze pro vyjímečné situace a je lepší je pokud možno nechat být a respektovat pravidla zavedená balíčkovacím mechanismem. Nezapomínejte, že tato pravidla zajišťují celistvost a stabilitu vašeho systému.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>UPOZORNĚNÍ</em></span> Účinné používání <code
                        class="literal">--force-*</code></strong></p></div></div></div><a
              id="id-1.8.8.5.14.2"
              class="indexterm"></a><div
              class="para">
				Pokud nejste opatrní, použití možnosti <code
                class="literal">--force-*</code> může vést k systému, kdy rodina příkazů APT odmítne pracovat. V podstatě, některé z možností umožňují instalaci balíčku, když závislosti nejsou splněny nebo když existuje nějaký konflikt. Výsledkem je nekonzistentní systém z hlediska závislostí a příkazy APT odmítnou spustit jakoukoliv akci, kromě těch, které povedou k navrácení systému zpět do konzistentního stavu (to často spolčívá v instalaci chybějící závislosti nebo odstranění problematického balíčku). Výsledkem často bývá zpráva jako je tato, získaná po instalaci nové verze <span
                class="pkg pkg">rdesktop</span>, za které se ignorovala jeho závislost na nové verzi <span
                class="pkg pkg">libc6</span>:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt full-upgrade
</code></strong><code
                class="computeroutput">[...]
You might want to run 'apt-get -f install' to correct these.
The following packages have unmet dependencies:
  rdesktop: Depends: libc6 (&gt;= 2.5) but 2.3.6.ds1-13etch7 is installed
E: Unmet dependencies. Try using -f.</code></pre><div
              class="para">
				Odvážný administrátor, který si je jistý správností své analýzy, může zvolit ignorování závislosti nebo konfliktu a použít možnost <code
                class="literal">--force-*</code>. V tomto případě, pokud chce být schopen pokračovat v používání <code
                class="command">apt</code> nebo <code
                class="command">aptitude</code>, musí provést korekturu <code
                class="filename">/var/lib/dpkg/status</code> a smazat/upravit závislostnebo konflikt, který si zvolil nebrat v úvahu.
			</div><div
              class="para">
				Taková manipulace je škaredé nabourání se a neměla by být nikdy realizována, kromě nejkrajnějších případů nutnosti. Nejčastěji je vhodnější znovu zkompilovat balíček, který zapříčiňuje problém (více v <a
                class="xref"
                href="debian-packaging.html#sect.rebuilding-package">15.1 – „Rebuilding a Package from its Sources“</a>) nebo použít novou verzi (potenciálně opravenou) z úložiště jako je <code
                class="literal">stable-backports</code> (více v <a
                class="xref"
                href="apt.html#sect.backports">6.1.2.4 – „Stable Backports“</a>).
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.6"></a>5.4.2. Odstranění balíčků</h3></div></div></div><a
            id="id-1.8.8.6.2"
            class="indexterm"></a><a
            id="id-1.8.8.6.3"
            class="indexterm"></a><a
            id="id-1.8.8.6.4"
            class="indexterm"></a><a
            id="id-1.8.8.6.5"
            class="indexterm"></a><div
            class="para">
				Volání <code
              class="command">dpkg</code> s volbou <code
              class="literal">-r</code> nebo <code
              class="literal">--remove</code>, následovanou jménem balíčku, odstraní tento balíček. Toto odstranění je, nicméně, nekompletní: všechny nastavovací soubory, správcovské skripty, záznamové soubory (logy systému) a ostatní uživatelská data zpracovávaná balíčkem, zůstávají. Tento způsob vyřazení programu z činnosti je snadno proveden jeho odinstalováním a je stále možné jej rychle znovu nainstalovat v tom samém nastavení. Ke kompletnímu odstranění všeho, co souvisí s balíčkem, použijte volbu <code
              class="literal">-P</code> or <code
              class="literal">--purge</code>, následovanou jménem balíčku.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.6.7"></a><p
              class="title"><strong>Příklad 5.4. Odstranění a očištění od balíčku <span
                  class="pkg pkg">debian-cd</span></strong></p><div
              class="example-contents"><pre
                class="screen"><code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>dpkg -r debian-cd</code></strong>
<code
                  class="computeroutput">(Reading database ... 112188 files and directories currently installed.)
Removing debian-cd (3.1.20) ...
# </code><strong
                  class="userinput"><code>dpkg -P debian-cd</code></strong>
<code
                  class="computeroutput">(Reading database ... 111613 files and directories currently installed.)
Purging configuration files for debian-cd (3.1.20) ...
</code></pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.7"></a>5.4.3. Dotazování se databáze <code
                    class="command">dpkg</code> a prozkoumání souborů <code
                    class="filename">.deb</code></h3></div></div></div><a
            id="id-1.8.8.7.2"
            class="indexterm"></a><a
            id="id-1.8.8.7.3"
            class="indexterm"></a><a
            id="id-1.8.8.7.4"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ZPĚT K ZÁKLADŮM</em></span> Alternativní syntax</strong></p></div></div></div><div
              class="para">
				Většina voleb je k dispozici v “dlouhé” verzi (jedno nebo více příslušných slov před nimiž je dvojitá pomlčka) a “krátké” verzi (jedno písmeno, často počáteční jednoho slova z dlouhé verze, před nímž je jednoduchá pomlčka). Tato konvence je tak běžná, že je POSIX standardem.
			</div></div><div
            class="para">
				Než uzavřeme tuto sekci, podíváme se na volby <code
              class="command">dpkg</code>, které se dotazují interní databáze za účelem obdržení informace. Předložením nejdříve dlouhých voleb a potom odpovídajících krátkých voleb (které zjevně přijímají ty samé možné argumenty) uvádíme <code
              class="literal">--listfiles <em
                class="replaceable">balíček</em></code> (nebo <code
              class="literal">-L</code>), který vypisuje soubory nainstalované tímto balíčkem; <code
              class="literal">--search <em
                class="replaceable">soubor</em></code> (nebo <code
              class="literal">-S</code>), který nalezne balíček (balíčky) obsahující tento soubor; <code
              class="literal">--status <em
                class="replaceable">balíček</em></code> (nebo <code
              class="literal">-s</code>), který zobrazí hlavičky nainstalovaného balíčku; <code
              class="literal">--list</code> (nebo <code
              class="literal">-l</code>), zobrazí seznam balíčků známých systému a jejich instalační status; <code
              class="literal">--contents <em
                class="replaceable">soubor.deb</em></code> (nebo <code
              class="literal">-c</code>), který vypíše soubory ve specifikovaném balíčku Debianu; <code
              class="literal">--info<em
                class="replaceable"> soubor.deb </em></code> (nebo <code
              class="literal">-I</code>), který zobrazí hlavičky tohoto balíčku Debianu.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.7.7"></a><p
              class="title"><strong>Příklad 5.5. Různé dotazování s <code
                  class="command">dpkg</code></strong></p><div
              class="example-contents"><pre
                class="screen scale"
                width="80">
<code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>dpkg -L base-passwd</code></strong>
<code
                  class="computeroutput">/.
/usr
/usr/sbin
/usr/sbin/update-passwd
/usr/share
/usr/share/base-passwd
/usr/share/base-passwd/group.master
/usr/share/base-passwd/passwd.master
/usr/share/doc
/usr/share/doc/base-passwd
/usr/share/doc/base-passwd/README
/usr/share/doc/base-passwd/changelog.gz
/usr/share/doc/base-passwd/copyright
/usr/share/doc/base-passwd/users-and-groups.html
/usr/share/doc/base-passwd/users-and-groups.txt.gz
/usr/share/doc-base
/usr/share/doc-base/users-and-groups
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/base-passwd
/usr/share/man
/usr/share/man/de
/usr/share/man/de/man8
/usr/share/man/de/man8/update-passwd.8.gz
/usr/share/man/es
/usr/share/man/es/man8
/usr/share/man/es/man8/update-passwd.8.gz
/usr/share/man/fr
/usr/share/man/fr/man8
/usr/share/man/fr/man8/update-passwd.8.gz
/usr/share/man/ja
/usr/share/man/ja/man8
/usr/share/man/ja/man8/update-passwd.8.gz
/usr/share/man/man8
/usr/share/man/man8/update-passwd.8.gz
/usr/share/man/pl
/usr/share/man/pl/man8
/usr/share/man/pl/man8/update-passwd.8.gz
/usr/share/man/ru
/usr/share/man/ru/man8
/usr/share/man/ru/man8/update-passwd.8.gz
$ </code><strong
                  class="userinput"><code>dpkg -S /bin/date</code></strong>
<code
                  class="computeroutput">coreutils: /bin/date
$ </code><strong
                  class="userinput"><code>dpkg -s coreutils</code></strong>
<code
                  class="computeroutput">Package: coreutils
Essential: yes
Status: install ok installed
Priority: required
Section: utils
Installed-Size: 15103
Maintainer: Michael Stone &lt;mstone@debian.org&gt;
Architecture: amd64
Multi-Arch: foreign
Version: 8.26-3
Replaces: mktemp, realpath, timeout
Pre-Depends: libacl1 (&gt;= 2.2.51-8), libattr1 (&gt;= 1:2.4.46-8), libc6 (&gt;= 2.17), libselinux1 (&gt;= 2.1.13)
Conflicts: timeout
Description: GNU core utilities
 This package contains the basic file, shell and text manipulation
 utilities which are expected to exist on every operating system.
 .
 Specifically, this package includes:
 arch base64 basename cat chcon chgrp chmod chown chroot cksum comm cp
 csplit cut date dd df dir dircolors dirname du echo env expand expr
 factor false flock fmt fold groups head hostid id install join link ln
 logname ls md5sum mkdir mkfifo mknod mktemp mv nice nl nohup nproc numfmt
 od paste pathchk pinky pr printenv printf ptx pwd readlink realpath rm
 rmdir runcon sha*sum seq shred sleep sort split stat stty sum sync tac
 tail tee test timeout touch tr true truncate tsort tty uname unexpand
 uniq unlink users vdir wc who whoami yes
Homepage: http://gnu.org/software/coreutils
$ </code><strong
                  class="userinput"><code>dpkg -l 'b*'</code></strong>
<code
                  class="computeroutput">Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                 Version         Architecture    Description
+++-====================-===============-===============-=============================================
un  backupninja          &lt;none&gt;          &lt;none&gt;          (no description available)
un  backuppc             &lt;none&gt;          &lt;none&gt;          (no description available)
un  baekmuk-ttf          &lt;none&gt;          &lt;none&gt;          (no description available)
un  base                 &lt;none&gt;          &lt;none&gt;          (no description available)
un  base-config          &lt;none&gt;          &lt;none&gt;          (no description available)
ii  base-files           9.9+deb9u1      amd64           Debian base system miscellaneous files
ii  base-passwd          3.5.43          amd64           Debian base system master password and group 
ii  bash                 4.4-5           amd64           GNU Bourne Again SHell
[...]
$ </code><strong
                  class="userinput"><code>dpkg -c /var/cache/apt/archives/gnupg_2.1.18-8~deb9u1_amd64.deb</code></strong>
<code
                  class="computeroutput">drwxr-xr-x root/root         0 2017-09-18 20:41 ./
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/bin/
-rwxr-xr-x root/root    996648 2017-09-18 20:41 ./usr/bin/gpg
-rwxr-xr-x root/root      3444 2017-09-18 20:41 ./usr/bin/gpg-zip
-rwxr-xr-x root/root    161192 2017-09-18 20:41 ./usr/bin/gpgconf
-rwxr-xr-x root/root     26696 2017-09-18 20:41 ./usr/bin/gpgparsemail
-rwxr-xr-x root/root     76112 2017-09-18 20:41 ./usr/bin/gpgsplit
-rwxr-xr-x root/root    158344 2017-09-18 20:41 ./usr/bin/kbxutil
-rwxr-xr-x root/root      1081 2014-06-25 16:17 ./usr/bin/lspgpot
-rwxr-xr-x root/root      2194 2017-09-18 20:41 ./usr/bin/migrate-pubring-from-classic-gpg
-rwxr-xr-x root/root     14328 2017-09-18 20:41 ./usr/bin/watchgnupg
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/sbin/
-rwxr-xr-x root/root      3078 2017-09-18 20:41 ./usr/sbin/addgnupghome
-rwxr-xr-x root/root      2219 2017-09-18 20:41 ./usr/sbin/applygnupgdefaults
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/share/
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/share/doc/
drwxr-xr-x root/root         0 2017-09-18 20:41 ./usr/share/doc/gnupg/
-rw-r--r-- root/root     18964 2017-01-23 18:39 ./usr/share/doc/gnupg/DETAILS.gz
[...]
$ </code><strong
                  class="userinput"><code>dpkg -I /var/cache/apt/archives/gnupg_2.1.18-8~deb9u1_amd64.deb</code></strong>
<code
                  class="computeroutput"> new debian package, version 2.0.
 size 1124042 bytes: control archive=2221 bytes.
    1388 bytes,    24 lines      control              
    2764 bytes,    43 lines      md5sums              
 Package: gnupg
 Source: gnupg2
 Version: 2.1.18-8~deb9u1
 Architecture: amd64
 Maintainer: Debian GnuPG Maintainers &lt;pkg-gnupg-maint@lists.alioth.debian.org&gt;
 Installed-Size: 2088
 Depends: gnupg-agent (= 2.1.18-8~deb9u1), libassuan0 (&gt;= 2.0.1), libbz2-1.0, libc6 (&gt;= 2.15), libgcrypt20 (&gt;= 1.7.0), libgpg-error0 (&gt;= 1.14), libksba8 (&gt;= 1.3.4), libreadline7 (&gt;= 6.0), libsqlite3-0 (&gt;= 3.7.15), zlib1g (&gt;= 1:1.1.4)
 Recommends: dirmngr (= 2.1.18-8~deb9u1), gnupg-l10n (= 2.1.18-8~deb9u1)
 Suggests: parcimonie, xloadimage
 Breaks: debsig-verify (&lt;&lt; 0.15), dirmngr (&lt;&lt; 2.1.18-8~deb9u1), gnupg2 (&lt;&lt; 2.1.11-7+exp1), libgnupg-interface-perl (&lt;&lt; 0.52-3), libgnupg-perl (&lt;= 0.19-1), libmail-gnupg-perl (&lt;= 0.22-1), monkeysphere (&lt;&lt; 0.38~), php-crypt-gpg (&lt;= 1.4.1-1), python-apt (&lt;= 1.1.0~beta4), python-gnupg (&lt;&lt; 0.3.8-3), python3-apt (&lt;= 1.1.0~beta4)
 Replaces: gnupg2 (&lt;&lt; 2.1.11-7+exp1)
 Provides: gpg
 Section: utils
 Priority: optional
 Multi-Arch: foreign
 Homepage: https://www.gnupg.org/
 Description: GNU privacy guard - a free PGP replacement
  GnuPG is GNU's tool for secure communication and data storage.
  It can be used to encrypt data and to create digital signatures.
  It includes an advanced key management facility and is compliant
  with the proposed OpenPGP Internet standard as described in RFC4880.
[...]</code></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>JDEME DÁLE</em></span> Srovnání verzí</strong></p></div></div></div><a
              id="id-1.8.8.7.8.2"
              class="indexterm"></a><a
              id="id-1.8.8.7.8.3"
              class="indexterm"></a><div
              class="para">
				Protože <code
                class="command">dpkg</code> je program pro manipulování s balíčky Debianu, poskytuje také referenční implementaci logiky pro porovnávání čísel verzí. To je důvod, proč má také volbu <code
                class="literal">--compare-versions</code>, použitelnou externími programy (především nastavovacími skripty spušťěnými samotným <code
                class="command">dpkg</code>). Tato volba vyžaduje tři parametry: číslo verze, operátor porovnání a druhé číslo verze. Různé možné operátory jsou <code
                class="literal">lt</code> (čistě menší než), <code
                class="literal">le</code> (menší nebo rovno), <code
                class="literal">eq</code> (rovno) <code
                class="literal">ne</code> (nerovná se), <code
                class="literal">ge</code> (větší nebo rovno), a <code
                class="literal">gt</code> (čistě větší než). Pokud je porovnání pravdivé, <code
                class="command">dpkg</code> vrací 0 (úspěch); pokud ne, vrátí nenulové číslo (značící neúspěch).
			</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --compare-versions 1.2-3 gt 1.1-4</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">0
$ </code><strong
                class="userinput"><code>dpkg --compare-versions 1.2-3 lt 1.1-4</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">1
$ </code><strong
                class="userinput"><code>dpkg --compare-versions 2.6.0pre3-1 lt 2.6.0-1</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">1</code></pre><div
              class="para">
				Všimněte si neočekávaného selhání v případě posledního srovnání: pro <code
                class="command">dpkg</code>, <code
                class="literal">pre</code>, obyčejně značící verzi před oficiálním vydáním, nemá speciální význam a tak tento program srovnává znaky abecedy stejným způsobem jako čísla (a &lt; b &lt; c ...), v abecedním pořadí. Proto považuje “<code
                class="literal">0pre3</code>” za větší, než “<code
                class="literal">0</code>”. Pokud chceme, aby číslo verze balíčku označovalo verzi, která je před oficiálním vydáním, používáme znak vlnovky, “<code
                class="literal">~</code>”:
			</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --compare-versions 2.6.0~pre3-1 lt 2.6.0-1</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">0</code></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.8"></a>5.4.4. Log soubor programu <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				<code
              class="command">dpkg</code> uchovává logové záznamy všech svých akcí v <code
              class="filename">/var/log/dpkg.log</code>. Tento log je extrémně upovídaný, protože důkladně popisuje každou etapu, kterou balíček, s kterým <code
              class="command">dpkg</code> manipuluje, prochází. Mimo to, že nabízí způsob zpětného sledování chování dpkg, především uchovává historii vývoje systému: dá se najít přesný moment, kdy byl jakýkoli balíček nainstalován nebo zaktualizován, což může být neobyčejně užitečná informace pro pochopení aktuální změny v chování. Navíc, se záznamem všech verzí, je snadné informace pro všechny dotčené balíčky ověřit s <code
              class="filename">changelog.Debian.gz</code> nebo dokonce s hlášeními chyb, které jsou k dispozici online.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.multi-arch"></a>5.4.5. Vícearchitekturová podpora</h3></div></div></div><a
            id="id-1.8.8.9.2"
            class="indexterm"></a><a
            id="id-1.8.8.9.3"
            class="indexterm"></a><div
            class="para">
				Všechny balíčky Debianu mají ve svých kontrolních informacích pole <code
              class="literal">Architecture</code>. Toto pole může obsahovat buď “<code
              class="literal">all</code>” (u balíčků, které jsou nazávislé na architektuře) nebo jméno architektury, na kterou se zaměřují (jako je “amd64”, “armhf”, …). V případě posledního jmenovaného je přednastveno, že <code
              class="command">dpkg</code> bude akceptovat instalaci balíčku pouze pokud jeho architektura odpovídá hostitelské architektuře podle výstupu <code
              class="command">dpkg --print-architecture</code>.
			</div><div
            class="para">
				Toto omezení zaručuje, že uživatelé neskončí s binárním programem sestaveným pro nesprávnou architekturu. Všechno by bylo perfektní, až na to, že, na (některých) počítačích mohou běžet binární programy určené pro více architektur, ať už přirozeně (na systému “amd64“ binární programy pro “i386”) nebo prostřednictvím emulátorů.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.8.9.6"></a>5.4.5.1. Umožnění vícearchitekturové podpory</h4></div></div></div><div
              class="para">
					<code
                class="command">dpkg</code> má vícearchitekturovou podporu, která umožňuje uživatelům definovat “cizí architektury”, které mohou být na současném systému naistalovány. To se jednoduše provede pomocí <code
                class="command">dpkg --add-architecture</code> jak ukazuje níže uvedený příklad. Existuje také odpovídající <code
                class="command">dpkg --remove-architecture</code>, který vyloučí cizí architekturu, ten se ale může použít pouze pokud žádné balíčky pro tuto architekturu nezůstanou.
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-architecture</code></strong>
<code
                class="computeroutput">amd64
# </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg -i gcc-6-base_6.3.0-18_armhf.deb</code></strong>
<code
                class="computeroutput">dpkg: error processing archive gcc-6-base_6.3.0-18_armhf.deb (--install):
 package architecture (armhf) does not match system (amd64)
Errors were encountered while processing:
 gcc-6-base_6.3.0-18_armhf.deb
# </code><strong
                class="userinput"><code>dpkg --add-architecture armhf</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --add-architecture armel</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput">armhf
armel
# </code><strong
                class="userinput"><code>dpkg -i gcc-6-base_6.3.0-18_armhf.deb</code></strong>
<code
                class="computeroutput">Selecting previously unselected package gcc-6-base:armhf.
(Reading database ... 112000 files and directories currently installed.)
Preparing to unpack gcc-6-base_6.3.0-18_armhf.deb ...
Unpacking gcc-6-base:armhf (6.3.0-18) ...
Setting up gcc-6-base:armhf (6.3.0-18) ...
# </code><strong
                class="userinput"><code>dpkg --remove-architecture armhf</code></strong>
<code
                class="computeroutput">dpkg: error: cannot remove architecture 'armhf' currently in use by the database
# </code><strong
                class="userinput"><code>dpkg --remove-architecture armel</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput">armhf</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>POZNÁMKA</em></span> vícearchitekturová podpora APTu</strong></p></div></div></div><div
                class="para">
					APT automaticky zjistí, že dpkg byl nakonfigurován pro podporu cizích architektur a spustí stahování odpovídajících <code
                  class="filename">Packages</code> souborů během svého procesu aktualizace.
				</div><div
                class="para">
					Cizí balíčky se poté mohou prostřednictvím <code
                  class="command">apt install <em
                    class="replaceable">package</em>:<em
                    class="replaceable">architecture</em></code> instalovat
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>V PRAXI</em></span> Používání proprietárních binárních progamů pro i386 na amd64</strong></p></div></div></div><div
                class="para">
					There are multiple use cases for multi-arch, but the most popular one is the possibility to execute 32 bit binaries (i386) on 64 bit systems (amd64).
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.8.9.7"></a>5.4.5.2. Změny související s vícearchitekturovou podporou</h4></div></div></div><div
              class="para">
					To make multi-arch actually useful and usable, libraries had to be repackaged and moved to an architecture-specific directory so that multiple copies (targeting different architectures) can be installed alongside. Such updated packages contain the “<code
                class="literal">Multi-Arch: same</code>” header field to tell the packaging system that the various architectures of the package can be safely co-installed (and that those packages can only satisfy dependencies of packages of the same architecture). The most important libraries have been converted since the introduction of multi-arch in Debian <span
                class="distribution distribution">Wheezy</span>, but there are many libraries that will likely never be converted unless someone specifically requests it (through a bug report for example).
				</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg -s gcc-6-base
</code></strong><code
                class="computeroutput">dpkg-query: error: --status needs a valid package name but 'gcc-6-base' is not: ambiguous package name 'gcc-6-base' with more than one installed instance

Use --help for help about querying packages.
$ </code><strong
                class="userinput"><code>dpkg -s gcc-6-base:amd64 gcc-6-base:armhf | grep ^Multi
</code></strong><code
                class="computeroutput">Multi-Arch: same
Multi-Arch: same
$ </code><strong
                class="userinput"><code>dpkg -L libgcc1:amd64 |grep .so
</code></strong><code
                class="computeroutput">/lib/x86_64-linux-gnu/libgcc_s.so.1
$ </code><strong
                class="userinput"><code>dpkg -S /usr/share/doc/gcc-6-base/copyright
</code></strong><code
                class="computeroutput">gcc-6-base:amd64, gcc-6-base:armhf: /usr/share/doc/gcc-6-base/copyright
</code></pre><div
              class="para">
					Stojí za zmínku, že balíčky <code
                class="literal">Multi-Arch: same</code> musí mít svá jména označena svou architekturou, aby byly jednoznačně identifikovatelné. Mají také možnost sdílení souborů s ostatními instancemi toho samého balíčku; <code
                class="command">dpkg</code> zajišťuje, že všechny balíčky mají bit po bitu stejné soubory, pokud jsou sdíleny. V neposlední řadě, všechny instance balíčku musí mít stejnou verzi. Musí být tedy vylepšovány společně.
				</div><div
              class="para">
					Vícearchitekturová podpora sebou také přínáší některé zajímavé výzvy ve způsobu, jakým jsou řešeny závislosti. Splnění závislosti vyžaduje buď balíček označený “<code
                class="literal">Multi-Arch: foreign</code>” nebo balíček, jehož architektura odpovídá jedné z balíčku, který tuto závislost deklaruje (v případě tohoto procesu rozpoznávání závislostí, na architektuře nezávislé balíčky jsou považovány za balíčky stejné architektury jako je hostitel). Závislost může být také oslabena tím, že povolí jakékoli architektuře ji naplnit a to pomocí synaxe <code
                class="literal"><em
                  class="replaceable">package</em>:any</code>, ale s tím, že cizí balíčky mohou uspokojit takovou závislost pouze pokud jsou označeny “<code
                class="literal">Multi-Arch: allowed</code>”.
				</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.source-package-structure.html"><strong>Předcházející</strong>5.3. Struktura zdrojového balíčku</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nahoru</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Domů</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Další</strong>5.5. Soužití s jiným balíčkovacím systémem</a></li></ul></body></html>
