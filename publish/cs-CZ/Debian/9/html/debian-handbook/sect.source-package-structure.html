<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.3. Struktura zdrojového balíčku</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-cs-CZ-1.0-1" /><meta
        name="keywords"
        content="Binární balíček, Zdrojový balíček, dpdg, závislosti, konflikt" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="packaging-system.html"
        title="Kapitola 5. Balíčkový systém: Nástroje a základní principy" /><link
        rel="prev"
        href="sect.package-meta-information.html"
        title="5.2. Meta-informace balíčku" /><link
        rel="next"
        href="sect.manipulating-packages-with-dpkg.html"
        title="5.4. Manipulace s balíčkem za použití dpkg" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/cs-CZ/stable/sect.source-package-structure.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Předcházející</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>Další</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.source-package-structure"></a>5.3. Struktura zdrojového balíčku</h2></div></div></div><a
          id="id-1.8.7.2"
          class="indexterm"></a><a
          id="id-1.8.7.3"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.7.4"></a>5.3.1. Formát</h3></div></div></div><a
            id="id-1.8.7.4.2"
            class="indexterm"></a><a
            id="id-1.8.7.4.3"
            class="indexterm"></a><a
            id="id-1.8.7.4.4"
            class="indexterm"></a><a
            id="id-1.8.7.4.5"
            class="indexterm"></a><div
            class="para">
				A source package is usually comprised of three files, a <code
              class="filename">.dsc</code>, a <code
              class="filename">.orig.tar.gz</code>, and a <code
              class="filename">.debian.tar.xz</code> (or <code
              class="filename">.diff.gz</code>). They allow creation of binary packages (<code
              class="filename">.deb</code> files described above) from the source code files of the program, which are written in a programming language.
			</div><div
            class="para">
				Soubor <code
              class="filename">.dsc</code> (Debian Source Control) je krátký textový soubor obsahující hlavičku RFC 2822 (stejně jako soubor <code
              class="filename">control</code> probíraný v <a
              class="xref"
              href="sect.package-meta-information.html#sect.control">5.2.1 – „Popis: <code
                class="filename">kontrolní</code> soubor“</a>), který popisuje zdrojový balíček a označuje další soubory, které jsou jeho součástí. Je podepsaný svým správcem, což garantuje autenticitu. Další podrobnosti k tomuto tématu naleznete v <a
              class="xref"
              href="sect.package-authentication.html">6.5 – „Checking Package Authenticity“</a>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.7.4.8"></a><p
              class="title"><strong>Příklad 5.1. Soubor <code
                  class="filename">.dsc</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.65-4
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.8
Vcs-Browser: https://anonscm.debian.org/cgit/collab-maint/zim.git
Vcs-Git: https://anonscm.debian.org/git/collab-maint/zim.git
Build-Depends: debhelper (&gt;= 9), xdg-utils, python (&gt;= 2.6.6-3~), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg, dh-python
Package-List:
 zim deb x11 optional arch=all
Checksums-Sha1:
 4a9be85c98b7f4397800f6d301428d64241034ce 1899614 zim_0.65.orig.tar.gz
 0ec38c990ec7662205dd0c843bf81f9033906a2e 10332 zim_0.65-4.debian.tar.xz
Checksums-Sha256:
 5442f3334395a2beafc5b9a2bbec2e53e38270d4bad696b5c4053dd51dc1ed96 1899614 zim_0.65.orig.tar.gz
 78271df16aa166dce916b3ff4ecd705ed3a8832e49d3ef0bd8738a4fe8dd2b4f 10332 zim_0.65-4.debian.tar.xz
Files:
 63ab7a2070e6d1d3fb32700a851d7b8b 1899614 zim_0.65.orig.tar.gz
 648559b38e04eaf4f6caa97563c057ff 10332 zim_0.65-4.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Comment: Signed by Raphael Hertzog

iQEzBAEBCgAdFiEE1823g1EQnhJ1LsbSA4gdq+vCmrkFAlgzZXkACgkQA4gdq+vC
mrnyXAf+M/PzZFjqk6Hvv1QSbocIDZ3bEqRjVpNLApubsPsEZZT6yw9vypzNE2hZ
/BbLPa0Ntbhew4U+SJpuujV7VnLs9mZgOFuKRHKWYQBQ+oxw+gtM6iePwVj58aP/
LW7K5gE428ohMdjIkf42Lz4Fve3dVPgPLIzQxRZ87N6OKqmS81M6/RRIF3TS/gJp
CwpN1yifCfQs46gxL5/CgA4uhI8taz+g+8ZDd6fL5BQeFuNsgplY4QL1uGno3F7G
VY7WZhM601Re2ePnv+6vjh8kDWMjZhfB4RJy0+hHezuoVGKljyaxc1O4P/fxvXus
CEETju6cAE/HgDubDXDqExMwEd4odA==
=HUvj
-----END PGP SIGNATURE-----</pre></div></div><a
            id="id-1.8.7.4.9"
            class="indexterm"></a><div
            class="para">
				Pamatujte na to, že zdrojový balíček má také závislosti (<code
              class="literal">Build-Depends</code>) zcela odlišné od těch, co má binární balíček, protože značí nástroje potřebné pro kompilaci daného softwaru a sestavují jeho binární balíček.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>UPOZORNĚNÍ</em></span> Odlišné jmenné prostory</strong></p></div></div></div><div
              class="para">
				Je tu důležité upozornit na to, že neexistuje žádná vyžadovaná shoda mezi jménem zdrojového balíčku a binárního balíčku(ů), který je vygenerován. Je to více než nasnadě, když si uvědomíte, že každý zdrojový balíček může vygenerovat několik binárních balíčků. To je důvod, proč soubor <code
                class="filename">.dsc</code> má pole <code
                class="literal">Source</code> a <code
                class="literal">Binary</code> k tomu, aby explicitně jmenovala zdrojový balíček a ukládala seznam binárních balíčků, které generuje.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KULTURA</em></span> Proč rozdělovat do několika balíčků</strong></p></div></div></div><div
              class="para">
				Opravdu často může zdrojový balíček (pro daný software) generovat několik binárních balíčků. Dělení je odůvodněno možností použití softwaru (nebo jeho částí) v různých souvislostech. Vemte si například sdílenou knihovnu, ta může být nainstalována za účelem fungování aplikace (například <span
                class="pkg pkg">libc6</span>) nebo může být nainstalována k vývoji nového programu (<span
                class="pkg pkg">libc6-dev</span> potom bude ten správný balíček). Nalezneme také smysl v případě služeb klient/server, kde chceme nainstalovat serverovou část na jednom zařízení a klientskou část na druhém (to je například u <span
                class="pkg pkg">openssh-server</span> a <span
                class="pkg pkg">openssh-client</span>).
			</div><div
              class="para">
				Stejně často je dokumentace poskytována ve speciálním balíčku: uživatel ho může nainstalovat nezávisle na softwaru a může se jej kdykoliv rozhodnout odstranit, aby ušetřil místo na disku. Navíc, toto také šetří místo na kopiích datového úložiště, protože dokumentační balíček bude sdílen napříč všemi architekturami (místo toho, abychom měli dulpicitní dokumentaci v baléčcích pro každou architekturu).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>PERSPEKTIVA</em></span> Různé formáty zdrojových balíčků</strong></p></div></div></div><div
              class="para">
				Původně existoval pouze jeden formát pro zdrojové balíčky. To je formát <code
                class="literal">1.0</code>, který spojuje archiv <code
                class="filename">.orig.tar.gz</code> s “debianizační” opravou <code
                class="filename">.diff.gz</code> (je také varianta, která se skládá z jednoho archivu <code
                class="filename">.tar.gz</code>, který je automaticky používán, pokud není k dispozici žádný <code
                class="filename">.orig.tar.gz</code>.
			</div><div
              class="para">
				Since Debian <span
                class="distribution distribution">Squeeze</span>, Debian developers have the option to use new formats that correct many problems of the historical format. Format <code
                class="literal">3.0 (quilt)</code> can combine multiple upstream archives in the same source package: in addition to the usual <code
                class="filename">.orig.tar.gz</code>, supplementary <code
                class="filename">.orig-<em
                  class="replaceable">component</em>.tar.gz</code> archives can be included. This is useful with software that is distributed in several upstream components but for which a single source package is desired. These archives can also be compressed with <code
                class="command">xz</code> rather than <code
                class="command">gzip</code>, which saves disk space and network resources. Finally, the monolithic patch, <code
                class="filename">.diff.gz</code> is replaced by a <code
                class="filename">.debian.tar.xz</code> archive containing the compiling instructions and a set of upstream patches contributed by the package maintainer. These last are recorded in a format compatible with <code
                class="command">quilt</code> — a tool that facilitates the management of a series of patches.
			</div></div><div
            class="para">
				Soubor <code
              class="filename">.orig.tar.gz</code> je archiv, který obsahuje zdrojový kód tak, jak jej poskytuje vývojář. Správce balíčku Debianu je požádán, aby neupravoval tento archiv za účelem snadné kontroly původu a celistvosti souboru (použitím jednoduchého srovnání za pomoci checksumu) a respektování přání některých autorů.
			</div><div
            class="para">
				The <code
              class="filename">.debian.tar.xz</code> contains all of the modifications made by the Debian maintainer, especially the addition of a <code
              class="filename">debian</code> directory containing the instructions to execute to construct a Debian package.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NÁSTROJ</em></span> Dekomprimace zdrojového balíčku</strong></p></div></div></div><a
              id="id-1.8.7.4.16.2"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.3"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.4"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.5"
              class="indexterm"></a><div
              class="para">
				Pokud máte zdrojový balíček, můžete použít příkaz <code
                class="command">dpkg-source</code> (z balíčku <span
                class="pkg pkg">dpkg-dev</span>) k dekomprimaci:
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg-source -x package_0.7-1.dsc</code></strong></pre><div
              class="para">
				Můžete také použít <code
                class="command">apt-get</code> ke stažení zdrojového balíčku a jeho okamžitému rozbalení. To každopádně vyžaduje přítomnost příslušných <code
                class="literal">deb-src</code> řádků v souboru <code
                class="filename">/etc/apt/sources.list</code> (pro detailnější informace nahlédněte do <a
                class="xref"
                href="apt.html#sect.apt-sources.list">6.1 – „Vyplňování souboru <code
                  class="filename">sources.list</code>“</a>). Používají se k vypsání “zdrojů” zdrojového balíčku (čímž se rozumí servery, na které jsou skupiny zdrojových balíčků umístěny).
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>apt-get source <em
                    class="replaceable">balíček</em></code></strong></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.7.5"></a>5.3.2. Použití v rámci Debianu</h3></div></div></div><div
            class="para">
				Zdrojový balíček je v Debianu základem všeho. Všechny balíčky Debianu mají svůj původ ve zdrojovém balíčku a každá úprava v balíčku Debianu je důsledkem úpravy učiněné na zdrojovém balíčku. Správci Debianu každopádně pracují se zdrojovým balíčkem s vědomím důsledků své činnosti na binární balíček. Ovoce jejich práce tak může být nalezeno ve zdrojových balíčcích, které jsou od Debianu k dispozici: snadno se k nim můžete vrátit a všechno z nich vyčíst.
			</div><div
            class="para">
				Jakmile dorazí nová verze balíčku na server Debianu (zdrojový balíček a jeden nebo více binárních balíčků), zdrojový balíček je nejdůležitější. Samozřejmě, bude posléze použit sítí zařízení různých architektur ke kompilaci pro různé, Debianem podporované, architektury. Skutečnost, že vývojář posílá také jeden nebo více binárních balíčků pro danou architekturu (obyčejně i386 nebo amd64) je poměrně nedůležitá, protože by mohly být také automaticky vygenerovány.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>Předcházející</strong>5.2. Meta-informace balíčku</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nahoru</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Domů</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>Další</strong>5.4. Manipulace s balíčkem za použití dpkg</a></li></ul></body></html>
