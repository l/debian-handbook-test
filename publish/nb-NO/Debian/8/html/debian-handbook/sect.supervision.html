<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">14.3. Overvåking: Forebygging, avdekking, avskrekking</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Brannmur, Nettfilter, IDS/NIDS" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="security.html"
        title="Kapittel 14. Sikkerhet" /><link
        rel="prev"
        href="sect.firewall-packet-filtering.html"
        title="14.2. Brannmur eller pakkefiltrering" /><link
        rel="next"
        href="sect.apparmor.html"
        title="14.4. Introduksjon til AppArmor" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.supervision.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.firewall-packet-filtering.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.apparmor.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.supervision"></a>14.3. Overvåking: Forebygging, avdekking, avskrekking</h2></div></div></div><a
          id="id-1.17.6.2"
          class="indexterm"></a><div
          class="para">
			Overvåking er en integrert del av ethvert sikkerhetsopplegg av flere grunner. Blant dem er at målet om sikkerhet vanligvis ikke er begrenset til å garantere datakonfidensialitet, men det inkluderer også å sikre tjenestenes tilgjengelighet. Det er derfor viktig å sjekke at alt fungerer som forventet, og å i tide oppdage avvikende atferd eller endring i kvaliteten på tjenesten(e) som blir levert. Å overvåke aktivitet kan bidra til å oppdage inntrengningsforsøk, og muliggjøre en rask reaksjon før de forårsaker alvorlige konsekvenser. Denne delen vurderer noen verktøy som kan brukes til å overvåke flere aspekter av et Debian-systemet. Som sådan, fullfører den <a
            class="xref"
            href="sect.monitoring.html">Seksjon 12.4, «Overvåking»</a>.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.logcheck"></a>14.3.1. Å overvåke logger med <code
                    class="command">logcheck</code></h3></div></div></div><a
            id="id-1.17.6.4.2"
            class="indexterm"></a><a
            id="id-1.17.6.4.3"
            class="indexterm"></a><a
            id="id-1.17.6.4.4"
            class="indexterm"></a><div
            class="para">
				Programmet <code
              class="command">logcheck</code> overvåker loggfiler som standard hver time. Det sender uvanlige loggmeldinger i e-post til administratoren for videre analyse.
			</div><div
            class="para">
				Listen over overvåkede filer lagres i <code
              class="filename">/etc/logcheck/logcheck.logfiles</code>; standardverdiene fungerer fint hvis <code
              class="filename">/etc/rsyslog.conf</code>-filen ikke har blitt fullstendig overhalt.
			</div><div
            class="para">
				<code
              class="command">logcheck</code> kan arbeide i en av tre mer eller mindre detaljerte modi: <span
              class="emphasis"><em>paranoid</em></span>, <span
              class="emphasis"><em>server</em></span> og <span
              class="emphasis"><em>arbeidsstasjon</em></span>. Den første er <span
              class="emphasis"><em>veldig</em></span> ordrik, og bør nok være begrenset til bestemte tjenere slike som brannmurer. Den andre (og standard) modus anbefales for de fleste tjenere. Den siste er beregnet for arbeidsstasjoner, og er mer finslipt (den filtrerer ut flere meldinger).
			</div><div
            class="para">
				I alle tre tilfelle bør nok <code
              class="command">logcheck</code> være tilpasset for å utelukke noen ekstra meldinger (avhengig av installerte tjenester), med mindre admin virkelig hver time ønsker å motta grupper av lange uinteressante e-poster. Siden utvalgsmekanismen for meldinger er ganske komplisert, er filen <code
              class="filename">/usr/share/doc/logcheck-database/README.logcheck-database.gz</code> anbfalt lesning, men utfordrende.
			</div><div
            class="para">
				De anvendte reglene kan deles inn i flere typer:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						de som kvalifiserer en melding som et inntrengningsforsøk (lagret i en fil i <code
                    class="filename">/etc/logcheck/cracking.d/</code>-mappen);
					</div></li><li
                class="listitem"><div
                  class="para">
						de som de avbryter slik kvalifisering (<code
                    class="filename">/etc/logcheck/cracking.ignore.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						de som klassifiserer en melding som en sikkerhetsadvarsel (<code
                    class="filename">/etc/logcheck/violations.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						de som avbryter denne klassifisering (<code
                    class="filename">/etc/logcheck/violations.ignore.d/</code>);
					</div></li><li
                class="listitem"><div
                  class="para">
						til slutt, de som andvendes til de gjenstående budskapene (ansett som <span
                    class="emphasis"><em>systemhendelser</em></span>).
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VÆR VARSOM</em></span> Å ignorere et budskap</strong></p></div></div></div><div
              class="para">
				Alle meldinger merket som et inntrengningsforsøk eller en sikkerhetsadvarsel (etter en regel lagret i en <code
                class="filename">/etc/logcheck/violations.d/myfile</code>-fil), kan bare ignoreres med en regel i en <code
                class="filename">/etc/logcheck/violations.ignore.d/myfile</code> eller <code
                class="filename">/etc/logcheck/violations.ignore.d/myfile-<em
                  class="replaceable">forlengelse</em></code>-fil.
			</div></div><div
            class="para">
				En systemhendelse signaliseres alltid, med mindre en regel i en av <code
              class="filename">/etc/logcheck/ignore.d.{paranoid,server,workstation}/</code>-mappene fastslår at handlingen skal ignoreres. Det er selvfølgelig at de eneste mapper som tas i betraktning, er de som tilsvarer et detaljnivået likt eller større enn den valgte driftsmodus.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.monitoring-activity"></a>14.3.2. Overvåkningsaktivitet</h3></div></div></div><a
            id="id-1.17.6.5.2"
            class="indexterm"></a><a
            id="id-1.17.6.5.3"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.real-time-monitoring"></a>14.3.2.1. I sanntid</h4></div></div></div><div
              class="para">
					<code
                class="command">top</code> is an interactive tool that displays a list of currently running processes. The default sorting is based on the current amount of processor use and can be obtained with the <span
                class="keycap"><strong>P</strong></span> key. Other sort orders include a sort by occupied memory (<span
                class="keycap"><strong>M</strong></span> key), by total processor time (<span
                class="keycap"><strong>T</strong></span> key) and by process identifier (<span
                class="keycap"><strong>N</strong></span> key). The <span
                class="keycap"><strong>k</strong></span> key allows killing a process by entering its process identifier. The <span
                class="keycap"><strong>r</strong></span> key allows <span
                class="emphasis"><em>renicing</em></span> a process, i.e. changing its priority.
				</div><a
              id="id-1.17.6.5.4.3"
              class="indexterm"></a><div
              class="para">
					Når systemet ser ut til å være overbelastet, er <code
                class="command">top</code> et flott verktøy for å se hvilke prosesser som konkurrerer om prosessortid, eller bruker for mye minne. Spesielt er det ofte interessant å sjekke om de prosesser som bruker ressurser samsvarer med reelle tjenester som maskinen er kjent for å være vert for. En ukjent prosess som kjører som www-databruker skal virkelig være synlig og undersøkes, da den sannsynligvis er et tilfelle av at programvare er installert og kjørt på systemet via en sårbarhet i en nett-applikasjon.
				</div><div
              class="para">
					<code
                class="command">top</code> er et svært fleksibelt verktøy, og den tilhørende manuelle siden informerer om hvordan man tilpasser skjermen til personlige behov og vaner.
				</div><div
              class="para">
					<code
                class="command">gnome-system-monitor</code>-grafiske verktøy ligner <code
                class="command">top</code>, og gir grovt sett de samme egenskapene.
				</div><a
              id="id-1.17.6.5.4.7"
              class="indexterm"></a></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.monitoring-history"></a>14.3.2.2. Historie</h4></div></div></div><a
              id="id-1.17.6.5.5.2"
              class="indexterm"></a><div
              class="para">
					Prosessorbelastning, nettverkstrafikk og ledig diskplass er informasjon som stadig varierer. Å beholde en historie med hvordan de endres er ofte nyttig for å bestemme nøyaktig hvordan datamaskinen brukes.
				</div><a
              id="id-1.17.6.5.5.4"
              class="indexterm"></a><a
              id="id-1.17.6.5.5.5"
              class="indexterm"></a><div
              class="para">
					Det finnes mange øremerkede verktøy for denne oppgaven. De fleste kan hente data via SNMP (<span
                class="emphasis"><em>Simple Network Management Protocol</em></span>) for å sentralisere denne informasjonen. En ekstra fordel er at dette gjør at henting av data fra nettverkselementer som kanskje ikke er datamaskiner med et generelt formål, som øremerkede nettverksrutere eller brytere.
				</div><div
              class="para">
					Noe detaljert omhandler denne boken Munin (se <a
                class="xref"
                href="sect.monitoring.html#sect.munin">Seksjon 12.4.1, «Å sette opp Munin»</a>) som en del av <a
                class="xref"
                href="advanced-administration.html">Kapittel 12: «<em>Avansert administrasjon</em>»</a>. Debian leverer også et lignende verktøy, <span
                class="pkg pkg">cacti</span>. Utplasseringen er litt mer komplisert, siden det kun er basert på SNMP. Til tross for et nettgrensesnitt, kreves det litt innsats å få tak på begrepene som inngår i konfigurasjonen. Å lese HTML-dokumentasjon (<code
                class="filename">/usr/share/doc/cacti/html/index.html</code>) må betraktes som en forutsetning.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIV</em></span> <code
                          class="command">mrtg</code></strong></p></div></div></div><a
                id="id-1.17.6.5.5.8.2"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">mrtg</code> (i pakken med tilsvarende navn) er et eldre verktøy. Til tross for noen grove kanter, kan det samle historiske data og vise dem som grafer. Det inkluderer en rekke skript øremerket til å samle de mest overvåkede data som prosessorbelastning, nettverkstrafikk, nettsidetreff, og så videre.
				</div><div
                class="para">
					Pakkene <span
                  class="pkg pkg">mrtg-contrib</span> og <span
                  class="pkg pkg">mrtgutils</span> inneholder eksempelskripter som kan brukes direkte.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.17.6.6"></a>14.3.3. Å finne endringer</h3></div></div></div><div
            class="para">
				Når systemet er installert og konfigurert, og sikkerhetsoppgraderinger oppdatert, er det vanligvis ingen grunn til å utvikle videre de fleste filer og kataloger, data unntatt. Det er derfor interessant å sørge for at filene faktisk ikke endres: Alle uventede endringer vil det derfor være verdt å undersøke. Denne delen presenterer noen verktøy som er i stand til å overvåke filer, og advare administratoren når en uventet endring skjer (eller rett og slett for å liste slike endringer).
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.dpkg-verify"></a>14.3.3.1. Gjennomgå pakker med <code
                      class="command">dpkg --verify</code></h4></div></div></div><a
              id="id-1.17.6.6.3.2"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>FOR VIDEREKOMMENDE</em></span> Å beskytte mot oppstrømsforandringer</strong></p></div></div></div><div
                class="para">
					<code
                  class="command">dpkg --verify</code> er nyttig for å oppdage endringer i filer som kommer fra en Debian-pakke, men vil være ubrukelig hvis pakken selv er kompromittert, for eksempel hvis Debian-speilet er kompromittert. Å beskytte mot denne typen angrep omfatter å bruke APTs digitale system for signaturverifisering (se <a
                  class="xref"
                  href="sect.package-authentication.html">Seksjon 6.5, «Sjekking av pakkeautensitet»</a>), og passe på å bare installere pakker med en sertifisert opprinnelse.
				</div></div><div
              class="para">
					<code
                class="command">dpkg --verify</code> (eller <code
                class="command">dpkg -V</code>) er et interessant verktøy, siden det tillater å finne hvilke installerte filer som har blitt endret (potensielt av en angriper), men dette bør tas med en klype salt. For å gjøre jobben sin er den avhengig av sjekkesummer lagret i dpkgs egen database lagret på harddisken (de kan finnes i <code
                class="filename">/var/lib/dpkg/info/<em
                  class="replaceable">pakke</em>.md5sums</code>); Derfor vil en grundig angriper oppdatere disse filene slik at de inneholder de nye kontrollsummene for nedbrutte filer.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DET GRUNNLEGGENDE</em></span> Fil fingeravtrykk</strong></p></div></div></div><a
                id="id-1.17.6.6.3.5.2"
                class="indexterm"></a><a
                id="id-1.17.6.6.3.5.3"
                class="indexterm"></a><a
                id="id-1.17.6.6.3.5.4"
                class="indexterm"></a><a
                id="id-1.17.6.6.3.5.5"
                class="indexterm"></a><div
                class="para">
					Som en påminnelse: Et fingeravtrykk er en verdi, ofte et tall (om enn i heksadesimal notasjon), som inneholder en slags signatur for innholdet i en fil. Denne signaturen er beregnet med en algoritme (MD5 eller SHA1 er godt kjente eksempler) som mer eller mindre garanterer at selv den minste endring i filinnholdet innebærer en endring i fingeravtrykket; kjent som skredeffekten («avalanche effect»). Dette gjør at et enkelt tallfestet fingeravtrykk tjener som en lakmustest for å sjekke om innholdet i en fil har blitt endret. Disse algoritmene er ikke reverserbare; med andre ord, for de fleste, at man vet at et fingeravtrykk ikke tillater å finne tilbake til det tilhørende innholdet. Nye matematiske fremskritt ser ut til å svekke hvor absolutt disse prinsippene er, men det er ikke stilt spørsmålstegn ved bruken så langt, siden det å lage ulikt innhold ut fra samme fingeravtrykk fortsatt synes å være en ganske vanskelig oppgave.
				</div></div><div
              class="para">
					Å kjøre <code
                class="command">dpkg -V</code> vil bekrefte alle installerte pakker, og vil skrive ut en linje for hver fil med en sviktende test. Utgangsformatet er det samme som et fra <code
                class="command">rpm -V</code> hvor hver figur betegner en test med noen spesifikke metadata. Dessverre <code
                class="command">dpkg</code> lagrer ikke metadata som trengs for de fleste testene, og vil dermed gi spørsmålstegn for dem. Foreløpig kan bare sjekksumtesten levere en «5»-er på det tredje tegnet (når den feiler).
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg -V</code></strong>
<code
                class="computeroutput">??5??????   /lib/systemd/system/ssh.service
??5?????? c /etc/libvirt/qemu/networks/default.xml
??5?????? c /etc/lvm/lvm.conf
??5?????? c /etc/salt/roster</code></pre><div
              class="para">
					I eksempelet ovenfor, rapporterer dpkg en endring i SSH-tjenestefil som administratoren har gjort i den pakkede filen i stedet for å bruke den hensiktsmessige <code
                class="filename">/etc/systemd/system/ssh.service</code>-overstyring (som ville bli lagret under <code
                class="filename">/etc</code> som alle konfigurasjonsendringer skal). Den viser også flere konfigurasjonsfiler (identifisert av «c»-bokstaven i det andre feltet) som er legitimt modifisert.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.debsums"></a>14.3.3.2. Overvåkingspakker: <code
                      class="command">debsums</code> og dens grenser</h4></div></div></div><a
              id="id-1.17.6.6.4.2"
              class="indexterm"></a><div
              class="para">
					<code
                class="command">debsums</code> er stamfaren til <code
                class="command">dpkg -V</code>, og er dermed stort sett foreldet. Den lider av de samme begrensningene som dpkg. Heldigvis, noen av begrensningene kan man komme rundt (mens dpkg ikke tilbyr tilsvarende work-arounds (muligheten)).
				</div><div
              class="para">
					Siden dataene på disken ikke er å stole på, <code
                class="command">debsums</code> tilbyr å gjøre sine undersøkelser på grunnlag av <code
                class="filename">.deb</code>-filer i stedet for å stole på dpkgs database. For å laste ned pålitelige <code
                class="filename">.deb</code>-filer for alle installerte pakker, kan vi stole på APTs klarerte nedlastinger. Denne operasjonen kan være treg og omstendelig, og bør derfor ikke ansees som en proaktiv teknikk som skal brukes på jevnlig basis.
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt-get --reinstall -d install `grep-status -e 'Status: install ok installed' -n -s Package`</code></strong>
<code
                class="computeroutput">[ ... ]
# </code><strong
                class="userinput"><code>debsums -p /var/cache/apt/archives --generate=all</code></strong></pre><div
              class="para">
					Merk at dette eksemplet bruker <code
                class="command">grep-status</code>-kommandoen fra <span
                class="pkg pkg">dctrl-tools</span>-pakken, som ikke er installert som standard.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.17.6.6.5"></a>14.3.3.3. Å overvåke filer: AIDE</h4></div></div></div><a
              id="id-1.17.6.6.5.2"
              class="indexterm"></a><div
              class="para">
					AIDE-verktøyet (<span
                class="emphasis"><em>Advanced Intrusion Detection Environment</em></span>) kan sjekke filens integritet, og oppdager alle endringer opp mot et tidligere innspilt bilde av systemet. Dette bildet er lagret som en database (<code
                class="filename">/var/lib/aide/aide.db</code>) som inneholder relevant informasjon om alle filene i systemet (fingeravtrykk, tillatelser, tidsstempler, og så videre). Denne databasen blir først initialisert med <code
                class="command">aideinit</code>; og er så brukt daglig (med <code
                class="filename">/etc/cron.daily/aide</code>-skriptet) for å kontrollere om ingenting relevant er endret. Når det oppdages endringer, registrerer AIDE dem i loggfiler (<code
                class="filename">/var/log/aide/*.log</code>), og sender sine funn til administratoren med e-post.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>I PRAKSIS </em></span> Å beskytte databasen</strong></p></div></div></div><div
                class="para">
					Ettersom AIDE bruker en lokal database for å sammenligne tilstanden til filene, er gyldigheten av resultatene direkte knyttet til databasens gyldighet. Hvis en angriper får rot-rettigheter til et kompromittert system, vil denne være i stand til å skifte ut databasen og dekke sine spor. En mulig løsning ville være å lagre referansedata på skrivebeskyttede lagringsmedier .
				</div></div><div
              class="para">
					Mange valg i <code
                class="filename">/etc/default/aide</code> kan bli brukt til å justere handlingene til <span
                class="pkg pkg">aide</span>-pakken. AIDE-oppsettet er lagret i <code
                class="filename">/etc/aide/aide.conf</code> og <code
                class="filename">/etc/aide/aide.conf.d/</code> (disse filene er faktisk bare brukt av <code
                class="command">update-aide.conf</code> for å generere <code
                class="filename">/var/lib/aide/aide.conf.autogenerated</code>). Konfigurasjon indikerer hvilke egenskaper ved hvilke filer som må sjekkes. For eksempel kan innholdet i loggfiler endres rutinemessig, og slike endringer kan ignoreres så lenge rettighetene til disse filene forblir de samme, men både innhold og tillatelser for kjørbare programmer må være konstante. Selv om de ikke er veldig kompliserte, er ikke konfigurasjonssyntaksen helt intuitiv, og lese <span
                class="citerefentry"><span
                  class="refentrytitle">aide.conf</span>(5)</span>-manualside er derfor anbefalt.
				</div><div
              class="para">
					En ny versjon av databasen genereres hver dag i <code
                class="filename">/var/lib/aide/aide.db.new</code>; hvis alle registrerte endringer var legitime, kan den brukes til å erstatte referansedatabasen.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIV</em></span> Tripwire og Samhain</strong></p></div></div></div><div
                class="para">
					Tripwire er veldig lik AIDE: Selv syntaksen til konfigurasjonsfilen er nesten den samme. Hovedtillegget, levert fra <span
                  class="pkg pkg">tripwire</span> er en mekanisme til å signere konfigurasjonsfilen, slik at en angriper ikke kan få den til å peke til en annen versjon av referansedatabasen.
				</div><div
                class="para">
					Samhain tilbyr også lignende funksjoner, samt noen funksjoner for å hjelpe til med å oppdage rootkit (se sidepanelet <a
                  class="xref"
                  href="sect.supervision.html#sidebar.the-checksecurity-and-chkrootkit-rkhunter-packages"><span
                    class="emphasis"><em>HURTIGVISNING</em></span> Pakkene <span
                    class="pkg pkg">checksecurity</span> og <span
                    class="pkg pkg">chkrootkit</span>/<span
                    class="pkg pkg">rkhunter</span></a>). Den kan også distribueres globalt i et nettverk, og registrere sine spor på en sentral tjener (med en signatur).
				</div></div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.the-checksecurity-and-chkrootkit-rkhunter-packages"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HURTIGVISNING</em></span> Pakkene <span
                          class="pkg pkg">checksecurity</span> og <span
                          class="pkg pkg">chkrootkit</span>/<span
                          class="pkg pkg">rkhunter</span></strong></p></div></div></div><a
                id="id-1.17.6.6.5.8.2"
                class="indexterm"></a><div
                class="para">
					Den første av disse pakkene inneholder flere små skript som utfører grunnleggende kontroller på systemet (tomme passord, nye setuid-filer og så videre), og advarer administratoren hvis nødvendig. Til tross for sitt eksplisitte navn, bør en administrator ikke stole utelukkende på det for å være sikker på at et Linux-system er trygt.
				</div><div
                class="para">
					<span
                  class="pkg pkg">chkrootkit</span> og <span
                  class="pkg pkg">rkhunter</span>-pakkene tillater at det ses etter om <span
                  class="emphasis"><em>rootkits</em></span> potensielt er installert i systemet. Som en påminnelse, disse er biter av programvare er utviklet for å skjule kompromittering av et system og samtidig å holde kontrollen over maskinen. Testene er ikke 100 % pålitelige, men de kan som regel trekke administratorens oppmerksomhet til potensielle problemer.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.intrusion-detection"></a>14.3.4. Å avdekke inntrengning (IDS/NIDS)</h3></div></div></div><a
            id="id-1.17.6.7.2"
            class="indexterm"></a><a
            id="id-1.17.6.7.3"
            class="indexterm"></a><a
            id="id-1.17.6.7.4"
            class="indexterm"></a><a
            id="id-1.17.6.7.5"
            class="indexterm"></a><a
            id="id-1.17.6.7.6"
            class="indexterm"></a><a
            id="id-1.17.6.7.7"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> Tjenestenektangrep</strong></p></div></div></div><a
              id="id-1.17.6.7.8.2"
              class="indexterm"></a><div
              class="para">
				Et "tjenestenektangrep" har bare ett mål: Å gjøre en tjeneste utilgjengelig. Enten et slikt angrep innebærer å overbelaste tjeneren med henvendelser eller utnytte en feil, er sluttresultatet det samme: tjenesten er ikke lenger i drift. Vanlige brukere er misfornøyd, og enhetens vertsoppgaver nettverkstjenesten som rammes, lider et tap i omdømme (og muligens i inntekter, for eksempel hvis tjenesten var en e-handel).
			</div><div
              class="para">
				Et slikt angrep er ofte "distribuert": Dette innebærer vanligvis å overbelaste tjeneren med et stort antall henvendelser som kommer fra mange forskjellige kilder, slik at tjeneren blir ute av stand til å svare på legitime henvendelser. Disse typer angrep har fått kjente forkortelser: <acronym
                class="acronym">DDoS</acronym> og <acronym
                class="acronym">DoS</acronym> (avhengig av om tjenestenektangrepet er distribuert eller ikke).
			</div></div><div
            class="para">
				<code
              class="command">suricata</code> (i Debian-pakken med samme navn) er et NIDS — et <span
              class="emphasis"><em>Network Intrusion Detection System</em></span>. Oppgaven er å lytte til nettverket og prøve å oppdage infiltrasjonsforsøk og/ eller fiendtlige handlinger (inkludert tjenestenektangrep). Alle disse hendelsene blir logget i flere filer i <code
              class="filename">/var/log/suricata</code>. Det er tredjepartsverktøy (Kibana/logstash) som bedre kan søke igjennom alle innsamlede data. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://suricata-ids.org">http://suricata-ids.org</a></div> <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://www.elastic.co/products/kibana">https://www.elastic.co/products/kibana</a></div>
			</div><a
            id="id-1.17.6.7.10"
            class="indexterm"></a><a
            id="id-1.17.6.7.11"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Handlingsrom</strong></p></div></div></div><div
              class="para">
				Effektiviteten til <code
                class="command">suricata</code> er begrenset av trafikken som sees på det overvåkede nettverksgrensesnittet. Det vil åpenbart ikke være i stand til å oppdage noe, hvis det ikke kan observere den virkelige trafikken. Koblet til en nettverksvitsj, vil det derfor kun overvåke angrep mot maskinen det kjører på, som sannsynligvis ikke er intensjonen. Maskinens vertsoppgaver <code
                class="command">suricata</code> bør derfor plugges til bryterens "speil"-port, som vanligvis er øremerket for kjedede brytere, og som derfor får all trafikk.
			</div></div><div
            class="para">
				Å sette opp suricata innebærer å gjennomgå og redigere <code
              class="filename">/etc/suricata/suricata-debian.yaml</code>, som er veldig lang fordi hvert parameter er rikelig kommentert. En minimal konfigurasjon krever beskrivelse av området med adresser som det lokale nettverket dekker (<code
              class="literal">HOME_NET</code> parameter). I praksis betyr dette hele settet med mulige angrepsmål. Men å få det meste ut av den, krever å lese den i sin helhet og tilpasse den til den lokale situasjonen.
			</div><div
            class="para">
				På toppen av dette, må du også redigere <code
              class="filename">/etc/default/suricata</code> for å definere nettverksgrensesnittet som skal overvåke og å aktivere init script-et (ved å sette <code
              class="literal">RUN=yes</code>). Du kan også ønske å sette <code
              class="literal">LISTENMODE=pcap</code> fordi standard <code
              class="literal">LISTENMODE=nfqueue</code> krever ytterligere konfigurasjon for å fungere riktig (nettfilter brannmuren må konfigureres til å videresende pakker til en brukerområde-kø som håndteres av suricata via <code
              class="literal">NFQUEUE</code>-målet).
			</div><div
            class="para">
				For å oppdage feilaktig oppførsel, trenger <code
              class="command">suricata</code> et sett med overvåkingsregler: Du kan finne slike regler i <span
              class="pkg pkg">snort-rules-default</span>-pakken. <code
              class="command">snort</code> er den historiske referansen i IDS-økosystemet og <code
              class="command">suricata</code> kan gjenbruke regler skrevet for den. Dessverre mangler denne pakken i <span
              class="distribution distribution">Debian Jessie</span>, og bør hentes fra en annen Debian utgivelse som <span
              class="distribution distribution">Testing</span> eller <span
              class="distribution distribution">Unstable</span>.
			</div><div
            class="para">
				Alternativt kan, <code
              class="command">oinkmaster</code> (i pakken med samme navn) brukes til å laste ned Snort regelsett fra eksterne kilder.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> Integration with <code
                        class="command">prelude</code></strong></p></div></div></div><div
              class="para">
				Prelude leverer sentralisert overvåking av sikkerhetsinformasjon. Den modulære arkitekturen inkluderer en tjener (<span
                class="emphasis"><em>manager</em></span> i <span
                class="pkg pkg">prelude-manager</span>) som samler varsler generert av <span
                class="emphasis"><em>sensors</em></span> av ulike typer.
			</div><div
              class="para">
				Suricata kan konfigureres som en slik sensor. Andre muligheter inkluderer <span
                class="emphasis"><em>prelude-lml</em></span> (<span
                class="emphasis"><em>Log Monitor Lackey</em></span>) som overvåker loggfiler (på en måte som svarer til <code
                class="command">logcheck</code>, beskrevet i <a
                class="xref"
                href="sect.supervision.html#sect.logcheck">Seksjon 14.3.1, «Å overvåke logger med <code
                  class="command">logcheck</code>»</a>).
			</div><a
              id="id-1.17.6.7.17.4"
              class="indexterm"></a></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.firewall-packet-filtering.html"><strong>Forrige</strong>14.2. Brannmur eller pakkefiltrering</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apparmor.html"><strong>Neste</strong>14.4. Introduksjon til AppArmor</a></li></ul></body></html>
