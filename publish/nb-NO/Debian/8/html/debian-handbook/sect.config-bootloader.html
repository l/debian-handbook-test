<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.8. Konfigurere oppstartslaster</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Konfigurasjon, Lokalisering, Localer, Nettverk, Navneoppslag, Brukere, Grupper, Kontoer, Kommandolinjetolker, Skall, Utskrift, Oppstartslaster, Kjernekompilering" /><link
        rel="home"
        href="index.html"
        title="Debian-administratorens håndbok" /><link
        rel="up"
        href="basic-configuration.html"
        title="Kapittel 8. Grunnleggende oppsett: Nettverk, kontoer, utskrift..." /><link
        rel="prev"
        href="sect.config-printing.html"
        title="8.7. Skriveroppsett" /><link
        rel="next"
        href="sect.config-misc.html"
        title="8.9. Other Configurations: Time Synchronization, Logs, Sharing Access…" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.config-bootloader.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-printing.html"><strong>Forrige</strong></a></li><li
          class="home">Debian-administratorens håndbok</li><li
          class="next"><a
            accesskey="n"
            href="sect.config-misc.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.config-bootloader"></a>8.8. Konfigurere oppstartslaster</h2></div></div></div><a
          id="id-1.11.12.2"
          class="indexterm"></a><a
          id="id-1.11.12.3"
          class="indexterm"></a><div
          class="para">
			Det virker sannsynligvis allerede, men det er alltid godt å vite hvordan du konfigurerer og installerer oppstartsladeren i tilfelle den forsvinner fra Master Boot Record. Dette kan skje etter installasjon av et annet operativsystem, for eksempel Windows. Den følgende informasjonen kan også hjelpe deg å endre oppstartslastens konfigurasjon hvis nødvendig.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>BACK TO BASICS</em></span> Master boot record</strong></p></div></div></div><a
            id="id-1.11.12.5.2"
            class="indexterm"></a><a
            id="id-1.11.12.5.3"
            class="indexterm"></a><div
            class="para">
			The Master Boot Record (MBR) inntar de første 512 byte av den første harddisken, og er det første BIOS laster for å overlate kontrollen til et program som kan starte det ønskede operativsystemet. Vanligvis, når en oppstartslaster installeres i MBR, fjernes det tidligere innholdet.
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.identify-disks"></a>8.8.1. Identifisere diskene</h3></div></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> <span
                        class="emphasis"><em>udev</em></span> og <code
                        class="filename">/dev/</code></strong></p></div></div></div><div
              class="para">
				<code
                class="filename">/dev/</code>-mappen omfatter vanligvis såkalte “spesial”-filer, ment å representere systemets tilleggsutstyr (se sidestolpe <a
                class="xref"
                href="sect.creating-accounts.html#sidebar.special-files"><span
                  class="emphasis"><em>BACK TO BASICS</em></span> Device access permissions</a>). Det var en gang, da det pleide å inneholde alle spesialfiler som potensielt kunne brukes. Denne tilnærmingen hadde en rekke ulemper blant annet det faktum at det er begrenset hvor mange enheter som man kunne bruke (på grunn av den hardkodede listen med navn), og at det var umulig å vite hvilke spesielle filer som faktisk var nyttige.
			</div><div
              class="para">
				I dag er håndteringen av spesielle filer helt dynamisk og svarer bedre egenskapene til rasktvekslende datamaskinenheter. Kjernen samarbeider med <span
                class="emphasis"><em>udev</em></span> for å opprette og slette dem etter behov når de tilsvarende enhetene kommer og forsvinner. Av denne grunn, trenger ikke <code
                class="filename">/dev/</code> å være varig og er dermed et RAM-basert filsystem som starter tomt og kun inneholder de relevante oppføringer.
			</div><div
              class="para">
				Kjernen kommuniserer mye informasjon om eventuell nylig tillagt enhet og deler ut et par større/mindre tall for å identifisere den. Med <code
                class="command">udevd</code> kan en lage spesialfilen med navn og med de tillatelsene som den ønsker. Den kan også opprette aliaser og utføre flere handlinger (som initialisering eller registreringsoppgaver). <code
                class="command">udevd</code>-ens virke drives med et større sett med (egendefinerte) regler.
			</div><div
              class="para">
				Med dynamisk tildelte navn, kan du holde på samme navn for en gitt enhet, uavhengig av koblingen som brukes eller rekkefølgen på forbindelsen, noe som er spesielt nyttig når du bruker forskjellig USB-utstyr. Den første partisjonen på den første harddisken kan da bli kalt <code
                class="filename">/dev/sda1</code> for samsvar bakover, eller <code
                class="filename">/dev/root-partition</code> hvis du foretrekker det, eller til og med begge samtidig, fordi <code
                class="command">udevd</code> kan konfigureres til automatisk å lage en symbolsk lenke.
			</div><div
              class="para">
				I gamle dager var det noen kjernemoduler ble lastet automatisk når du prøvde å få tilgang til den tilsvarende filen for enheten. Dette er ikke lenger tilfelle, og det tilleggsenhetens spesielle fil finnes ikke lenger før lasting av modulen. Dette er ikke noe stort poeng, fordi de fleste moduler er lastet på fra oppstart takket være automatisk gjenkjenning av maskinvare. Men for ikke oppsporbare enheter (som svært gamle disker eller PS/2-mus), fungerer dette ikke. Vurder å legge til modulene, <code
                class="literal">floppy</code>, <code
                class="literal">psmouse</code> og <code
                class="literal">mousedev</code> til <code
                class="filename">/etc/modules</code> for å tvinge at de lastes ved oppstart.
			</div></div><a
            id="id-1.11.12.6.3"
            class="indexterm"></a><a
            id="id-1.11.12.6.4"
            class="indexterm"></a><div
            class="para">
				Oppsettet av oppstartslasteren må identifisere de ulike harddisker og deres partisjoner. Linux bruker "blokk" spesialfiler lagret i <code
              class="filename">/dev/</code>-mappen til dette formålet. Etter Debian <span
              class="distribution distribution">Squeeze</span>, har navningsskjemaet for harddisker blitt forent av Linux kjernen, og alle harddisker (IDE/PATA, SATA, SCSI, USB, IEEE 1394) er nå representert nå av <code
              class="filename">/dev/sd*</code>.
			</div><div
            class="para">
				Hver partisjon er representert med sitt nummer på disken der den ligger, for eksempel er <code
              class="filename">/dev/sda1</code> den første partisjonen på den første disken, og <code
              class="filename">/dev/sdb3</code> er den tredje partisjonen på den andre disken.
			</div><a
            id="id-1.11.12.6.7"
            class="indexterm"></a><a
            id="id-1.11.12.6.8"
            class="indexterm"></a><a
            id="id-1.11.12.6.9"
            class="indexterm"></a><a
            id="id-1.11.12.6.10"
            class="indexterm"></a><div
            class="para">
				PC-arkitekturen (eller "i386", inkludert sin yngre fetter "amd64") har lenge vært begrenset til å bruke "MS-DOS" partisjonstabellformatet, som bare tillater fire "primære" partisjoner per disk. Å gå utover denne begrensningen under denne ordningen, må en av dem lages som en "utvidet" partisjon, og kan da inneholde flere "sekundære" partisjoner. Disse sekundære partisjonene er nummerert fra 5. Dermed kan den første sekundærpartisjonen være <code
              class="filename">/dev/sda5</code>, fulgt av <code
              class="filename">/dev/sda6</code>, etc.
			</div><div
            class="para">
				En annen begrensning i partisjonstabellformat MS-DOS, er at det bare tillater disker opp til 2 TiB størrelse, som blir et reelt problem med nyere disker.
			</div><a
            id="id-1.11.12.6.13"
            class="indexterm"></a><a
            id="id-1.11.12.6.14"
            class="indexterm"></a><div
            class="para">
				Et ny partisjonstabellformat, kalt GPT, løsner disse begrensningene på antall partisjoner (det tillater opp til 128 partisjoner når du bruker standardinnstillingene) og på størrelsen på diskene (opp til 8 Zib, som er mer enn 8 milliarder terabyte). Hvis du har tenkt å lage mange fysiske partisjoner på samme disk, bør du derfor sørge for at du oppretter partisjonstabellen i GPT-format når disken partisjoneres.
			</div><div
            class="para">
				Det er ikke alltid lett å huske hvilken disk som er koblet til hvilken SATA-kontroll, eller i tredje posisjon i SCSI-kjeden, spesielt når navngivingen av harddisker med høye ytelser (som inkluderer blant annet de fleste SATA disker og eksterne disker) kan endre seg fra en oppstart til en annen. Heldigvis lager <code
              class="command">udev</code> l, i tillegg til <code
              class="filename">/dev/sd*</code>, symbolske lenker med et fast navn, som du deretter kan deretter bruke hvis du ønsket å identifisere en harddisk på en ikke-tvetydig måte. Disse symbolske lenkene er lagret i <code
              class="filename">/dev/disk/by-id</code>. På en maskin med to fysiske disker, for eksempel, kan man finne følgende:
			</div><pre
            class="screen"><code
              class="computeroutput">mirexpress:/dev/disk/by-id# </code><strong
              class="userinput"><code>ls -l
</code></strong><code
              class="computeroutput">total 0
lrwxrwxrwx 1 root root  9 23 jul. 08:58 ata-STM3500418AS_9VM3L3KP -&gt; ../../sda
lrwxrwxrwx 1 root root 10 23 jul. 08:58 ata-STM3500418AS_9VM3L3KP-part1 -&gt; ../../sda1
lrwxrwxrwx 1 root root 10 23 jul. 08:58 ata-STM3500418AS_9VM3L3KP-part2 -&gt; ../../sda2
[...]
lrwxrwxrwx 1 root root  9 23 jul. 08:58 ata-WDC_WD5001AALS-00L3B2_WD-WCAT00241697 -&gt; ../../sdb
lrwxrwxrwx 1 root root 10 23 jul. 08:58 ata-WDC_WD5001AALS-00L3B2_WD-WCAT00241697-part1 -&gt; ../../sdb1
lrwxrwxrwx 1 root root 10 23 jul. 08:58 ata-WDC_WD5001AALS-00L3B2_WD-WCAT00241697-part2 -&gt; ../../sdb2
[...]
lrwxrwxrwx 1 root root  9 23 jul. 08:58 scsi-SATA_STM3500418AS_9VM3L3KP -&gt; ../../sda
lrwxrwxrwx 1 root root 10 23 jul. 08:58 scsi-SATA_STM3500418AS_9VM3L3KP-part1 -&gt; ../../sda1
lrwxrwxrwx 1 root root 10 23 jul. 08:58 scsi-SATA_STM3500418AS_9VM3L3KP-part2 -&gt; ../../sda2
[...]
lrwxrwxrwx 1 root root  9 23 jul. 08:58 scsi-SATA_WDC_WD5001AALS-_WD-WCAT00241697 -&gt; ../../sdb
lrwxrwxrwx 1 root root 10 23 jul. 08:58 scsi-SATA_WDC_WD5001AALS-_WD-WCAT00241697-part1 -&gt; ../../sdb1
lrwxrwxrwx 1 root root 10 23 jul. 08:58 scsi-SATA_WDC_WD5001AALS-_WD-WCAT00241697-part2 -&gt; ../../sdb2
[...]
lrwxrwxrwx 1 root root  9 23 jul. 16:48 usb-LaCie_iamaKey_3ed00e26ccc11a-0:0 -&gt; ../../sdc
lrwxrwxrwx 1 root root 10 23 jul. 16:48 usb-LaCie_iamaKey_3ed00e26ccc11a-0:0-part1 -&gt; ../../sdc1
lrwxrwxrwx 1 root root 10 23 jul. 16:48 usb-LaCie_iamaKey_3ed00e26ccc11a-0:0-part2 -&gt; ../../sdc2
[...]
lrwxrwxrwx 1 root root  9 23 jul. 08:58 wwn-0x5000c50015c4842f -&gt; ../../sda
lrwxrwxrwx 1 root root 10 23 jul. 08:58 wwn-0x5000c50015c4842f-part1 -&gt; ../../sda1
[...]
mirexpress:/dev/disk/by-id# </code></pre><div
            class="para">
				Merk at noen disker er oppført flere ganger (fordi de oppfører seg samtidig som ATA-disker og SCSI-disker), men den relevante informasjonen er hovedsakelig i diskenes modell og serienumre, der du kan finne den perifere filen.
			</div><div
            class="para">
				Eksempel konfigurasjonsfilene som gis dette avsnittet er basert på det samme oppsettet: En enkelt SATA-disk, der den første partisjonen er en gammel Windows-installasjonen og den andre inneholder Debian GNU / Linux.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-lilo"></a>8.8.2. Å konfigurere LILO</h3></div></div></div><a
            id="id-1.11.12.7.2"
            class="indexterm"></a><a
            id="id-1.11.12.7.3"
            class="indexterm"></a><div
            class="para">
				<span
              class="emphasis"><em>LILO</em></span> (LInux LOader) er den eldste oppstartslasteren - solid men rustikk. Den skriver den fysiske adressen til kjernen for å starte på MBR, og det er derfor hver oppdatering til LILO (eller dens konfigurasjonsfil) må etterfølges av kommandoen<code
              class="command">lilo</code>. Å glemme å gjøre dette, vil gi et system som ikke kan starte hvis den gamle kjernen ble fjernet eller erstattet, ettersom den nye ikke vil være på samme sted på disken.
			</div><div
            class="para">
				LILOs konfigursjonsfilen er <code
              class="filename">/etc/lilo.conf</code>. En enkel fil for standardkonfigurasjon er illustrert i eksempelet nedenfor.
			</div><div
            class="example"><a
              xmlns=""
              id="example.lilo.conf"></a><p
              class="title"><strong>Eksempel 8.3. LILO konfigurasjonsfil</strong></p><div
              class="example-contents"><pre
                class="programlisting">
# The disk on which LILO should be installed.
# By indicating the disk and not a partition.
# you order LILO to be installed on the MBR.
boot=/dev/sda
# the partition that contains Debian
root=/dev/sda2
# the item to be loaded by default
default=Linux

# the most recent kernel image
image=/vmlinuz
  label=Linux
  initrd=/initrd.img
  read-only

# Old kernel (if the newly installed kernel doesn't boot)
image=/vmlinuz.old
  label=LinuxOLD
  initrd=/initrd.img.old
  read-only
  optional

# only for Linux/Windows dual boot
other=/dev/sda1
  label=Windows
</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-grub"></a>8.8.3. GRUB 2 Konfigurasjon</h3></div></div></div><a
            id="id-1.11.12.8.2"
            class="indexterm"></a><a
            id="id-1.11.12.8.3"
            class="indexterm"></a><div
            class="para">
				<span
              class="emphasis"><em>GRUB</em></span> (GRand Unified Bootloader) er nyere. Det er ikke nødvendig å ta den i bruk etter hver oppdatering av kjernen;<span
              class="emphasis"><em>GRUB</em></span> vet hvordan filsystemene skal leses og selv finne posisjonen til kjernen på disken. For å installere den på MBR i denførste disken, skrive bare <code
              class="command">grub-install /dev/sda</code>. <a
              id="id-1.11.12.8.4.4"
              class="indexterm"></a>
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> Disknavn for GRUB</strong></p></div></div></div><div
              class="para">
				GRUB kan bare identifisere harddisker basert på opplysninger fra BIOS. <code
                class="literal">(hd0)</code> samsvarer med den første disken som oppdages, <code
                class="literal">(hd1)</code> den andre, etc. I de fleste tilfeller, tilsvarer dette for nøyaktig til den vanlige rekkefølgen av disker under Linux, men problemer kan oppstå når du forbinder SCSI- og IDE-disker. GRUB lagerer overensstemmelser som den avdekker i filen <code
                class="filename">/boot/grub/device.map</code>. Hvis du finner feil der (fordi du vet at din BIOS oppdager stasjoner i en annen rekkefølge), korriger dem manuelt og kjør <code
                class="command">grub-install</code> igjen. <code
                class="command">grub-mkdevicemap</code> kan hjelpe til med å lage en <code
                class="filename">device.map</code>-fil som det kan startes fra.
			</div><div
              class="para">
				Partisjoner har også et bestemt navn i GRUB. Når du bruker "klassiske" partisjoner i MS-DOS-format, er den første partisjonen på den første disken merket <code
                class="literal">(hd0,msdos1)</code>, den andre <code
                class="literal">(hd0,msdos2)</code>, osv.
			</div></div><div
            class="para">
				GRUB 2 konfigurasjon er lagret i <code
              class="filename">/boot/grub/grub.cfg</code>, men denne filen (i Debian) er generert fra andre. Vær forsiktig med å endre det for hånd, siden slike lokale endringer vil gå tapt neste gang <code
              class="command">update-grub</code> kjøres (som kan oppstå ved oppdatering av ulike pakker). De vanligste modifikasjoner av <code
              class="filename">/boot/grub/grub.cfg</code>-filen (for å legge kommandolinjeparametere til kjernen eller endre hvor lenge menyen vises, for eksempel) er gjort gjennom variabler i <code
              class="filename">/etc/default/grub</code>. For å legge til oppføringer i menyen, kan du enten lage en <code
              class="filename">/boot/grub/custom.cfg</code>-fil eller modifisere <code
              class="filename">/etc/grub.d/50_custom</code>-filen. For mer komplekse konfigurasjoner, kan du modifisere andre filer i <code
              class="filename">/etc/grub.d</code>, eller legge til. Disse skriptene skal returnere konfigurasjonssnutter, muligens ved å bruke eksterne programmer. Disse skriptene er de som vil oppdatere listen over kjerner som kan startes: <code
              class="filename">10_linux</code> tar hensyn til installerte Linux kjerner; <code
              class="filename">20_linux_xen</code> tar i betraktning Xen virtual systemer, og <code
              class="filename">30_os-prober</code> lister andre operativsystemer (Windows, OS X, Hurd).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-yaboot"></a>8.8.4. For Macintosh Computers (PowerPC): Konfigurere Yaboot</h3></div></div></div><a
            id="id-1.11.12.9.2"
            class="indexterm"></a><div
            class="para">
				Yaboot is the bootloader used by old Macintosh computers using PowerPC processors. They do not boot like PCs, but rely on a “bootstrap” partition, from which the BIOS (or OpenFirmware) executes the loader, and on which the <code
              class="command">ybin</code> program installs <code
              class="command">yaboot</code> and its configuration file. You will only need to run this command again if the <code
              class="filename">/etc/yaboot.conf</code> is modified (it is duplicated on the bootstrap partition, and <code
              class="command">yaboot</code> knows how to find the position of the kernels on the disks).
			</div><div
            class="para">
				Before executing <code
              class="command">ybin</code>, you must first have a valid <code
              class="filename">/etc/yaboot.conf</code>. The following is an example of a minimal configuration. <a
              id="id-1.11.12.9.4.3"
              class="indexterm"></a>
			</div><div
            class="example"><a
              xmlns=""
              id="example.yaboot.conf"></a><p
              class="title"><strong>Eksempel 8.4. Yaboot configuration file</strong></p><div
              class="example-contents"><pre
                class="programlisting">
# bootstrap partition
boot=/dev/sda2
# the disk
device=hd:
# the Linux partition
partition=3
root=/dev/sda3
# boot after 3 seconds of inactivity
# (timeout is in tenths of seconds)
timeout=30

install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot
enablecdboot

# last kernel installed
image=/vmlinux
        label=linux
        initrd=/initrd.img
        read-only

# old kernel
image=/vmlinux.old
        label=old
        initrd=/initrd.img.old
        read-only

# only for Linux/Mac OSX dual-boot
macosx=/dev/sda5

# bsd=/dev/sdaX and macos=/dev/sdaX
# are also possible
</pre></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-printing.html"><strong>Forrige</strong>8.7. Skriveroppsett</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.config-misc.html"><strong>Neste</strong>8.9. Other Configurations: Time Synchronization, ...</a></li></ul></body></html>
