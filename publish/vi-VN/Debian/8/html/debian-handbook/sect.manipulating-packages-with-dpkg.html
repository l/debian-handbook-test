<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.4. Thao tác các gói với dpkg</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-vi-VN-1.0-1" /><meta
        name="keywords"
        content="Gói nhị phân, Gói mã nguồn, dpkg, dependencies, conflict" /><link
        rel="home"
        href="index.html"
        title="Sổ tay Quản trị Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Chương 5. Hệ thống gói: Công cụ và Nguyên tắc cơ bản" /><link
        rel="prev"
        href="sect.source-package-structure.html"
        title="5.3. Cấu trúc của Gói nguồn" /><link
        rel="next"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. Cùng tồn tại với các Hệ thống Gói Khác" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/vi-VN/stable/sect.manipulating-packages-with-dpkg.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.source-package-structure.html"><strong>Trước đó</strong></a></li><li
          class="home">Sổ tay Quản trị Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Kế tiếp</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.manipulating-packages-with-dpkg"></a>5.4. Thao tác các gói với <code
                  class="command">dpkg</code></h2></div></div></div><a
          id="id-1.8.8.2"
          class="indexterm"></a><div
          class="para">
			<code
            class="command">dpkg</code> là lệnh cơ sở để xử lý các gói Debian trên hệ thống. Nếu bạn có gói <code
            class="filename">.deb</code>, <code
            class="command">dpkg</code> cho phép cài đặt hoặc phân tích nội dung của gói đó. Nhưng chương trình này chỉ là có một cái nhìn 1 phần của vũ trụ Debian: nó biết những gì được cài đặt trên hệ thống, và bất cứ điều gì nó được đưa ra trên dòng lệnh, nhưng không biết gì về các gói có sẵn khác (ở trên các máy chủ). Như vậy, nó sẽ báo lỗi nếu một sự phụ thuộc không được đáp ứng. Các công cụ như <code
            class="command">apt</code>, trái lại, sẽ tạo ra một danh sách các phụ thuộc để cài đặt mọi thứ như là tự động có thể.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>NOTE</em></span><code
                      class="command">dpkg</code> hay <code
                      class="command">apt</code>?</strong></p></div></div></div><div
            class="para">
			<code
              class="command">dpkg</code> nên được xem như một công cụ hệ thống (phần lõi), và <code
              class="command">apt</code> như một công cụ gần gũi hơn với người dùng, vượt qua những hạn chế của nó. Những công cụ này làm việc cùng nhau, mỗi cái có tính đặc thù, phù hợp với các nhiệm vụ cụ thể.
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.5"></a>5.4.1. Cài đặt Gói</h3></div></div></div><a
            id="id-1.8.8.5.2"
            class="indexterm"></a><a
            id="id-1.8.8.5.3"
            class="indexterm"></a><div
            class="para">
				<code
              class="command">dpkg</code> là công cụ cài đặt gói Debian đã có sẵn (vì nó không tải bất cứ thứ gì). Để thực hiện việc này, chúng ta sử dụng tùy chọn <code
              class="literal">-i</code> hoặc <code
              class="literal">--install</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.5.5"></a><p
              class="title"><strong>Ví dụ 5.2. Cài đặt một gói với <code
                  class="command">dpkg</code></strong></p><div
              class="example-contents"><pre
                class="screen scale">
<code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>dpkg -i man-db_2.7.0.2-5_amd64.deb</code></strong>
<code
                  class="computeroutput">(Reading database ... 86425 files and directories currently installed.)
Preparing to unpack man-db_2.7.0.2-5_amd64.deb ...
Unpacking man-db (2.7.0.2-5) over (2.7.0.2-4) ...
Setting up man-db (2.7.0.2-5) ...
Updating database of manual pages ...
Processing triggers for mime-support (3.58) ...</code></pre></div></div><div
            class="para">
				Chúng ta có thể thấy các bước khác nhau được thực hiện bởi <code
              class="command">dpkg</code>; Chúng ta biết, do đó, tại những điểm bất kỳ lỗi có thể đã xảy ra. Việc cài đặt cũng có thể được thực hiện trong hai giai đoạn: đầu tiên giải nén, sau đó cấu hình. <code
              class="command">apt-get</code> tận dụng điều này, hạn chế số lượng cuộc gọi đến <code
              class="command">dpkg</code> (vì mỗi cuộc gọi tốn kém, do tải cơ sở dữ liệu trong bộ nhớ , đặc biệt là danh sách các tập tin đã được cài đặt).
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.5.7"></a><p
              class="title"><strong>Ví dụ 5.3. Giải nén và cấu hình riêng rẽ</strong></p><div
              class="example-contents"><pre
                class="screen scale">
<code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>dpkg --unpack man-db_2.7.0.2-5_amd64.deb</code></strong>
<code
                  class="computeroutput">(Reading database ... 86425 files and directories currently installed.)
Preparing to unpack man-db_2.7.0.2-5_amd64.deb ...
Unpacking man-db (2.7.0.2-5) over (2.7.0.2-5) ...
Processing triggers for mime-support (3.58) ...
# </code><strong
                  class="userinput"><code>dpkg --configure man-db</code></strong>
<code
                  class="computeroutput">Setting up man-db (2.7.0.2-5) ...
Updating database of manual pages ...
</code></pre></div></div><a
            id="id-1.8.8.5.8"
            class="indexterm"></a><a
            id="id-1.8.8.5.9"
            class="indexterm"></a><div
            class="para">
				Đôi khi <code
              class="command">dpkg</code> sẽ không cài đặt gói và trả về lỗi; Nếu người dùng cho nó để bỏ qua điều này, nó sẽ chỉ phát hành một cảnh báo; Vì lý do này mà chúng ta có các tùy chọn <code
              class="literal">--force-*</code> khác nhau. Lệnh <code
              class="command">dpkg --force-help</code> là tài liệu đầy đủ các tùy chọn này. Lỗi thường gặp nhất, mà bạn sẽ gặp phải sớm hay muộn, là một va chạm tập tin. Khi một gói chứa một tập tin đã được cài đặt bởi một gói khác, <code
              class="command">dpkg</code> sẽ từ chối cài đặt nó. Sau đó các thông báo sau sẽ xuất hiện:
			</div><pre
            class="screen">
<code
              class="computeroutput">Unpacking libgdm (from .../libgdm_3.8.3-2_amd64.deb) ...
dpkg: error processing /var/cache/apt/archives/libgdm_3.8.3-2_amd64.deb (--unpack):
 trying to overwrite '/usr/bin/gdmflexiserver', which is also in package gdm3 3.4.1-9</code></pre><div
            class="para">
				Trong trường hợp này, nếu bạn nghĩ rằng thay thế tệp này không phải ảnh hướng tới tính ổn định của hệ thống (thường là trường hợp này), bạn có thể sử dụng tùy chọn <code
              class="literal">--force-overwrite</code>, để cho <code
              class="command">dpkg</code> biết để bỏ qua lỗi này và ghi đè lên tệp.
			</div><div
            class="para">
				Mặc dù có nhiều tùy chọn <code
              class="literal">--force-*</code>, chỉ có <code
              class="literal">--force-overwrite</code> được sử dụng thường xuyên. Các lựa chọn này chỉ tồn tại trong những trường hợp đặc biệt, và tốt hơn là không dùng chúng càng nhiều càng tốt để tôn trọng các quy tắc áp đặt bởi cơ chế đóng gói. Đừng quên, những quy tắc này đảm bảo tính nhất quán và sự ổn định của hệ thống.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Sử dụng hiệu quả <code
                        class="literal">--force-*</code></strong></p></div></div></div><a
              id="id-1.8.8.5.14.2"
              class="indexterm"></a><div
              class="para">
				Nếu bạn không cẩn thận, việc sử dụng một tùy chọn <code
                class="literal">--force-* </code> có thể dẫn đến một hệ thống mà các gia đình lện APT sẽ từ chối hoạt động. Một số tùy chọn cho phép <code
                class="command">dpkg</code> cài đặt một gói khi một sự phụ thuộc không thỏa mãn, hoặc ngay cả khi có xung đột. Kết quả là tạo nên một hệ thống không nhất quán từ quan điểm phụ thuộc, và các lệnh của APT sẽ từ chối thực hiện bất kỳ hành động nào, ngoại trừ các lệnh sẽ đưa hệ thống trở lại trạng thái nhất quán (thường bao gồm cài đặt sự phụ thuộc bị thiếu hoặc gỡ bỏ một gói có vấn đề). Điều này thường dẫn đến một thông báo như sau, ví dụ sau khi cài đặt phiên bản mới của <span
                class="pkg pkg">rdesktop</span> trong khi bỏ qua sự phụ thuộc của nó vào một phiên bản mới hơn của <span
                class="pkg pkg">libc6</span>:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt full-upgrade
</code></strong><code
                class="computeroutput">[...]
You might want to run 'apt-get -f install' to correct these.
The following packages have unmet dependencies:
  rdesktop: Depends: libc6 (&gt;= 2.5) but 2.3.6.ds1-13etch7 is installed
E: Unmet dependencies. Try using -f.</code></pre><div
              class="para">
				Một quản trị viên dũng cảm phải chắc chắn về phân tích chính xác có thể bỏ qua sự phụ thuộc hoặc xung đột và sử dụng tuỳ chọn <code
                class="literal">--force-*</code>. Trong trường hợp này, nếu họ muốn có thể tiếp tục sử dụng <code
                class="command">aptitude</code> hoặc <code
                class="command">apt</code>&gt;, họ phải chỉnh sửa <code
                class="filename">/var/lib/dpkg/status</code> để xóa hay sửa đổi sự phụ thuộc, hoặc xung đột mà họ đã chọn để ghi đè.
			</div><div
              class="para">
				Thao tác này xem như là một cách hack đểu, và không bao giờ nên được sử dụng, ngoại trừ trường hợp cực kỳ cần thiết. Thường xuyên, một giải pháp thích hợp hơn là biên dịch lại gói phần mềm gây ra sự cố (xem <a
                class="xref"
                href="debian-packaging.html#sect.rebuilding-package">Phần 15.1, “Rebuilding a Package from its Sources”</a>) hoặc sử dụng một phiên bản mới (có khả năng sửa chữa) từ một kho như <code
                class="literal">stable-backports</code> (xem <a
                class="xref"
                href="apt.html#sect.backports">Phần 6.1.2.4, “Backports Ổn định”</a>).
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.6"></a>5.4.2. Xóa Gói</h3></div></div></div><a
            id="id-1.8.8.6.2"
            class="indexterm"></a><a
            id="id-1.8.8.6.3"
            class="indexterm"></a><a
            id="id-1.8.8.6.4"
            class="indexterm"></a><a
            id="id-1.8.8.6.5"
            class="indexterm"></a><div
            class="para">
				Gọi <code
              class="command">dpkg</code>với tùy chọn <code
              class="literal">-r</code> hay <code
              class="literal">--remove </code>, theo sau là tên của một gói, để loại bỏ gói đó. Tuy nhiên, việc xóa này không hoàn chỉnh: tất cả các tệp cấu hình, tập lệnh người quản trị, tệp nhật ký (nhật ký hệ thống) và dữ liệu người dùng khác được gói gọn trong gói. Bằng cách đó, vô hiệu hóa chương trình có thể thực hiện dễ dàng bằng cách gỡ cài đặt và vẫn có thể nhanh chóng cài đặt lại nó với cùng cấu hình. Để loại bỏ hoàn toàn mọi thứ liên quan đến một gói, hãy sử dụng tùy chọn <code
              class="literal">-P</code> hoặc <code
              class="literal">--purge</code>, sau đó là tên gói.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.6.7"></a><p
              class="title"><strong>Ví dụ 5.4. Xoá và tẩy gói <span
                  class="pkg pkg">debian-cd</span></strong></p><div
              class="example-contents"><pre
                class="screen"></pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.7"></a>5.4.3. Truy vấn cơ sở dữ liệu của <code
                    class="command">dpkg</code> và kiểm tra các tệp <code
                    class="filename">.deb</code></h3></div></div></div><a
            id="id-1.8.8.7.2"
            class="indexterm"></a><a
            id="id-1.8.8.7.3"
            class="indexterm"></a><a
            id="id-1.8.8.7.4"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> Cú pháp tùy chọn</strong></p></div></div></div><div
              class="para">
				Hầu hết các tùy chọn có sẵn trong một phiên bản"dài"(một hoặc nhiều từ có liên quan, đứng trước dấu gạch đôi) và một phiên bản"ngắn"(một chữ cái, thường là chữ đầu của một từ từ phiên bản dài, và trước bởi một Dash). Quy ước này là phổ biến đến mức nó là một tiêu chuẩn POSIX.
			</div></div><div
            class="para">
				Trước khi kết thúc phần này, chúng ta sẽ nghiên cứu các tùy chọn <code
              class="command">dpkg</code> để truy vấn cơ sở dữ liệu nội bộ để có được thông tin. Trước tiên các tùy chọn dài và sau đó các tùy chọn ngắn tương ứng (điều đó rõ ràng sẽ có cùng một đối số) chúng ta trích dẫn <code
              class="literal">--listfiles <em
                class="replaceable">package</em></code>(hoặc <code
              class="literal">-L</code>), liệt kê các tệp đã được cài đặt bởi gói này; <code
              class="literal">--search </code><em
              class="replaceable">file</em> (hoặc <code
              class="literal">-S</code>), tìm gói (các) gói có chứa tệp này; <code
              class="literal">--status </code><em
              class="replaceable">package</em> (hoặc <code
              class="literal">-s</code>), hiển thị trạng thái của một gói được cài đặt; <code
              class="literal">--list</code> (hoặc <code
              class="literal">-l</code>), liệt kê tất cả các gói được biết đối với hệ thống và trạng thái cài đặt của chúng; <code
              class="literal">--content </code><em
              class="replaceable">file.deb</em> (hoặc <code
              class="literal">-c</code>), liệt kê các tệp trong gói Debian đó; <code
              class="literal">--info </code><em
              class="replaceable">file.deb</em> (hoặc <code
              class="literal">-I</code>), hiển thị tiêu đề của gói Debian này.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.8.7.7"></a><p
              class="title"><strong>Ví dụ 5.5. Các truy vấn khác nhau với <code
                  class="command">dpkg</code></strong></p><div
              class="example-contents"><pre
                class="screen scale"
                width="80">
<code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>dpkg -L base-passwd</code></strong>
<code
                  class="computeroutput">/.
/usr
/usr/sbin
/usr/sbin/update-passwd
/usr/share
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/base-passwd
/usr/share/doc-base
/usr/share/doc-base/users-and-groups
/usr/share/base-passwd
/usr/share/base-passwd/group.master
/usr/share/base-passwd/passwd.master
/usr/share/man
/usr/share/man/pl
/usr/share/man/pl/man8
/usr/share/man/pl/man8/update-passwd.8.gz
/usr/share/man/ru
/usr/share/man/ru/man8
/usr/share/man/ru/man8/update-passwd.8.gz
/usr/share/man/ja
/usr/share/man/ja/man8
/usr/share/man/ja/man8/update-passwd.8.gz
/usr/share/man/fr
/usr/share/man/fr/man8
/usr/share/man/fr/man8/update-passwd.8.gz
/usr/share/man/es
/usr/share/man/es/man8
/usr/share/man/es/man8/update-passwd.8.gz
/usr/share/man/de
/usr/share/man/de/man8
/usr/share/man/de/man8/update-passwd.8.gz
/usr/share/man/man8
/usr/share/man/man8/update-passwd.8.gz
/usr/share/doc
/usr/share/doc/base-passwd
/usr/share/doc/base-passwd/users-and-groups.txt.gz
/usr/share/doc/base-passwd/changelog.gz
/usr/share/doc/base-passwd/copyright
/usr/share/doc/base-passwd/README
/usr/share/doc/base-passwd/users-and-groups.html
$ </code><strong
                  class="userinput"><code>dpkg -S /bin/date</code></strong>
<code
                  class="computeroutput">coreutils: /bin/date
$ </code><strong
                  class="userinput"><code>dpkg -s coreutils</code></strong>
<code
                  class="computeroutput">Package: coreutils
Essential: yes
Status: install ok installed
Priority: required
Section: utils
Installed-Size: 13855
Maintainer: Michael Stone &lt;mstone@debian.org&gt;
Architecture: amd64
Multi-Arch: foreign
Version: 8.23-3
Replaces: mktemp, realpath, timeout
Pre-Depends: libacl1 (&gt;= 2.2.51-8), libattr1 (&gt;= 1:2.4.46-8), libc6 (&gt;= 2.17), libselinux1 (&gt;= 2.1.13)
Conflicts: timeout
Description: GNU core utilities
 This package contains the basic file, shell and text manipulation
 utilities which are expected to exist on every operating system.
 .
 Specifically, this package includes:
 arch base64 basename cat chcon chgrp chmod chown chroot cksum comm cp
 csplit cut date dd df dir dircolors dirname du echo env expand expr
 factor false flock fmt fold groups head hostid id install join link ln
 logname ls md5sum mkdir mkfifo mknod mktemp mv nice nl nohup nproc numfmt
 od paste pathchk pinky pr printenv printf ptx pwd readlink realpath rm
 rmdir runcon sha*sum seq shred sleep sort split stat stty sum sync tac
 tail tee test timeout touch tr true truncate tsort tty uname unexpand
 uniq unlink users vdir wc who whoami yes
Homepage: http://gnu.org/software/coreutils
$ </code><strong
                  class="userinput"><code>dpkg -l 'b*'</code></strong>
<code
                  class="computeroutput">Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                    Version          Architecture     Description
+++-=======================-================-================-====================================================
un  backupninja             &lt;none&gt;           &lt;none&gt;           (no description available)
ii  backuppc                3.3.0-2          amd64            high-performance, enterprise-grade system for backin
un  base                    &lt;none&gt;           &lt;none&gt;           (no description available)
un  base-config             &lt;none&gt;           &lt;none&gt;           (no description available)
ii  base-files              8                amd64            Debian base system miscellaneous files
ii  base-passwd             3.5.37           amd64            Debian base system master password and group files
[...]
$ </code><strong
                  class="userinput"><code>dpkg -c /var/cache/apt/archives/gnupg_1.4.18-6_amd64.deb</code></strong>
<code
                  class="computeroutput">drwxr-xr-x root/root         0 2014-12-04 23:03 ./
drwxr-xr-x root/root         0 2014-12-04 23:03 ./lib/
drwxr-xr-x root/root         0 2014-12-04 23:03 ./lib/udev/
drwxr-xr-x root/root         0 2014-12-04 23:03 ./lib/udev/rules.d/
-rw-r--r-- root/root      2711 2014-12-04 23:03 ./lib/udev/rules.d/60-gnupg.rules
drwxr-xr-x root/root         0 2014-12-04 23:03 ./usr/
drwxr-xr-x root/root         0 2014-12-04 23:03 ./usr/lib/
drwxr-xr-x root/root         0 2014-12-04 23:03 ./usr/lib/gnupg/
-rwxr-xr-x root/root     39328 2014-12-04 23:03 ./usr/lib/gnupg/gpgkeys_ldap
-rwxr-xr-x root/root     92872 2014-12-04 23:03 ./usr/lib/gnupg/gpgkeys_hkp
-rwxr-xr-x root/root     47576 2014-12-04 23:03 ./usr/lib/gnupg/gpgkeys_finger
-rwxr-xr-x root/root     84648 2014-12-04 23:03 ./usr/lib/gnupg/gpgkeys_curl
-rwxr-xr-x root/root      3499 2014-12-04 23:03 ./usr/lib/gnupg/gpgkeys_mailto
drwxr-xr-x root/root         0 2014-12-04 23:03 ./usr/bin/
-rwxr-xr-x root/root     60128 2014-12-04 23:03 ./usr/bin/gpgsplit
-rwxr-xr-x root/root   1012688 2014-12-04 23:03 ./usr/bin/gpg
[...]
$ </code><strong
                  class="userinput"><code>dpkg -I /var/cache/apt/archives/gnupg_1.4.18-6_amd64.deb</code></strong>
<code
                  class="computeroutput"> new debian package, version 2.0.
 size 1148362 bytes: control archive=3422 bytes.
    1264 bytes,    26 lines      control              
    4521 bytes,    65 lines      md5sums              
     479 bytes,    13 lines   *  postinst             #!/bin/sh
     473 bytes,    13 lines   *  preinst              #!/bin/sh
 Package: gnupg
 Version: 1.4.18-6
 Architecture: amd64
 Maintainer: Debian GnuPG-Maintainers &lt;pkg-gnupg-maint@lists.alioth.debian.org&gt;
 Installed-Size: 4888
 Depends: gpgv, libbz2-1.0, libc6 (&gt;= 2.15), libreadline6 (&gt;= 6.0), libusb-0.1-4 (&gt;= 2:0.1.12), zlib1g (&gt;= 1:1.1.4)
 Recommends: gnupg-curl, libldap-2.4-2 (&gt;= 2.4.7)
 Suggests: gnupg-doc, libpcsclite1, parcimonie, xloadimage | imagemagick | eog
 Section: utils
 Priority: important
 Multi-Arch: foreign
 Homepage: http://www.gnupg.org
 Description: GNU privacy guard - a free PGP replacement
  GnuPG is GNU's tool for secure communication and data storage.
  It can be used to encrypt data and to create digital signatures.
  It includes an advanced key management facility and is compliant
  with the proposed OpenPGP Internet standard as described in RFC 4880.
[...]</code></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> So sánh các phiên bản</strong></p></div></div></div><a
              id="id-1.8.8.7.8.2"
              class="indexterm"></a><a
              id="id-1.8.8.7.8.3"
              class="indexterm"></a><div
              class="para">
				Vì <code
                class="command">dpkg</code> là chương trình để xử lý các gói Debian, nó cũng cung cấp việc thực hiện tham chiếu của so sánh logic số phiên bản. Đây là lý do tại sao nó có tùy chọn <code
                class="literal">--compare-versions</code>, có thể sử dụng được bởi các chương trình bên ngoài (đặc biệt là các kịch bản cấu hình được thực hiện bởi <code
                class="command">dpkg</code>). Tùy chọn này yêu cầu ba tham số: số phiên bản, toán tử so sánh và số phiên bản thứ hai. Các toán tử khác nhau có thể là <code
                class="literal">lt</code> (nhỏ hơn), <code
                class="literal">le</code> (nhỏ hơn hoặc bằng), <code
                class="literal">eq</code>(lớn hơn hoặc bằng), và <code
                class="literal">gt</code>(lớn hơn). Nếu so sánh là đúng, <code
                class="literal">dpkg</code> trả về 0 (thành công); Nếu không, nó sẽ trả về giá trị khác không (chỉ ra sự thất bại).
			</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --compare-versions 1.2-3 gt 1.1-4</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">0
$ </code><strong
                class="userinput"><code>dpkg --compare-versions 1.2-3 lt 1.1-4</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">1
$ </code><strong
                class="userinput"><code>dpkg --compare-versions 2.6.0pre3-1 lt 2.6.0-1</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">1</code></pre><div
              class="para">
				Lưu ý sự thất bại không mong muốn của sự so sánh cuối cùng: cho <code
                class="command">dpkg</code>, <code
                class="literal">pre</code>, thường biểu thị một bản phát hành trước, không có ý nghĩa đặc biệt, và chương trình này so sánh các ký tự chữ cái giống như các con số (a &lt; b &lt; c...), theo thứ tự chữ cái. Đây là lý do tại sao nó coi “<code
                class="literal">0pre3</code>” lớn hơn “<code
                class="literal">0</code>”, Khi chúng ta muốn số phiên bản của gói để cho biết rằng nó là bản phát hành trước, chúng ta sử dụng ký tự dấu ngã, “<code
                class="literal">~</code>”
			</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --compare-versions 2.6.0~pre3-1 lt 2.6.0-1</code></strong>
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>echo $?</code></strong>
<code
                class="computeroutput">0</code></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.8.8"></a>5.4.4. Tệp log của <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				<code
              class="command">dpkg</code> giữ bản ghi chú của tất cả hành động của nó trong <code
              class="filename">/var/log/dpkg.log</code>. Nhật ký này cực kỳ chi tiết, vì nó mô tả chi tiết từng giai đoạn thông qua đó các gói được xử lý bởi <code
              class="command">dpkg</code>. Ngoài việc cung cấp một cách để theo dõi hành vi của dpkg, nó giúp đỡ, trên tất cả, để giữ lịch sử của sự phát triển của hệ thống: người ta có thể tìm thấy thời điểm chính xác khi mỗi gói đã được cài đặt hoặc cập nhật, và thông tin này có thể cực kỳ hữu ích trong sự hiểu biết một sự thay đổi gần đây. Ngoài ra, tất cả các phiên bản được ghi lại, bạn có thể kiểm tra chéo thông tin với <code
              class="filename">changelog.Debian.gz</code> cho các gói đang được hỏi hoặc thậm chí với các báo cáo lỗi trực tuyến.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.multi-arch"></a>5.4.5. Hỗ trợ Multi-Arch</h3></div></div></div><a
            id="id-1.8.8.9.2"
            class="indexterm"></a><a
            id="id-1.8.8.9.3"
            class="indexterm"></a><div
            class="para">
				Tất cả các gói Debian có một trường <code
              class="literal">Architecture</code> trong tệp contol của chúng. Trường này có thể chứa cả “<code
              class="literal">all</code>” (đối với các gói có kiến trúc độc lập) hoặc tên của kiến trúc mà nó cung cấp (như “amd64”, “armhf”,...). Trong trường hợp thứ hai, mặc định, <code
              class="command">dpkg</code> sẽ chỉ chấp nhận cài đặt gói nếu kiến trúc của nó khớp với kiến trúc của máy chủ lưu trữ như trả về bởi <code
              class="command">dpkg --print-architecture</code>
			</div><div
            class="para">
				Hạn chế này đảm bảo rằng người dùng không cài đặt các chương trình nhị phân được biên dịch cho một kiến trúc không chính xác. Tất cả mọi thứ sẽ hoàn hảo ngoại trừ một số máy tính có thể chạy các chương trình nhị phân cho nhiều kiến trúc, hoặc tự nhiên (một hệ thống “amd64“ hệ thống có thể chạy tệp thực thi của “i386“ ) hoặc thông qua giả lập.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.8.9.6"></a>5.4.5.1. Kích hoạt Multi-Arch</h4></div></div></div><div
              class="para">
					Hỗ trợ mutil-arch của <code
                class="command">dpkg</code> cho phép người dùng định nghĩa “foreign architectures” có thể được cài đặt trên hệ thống hiện tại. Điều này chỉ đơn giản được thực hiện với <code
                class="command">dpkg --add-architecture</code> như trong ví dụ dưới đây. Và <code
                class="command">dpkg --remove-architecture </code> tương ứng để bỏ hỗ trợ kiến trúc đó, nhưng chỉ có thể sử dụng khi không có gói nào đang chạy trên kiến trúc này.
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-architecture</code></strong>
<code
                class="computeroutput">amd64
# </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg -i gcc-4.9-base_4.9.1-19_armhf.deb</code></strong>
<code
                class="computeroutput">dpkg: error processing archive gcc-4.9-base_4.9.1-19_armhf.deb (--install):
 package architecture (armhf) does not match system (amd64)
Errors were encountered while processing:
 gcc-4.9-base_4.9.1-19_armhf.deb
# </code><strong
                class="userinput"><code>dpkg --add-architecture armhf</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --add-architecture armel</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput">armhf
armel
# </code><strong
                class="userinput"><code>dpkg -i gcc-4.9-base_4.9.1-19_armhf.deb</code></strong>
<code
                class="computeroutput">Selecting previously unselected package gcc-4.9-base:armhf.
(Reading database ... 86425 files and directories currently installed.)
Preparing to unpack gcc-4.9-base_4.9.1-19_armhf.deb ...
Unpacking gcc-4.9-base:armhf (4.9.1-19) ...
Setting up gcc-4.9-base:armhf (4.9.1-19) ...
# </code><strong
                class="userinput"><code>dpkg --remove-architecture armhf</code></strong>
<code
                class="computeroutput">dpkg: error: cannot remove architecture 'armhf' currently in use by the database
# </code><strong
                class="userinput"><code>dpkg --remove-architecture armel</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg --print-foreign-architectures</code></strong>
<code
                class="computeroutput">armhf</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NOTE</em></span> Hỗ trợ mutil-arch của APT</strong></p></div></div></div><div
                class="para">
					APT sẽ tự động phát hiện khi dpkg đã được cấu hình để hỗ trợ kiến trúc khác và sẽ bắt đầu tải xuống các tệp <code
                  class="filename">Packages</code> trong quá trình cập nhật.
				</div><div
                class="para">
					Các gói foreign có thể được cài đặt với <code
                  class="command">apt install <em
                    class="replaceable">package</em>:<em
                    class="replaceable">architecture</em></code>.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>IN PRACTICE</em></span> Sử dụng các chương trình độc quyền i386 trên amd64</strong></p></div></div></div><div
                class="para">
					Có nhiều trường hợp sử dụng cho đa kiến trúc, nhưng phổ biến nhất là khả năng thực hiện các chương trình 32 bit (i386) trên các hệ thống 64 bit (amd64), đặc biệt vì một số ứng dụng sở hữu phổ biến (như Skype) chỉ được cung cấp cho phiên bản 32 bit.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.8.9.7"></a>5.4.5.2. Thay đổi Liên quan đến Multi-Arch</h4></div></div></div><div
              class="para">
					Để làm cho mutil-arch thực sự hữu ích và có ích, các thư viện phải được đóng gói lại và chuyển đến một thư mục cụ thể theo kiến trúc để có thể cài đặt nhiều bản sao (nhắm mục tiêu các kiến trúc khác nhau) bên cạnh. Các gói cập nhật như vậy có chứa trường tiêu đề “<code
                class="literal">Multi-Arch: same</code>” để báo với hệ thống quản lý gói rằng các kiến trúc khác nhau của gói có thể được đồng bộ an toàn (và rằng các gói chỉ có thể thỏa mãn sự phụ thuộc của các gói của cùng một kiến trúc). Kể từ khi mutil-arch được xuất hiện trong Debian <span
                class="distribution distribution">Wheezy</span>, không phải tất cả các thư viện đều đã được chuyển đổi.
				</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg -s gcc-4.9-base
</code></strong><code
                class="computeroutput">dpkg-query: error: --status needs a valid package name but 'gcc-4.9-base' is not: ambiguous package name 'gcc-4.9-base' with more than one installed instance

Use --help for help about querying packages.
$ </code><strong
                class="userinput"><code>dpkg -s gcc-4.9-base:amd64 gcc-4.9-base:armhf | grep ^Multi
</code></strong><code
                class="computeroutput">Multi-Arch: same
Multi-Arch: same
$ </code><strong
                class="userinput"><code>dpkg -L libgcc1:amd64 |grep .so
</code></strong><code
                class="computeroutput">/lib/x86_64-linux-gnu/libgcc_s.so.1
$ </code><strong
                class="userinput"><code>dpkg -S /usr/share/doc/gcc-4.9-base/copyright
</code></strong><code
                class="computeroutput">gcc-4.9-base:amd64, gcc-4.9-base:armhf: /usr/share/doc/gcc-4.9-base/copyright
</code></pre><div
              class="para">
					Cần lưu ý rằng các gói <code
                class="literal">Multi-Arch: same</code> phải có tên phù hợp với kiến trúc của chúng để được nhận dạng rõ ràng. Họ cũng có khả năng chia sẻ tập tin với các trường hợp khác của cùng một gói; <code
                class="command">dpkg</code> đảm bảo rằng tất cả các gói giống hệt nhau từng bit từng bit một khi chúng được chia sẻ. Cuối cùng nhưng không kém phần quan trọng, tất cả các phiên bản kiến trúc của một gói phải có cùng một số phiên bản. Do đó chúng phải được nâng cấp cùng nhau.
				</div><div
              class="para">
					Multi-Arch hỗ trợ cũng mang lại một số thách thức thú vị trong cách xử lý sự phụ thuộc. Phù hợp với sự phụ thuộc đòi hỏi phải có một gói được đánh dấu “<code
                class="literal">Multi-Arch: foreign</code>” hoặc một gói có kiến trúc phù hợp với một trong các gói tuyên bố sự phụ thuộc (trong quá trình phân giải phụ thuộc này, các gói độc lập với kiến trúc được giả định là có cùng kiến trúc so với máy chủ). Một phụ thuộc cũng có thể bị yếu để cho phép bất kỳ kiến trúc nào hoàn thành nó với cú pháp <code
                class="literal"><em
                  class="replaceable">package</em>:any</code>, nhưng gói ngoại chỉ có thể thỏa mãn sự phụ thuộc đó nếu chúng được đánh dấu “<code
                class="literal">Multi-Arch: allowed</code>”.
				</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.source-package-structure.html"><strong>Trước đó</strong>5.3. Cấu trúc của Gói nguồn</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Lên</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Đầu</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Kế tiếp</strong>5.5. Cùng tồn tại với các Hệ thống Gói Khác</a></li></ul></body></html>
