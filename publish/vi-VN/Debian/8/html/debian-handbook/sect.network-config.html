<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.2. Configuring the Network</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-vi-VN-1.0-1" /><meta
        name="keywords"
        content="Configuration, Localization, Locales, Network, Name resolution, Users, Groups, Accounts, Command-line interpreter, Shell, Printing, Bootloader, Kernel compiling" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="basic-configuration.html"
        title="Chương 8. Basic Configuration: Network, Accounts, Printing..." /><link
        rel="prev"
        href="basic-configuration.html"
        title="Chương 8. Basic Configuration: Network, Accounts, Printing..." /><link
        rel="next"
        href="sect.hostname-name-service.html"
        title="8.3. Setting the Hostname and Configuring the Name Service" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/vi-VN/stable/sect.network-config.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Trước đó</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Kế tiếp</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.network-config"></a>8.2. Configuring the Network</h2></div></div></div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.networking-basics"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>BACK TO BASICS</em></span> Essential network concepts (Ethernet, IP address, subnet, broadcast)</strong></p></div></div></div><a
            id="id-1.11.6.2.2"
            class="indexterm"></a><a
            id="id-1.11.6.2.3"
            class="indexterm"></a><a
            id="id-1.11.6.2.4"
            class="indexterm"></a><a
            id="id-1.11.6.2.5"
            class="indexterm"></a><a
            id="id-1.11.6.2.6"
            class="indexterm"></a><a
            id="id-1.11.6.2.7"
            class="indexterm"></a><a
            id="id-1.11.6.2.8"
            class="indexterm"></a><div
            class="para">
			Most modern local networks use the Ethernet protocol, where data is split into small blocks called frames and transmitted on the wire one frame at a time. Data speeds vary from 10 Mb/s for older Ethernet cards to 10 Gb/s in the newest cards (with the most common rate currently growing from 100 Mb/s to 1 Gb/s). The most widely used cables are called 10BASE-T, 100BASE-T, 1000BASE-T or 10GBASE-T depending on the throughput they can reliably provide (the T stands for “twisted pair”); those cables end in an RJ45 connector. There are other cable types, used mostly for speeds of 1 Gb/s and above.
		</div><a
            id="id-1.11.6.2.10"
            class="indexterm"></a><a
            id="id-1.11.6.2.11"
            class="indexterm"></a><div
            class="para">
			An IP address is a number used to identify a network interface on a computer on a local network or the Internet. In the currently most widespread version of IP (IPv4), this number is encoded in 32 bits, and is usually represented as 4 numbers separated by periods (e.g. <code
              class="literal">192.168.0.1</code>), each number being between 0 and 255 (inclusive, which corresponds to 8 bits of data). The next version of the protocol, IPv6, extends this addressing space to 128 bits, and the addresses are generally represented as a series of hexadecimal numbers separated by colons (e.g., 2001:0db8:13bb:0002:0000:0000:0000:0020, or 2001:db8:13bb:2::20 for short).
		</div><a
            id="id-1.11.6.2.13"
            class="indexterm"></a><a
            id="id-1.11.6.2.14"
            class="indexterm"></a><a
            id="id-1.11.6.2.15"
            class="indexterm"></a><div
            class="para">
			A subnet mask (netmask) defines in its binary code which portion of an IP address corresponds to the network, the remainder specifying the machine. In the example of configuring a static IPv4 address given here, the subnet mask, <code
              class="literal">255.255.255.0</code> (24 “1”s followed by 8 “0”s in binary representation) indicates that the first 24 bits of the IP address correspond to the network address, and the other 8 are specific to the machine. In IPv6, for readability, only the number of “1”s is expressed; the netmask for an IPv6 network could, thus, be <code
              class="literal">64</code>.
		</div><div
            class="para">
			The network address is an IP address in which the part describing the machine's number is 0. The range of IPv4 addresses in a complete network is often indicated by the syntax, <span
              class="emphasis"><em>a.b.c.d/e</em></span>, in which <span
              class="emphasis"><em>a.b.c.d</em></span> is the network address and <span
              class="emphasis"><em>e</em></span> is the number of bits affected to the network part in an IP address. The example network would thus be written: <code
              class="literal">192.168.0.0/24</code>. The syntax is similar in IPv6: <code
              class="literal">2001:db8:13bb:2::/64</code>.
		</div><a
            id="id-1.11.6.2.18"
            class="indexterm"></a><a
            id="id-1.11.6.2.19"
            class="indexterm"></a><div
            class="para">
			A router is a machine that connects several networks to each other. All traffic coming through a router is guided to the correct network. To do this, the router analyzes incoming packets and redirects them according to the IP address of their destination. The router is often known as a gateway; in this configuration, it works as a machine that helps reach out beyond a local network (towards an extended network, such as the Internet).
		</div><a
            id="id-1.11.6.2.21"
            class="indexterm"></a><div
            class="para">
			The special broadcast address connects all the stations in a network. Almost never “routed”, it only functions on the network in question. Specifically, it means that a data packet addressed to the broadcast never passes through the router.
		</div><div
            class="para">
			This chapter focuses on IPv4 addresses, since they are currently the most commonly used. The details of the IPv6 protocol are approached in <a
              class="xref"
              href="sect.ipv6.html">Phần 10.5, “IPv6”</a>, but the concepts remain the same.
		</div></div><div
          class="para">
			Since the network is automatically configured during the initial installation, the <code
            class="filename">/etc/network/interfaces</code> file already contains a valid configuration. A line starting with <code
            class="literal">auto</code> gives a list of interfaces to be automatically configured on boot by <span
            class="pkg pkg">ifupdown</span> and its <code
            class="filename">/etc/init.d/networking</code> init script. This will often be <code
            class="literal">eth0</code>, which refers to the first Ethernet card.
		</div><a
          id="id-1.11.6.4"
          class="indexterm"></a><a
          id="id-1.11.6.5"
          class="indexterm"></a><a
          id="id-1.11.6.6"
          class="indexterm"></a><a
          id="id-1.11.6.7"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVE</em></span> NetworkManager</strong></p></div></div></div><a
            id="id-1.11.6.8.2"
            class="indexterm"></a><div
            class="para">
			If Network Manager is particularly recommended in roaming setups (see <a
              class="xref"
              href="sect.network-config.html#sect.roaming-network-config">Phần 8.2.4, “Automatic Network Configuration for Roaming Users”</a>), it is also perfectly usable as the default network management tool. You can create “System connections” that are used as soon as the computer boots either manually with a <code
              class="filename">.ini</code>-like file in <code
              class="filename">/etc/NetworkManager/system-connections/</code> or through a graphical tool (<code
              class="command">nm-connection-editor</code>). Just remember to deactivate all entries in <code
              class="filename">/etc/network/interfaces</code> if you want Network Manager to handle them. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings/jessie">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings/jessie</a></div> <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://developer.gnome.org/NetworkManager/0.9/ref-settings.html">https://developer.gnome.org/NetworkManager/0.9/ref-settings.html</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.interface-ethernet"></a>8.2.1. Ethernet Interface</h3></div></div></div><div
            class="para">
				If the computer has an Ethernet card, the IP network that is associated with it must be configured by choosing from one of two methods. The simplest method is dynamic configuration with DHCP, and it requires a DHCP server on the local network. It may indicate a desired hostname, corresponding to the <code
              class="literal">hostname</code> setting in the example below. The DHCP server then sends configuration settings for the appropriate network.
			</div><a
            id="id-1.11.6.9.3"
            class="indexterm"></a><a
            id="id-1.11.6.9.4"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.config-dhcp"></a><p
              class="title"><strong>Ví dụ 8.1. DHCP configuration</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto eth0
iface eth0 inet dhcp
  hostname arrakis
</pre></div></div><div
            class="para">
				A “static” configuration must indicate network settings in a fixed manner. This includes at least the IP address and subnet mask; network and broadcast addresses are also sometimes listed. A router connecting to the exterior will be specified as a gateway.
			</div><div
            class="example"><a
              xmlns=""
              id="example.static-network"></a><p
              class="title"><strong>Ví dụ 8.2. Static configuration</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto eth0
iface eth0 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> Multiple addresses</strong></p></div></div></div><div
              class="para">
				It is possible not only to associate several interfaces to a single, physical network card, but also several IP addresses to a single interface. Remember also that an IP address may correspond to any number of names via DNS, and that a name may also correspond to any number of numerical IP addresses.
			</div><div
              class="para">
				As you can guess, the configurations can be rather complex, but these options are only used in very special cases. The examples cited here are typical of the usual configurations.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ppp-rtc"></a>8.2.2. Connecting with PPP through a PSTN Modem</h3></div></div></div><a
            id="id-1.11.6.10.2"
            class="indexterm"></a><a
            id="id-1.11.6.10.3"
            class="indexterm"></a><a
            id="id-1.11.6.10.4"
            class="indexterm"></a><a
            id="id-1.11.6.10.5"
            class="indexterm"></a><div
            class="para">
				A point to point (PPP) connection establishes an intermittent connection; this is the most common solution for connections made with a telephone modem (“PSTN modem”, since the connection goes over the public switched telephone network).
			</div><div
            class="para">
				A connection by telephone modem requires an account with an access provider, including a telephone number, username, password, and, sometimes the authentication protocol to be used. Such a connection is configured using the <code
              class="command">pppconfig</code> tool in the Debian package of the same name. By default, it sets up a connection named <code
              class="literal">provider</code> (as in Internet service provider). When in doubt about the authentication protocol, choose <span
              class="emphasis"><em>PAP</em></span>: it is offered by the majority of Internet service providers.
			</div><a
            id="id-1.11.6.10.8"
            class="indexterm"></a><a
            id="id-1.11.6.10.9"
            class="indexterm"></a><div
            class="para">
				After configuration, it is possible to connect using the <code
              class="command">pon</code> command (giving it the name of the connection as a parameter, when the default value of <code
              class="literal">provider</code> is not appropriate). The link is disconnected with the <code
              class="command">poff</code> command. These two commands can be executed by the root user, or by any other user, provided they are in the <code
              class="literal">dip</code> group.
			</div><a
            id="id-1.11.6.10.11"
            class="indexterm"></a><a
            id="id-1.11.6.10.12"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.adsl"></a>8.2.3. Connecting through an ADSL Modem</h3></div></div></div><a
            id="id-1.11.6.11.2"
            class="indexterm"></a><a
            id="id-1.11.6.11.3"
            class="indexterm"></a><a
            id="id-1.11.6.11.4"
            class="indexterm"></a><div
            class="para">
				The generic term “ADSL modem” covers a multitude of devices with very different functions. The modems that are simplest to use with Linux are those that have an Ethernet interface (and not only a USB interface). These tend to be popular; most ADSL Internet service providers lend (or lease) a “box” with Ethernet interfaces. Depending on the type of modem, the configuration required can vary widely.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pppoe"></a>8.2.3.1. Modems Supporting PPPOE</h4></div></div></div><a
              id="id-1.11.6.11.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.11.6.3"
              class="indexterm"></a><div
              class="para">
					Some Ethernet modems work with the PPPOE protocol (Point to Point Protocol over Ethernet). The <code
                class="command">pppoeconf</code> tool (from the package with the same name) will configure the connection. To do so, it modifies the <code
                class="filename">/etc/ppp/peers/dsl-provider</code> file with the settings provided and records the login information in the <code
                class="filename">/etc/ppp/pap-secrets</code> and <code
                class="filename">/etc/ppp/chap-secrets</code> files. It is recommended to accept all modifications that it proposes.
				</div><div
              class="para">
					Once this configuration is complete, you can open the ADSL connection with the command, <code
                class="command">pon dsl-provider</code> and disconnect with <code
                class="command">poff dsl-provider</code>.
				</div><a
              id="id-1.11.6.11.6.6"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> Starting <code
                          class="command">ppp</code> at boot</strong></p></div></div></div><a
                id="id-1.11.6.11.6.7.2"
                class="indexterm"></a><a
                id="id-1.11.6.11.6.7.3"
                class="indexterm"></a><div
                class="para">
					PPP connections over ADSL are, by definition, intermittent. Since they are usually not billed according to time, there are few downsides to the temptation of keeping them always open. The standard means to do so is to use the init system.
				</div><div
                class="para">
					The default init system on <span
                  class="distribution distribution">Jessie</span> is <code
                  class="command">systemd</code>. Adding an automatically restarting task for the ADSL connection is a simple matter of creating a “unit file” such as <code
                  class="filename">/etc/systemd/system/adsl-connection.service</code>, with contents such as the following:
				</div><pre
                class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div
                class="para">
					Once this unit file has been defined, it needs to be enabled with <code
                  class="command">systemctl enable adsl-connection</code>. Then the loop can be started manually with <code
                  class="command">systemctl start adsl-connection</code>; it will also be started automatically on boot.
				</div><div
                class="para">
					On systems not using <code
                  class="command">systemd</code> (including <span
                  class="distribution distribution">Wheezy</span> and earlier versions of Debian), the standard SystemV init works differently. On such systems, all that is needed is to add a line such as the following at the end of the <code
                  class="filename">/etc/inittab</code> file; then, any time the connection is disconnected, <code
                  class="command">init</code> will reconnect it.
				</div><pre
                class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider
</pre><div
                class="para">
					For ADSL connections that auto-disconnect on a daily basis, this method reduces the duration of the interruption.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pptp"></a>8.2.3.2. Modems Supporting PPTP</h4></div></div></div><a
              id="id-1.11.6.11.7.2"
              class="indexterm"></a><div
              class="para">
					The PPTP (Point-to-Point Tunneling Protocol) protocol was created by Microsoft. Deployed at the beginning of ADSL, it was quickly replaced by PPPOE. If this protocol is forced on you, see <a
                class="xref"
                href="sect.virtual-private-network.html#sect.pptp">Phần 10.2.4, “PPTP”</a>.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-dhcp"></a>8.2.3.3. Modems Supporting DHCP</h4></div></div></div><div
              class="para">
					When a modem is connected to the computer by an Ethernet cable (crossover cable) you typically configure a network connection by DHCP on the computer; the modem automatically acts as a gateway by default and takes care of routing (meaning that it manages the network traffic between the computer and the Internet).
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>BACK TO BASICS</em></span> Crossover cable for a direct Ethernet connection</strong></p></div></div></div><a
                id="id-1.11.6.11.8.3.2"
                class="indexterm"></a><div
                class="para">
					Computer network cards expect to receive data on specific wires in the cable, and send their data on others. When you connect a computer to a local network, you usually connect a cable (straight or crossover) between the network card and a repeater or switch. However, if you want to connect two computers directly (without an intermediary switch or repeater), you must route the signal sent by one card to the receiving side of the other card, and vice-versa. This is the purpose of a crossover cable, and the reason it is used.
				</div><div
                class="para">
					Note that this distinction has become almost irrelevant over time, as modern network cards are able do detect the type of cable present and adapt accordingly, so it won't be unusual that both kinds of cable will work in a given location.
				</div></div><div
              class="para">
					Most “ADSL routers” on the market can be used like this, as do most of the ADSL modems provided by Internet services providers.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.roaming-network-config"></a>8.2.4. Automatic Network Configuration for Roaming Users</h3></div></div></div><a
            id="id-1.11.6.12.2"
            class="indexterm"></a><a
            id="id-1.11.6.12.3"
            class="indexterm"></a><div
            class="para">
				Many Falcot engineers have a laptop computer that, for professional purposes, they also use at home. The network configuration to use differs according to location. At home, it may be a wifi network (protected by a WPA key), while the workplace uses a wired network for greater security and more bandwidth.
			</div><div
            class="para">
				To avoid having to manually connect or disconnect the corresponding network interfaces, administrators installed the <span
              class="pkg pkg">network-manager</span> package on these roaming machines. This software enables a user to easily switch from one network to another using a small icon displayed in the notification area of their graphical desktop. Clicking on this icon displays a list of available networks (both wired and wireless), so they can simply choose the network they wish to use. The program saves the configuration for the networks to which the user has already connected, and automatically switches to the best available network when the current connection drops.
			</div><div
            class="para">
				In order to do this, the program is structured in two parts: a daemon running as root handles activation and configuration of network interfaces and a user interface controls this daemon. PolicyKit handles the required authorizations to control this program and Debian configured PolicyKit in such a way so that members of the netdev group can add or change Network Manager connections.
			</div><div
            class="para">
				Network Manager knows how to handle various types of connections (DHCP, manual configuration, local network), but only if the configuration is set with the program itself. This is why it will systematically ignore all network interfaces in <code
              class="filename">/etc/network/interfaces</code> for which it is not suited. Since Network Manager doesn't give details when no network connections are shown, the easy way is to delete from <code
              class="filename">/etc/network/interfaces</code> any configuration for all interfaces that must be managed by Network Manager.
			</div><div
            class="para">
				Note that this program is installed by default when the “Desktop Environment” task is chosen during initial installation.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVE</em></span> Configuration by “network profile”</strong></p></div></div></div><a
              id="id-1.11.6.12.9.2"
              class="indexterm"></a><div
              class="para">
				More advanced users may want to try the <span
                class="pkg pkg">guessnet</span> package for automatic network configuration. A group of test scripts determine which network profile should be activated and configure it on the fly.
			</div><div
              class="para">
				Users who prefer to manually select a network profile will prefer the <span
                class="pkg pkg">netenv</span> program, found in the package of the same name.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Trước đó</strong>Chương 8. Basic Configuration: Network, Accounts,...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Lên</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Đầu</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Kế tiếp</strong>8.3. Setting the Hostname and Configuring the Nam...</a></li></ul></body></html>
