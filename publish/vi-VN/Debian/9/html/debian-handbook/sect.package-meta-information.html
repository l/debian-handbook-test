<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. Package Meta-Information</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-vi-VN-1.0-1" /><meta
        name="keywords"
        content="Gói nhị phân, Gói mã nguồn, dpkg, dependencies, conflict" /><link
        rel="home"
        href="index.html"
        title="Sổ tay Quản trị Debian" /><link
        rel="up"
        href="packaging-system.html"
        title="Chương 5. Hệ thống gói: Công cụ và Nguyên tắc cơ bản" /><link
        rel="prev"
        href="packaging-system.html"
        title="Chương 5. Hệ thống gói: Công cụ và Nguyên tắc cơ bản" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. Cấu trúc của Gói nguồn" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/vi-VN/stable/sect.package-meta-information.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Trước đó</strong></a></li><li
          class="home">Sổ tay Quản trị Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Kế tiếp</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.package-meta-information"></a>5.2. Package Meta-Information</h2></div></div></div><a
          id="id-1.8.6.2"
          class="indexterm"></a><a
          id="id-1.8.6.3"
          class="indexterm"></a><div
          class="para">
			Gói Debian không chỉ là một lưu trữ của các tệp tin dành cho cài đặt. Nó là một phần tổng thể lớn hơn, và nó mô tả mối quan hệ với các gói Debian khác (phụ thuộc, xung đột hay gợi ý). Nó còn cung cấp các kịch bản cho phép thực hiện các câu lệnh ở các giai đoạn khác nhau trong vòng đời của gói (cài đặt, gỡ bỏ và nâng cấp). Các dữ liệu này được sử dụng bởi trình quản lý gói nhưng không phải là một phần của phần mềm đóng gói; những dữ liệu trong gói, được gọi với tên là “meta-information” (thông tin về các thông tin khác).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.control"></a>5.2.1. Mô tả: tệp tin <code
                    class="filename">control</code></h3></div></div></div><a
            id="id-1.8.6.5.2"
            class="indexterm"></a><a
            id="id-1.8.6.5.3"
            class="indexterm"></a><a
            id="id-1.8.6.5.4"
            class="indexterm"></a><div
            class="para">
				Tệp này sử dụng một cấu trúc giống như headers của email (định nghĩa ở RFC 2822). Ví dụ, cho gói <span
              class="pkg pkg">apt</span>, tệp tin <code
              class="filename">control</code> trông giống như sau:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.4.8
Installed-Size: 3539
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: apt-utils (&lt;&lt; 1.3~exp2~)
Depends: adduser, gpgv | gpgv2 | gpgv1, debian-archive-keyring, init-system-helpers (&gt;= 1.18~), libapt-pkg5.0 (&gt;= 1.3~rc2), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:3.0), libstdc++6 (&gt;= 5.2)
Recommends: gnupg | gnupg2 | gnupg1
Suggests: apt-doc, aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), powermgmt-base, python-apt
Breaks: apt-utils (&lt;&lt; 1.3~exp2~)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 scope::application, scope::utility, sound::player, suite::debian,
 use::downloading, use::organizing, use::searching, works-with::audio,
 works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.4.8_amd64.deb
Size: 1231676
MD5sum: 4963240f23156b2dda3affc9c0d416a3
SHA256: bc319a3abaf98d76e7e13ac97ab0ee7c238a48e2d4ab85524be8b10cfd23d50d</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>QUAY VỀ CƠ BẢN</em></span> RFC — Các chuẩn Internet</strong></p></div></div></div><a
              id="id-1.8.6.5.7.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.7.3"
              class="indexterm"></a><div
              class="para">
				RFC là viết tắt của “Request For Comments”. Một RFC nói chung là một tài liệu kỹ thuật mô tả những gì sẽ trở thành một tiêu chuẩn Internet. Trước khi trở thành tiêu chuẩn hóa và đóng băng, các tiêu chuẩn này được gửi cho công cộng xem xét (đó là lý do đặt tên). IETF (Internet Engineering Task Force) quyết định về sự chuyển đổi các trạng thái của các tài liệu (tiêu chuẩn đề xuất, dự thảo tiêu chuẩn, hoặc tiêu chuẩn).
			</div><div
              class="para">
				RFC 2026 định nghĩa quá trình tiêu chuẩn hóa của các giao thức Internet. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.8"></a>5.2.1.1. Các phụ thuộc: trường <code
                      class="literal">Depends</code></h4></div></div></div><a
              id="id-1.8.6.5.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.4"
              class="indexterm"></a><div
              class="para">
					Các phụ thuộc được định nghĩa ở trường <code
                class="literal">Depends</code> trong tiêu đề gói. Đây là danh sách các điều kiện để đáp ứng cho các gói làm việc chính xác - thông tin này được sử dụng bởi các công cụ như <code
                class="command">apt</code> để cài đặt các thư viện cần thiết, với các phiên bản thích hợp phù hợp với các sự phụ thuộc của gói được cài đặt. Đối với mỗi phụ thuộc, nó có thể hạn chế phạm vi của các phiên bản đáp ứng được điều kiện đó. Nói cách khác, nó có thể để bày tỏ một thực tế rằng chúng ta cần gói <span
                class="pkg pkg">libc6</span> trong một phiên bản tương đương hoặc lớn hơn “2.15” (viết “<code
                class="command">libc6 (&gt;= 2.15)</code>”). Toán tử so sánh phiên bản như sau:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: bé hơn;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: bé hơn hoặc bằng;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: bằng (hãy nhớ “<code
                      class="literal">2.6.1</code>” không bằng với “<code
                      class="literal">2.6.1-1</code>”);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: lớn hơn hoặc bằng;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: lớn hơn.
						</div></li></ul></div><div
              class="para">
					In a list of conditions to be met, the comma serves as a separator. It must be interpreted as a logical “and”. In conditions, the vertical bar (“|”) expresses a logical “or” (it is an inclusive “or”, not an exclusive “either/or”). Carrying greater priority than “and”, it can be used as many times as necessary. Thus, the dependency “(A or B) and C” is written <code
                class="command">A | B, C</code>. In contrast, the expression “A or (B and C)” should be written as “(A or B) and (A or C)”, since the <code
                class="literal">Depends</code> field does not tolerate parentheses that change the order of priorities between the logical operators “or” and “and”. It would thus be written <code
                class="command">A | B, A | C</code>. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://www.debian.org/doc/debian-policy/#document-ch-relationships">https://www.debian.org/doc/debian-policy/#document-ch-relationships</a></div>
				</div><a
              id="id-1.8.6.5.8.8"
              class="indexterm"></a><div
              class="para">
					Hệ thống phụ thuộc là một cơ chế tốt để đảm bảo các hoạt động của một chương trình, nhưng nó còn sử dụng cho “meta-packages”. Đây là gói không chứa nội dung chương trình mà chỉ mô tả phụ thuộc. Nó tạo điều kiện cho quá trình cài đặt của một nhóm các chương trình được phù hợp chọn trước bởi nhà bảo trì meta-package; như vậy, <code
                class="command">apt install <em
                  class="replaceable">meta-package</em></code> sẽ tự động cài đặt tất cả các chương trình sử dụng các phụ thuộc của meta-package. Các gói <span
                class="pkg pkg">gnome</span>, <span
                class="pkg pkg">kde-full</span> and <span
                class="pkg pkg">linux-image-amd64</span> là ví dụ của meta-packages.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DEBIAN POLICY</em></span> <code
                          class="literal">Pre-Depends</code>, một đòi hỏi nhiều hơn <code
                          class="literal">Depends</code></strong></p></div></div></div><a
                id="id-1.8.6.5.8.10.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.10.3"
                class="indexterm"></a><div
                class="para">
					“Pre-dependencies”, mà được liệt kê ở trường “<code
                  class="literal">Pre-Depends</code>” trong tiêu đề gói, ổn định cho sự phụ thuộc bình thường; cú pháp của là giống hệt nhau. Một phụ thuộc bình thường chỉ ra rằng các gói trong trường cần phải được giải nén và cấu hình trước khi cấu hình của gói tuyên bố sự phụ thuộc. Một tiền phụ thuộc (pre) quy định rằng các gói trong trường của nó cần phải được giải nén và cấu hình trước khi thực hiện các kịch bản cài đặt sẵn của gói tuyên bố của tiền phụ thuộc, đó là trước khi cài đặt của nó.
				</div><div
                class="para">
					Một phụ thuộc trước là rất cần thiết cho <code
                  class="command">apt</code>, vì nó thêm một hạn chế nghiêm ngặt về thứ tự các gói để cài đặt. Vì vậy, các phụ thuộc trước không được khuyến khích trừ khi thật sự cần thiết. Thậm chí còn khuyến khích tham khảo các ý kiến từ các nhà phát triển trên <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> trước khi thêm một tiền phụ thuộc. Thường có thể tìm thấy giải pháp khác xung quanh vấn đề đấy.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DEBIAN POLICY</em></span> <code
                          class="literal">Recommends</code>, <code
                          class="literal">Suggests</code>, và <code
                          class="literal">Enhances</code> fields</strong></p></div></div></div><a
                id="id-1.8.6.5.8.11.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.11.3"
                class="indexterm"></a><div
                class="para">
					Trường <code
                  class="literal">Recommends</code> và <code
                  class="literal">Suggests</code> mô tả các sự phụ thuộc mà không bắt buộc. Trường “recommended”, quan trọng nhất, cải thiện đáng kể các chức năng được cung cấp bởi các gói nhưng không phải là không thể thiếu để hoạt động. Trường “suggested”, quan trọng thứ 2, chỉ ra rằng gói nhất định có thể bổ sung và tăng tiện ích của mình, nhưng nó là hoàn toàn hợp lý để cài đặt một mà không có những cái khác.
				</div><div
                class="para">
					Bạn nên thường xuyên cài đặt các gói “recommended”, trừ khi bạn biết chính xác tại sao bạn không cần chúng. Ngược lại, bạn không cần thiết phải cài đặt các gói “suggested” trừ khi bạn biết tại sao bạn cần chúng.
				</div><a
                id="id-1.8.6.5.8.11.6"
                class="indexterm"></a><div
                class="para">
					Trường <code
                  class="literal">Enhances</code> cũng miêu tả một sự gợi ý, nhưng có một điều khác biệt. Nó thực sự nằm trong các gói gợi ý, và không có các lợi ích từ sự gợi ý này. Quan tâm của nó nằm ở chỗ có thểm thêm các gợi ý mà không sửa đổi các gói phần mềm liên quan. Do đó, tất cả các add-on, plug-ins, và các thành phần mở rộng khác của một chương trình có thể xuất hiện ở trường này. Mặc dầu nó đã tồn tại trong vài năm, nhưng trường này vẫn bị bỏ qua bởi các chương trình như <code
                  class="command">apt</code> hoặc <code
                  class="command">synaptic</code>. Mục đích của nó cho một sự gợi ý từ trường <code
                  class="literal">Enhances</code> cho người dùng trong tìm ra trường <code
                  class="literal">Enhances</code>.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.9"></a>5.2.1.2. Xung đột: trường <code
                      class="literal">Conflicts</code></h4></div></div></div><a
              id="id-1.8.6.5.9.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.4"
              class="indexterm"></a><div
              class="para">
					Trường <code
                class="literal">Conflicts</code> chỉ ra rằng khi một gói không thể cài đặt trong trường hơp với gói khác. Phần lớn lý do chung cho vấn đề này là cả hai gói đều bao gốm giống tên nhau, hoặc cung cấp các dịch vụ như nhau ở cùng cổng TCP, hoặc sẽ cản trở hoạt động của gói kia.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> sẽ từ chối cài đặt một gói nếu nó gây xung đột với một trong các gói đã cài đặt, ngoại trừ gói mới đặc biệt nó sẽ “thay thế” gói đã cài đặt, trong trường hợp <code
                class="command">dpkg</code> sẽ chọn để thay thế gói cũ với gói mới, nó sẽ tự động đề nghị gỡ bỏ gói có vẻ có vấn đề.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.10"></a>5.2.1.3. Không tương thích: trường <code
                      class="literal">Breaks</code></h4></div></div></div><a
              id="id-1.8.6.5.10.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.4"
              class="indexterm"></a><div
              class="para">
					Trường <code
                class="literal">Breaks</code> có tác dụng khá giống với trường <code
                class="literal">Conflicts</code>, nhưng với một nghĩa đặc biệt. Nó báo hiệu rằng nếu cài đặt gói này sẽ “làm hỏng” gói khác (hoặc cụ thể là phiên bản của nó). Nói chung, sự không thương thích này giữa hai gói là tạm thời, và trường <code
                class="literal">Breaks</code> quan hệ đặc biệt với các phiên bản không tương thích.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> sẽ từ chối cài đặt một gói nếu nó làm hỏng một gói đã cài đặt, và <code
                class="command">apt</code> sẽ cố giải quyết vấn đề bằng cách cập nhật gói đó lên phiên bản mới nhất (đây là giả định sẽ sửa được và do vậy lại tương thích).
				</div><div
              class="para">
					Tình hình này có thể xảy ra trong trường hợp cập nhật mà không tương thích ngược: Trong trường hợp này nếu phiên bản mới hơn không còn các chức năng như phiên bản cũ, và gây ra một sự cố trong chương trình khác mà không làm gì đặc biệt. Trường <code
                class="literal">Breaks</code> ngăn cản người dùng gặp cả những vấn đề này.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.11"></a>5.2.1.4. Cung cấp Các mục: Trường <code
                      class="literal">Provides</code></h4></div></div></div><a
              id="id-1.8.6.5.11.2"
              class="indexterm"></a><div
              class="para">
					Trường này giới thiệu khái niệm rất thú vị của một “gói ảo”. Nó có nhiều vai trò, nhưng hai trong số đó là quan trọng nhất. Vai trò thứ nhất bao gồm trong sử dụng gói để liên kết với một dịch vụ chung với nó (gói “cung cấp” dịch vụ). Vai trò thứ hai chỉ ra rằng một gói hoàn toàn thay thế một gói khác, và do mục đích này mà nó cũng có thể đáp ứng các phụ thuộc mà gói kia đáp ứng. Do đó có khả năng tạo ra một gói thay thế mà không cần sử dụng cùng tên gói.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> Meta-package và virtual package</strong></p></div></div></div><a
                id="id-1.8.6.5.11.4.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.3"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.4"
                class="indexterm"></a><div
                class="para">
					Cần phân biệt rõ ràng các gói meta từ các gói ảo. Trước đây là các gói thực (bao gồm các tập tin thực <code
                  class="filename">.deb</code>), mà mục đích duy nhất của nó là để thể hiện sự phụ thuộc.
				</div><div
                class="para">
					Các gói ảo, tuy nhiên, không tồn tại về mặt thể chất; chúng chỉ mang nghĩa để xác định các gói thực dựa trên các tiêu chí chung, hợp lý (cung cấp dịch vụ, khả năng tương thích với một chương trình chuẩn hoặc một có sẵn trước, vv).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.5"></a>5.2.1.4.1. Đang cung cấp một “Service”</h5></div></div></div><div
                class="para">
						Chúng ta sẽ thảo luận về trường hợp đầu tiên chi tiết hơn với một ví dụ: tất cả máy chủ mail, ví dụ như <span
                  class="pkg pkg">postfix</span> hoặc <span
                  class="pkg pkg">sendmail</span> “cung cấp” gói <span
                  class="pkg pkg">mail-transport-agent</span> ảo. Thế nên, bất kỳ gói nào cần dịch vụ này để làm tính năng (ví dụ: quản lý mailing list, hay như là <span
                  class="pkg pkg">smartlist</span> hoặc <span
                  class="pkg pkg">sympa</span>) đơn giản là chỉ cần chỉ định phụ thuộc của nó yêu cầu một <span
                  class="pkg pkg">mail-transport-agent</span> thay vi chỉ định một danh sách lớn các giải pháp có thể (ví dụ: <code
                  class="command">postfix | sendmail | exim4 | …</code>). Hơn nữa, không cần thiết phải cài đặt hai máy chủ mail trên cùng một máy, đó là lý do mỗi gói này tuyên bố xung đột với gói ảo <span
                  class="pkg pkg">mail-transport-agent</span>. Một xung đột giữ gói của chính nó sẽ bị hệ thống bỏ qua nhưng kỹ thuật này sẽ cấm cài đặt hai máy chủ mail song song.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>DEBIAN POLICY</em></span> Danh sách các gói ảo</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.5.3.2"
                  class="indexterm"></a><div
                  class="para">
						Đối với các gói ảo là hữu ích, tất cả mọi người phải đồng ý về tên của chúng, đây là lý do tại sao chúng được tiêu chuẩn hóa trong Chính sách Debian, trong đó có một số khác<span
                    class="pkg pkg">mail-transport-agent</span> cho máy chủ mail, <span
                    class="pkg pkg">c-compiler</span> cho trình biên dịch ngôn ngữ lập trình C, u<span
                    class="pkg pkg">www-browser</span> cho các trình duyệt web, <span
                    class="pkg pkg">httpd</span> cho các máy chủ web, <span
                    class="pkg pkg">ftp-server</span> cho máy chủ FTP, u<span
                    class="pkg pkg">x-terminal-emulator</span> cho trình mô phỏng thiết bị đầu cuối ở chế độ đồ hoạ (<code
                    class="command">xterm</code>), và <span
                    class="pkg pkg">x-window-manager</span> cho các trình quản lý cửa sổ.
					</div><div
                  class="para">
						Danh sách đầy đủ có thể được tìm thấy trên Web. <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.6"></a>5.2.1.4.2. Khả năng trao đổi với một Gói khác</h5></div></div></div><div
                class="para">
						The <code
                  class="literal">Provides</code> field is also interesting when the content of a package is included in a larger package. For example, the <span
                  class="pkg pkg">libdigest-md5-perl</span> Perl module was an optional module in Perl 5.6, and has been integrated as standard in Perl 5.8 (and later versions, such as 5.24 present in <span
                  class="distribution distribution">Stretch</span>). As such, the package <span
                  class="pkg pkg">perl</span> has since version 5.8 declared <code
                  class="literal">Provides: libdigest-md5-perl</code> so that the dependencies on this package are met if the user has Perl 5.8 (or newer). The <span
                  class="pkg pkg">libdigest-md5-perl</span> package itself has eventually been deleted, since it no longer had any purpose when old Perl versions were removed.
					</div><div
                class="figure"><a
                  xmlns=""
                  id="id-1.8.6.5.11.6.3"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="Sử dụng trường Provides để không phá vỡ sự phụ thuộc" /></div></div><p
                  class="title"><strong>Hình 5.1. Sử dụng trường <code
                      class="literal">Provides</code> để không phá vỡ sự phụ thuộc</strong></p></div><div
                class="para">
						Tính năng này rất hữu ích vì không thể lường trước được sự biến động của sự phát triển và cần phải có khả năng điều chỉnh để đổi tên và thay thế tự động các phần mềm đã lỗi thời.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>BACK TO BASICS</em></span> Perl, một ngôn ngữ lập trình</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.6.5.2"
                  class="indexterm"></a><a
                  id="id-1.8.6.5.11.6.5.3"
                  class="indexterm"></a><div
                  class="para">
						Perl (Practical Extraction and Report Language) là một ngôn ngữ lập trình rất phổ biến. Nó có nhiều mô đun sẵn sàng để sử dụng, bao gồm một loạt các ứng dụng rộng lớn và được phân phối bởi các máy chủ CPAN (Mạng Toàn diện Perl Archive), một mạng lưới đầy đủ các gói Perl. <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						Vì nó là một ngôn thông dịch nên một chương trình được viết bằng Perl không yêu cầu biên dịch trước khi thực hiện. Đây là lý do tại sao chúng được gọi là “các kịch bản Perl”.
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.7"></a>5.2.1.4.3. Hạn chế trong Quá khứ</h5></div></div></div><div
                class="para">
						Các gói ảo được sử dụng để bị một số hạn chế, đáng kể nhất là không có số phiên bản. Trở lại ví dụ trước, một sự phụ thuộc như <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code>, bất chấp sự có mặt của Perl_5.10, sẽ không bao giờ được coi là thỏa mãn bởi hệ thống gói - trong khi trên thực tế nó rất có thể là thỏa mãn. Không biết về điều này, hệ thống gói đã chọn lựa chọn ít rủi ro nhất, giả định rằng các phiên bản không khớp.
					</div><div
                class="para">
						This limitation has been lifted in <span
                  class="pkg pkg">dpkg</span> 1.17.11, and is no longer relevant in Stretch. Packages can assign a version to the virtual packages they provide with a dependency such as <code
                  class="literal">Provides: libdigest-md5-perl (= 1.8)</code>.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.12"></a>5.2.1.5. Thay thế Các tệp: Trường <code
                      class="literal">Replaces</code></h4></div></div></div><a
              id="id-1.8.6.5.12.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.4"
              class="indexterm"></a><div
              class="para">
					Trường <code
                class="literal">Replaces</code> chỉ ra rằng gói chứa các tệp có trong gói khác nhưng gói đó có quyền thay thế chúng một cách hợp pháp. Nếu không sử dụng đặc tả này, <code
                class="literal">dpkg</code> sẽ báo lỗi, nó không thể ghi đè lên các tệp của một gói khác (về mặt kỹ thuật, dĩ nhiên có thể buộc nó làm như vậy với tùy chọn <code
                class="literal">--force-overwrite</code>, nhưng đó không phải là cách hay). Điều này cho phép xác định các vấn đề tiềm ẩn và yêu cầu người bảo trì phải nghiên cứu vấn đề trước khi lựa chọn có nên thêm vào một trường như thế hay không.
				</div><div
              class="para">
					Việc sử dụng trường này là hợp lý khi tên gói thay đổi hoặc khi gói được bao gồm trong một gói khác. Điều này cũng xảy ra khi người bảo trì quyết định phân phối các tệp tin khác nhau giữa các gói nhị phân khác nhau được tạo ra từ cùng một gói nguồn: tệp được thay thế không còn thuộc về gói cũ nữa, nhưng chỉ cần tệp thay thế mới.
				</div><div
              class="para">
					Nếu tất cả các tệp trong gói được cài đặt đã được thay thế, gói được coi là đã bị xóa. Cuối cùng, trường này cũng khuyến khích <code
                class="command">dpkg</code> để gỡ bỏ gói thay thế nơi có sự xung đột.
				</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> Trường <code
                          class="literal">Tag</code></strong></p></div></div></div><div
                class="para">
					In the <span
                  class="pkg pkg">apt</span> example above, we can see the presence of a field that we have not yet described, the <code
                  class="literal">Tag</code> field. This field does not describe a relationship between packages, but is simply a way of categorizing a package in a thematic taxonomy. This classification of packages according to several criteria (type of interface, programming language, domain of application, etc.) has been available for a long time. Despite this, not all packages have accurate tags and it is not yet integrated in all Debian tools; <code
                  class="command">aptitude</code> displays these tags, and allows them to be used as search criteria. For those who are repelled by <code
                  class="command">aptitude</code>'s search criteria, the following website allows navigation of the tag database: <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://wiki.debian.org/Debtags">https://wiki.debian.org/Debtags</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.configuration-scripts"></a>5.2.2. Kịch bản Cấu hình</h3></div></div></div><a
            id="id-1.8.6.6.2"
            class="indexterm"></a><a
            id="id-1.8.6.6.3"
            class="indexterm"></a><a
            id="id-1.8.6.6.4"
            class="indexterm"></a><a
            id="id-1.8.6.6.5"
            class="indexterm"></a><a
            id="id-1.8.6.6.6"
            class="indexterm"></a><div
            class="para">
				Ngoài tệp <code
              class="filename">control</code>, tệp nén <code
              class="filename">control.tar.gz</code> của mỗi gói Debian có thể chứa một số kịch bản, được gọi bởi <code
              class="command">dpkg</code> ở các giai đoạn khác nhau trong việc xử lý gói. Chính sách Debian mô tả có thể có nhiều trường hợp chi tiết, xác định các kịch bản được gọi và các đối số mà chúng nhận được. Các thực hiện kịch bản này có thể phức tạp, vì nếu một trong các kịch bản không thành công, <code
              class="command">dpkg</code> sẽ cố gắng trở lại trạng thái trước bằng cách hủy bỏ quá trình cài đặt hoặc xóa bỏ tiến trình (trong chừng mực có thể).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> cơ sở dữ liệu của <code
                        class="command">dpkg</code></strong></p></div></div></div><a
              id="id-1.8.6.6.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.6.8.3"
              class="indexterm"></a><div
              class="para">
				Tất cả các kịch bản cấu hình cho các gói đã được cài đặt đều được lưu trữ trong thư mục <code
                class="filename">/var/lib/dpkg/info/</code>, dưới dạng một tập tin được đặt tên với tiền tố là tên của gói. Thư mục này cũng bao gồm một tệp có phần mở rộng <code
                class="filename">.list</code> cho mỗi gói, chứa danh sách các tệp thuộc gói đó.
			</div><div
              class="para">
				Tệp tin <code
                class="filename">/var/lib/dpkg/status</code> chứa một loạt các khối dữ liệu (theo định dạng của tiêu đề thư nổi tiếng, RFC 2822) mô tả trạng thái của mỗi gói. Thông tin từ tệp tin <code
                class="filename">control</code> của các gói được cài đặt cũng được sao chép ở đó.
			</div></div><div
            class="para">
				Nói chung, kịch bản <code
              class="filename">preinst</code> được thực hiện trước khi cài đặt gói, trong khi kịch bản <code
              class="filename">postinst</code> là sau khi cài đặt. Tương tự, <code
              class="filename">prerm</code> được gọi trước khi loại bỏ một gói và <code
              class="filename">postrm</code> sau khi loại bỏ gói xong. Bản cập nhật của một gói tương đương với việc loại bỏ phiên bản trước đó và cài đặt gói mới. Không thể mô tả chi tiết tất cả các kịch bản có thể ở đây nhưng chúng ta sẽ thảo luận hai vấn đề phổ biến nhất: cài đặt/cập nhật và gỡ bỏ.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Tên tượng trưng của kịch bản</strong></p></div></div></div><div
              class="para">
				Trong phần này, chúng ta sẽ gọi các kịch bản cụ thể để phân biệt giữa gói của và gói mới sắp cập nhật, chẳng hạn như là <code
                class="command">old-prerm</code> hoặc <code
                class="command">new-postinst</code>. Chúng tưng úng là <code
                class="command">perm</code> được ở trong phiên bản cũ của gói (được cài đặt trước bản cập nhật) và kịch bản <code
                class="command">postinst</code> ở trong tệp mới (bản cập nhật gói mới).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Sơ đồ trạng thái</strong></p></div></div></div><div
              class="para">
				Manoj Srivastava made these diagrams explaining how the configuration scripts are called by <code
                class="command">dpkg</code>. Similar diagrams have also been developed by the Debian Women project; they are a bit simpler to understand, but less complete. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://people.debian.org/~srivasta/MaintainerScripts.html">https://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://www.debian.org/doc/debian-policy/#maintainer-script-flowcharts">https://www.debian.org/doc/debian-policy/#maintainer-script-flowcharts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.6.12"></a>5.2.2.1. Cài đặt và Nâng cấp</h4></div></div></div><a
              id="id-1.8.6.6.12.2"
              class="indexterm"></a><div
              class="para">
					Dưới đây là những gì xảy ra trong quá trình cài đặt (hoặc cập nhật):
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							Đối với cập nhật, <code
                      class="command">dpkg</code> gọi <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">new-version</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Vẫn với cập nhật, <code
                      class="command">dpkg</code> sau đó thực hiện <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">old-version</em></code>; đối với lần cài đặt đầu tiên, nó thực hiện <code
                      class="command">new-preinst install</code>. Có thể thêm phiên bản cũ vào tham số theo sau, nếu gói đã được cài đặt và gỡ bỏ trước (nhưng không bị xóa, các tệp cấu hình đã được giữ lại).
						</div></li><li
                  class="listitem"><div
                    class="para">
							Các tệp gói mới sau đó được giải nén. Nếu một tập tin đã tồn tại, nó được thay thế, nhưng một bản sao lưu tạm thời được thực hiện.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Cho cập nhật, <code
                      class="command">dpkg</code> thực hiện <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">new-version</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> cập nhật tất cả dữ liệu nội bộ (danh sách tệp, tập lệnh cấu hình, v.v.) và loại bỏ các bản sao lưu của các tệp được thay thế. Đây là điểm không trở lại: <code
                      class="command">dpkg</code> không còn truy cập vào tất cả các yếu tố cần thiết để trở về trạng thái trước đó.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> sẽ cập nhật các tệp cấu hình, hỏi người dùng quyết định xem nó có thể tự động quản lý tác vụ này không. Các chi tiết của thủ tục này được thảo luận trong <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">Phần 5.2.3, “Checksums, Danh sách Tệp Cấu hình”</a>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Cuối cùng, <code
                      class="command">dpkg</code> cấu hình gói bằng cách thực hiện <code
                      class="command">new-postinst configure <em
                        class="replaceable">last-version-configured</em></code>.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.6.13"></a>5.2.2.2. Xóa Gói</h4></div></div></div><div
              class="para">
					Dưới đây là những gì xảy ra trong quá trình loại bỏ gói:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> gọi <code
                      class="command">prerm remove</code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> loại bỏ tất cả các tệp của gói, trừ các tệp cấu hình và tập lệnh cấu hình.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> thực hiện <code
                      class="command">postrm remove</code>. Tất cả các tập lệnh cấu hình, ngoại trừ <code
                      class="filename">postrm</code>, sẽ bị xóa. Nếu người dùng không sử dụng tùy chọn “purge”, quá trình dừng ở đây.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Để xóa toàn bộ gói (lệnh được gọi với <code
                      class="command">dpkg --purge</code> hoặc <code
                      class="command">dpkg -P</code>), các tệp cấu hình cũng sẽ bị xoá. Cũng như là một số lượng nhất định các bản sao (<code
                      class="filename">*.dpkg-tmp</code>, <code
                      class="filename">*.dpkg-old</code>, <code
                      class="filename">*.dpkg-new</code>) và các tập tin tạm; <code
                      class="filename">dpkg</code> sau đó thực hiện <code
                      class="command">postrm purge</code>.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULARY</em></span> Làm sạch, loại bỏ hoàn toàn</strong></p></div></div></div><a
                id="id-1.8.6.6.13.4.2"
                class="indexterm"></a><div
                class="para">
					Khi một gói Debian được gỡ bỏ, các tệp cấu hình được giữ lại để tạo điều kiện cho việc cài đặt lại. Tương tự, dữ liệu tạo ra bởi một daemon (như nội dung của một thư mục máy chủ LDAP, hoặc nội dung của một cơ sở dữ liệu cho một máy chủ SQL) thường được giữ lại.
				</div><div
                class="para">
					Để loại bỏ tất cả các dữ liệu liên quan đến một gói, cần phải “tẩy” gói với lệnh, <code
                  class="command">dpkg -P <em
                    class="replaceable">package</em></code>, <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">package</em></code> hoặc <code
                  class="command">aptitude purge <em
                    class="replaceable">package</em></code>.
				</div><div
                class="para">
					Với tính chất dứt khoát của việc xóa dữ liệu, việc tẩy không nên được xem nhẹ.
				</div></div><a
              id="id-1.8.6.6.13.5"
              class="indexterm"></a><div
              class="para">
					Bốn kịch bản được nêu chi tiết ở trên được bổ sung bởi một tập lệnh <code
                class="filename">config</code>, được cung cấp bởi các gói sử dụng <code
                class="command">debconf</code> để thu thập thông tin từ người dùng để cấu hình. Trong quá trình cài đặt, kịch bản này xác định chi tiết các câu hỏi được yêu cầu bởi <code
                class="command">debconf</code>. Câu trả lời được ghi lại trong cơ sở dữ liệu <code
                class="command">debconf</code> để tham khảo trong tương lai. Tập lệnh thường được thực thi bởi <code
                class="command">apt</code> trước khi cài đặt từng gói một để nhóm tất cả các câu hỏi và yêu cầu tất cả các người dùng vào lúc bắt đầu quá trình. Các tập lệnh trước và sau khi cài đặt có thể sử dụng thông tin này để hoạt động theo ý muốn của người dùng.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TOOL</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="id-1.8.6.6.13.7.2"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">debconf</code> được tạo ra để giải quyết một vấn đề định kỳ trong Debian. Tất cả các gói Debian không thể hoạt động mà không có cấu hình tối thiểu được sử dụng để đặt câu hỏi với các cuộc gọi tới các lệnh <code
                  class="command">echo</code> và <code
                  class="command">read</code> trong kịch bản <code
                  class="filename">postinst</code> (và các kịch bản tương tự khác). Nhưng điều này cũng có nghĩa là trong quá trình cài đặt hoặc cập nhật lớn người dùng phải ở lại máy tính để trả lời các câu hỏi khác nhau có thể phát sinh bất cứ lúc nào. Những tương tác thủ công này đã được hầu như hoàn toàn giải phóng, nhờ công cụ <code
                  class="command">debconf</code>.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> có nhiều tính năng thú vị: nó đòi hỏi nhà phát triển phải xác định tương tác người dùng; Nó cho phép nội địa hóa tất cả các chuỗi được hiển thị cho người dùng (tất cả các bản dịch được lưu trong tệp <code
                  class="filename">templates</code> mô tả các tương tác); Nó có frontend khác nhau để hiển thị các câu hỏi cho người sử dụng (chế độ văn bản, chế độ đồ họa, không tương tác); Và nó cho phép tạo ra một cơ sở dữ liệu trung tâm của các phản hồi để chia sẻ cùng một cấu hình với một số máy tính... nhưng điều quan trọng nhất là bây giờ có thể trình bày tất cả các câu hỏi liên tiếp với người dùng, trước khi bắt đầu quá trình cài đặt hoặc cập nhật dài hơi. Người sử dụng có thể tiến hành công việc của họ trong khi hệ thống tự quản lý việc cài đặt, mà không cần phải ở lại đó nhìn chằm chằm vào màn hình chờ các câu hỏi.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.conffiles"></a>5.2.3. Checksums, Danh sách Tệp Cấu hình</h3></div></div></div><a
            id="id-1.8.6.7.2"
            class="indexterm"></a><a
            id="id-1.8.6.7.3"
            class="indexterm"></a><a
            id="id-1.8.6.7.4"
            class="indexterm"></a><a
            id="id-1.8.6.7.5"
            class="indexterm"></a><a
            id="id-1.8.6.7.6"
            class="indexterm"></a><div
            class="para">
				Ngoài các kịch bản bảo trì và dữ liệu điều khiển đã được đề cập trong các phần trước, tệp nén <code
              class="filename">control.tar.gz</code> của một gói Debian có thể chứa các tệp tin thú vị khác. Đầu tiên, <code
              class="filename">md5sums</code>, chứa checksums MD5 cho tất cả các tệp của gói. Ưu điểm chính của nó là nó cho phép <code
              class="command">dpkg --verify</code> (chúng ta sẽ nghiên cứu trong <a
              class="xref"
              href="sect.supervision.html#sect.dpkg-verify">Phần 14.3.3.1, “Auditing Packages with <code
                class="command">dpkg --verify</code>”</a>) để kiểm tra xem các tệp này đã được sửa đổi từ khi cài đặt hay không. Lưu ý rằng khi tệp này không tồn tại, <code
              class="command">dpkg</code> sẽ tự động tạo ra nó trong thời gian cài đặt (và lưu trữ nó trong cơ sở dữ liệu dpkg giống như các tệp kiểm soát khác).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> liệt kê các tệp tin gói phải được xử lý như tệp cấu hình. Các tệp cấu hình có thể được quản trị viên sửa đổi và <code
              class="command">dpkg</code> sẽ cố gắng bảo vệ những thay đổi đó trong quá trình cập nhật gói.
			</div><div
            class="para">
				Trong trường hợp này, <code
              class="command">dpkg</code> hoạt động thông minh nhất có thể: nếu tập tin cấu hình tiêu chuẩn không thay đổi giữa hai phiên bản, nó không làm gì cả. Tuy nhiên, nếu tệp đã thay đổi, nó sẽ cố gắng cập nhật tệp này. Có hai trường hợp: quản trị viên không chạm vào tệp cấu hình này, trong trường hợp đó <code
              class="command">dpkg</code> tự động cài đặt phiên bản mới; Hoặc tập tin đã được sửa đổi, trong trường hợp này <code
              class="command">dpkg</code> yêu cầu quản trị viên phiên bản nào họ muốn sử dụng (bản cũ có sửa đổi, hoặc phiên bản mới được cung cấp kèm theo gói). Để hỗ trợ đưa ra quyết định này, <code
              class="command">dpkg</code> cung cấp để hiển thị “<code
              class="command">diff</code>” cho thấy sự khác biệt giữa hai phiên bản. Nếu người dùng chọn giữ lại phiên bản cũ, tệp mới sẽ được lưu trữ ở cùng vị trí trong một tệp có đuôi <code
              class="filename">.dpkg-dist</code>. Nếu người dùng chọn phiên bản mới, phần cũ sẽ được giữ lại trong một tệp có đuôi <code
              class="filename">.dpkg-old</code>. Một hành động khả dụng khác bao gồm tạm ngưng <code
              class="command">dpkg</code> để chỉnh sửa tệp và cố gắng cài đặt lại các sửa đổi có liên quan (trước đây được xác định với <code
              class="command">diff</code>).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> Tránh các câu hỏi về tệp cấu hình</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> xử lý các bản cập nhật tập tin cấu hình, nhưng, trong khi làm như vậy, thường xuyên ngắt công việc của nó để yêu cầu nhập từ quản trị viên. Điều này làm cho nó ít thú vị hơn cho những ai muốn chạy các bản cập nhật theo cách không tương tác. Đây là lý do tại sao chương trình này cung cấp các tùy chọn cho phép hệ thống tự động trả lời theo logic tương tự: <code
                class="command">--force-confold</code> giữ lại phiên bản cũ của tệp; <code
                class="command">--force-confnew</code> sẽ sử dụng phiên bản mới của tệp tin (các lựa chọn này được tôn trọng, ngay cả khi tệp không bị thay đổi bởi quản trị viên, điều này hiếm khi có hiệu ứng mong muốn). Thêm tùy chọn <code
                class="command">--force-confdef</code> để <code
                class="command">dpkg</code> tự quyết định khi có thể (nói cách khác, khi tệp cấu hình ban đầu chưa được chạm vào) và chỉ sử dụng <code
                class="command">--force-confnew</code> hoặc <code
                class="command">--force-confold</code> cho các trường hợp khác.
			</div><div
              class="para">
				Các tùy chọn này áp dụng cho <code
                class="command">dpkg</code>, nhưng hầu hết thời gian người quản trị viên sẽ làm việc trực tiếp với chương trình <code
                class="command">aptitude</code> hoặc <code
                class="command">apt-get</code>. Do đó, cần biết cú pháp được sử dụng để chỉ ra các tùy chọn để vượt qua lệnh <code
                class="command">dpkg</code> (các giao diện dòng lệnh của chúng rất giống nhau).
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" full-upgrade</code></strong></pre><div
              class="para">
				Các tùy chọn này có thể được lưu trữ trực tiếp trong cấu hình của <code
                class="command">apt</code>. Để làm như vậy, chỉ cần viết dòng sau trong tệp <code
                class="filename"> /etc/apt/apt.conf.d/local</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }</pre></div><div
              class="para">
				Bao gồm tùy chọn này trong tệp cấu hình có nghĩa là nó cũng sẽ được sử dụng trong một giao diện đồ họa như <code
                class="command">aptitude</code>.
			</div></div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> Buộc dpkg yêu cầu hỏi về tệp cấu hình</strong></p></div></div></div><div
              class="para">
				Tùy chọn <code
                class="command">--force-confask</code> yêu cầu <code
                class="command">dpkg</code> hiển thị các câu hỏi về các tệp cấu hình, ngay cả trong trường hợp không cần thiết. Do đó, khi cài đặt lại một gói với tùy chọn này, <code
                class="command">dpkg</code> sẽ hỏi lại tất cả các tập tin cấu hình do quản trị viên sửa đổi. Điều này rất thuận tiện, đặc biệt là để cài đặt lại tập tin cấu hình ban đầu nếu nó đã bị xóa và không có bản sao nào khác có sẵn: trong khi cài đặt lại bình thường sẽ không hoạt động vì <code
                class="command">dpkg</code> coi việc xóa như một hình thức sửa đổi hợp pháp, và, do đó không cài đặt các tập tin cấu hình mong muốn.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Trước đó</strong>Chương 5. Hệ thống gói: Công cụ và Nguyên tắc cơ ...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Lên</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Đầu</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Kế tiếp</strong>5.3. Cấu trúc của Gói nguồn</a></li></ul></body></html>
