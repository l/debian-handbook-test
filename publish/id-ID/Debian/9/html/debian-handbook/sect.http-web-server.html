<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">11.2. Server Web (HTTP)</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-id-ID-1.0-1" /><meta
        name="keywords"
        content="Postfix, Apache, NFS, Samba, Squid, OpenLDAP, SIP" /><link
        rel="home"
        href="index.html"
        title="Buku Panduan Administrator Debian" /><link
        rel="up"
        href="network-services.html"
        title="Bab 11. Layanan Jaringan: Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN" /><link
        rel="prev"
        href="network-services.html"
        title="Bab 11. Layanan Jaringan: Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN" /><link
        rel="next"
        href="sect.ftp-file-server.html"
        title="11.3. FTP File Server" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/id-ID/stable/sect.http-web-server.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="network-services.html"><strong>Sebelumnya</strong></a></li><li
          class="home">Buku Panduan Administrator Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.ftp-file-server.html"><strong>Lanjut</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.http-web-server"></a>11.2. Server Web (HTTP)</h2></div></div></div><div
          class="para">
			The Falcot Corp administrators decided to use the Apache HTTP server, included in Debian <span
            class="distribution distribution">Jessie</span> at version 2.4.10.
		</div><a
          id="id-1.14.5.3"
          class="indexterm"></a><a
          id="id-1.14.5.4"
          class="indexterm"></a><a
          id="id-1.14.5.5"
          class="indexterm"></a><a
          id="id-1.14.5.6"
          class="indexterm"></a><a
          id="id-1.14.5.7"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIF</em></span> Server web lain</strong></p></div></div></div><div
            class="para">
			Apache is merely the most widely-known (and widely-used) web server, but there are others; they can offer better performance under certain workloads, but this has its counterpart in the smaller number of available features and modules. However, when the prospective web server is built to serve static files or to act as a proxy, the alternatives, such as <span
              class="pkg pkg">nginx</span> and <span
              class="pkg pkg">lighttpd</span>, are worth investigating.
		</div><a
            id="id-1.14.5.8.3"
            class="indexterm"></a><a
            id="id-1.14.5.8.4"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.5.9"></a>11.2.1. Memasang Apache</h3></div></div></div><div
            class="para">
				Memasang paket <span
              class="pkg pkg">apache2</span> adalah semua yang diperlukan. Ini berisi semua modul, termasuk <span
              class="emphasis"><em>Multi-Processing Modules</em></span> (MPM) yang mempengaruhi bagaimana Apache menangani pemrosesan paralel dari banyak permintaan (yang biasanya disediakan dalam paket terpisah <span
              class="pkg pkg">apache2-mpm-*</span>). Ini juga akan menarik <span
              class="pkg pkg">apache2-utils</span> yang mengandung utilitas baris perintah yang kita akan temui nanti.
			</div><div
            class="para">
				The MPM in use affects significantly the way Apache will handle concurrent requests. With the <span
              class="emphasis"><em>worker</em></span> MPM, it uses <span
              class="emphasis"><em>threads</em></span> (lightweight processes), whereas with the <span
              class="emphasis"><em>prefork</em></span> MPM it uses a pool of processes created in advance. With the <span
              class="emphasis"><em>event</em></span> MPM it also uses threads, but the inactive connections (notably those kept open by the HTTP <span
              class="emphasis"><em>keep-alive</em></span> feature) are handed back to a dedicated management thread.
			</div><div
            class="para">
				Para administrator Falcot juga memasang <span
              class="pkg pkg">libapache2-mod-php5</span> untuk menyertakan dukungan PHP di Apache. Hal ini menyebabkan MPM <span
              class="emphasis"><em>event</em></span> baku dinonaktifkan, dan <span
              class="emphasis"><em>prefork</em></span> digunakan sebagai pengganti, karena PHP hanya bekerja di bawah MPM tertentu itu.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KEAMANAN</em></span> Eksekusi di bawah pengguna <code
                        class="literal">www-data</code></strong></p></div></div></div><a
              id="id-1.14.5.9.5.2"
              class="indexterm"></a><a
              id="id-1.14.5.9.5.3"
              class="indexterm"></a><div
              class="para">
				By default, Apache handles incoming requests under the identity of the <code
                class="literal">www-data</code> user. This means that a security vulnerability in a CGI script executed by Apache (for a dynamic page) won't compromise the whole system, but only the files owned by this particular user.
			</div><div
              class="para">
				Menggunakan modul <span
                class="emphasis"><em>suexec</em></span> memungkinkan melewati aturan ini sehingga beberapa skrip CGI dijalankan di bawah identitas pengguna lain. Ini dikonfigurasi dengan direktif <code
                class="literal"><em
                  class="replaceable">pengguna</em> SuexecUserGroup <em
                  class="replaceable">kelompok</em></code> dalam konfigurasi Apache.
			</div><a
              id="id-1.14.5.9.5.6"
              class="indexterm"></a><div
              class="para">
				Another possibility is to use a dedicated MPM, such as the one provided by <span
                class="pkg pkg">libapache2-mpm-itk</span>. This particular one has a slightly different behavior: it allows “isolating” virtual hosts (actually, sets of pages) so that they each run as a different user. A vulnerability in one website therefore cannot compromise files belonging to the owner of another website.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>LIHAT SEKILAS</em></span> Daftar modul</strong></p></div></div></div><div
              class="para">
				Daftar lengkap modul standar Apache dapat ditemukan daring. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://httpd.apache.org/docs/2.4/mod/index.html">http://httpd.apache.org/docs/2.4/mod/index.html</a></div>
			</div></div><div
            class="para">
				Apache is a modular server, and many features are implemented by external modules that the main program loads during its initialization. The default configuration only enables the most common modules, but enabling new modules is a simple matter of running <code
              class="command">a2enmod <em
                class="replaceable">module</em></code>; to disable a module, the command is <code
              class="command">a2dismod <em
                class="replaceable">module</em></code>. These programs actually only create (or delete) symbolic links in <code
              class="filename">/etc/apache2/mods-enabled/</code>, pointing at the actual files (stored in <code
              class="filename">/etc/apache2/mods-available/</code>).
			</div><div
            class="para">
				Dengan konfigurasi bakunya, server web mendengarkan pada port 80 (seperti yang dikonfigurasi di <code
              class="filename">/etc/apache2/ports.conf</code>), dan menyajikan halaman dari direktori <code
              class="filename">/var/www/html/</code> (seperti yang dikonfigurasi di <code
              class="filename">/etc/apache2/sites-enabled/000-default.conf</code>).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>LEBIH JAUH</em></span> Menambahkan dukungan untuk SSL</strong></p></div></div></div><a
              id="id-1.14.5.9.9.2"
              class="indexterm"></a><a
              id="id-1.14.5.9.9.3"
              class="indexterm"></a><div
              class="para">
				Apache 2.4 termasuk modul SSL yang diperlukan untuk HTTP yang aman (HTTPS) secara baku. Hanya perlu diaktifkan dengan <code
                class="command">a2enmod ssl</code>, kemudian direktif yang diperlukan harus ditambahkan ke berkas konfigurasi. Contoh konfigurasi tersedia di <code
                class="filename">/etc/apache2/sites-available/default-ssl.conf</code>. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://httpd.apache.org/docs/2.4/mod/mod_ssl.html">http://httpd.apache.org/docs/2.4/mod/mod_ssl.html</a></div>
			</div><div
              class="para">
				Mesti lebih hati-hati jika Anda ingin lebih menyukai koneksi SSL dengan <span
                class="emphasis"><em>Perfect Forward Secrecy</em></span> (koneksi-koneksi tersebut menggunakan kunci sesi ephemeral yang memastikan bahwa terungkapnya kunci rahasia server tidak mengakibatkan terungkapnya lalu lintas lama yang terenkripsi yang mungkin tersimpan ketika menguping pada jaringan). Silakan lihat pada rekomendasi Mozilla, khususnya: <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://wiki.mozilla.org/Security/Server_Side_TLS#Apache">https://wiki.mozilla.org/Security/Server_Side_TLS#Apache</a></div>
			</div><a
              id="id-1.14.5.9.9.6"
              class="indexterm"></a></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.5.10"></a>11.2.2. Mengkonfigurasi Host Virtual</h3></div></div></div><div
            class="para">
				Suatu host virtual adalah identitas tambahan untuk server web.
			</div><a
            id="id-1.14.5.10.3"
            class="indexterm"></a><div
            class="para">
				Apache considers two different kinds of virtual hosts: those that are based on the IP address (or the port), and those that rely on the domain name of the web server. The first method requires allocating a different IP address (or port) for each site, whereas the second one can work on a single IP address (and port), and the sites are differentiated by the hostname sent by the HTTP client (which only works in version 1.1 of the HTTP protocol — fortunately that version is old enough that all clients use it already).
			</div><div
            class="para">
				(Semakin) langkanya alamat IPv4 biasanya lebih mengarah ke metode kedua; namun, itu dibuat lebih kompleks jika host virtual perlu menyediakan HTTPS juga, karena protokol SSL tidak selalu disediakan untuk berbasis nama virtual hosting; ekstensi SNI (<span
              class="emphasis"><em>Server Name Indication</em></span>) yang memungkinkan kombinasi tersebut tidak ditangani oleh semua browser. Ketika beberapa situs HTTPS perlu menjalankan pada server yang sama, mereka akan biasanya dibedakan baik dengan berjalan pada port lain atau pada alamat IP yang berbeda (IPv6 dapat membantu di sana).
			</div><div
            class="para">
				The default configuration for Apache 2 enables name-based virtual hosts. In addition, a default virtual host is defined in the <code
              class="literal">/etc/apache2/sites-enabled/000-default.conf</code> file; this virtual host will be used if no host matching the request sent by the client is found.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>HATI-HATI</em></span> Host virtual pertama</strong></p></div></div></div><div
              class="para">
				Permintaan mengenai host virtual yang tak dikenal akan selalu disajikan oleh host virtual yang pertama didefinisikan, itulah sebabnya mengapa kita definisikan <code
                class="literal">www.falcot.com</code> pertama di sini.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>LIHAT SEKILAS</em></span> Apache mendukung SNI</strong></p></div></div></div><a
              id="id-1.14.5.10.8.2"
              class="indexterm"></a><div
              class="para">
				Server Apache mendukung ekstensi protokol SSL yang bernama <span
                class="emphasis"><em>Server Name Indication</em></span> (SNI). Ekstensi ini memungkinkan peramban untuk mengirim nama host server web selama pembentukan sambungan SSL, jauh lebih awal daripada permintaan HTTP itu sendiri, yang sebelumnya digunakan untuk mengidentifikasi host virtual yang diminta di antara yang di-host pada server yang sama (dengan alamat IP dan port yang sama). Hal ini memungkinkan Apache untuk memilih sertifikat SSL yang paling tepat agar transaksi dapat berlanjut.
			</div><div
              class="para">
				Sebelum SNI, Apache akan selalu menggunakan sertifikat yang didefinisikan dalam host virtual baku. Klien yang mencoba untuk mengakses host virtual lain kemudian akan menampilkan peringatan, karena sertifikat yang mereka terima tidak cocok dengan situs web mereka coba akses. Untungnya, sebagian besar peramban sekarang bekerja dengan SNI; ini termasuk Microsoft Internet Explorer mulai versi 7.0 (mulai pada Vista), Mozilla Firefox dimulai dengan versi 2.0, Apple Safari sejak versi 3.2.1 dan semua versi Google Chrome.
			</div><div
              class="para">
				Paket Apache yang tersedia di Debian dibangun dengan dukungan untuk SNI; maka tidak ada konfigurasi tertentu yang diperlukan.
			</div><div
              class="para">
				Care should also be taken to ensure that the configuration for the first virtual host (the one used by default) does enable TLSv1, since Apache uses the parameters of this first virtual host to establish secure connections, and they had better allow them!
			</div></div><div
            class="para">
				Each extra virtual host is then described by a file stored in <code
              class="filename">/etc/apache2/sites-available/</code>. Setting up a website for the <code
              class="literal">falcot.org</code> domain is therefore a simple matter of creating the following file, then enabling the virtual host with <code
              class="command">a2ensite www.falcot.org</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.14.5.10.10"></a><p
              class="title"><strong>Contoh 11.16. Berkas <code
                  class="filename">/etc/apache2/sites-available/www.falcot.org.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
&lt;VirtualHost *:80&gt;
ServerName www.falcot.org
ServerAlias falcot.org
DocumentRoot /srv/www/www.falcot.org
&lt;/VirtualHost&gt;</pre></div></div><div
            class="para">
				Apache server, yang dikonfigurasi sejauh ini, menggunakan berkas log yang sama untuk semua host virtual (walaupun ini bisa diganti dengan menambahkan direktif <code
              class="literal">CustomLog</code> dalam definisi host virtual). Maka masuk akal untuk menyesuaikan format berkas log ini agar menyertakan nama host virtual. Ini dapat dilakukan dengan menciptakan sebuah berkas <code
              class="filename">/etc/apache2/conf-available/customlog.conf</code> yang menentukan format baru untuk semua berkas log (dengan direktif <code
              class="literal">LogFormat</code>) dan memfungsikannya dengan <code
              class="command">a2enconf customlog </code>. Baris <code
              class="literal">CustomLog</code> harus juga akan dihapus (atau dijadikan komentar) dari berkas <code
              class="filename">/etc/apache2/sites-available/000-default.conf</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.14.5.10.12"></a><p
              class="title"><strong>Contoh 11.17. Berkas <code
                  class="filename">/etc/apache2/conf.d/customlog.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting scale">
# Format log baru termasuk nama host (virtual)
LogFormat "%v %h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\"" vhost

# Sekarang mari kita pakai format "vhost" ini secara baku
CustomLog /var/log/apache2/access.log vhost</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.5.11"></a>11.2.3. Direktif Umum</h3></div></div></div><div
            class="para">
				Bagian ini mengulas secara singkat beberapa direktif konfigurasi Apache yang sering digunakan.
			</div><a
            id="id-1.14.5.11.3"
            class="indexterm"></a><a
            id="id-1.14.5.11.4"
            class="indexterm"></a><div
            class="para">
				Berkas konfigurasi utama biasanya memuat beberapa blok <code
              class="literal">Directory</code> blok; mereka memungkinkan menentukan perilaku yang berbeda untuk server tergantung pada lokasi berkas yang diminta. Blok tersebut umumnya memuat direktif <code
              class="literal">Options</code> dan <code
              class="literal">AllowOverride</code>.
			</div><a
            id="id-1.14.5.11.6"
            class="indexterm"></a><a
            id="id-1.14.5.11.7"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="id-1.14.5.11.8"></a><p
              class="title"><strong>Contoh 11.18. Blok direktori</strong></p><div
              class="example-contents"><pre
                class="programlisting">
&lt;Directory /var/www&gt;
Options Includes FollowSymlinks
AllowOverride All
DirectoryIndex index.php index.html index.htm
&lt;/Directory&gt;
</pre></div></div><div
            class="para">
				The <code
              class="literal">DirectoryIndex</code> directive contains a list of files to try when the client request matches a directory. The first existing file in the list is used and sent as a response.
			</div><a
            id="id-1.14.5.11.10"
            class="indexterm"></a><div
            class="para">
				The <code
              class="literal">Options</code> directive is followed by a list of options to enable. The <code
              class="literal">None</code> value disables all options; correspondingly, <code
              class="literal">All</code> enables them all except <code
              class="literal">MultiViews</code>. Available options include:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">ExecCGI</code> indicates that CGI scripts can be executed. <a
                    id="id-1.14.5.11.12.1.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">FollowSymlinks</code> tells the server that symbolic links can be followed, and that the response should contain the contents of the target of such links. <a
                    id="id-1.14.5.11.12.2.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">SymlinksIfOwnerMatch</code> juga memberitahu server untuk mengikuti taut simbolik, tetapi hanya bila taut dan target memiliki pemilik yang sama. <a
                    id="id-1.14.5.11.12.3.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">Includes</code> memfungsikan <span
                    class="emphasis"><em>Server Side Includes</em></span> (disingkat <span
                    class="emphasis"><em>SSI</em></span>). Ini adalah direktif yang tertanam di halaman HTML dan dieksekusi sambil jalan untuk setiap permintaan. <a
                    id="id-1.14.5.11.12.4.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">Indexes</code> memberitahu server untuk memberikan daftar isi direktori jika permintaan HTTP yang dikirim oleh klien menunjuk ke direktori tanpa berkas indeks (yaitu, ketika tidak ada berkas yang disebutkan oleh direktif <code
                    class="literal">DirectoryIndex</code> yang ada dalam direktori ini). <a
                    id="id-1.14.5.11.12.5.1.3"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">MultiViews</code> memungkinkan negosiasi konten; ini dapat digunakan oleh server untuk mengembalikan halaman web yang cocok dengan bahasa pilihan sebagaimana dikonfigurasi dalam peramban. <a
                    id="id-1.14.5.11.12.6.1.2"
                    class="indexterm"></a>
					</div></li></ul></div><div
            class="para">
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KEMBALI KE DASAR</em></span> berkas <code
                        class="filename">.htaccess</code></strong></p></div></div></div><div
              class="para">
				Berkas <code
                class="filename">.htaccess</code> berisi direktif konfigurasi Apache yang diberlakukan setiap kali suatu permintaan terkait dengan elemen dari direktori tempat itu disimpan. Lingkup direktif ini juga berlaku rekursif untuk semua subdirektori di dalamnya.
			</div><a
              id="id-1.14.5.11.14.3"
              class="indexterm"></a><div
              class="para">
				Sebagian besar direktif yang bisa muncul dalam blok <code
                class="literal">Directory</code> juga legal dalam berkas <code
                class="filename">.htaccess</code>.
			</div></div><div
            class="para">
				Direktif <code
              class="literal">AllowOverride</code> mencantumkan semua pilihan yang dapat diaktifkan atau dinonaktifkan melalui berkas <code
              class="filename">.htaccess</code>. Penggunaan umum pilihan ini adalah untuk membatasi <code
              class="literal">ExecCGI</code>, sehingga administrator memilih pengguna yang diizinkan untuk menjalankan program di bawah identitas server web (pengguna <code
              class="literal">www-data</code>).
			</div><a
            id="id-1.14.5.11.16"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.14.5.11.17"></a>11.2.3.1. Memerlukan Otentikasi</h4></div></div></div><a
              id="id-1.14.5.11.17.2"
              class="indexterm"></a><div
              class="para">
					Dalam beberapa keadaan, akses ke sebagian dari sebuah situs web harus dibatasi, jadi hanya pengguna sah yang memberikan nama pengguna dan kata sandi yang diberikan akses ke isi.
				</div><div
              class="example"><a
                xmlns=""
                id="id-1.14.5.11.17.4"></a><p
                class="title"><strong>Contoh 11.19. berkas <code
                    class="filename">.htaccess</code> yang memerlukan otentikasi</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
Require valid-user
AuthName "Private directory"
AuthType Basic
AuthUserFile /etc/apache2/authfiles/htpasswd-private</pre></div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>KEAMANAN</em></span> Tidak ada keamanan</strong></p></div></div></div><div
                class="para">
					Sistem otentikasi yang digunakan dalam contoh di atas (<code
                  class="literal">Basic</code>) memiliki keamanan minimal karena kata sandi dikirim dalam bentuk teks (hanya dikodekan sebagai <span
                  class="emphasis"><em>base64</em></span>, yang merupakan pengkodean sederhana, bukan suatu metode enkripsi). Juga harus dicatat bahwa dokumen-dokumen yang "dilindungi" oleh mekanisme ini juga pergi melalui jaringan dalam keadaan polos. Jika keamanan penting, seluruh sambungan HTTP harus dienkripsi dengan SSL.
				</div></div><div
              class="para">
					Berkas <code
                class="filename">/etc/apache2/authfiles/htpasswd-private</code> berisi daftar pengguna dan kata sandi; itu umumnya dimanipulasi dengan perintah <code
                class="command">htpasswd</code>. Sebagai contoh, perintah berikut digunakan untuk menambahkan pengguna atau mengubah sandi: <a
                id="id-1.14.5.11.17.6.3"
                class="indexterm"></a>
				</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>htpasswd /etc/apache2/authfiles/htpasswd-private <em
                    class="replaceable">user</em>
</code></strong><code
                class="computeroutput">New password:
Re-type new password:
Adding password for user <em
                  class="replaceable">user</em>
</code></pre></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.14.5.11.18"></a>11.2.3.2. Membatasi Akses</h4></div></div></div><a
              id="id-1.14.5.11.18.2"
              class="indexterm"></a><div
              class="para">
					Direktif <code
                class="literal">Require</code> mengendalikan pembatasan akses untuk suatu direktori (dan subdirektorinya, secara rekursif).
				</div><a
              id="id-1.14.5.11.18.4"
              class="indexterm"></a><a
              id="id-1.14.5.11.18.5"
              class="indexterm"></a><a
              id="id-1.14.5.11.18.6"
              class="indexterm"></a><div
              class="para">
					Dapat digunakan untuk membatasi akses berdasarkan kepada banyak kriteria; kita akan berhenti di menggambarkan pembatasan akses berdasarkan alamat IP dari klien, tapi itu bisa dibuat jauh lebih kuat daripada itu, terutama ketika beberapa direktif <code
                class="literal">Require</code> digabung dalam sebuah blok <code
                class="literal">RequireAll</code>.
				</div><div
              class="example"><a
                xmlns=""
                id="id-1.14.5.11.18.8"></a><p
                class="title"><strong>Contoh 11.20. Hanya mengizinkan dari jaringan lokal</strong></p><div
                class="example-contents"><pre
                  class="programlisting">Require ip 192.168.0.0/16</pre></div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIF</em></span> Sintaks lama</strong></p></div></div></div><div
                class="para">
					Sintaks <code
                  class="literal">Require</code> hanya tersedia di Apache 2.4 (versi di <span
                  class="distribution distribution">Jessie</span>). Untuk pengguna <span
                  class="distribution distribution">Wheezy</span>, sintaks Apache 2.2 berbeda, dan kami menjelaskan di sini hanya untuk referensi, walaupun itu juga dapat dibuat tersedia di Apache 2.4 menggunakan modul <code
                  class="literal">mod_access_compat</code>.
				</div><div
                class="para">
					Direktif <code
                  class="literal">Allow from</code> dan <code
                  class="literal">Deny from</code> mengendalikan pembatasan akses untuk suatu direktori (dan subdirektorinya, secara rekursif).
				</div><a
                id="id-1.14.5.11.18.9.4"
                class="indexterm"></a><a
                id="id-1.14.5.11.18.9.5"
                class="indexterm"></a><a
                id="id-1.14.5.11.18.9.6"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Order</code> directive tells the server of the order in which the <code
                  class="literal">Allow from</code> and <code
                  class="literal">Deny from</code> directives are applied; the last one that matches takes precedence. In concrete terms, <code
                  class="literal">Order deny,allow</code> allows access if no <code
                  class="literal">Deny from</code> applies, or if an <code
                  class="literal">Allow from</code> directive does. Conversely, <code
                  class="literal">Order allow,deny</code> rejects access if no <code
                  class="literal">Allow from</code> directive matches (or if a <code
                  class="literal">Deny from</code> directive applies).
				</div><div
                class="para">
					The <code
                  class="literal">Allow from</code> and <code
                  class="literal">Deny from</code> directives can be followed by an IP address, a network (such as <code
                  class="literal">192.168.0.0/255.255.255.0</code>, <code
                  class="literal">192.168.0.0/24</code> or even <code
                  class="literal">192.168.0</code>), a hostname or a domain name, or the <code
                  class="literal">all</code> keyword, designating everyone.
				</div><div
                class="para">
					For instance, to reject connections by default but allow them from the local network, you could use this:
				</div><pre
                class="programlisting">
Order deny,allow
Allow from 192.168.0.0/16
Deny from all</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.5.12"></a>11.2.4. Log Analyzers</h3></div></div></div><div
            class="para">
				A log analyzer is frequently installed on a web server; since the former provides the administrators with a precise idea of the usage patterns of the latter.
			</div><div
            class="para">
				The Falcot Corp administrators selected <span
              class="emphasis"><em>AWStats</em></span> (<span
              class="emphasis"><em>Advanced Web Statistics</em></span>) to analyze their Apache log files.
			</div><a
            id="id-1.14.5.12.4"
            class="indexterm"></a><a
            id="id-1.14.5.12.5"
            class="indexterm"></a><a
            id="id-1.14.5.12.6"
            class="indexterm"></a><a
            id="id-1.14.5.12.7"
            class="indexterm"></a><div
            class="para">
				The first configuration step is the customization of the <code
              class="filename">/etc/awstats/awstats.conf</code> file. The Falcot administrators keep it unchanged apart from the following parameters:
			</div><pre
            class="programlisting">
LogFile="/var/log/apache2/access.log"
LogFormat = "%virtualname %host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot"
SiteDomain="www.falcot.com"
HostAliases="falcot.com REGEX[^.*\.falcot\.com$]"
DNSLookup=1
LoadPlugin="tooltips"</pre><div
            class="para">
				All these parameters are documented by comments in the template file. In particular, the <code
              class="varname">LogFile</code> and <code
              class="varname">LogFormat</code> parameters describe the location and format of the log file and the information it contains; <code
              class="varname">SiteDomain</code> and <code
              class="varname">HostAliases</code> list the various names under which the main web site is known.
			</div><div
            class="para">
				For high traffic sites, <code
              class="varname">DNSLookup</code> should usually not be set to <code
              class="literal">1</code>; for smaller sites, such as the Falcot one described above, this setting allows getting more readable reports that include full machine names instead of raw IP addresses.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SECURITY</em></span> Access to statistics</strong></p></div></div></div><div
              class="para">
				AWStats makes its statistics available on the website with no restrictions by default, but restrictions can be set up so that only a few (probably internal) IP addresses can access them; the list of allowed IP addresses needs to be defined in the <code
                class="varname">AllowAccessFromWebToFollowingIPAddresses</code> parameter
			</div></div><div
            class="para">
				AWStats will also be enabled for other virtual hosts; each virtual host needs its own configuration file, such as <code
              class="filename">/etc/awstats/awstats.www.falcot.org.conf</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.14.5.12.14"></a><p
              class="title"><strong>Contoh 11.21. AWStats configuration file for a virtual host</strong></p><div
              class="example-contents"><pre
                class="programlisting">
Include "/etc/awstats/awstats.conf"
SiteDomain="www.falcot.org"
HostAliases="falcot.org"</pre></div></div><div
            class="para">
				AWStats uses many icons stored in the <code
              class="filename">/usr/share/awstats/icon/</code> directory. In order for these icons to be available on the web site, the Apache configuration needs to be adapted to include the following directive:
			</div><pre
            class="programlisting">
Alias /awstats-icon/ /usr/share/awstats/icon/</pre><div
            class="para">
				After a few minutes (and once the script has been run a few times), the results are available online: <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.falcot.com/cgi-bin/awstats.pl">http://www.falcot.com/cgi-bin/awstats.pl</a></div><div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.falcot.org/cgi-bin/awstats.pl">http://www.falcot.org/cgi-bin/awstats.pl</a></div>
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CAUTION</em></span> Log file rotation</strong></p></div></div></div><div
              class="para">
				In order for the statistics to take all the logs into account, <span
                class="emphasis"><em>AWStats</em></span> needs to be run right before the Apache log files are rotated. Looking at the <code
                class="literal">prerotate</code> directive of <code
                class="filename">/etc/logrotate.d/apache2</code> file, this can be solved by putting a symlink to <code
                class="filename">/usr/share/awstats/tools/update.sh</code> in <code
                class="filename">/etc/logrotate.d/httpd-prerotate</code>:
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>cat /etc/logrotate.d/apache2
</code></strong><code
                class="computeroutput">/var/log/apache2/*.log {
  daily
  missingok
  rotate 14
  compress
  delaycompress
  notifempty
  create 644 root adm
  sharedscripts
  postrotate
    if /etc/init.d/apache2 status &gt; /dev/null ; then \
      /etc/init.d/apache2 reload &gt; /dev/null; \
    fi;
  endscript
  prerotate
    if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
      run-parts /etc/logrotate.d/httpd-prerotate; \
    fi; \
  endscript
}
$ </code><strong
                class="userinput"><code>sudo mkdir -p /etc/logrotate.d/httpd-prerotate
</code></strong><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>sudo ln -sf /usr/share/awstats/tools/update.sh \
  /etc/logrotate.d/httpd-prerotate/awstats
</code></strong></pre><div
              class="para">
				Note also that the log files created by <code
                class="command">logrotate</code> need to be readable by everyone, especially AWStats. In the above example, this is ensured by the <code
                class="literal">create 644 root adm</code> line (instead of the default <code
                class="literal">640</code> permissions).
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="network-services.html"><strong>Sebelumnya</strong>Bab 11. Layanan Jaringan: Postfix, Apache, NFS, S...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Induk</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Depan</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.ftp-file-server.html"><strong>Lanjut</strong>11.3. FTP File Server</a></li></ul></body></html>
