<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">11.4. Server Berkas NFS</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-id-ID-1.0-1" /><meta
        name="keywords"
        content="Postfix, Apache, NFS, Samba, Squid, OpenLDAP, SIP" /><link
        rel="home"
        href="index.html"
        title="Buku Panduan Administrator Debian" /><link
        rel="up"
        href="network-services.html"
        title="Bab 11. Layanan Jaringan: Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN" /><link
        rel="prev"
        href="sect.ftp-file-server.html"
        title="11.3. Server Berkas FTP" /><link
        rel="next"
        href="sect.windows-file-server-with-samba.html"
        title="11.5. Setting Up Windows Shares with Samba" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/id-ID/stable/sect.nfs-file-server.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.ftp-file-server.html"><strong>Sebelumnya</strong></a></li><li
          class="home">Buku Panduan Administrator Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.windows-file-server-with-samba.html"><strong>Lanjut</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.nfs-file-server"></a>11.4. Server Berkas NFS</h2></div></div></div><div
          class="para">
			NFS (<span
            class="emphasis"><em>Network File System</em></span>) merupakan sebuah protokol yang memungkinkan akses remote ke sistem berkas melalui jaringan. Semua sistem Unix dapat bekerja dengan protokol ini; ketika sistem Windows yang terlibat, Samba harus digunakan sebagai gantinya.
		</div><a
          id="id-1.14.7.3"
          class="indexterm"></a><a
          id="id-1.14.7.4"
          class="indexterm"></a><a
          id="id-1.14.7.5"
          class="indexterm"></a><a
          id="id-1.14.7.6"
          class="indexterm"></a><a
          id="id-1.14.7.7"
          class="indexterm"></a><div
          class="para">
			NFS adalah alat yang sangat berguna, tetapi secara historis menderita karena banyak keterbatasan, yang sebagian besar telah diperbaiki pada protokol versi 4. Kekurangannya adalah bahwa versi terbaru dari NFS lebih sulit untuk dikonfigurasi bila Anda ingin menggunakan fitur keamanan dasar seperti otentikasi dan enkripsi karena hal itu bergantung pada Kerberos. Dan tanpa mereka, protokol NFS harus dibatasi pada jaringan lokal yang terpercaya karena data pergi melalui jaringan tidak terenkripsi (<span
            class="emphasis"><em>sniffer</em></span> bisa mencegat itu) dan hak akses diberikan didasarkan pada alamat IP klien (yang dapat dipalsukan).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>DOKUMENTASI</em></span> NFS HOWTO</strong></p></div></div></div><div
            class="para">
			Dokumentasi yang baik untuk menggelar NFSv4 jarang ditemui. Berikut adalah beberapa petunjuk dengan konten dari berbagai kualitas yang setidaknya memberikan beberapa petunjuk tentang apa yang harus dilakukan. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://help.ubuntu.com/community/NFSv4Howto">https://help.ubuntu.com/community/NFSv4Howto</a></div> <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://wiki.linux-nfs.org/wiki/index.php/Nfsv4_configuration">http://wiki.linux-nfs.org/wiki/index.php/Nfsv4_configuration</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.7.10"></a>11.4.1. Mengamankan NFS</h3></div></div></div><a
            id="id-1.14.7.10.2"
            class="indexterm"></a><div
            class="para">
				Jika Anda tidak menggunakan fitur keamanan berbasis Kerberos, sangat penting untuk memastikan bahwa hanya mesin-mesin yang diizinkan untuk menggunakan NFS dapat terhubung ke berbagai server RPC yang diperlukan, karena protokol dasar mempercayai data yang diterima dari jaringan. Firewall juga harus memblokir <span
              class="emphasis"><em>IP spoofing</em></span> untuk mencegah mesin di luar dari bertindak sebagai seolah di dalam, dan akses ke port yang sesuai harus dibatasi hanya untuk mesin-mesin yang memang akan mengakses share NFS.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KEMBALI KE DASAR</em></span> RPC</strong></p></div></div></div><div
              class="para">
				RPC (<span
                class="emphasis"><em>Remote Procedure Call</em></span>) adalah standar Unix untuk layanan remote. NFS adalah salah satu layanan tersebut.
			</div><a
              id="id-1.14.7.10.4.3"
              class="indexterm"></a><a
              id="id-1.14.7.10.4.4"
              class="indexterm"></a><div
              class="para">
				Layanan RPC mendaftar ke direktori yang dikenal sebagai <span
                class="emphasis"><em>portmapper</em></span>. Suatu klien yang ingin melakukan query NFS pertama menghubungi <span
                class="emphasis"><em>portmapper</em></span> (pada port 111, TCP atau UDP), dan meminta server NFS; jawabannya biasanya menyebutkan port 2049 (default untuk NFS). Tidak semua layanan RPC harus menggunakan port tetap.
			</div></div><div
            class="para">
				Versi protokol lebih tua memerlukan layanan RPC lainnya yang menggunakan port dinamis. Untungnya, dengan NFS versi 4 hanya port 2049 (untuk NFS) dan 111 (untuk portmapper) yang diperlukan dan sehingga mereka mudah untuk firewall.
			</div><a
            id="id-1.14.7.10.6"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.7.11"></a>11.4.2. Server NFS</h3></div></div></div><div
            class="para">
				Server NFS adalah bagian dari kernel Linux; di kernel yang disediakan oleh Debian itu dibangun sebagai modul kernel. Jika server NFS akan dijalankan secara otomatis pada saat boot, paket <span
              class="pkg pkg">nfs-kernel-server</span> harus diinstal; ini berisi skrip startup yang relevan.
			</div><div
            class="para">
				Berkas konfigurasi server NFS, <code
              class="filename">/etc/exsports</code>, menampung daftar direktori yang dibuat tersedia melalui jaringan (<span
              class="emphasis"><em>diekspor</em></span>). Untuk setiap share NFS, hanya mesin yang terdaftar yang diberi akses. Lebih banyak kontrol akses halus dapat diperoleh dengan beberapa pilihan. Sintaks berkas ini cukup sederhana:
			</div><a
            id="id-1.14.7.11.4"
            class="indexterm"></a><a
            id="id-1.14.7.11.5"
            class="indexterm"></a><pre
            class="programlisting">
/direktori/yang/akan/di-share mesin1(opsi1,opsi2,...) mesin2(...) ...</pre><div
            class="para">
				Catatan bahwa dengan NFSv4, semua direktori yang diekspor harus menjadi bagian dari hirarki tunggal dan bahwa direktori root dari hirarki itu harus diekspor dan diidentifikasi dengan pilihan <code
              class="literal">fsid=0</code> atau <code
              class="literal">fsid=root</code>.
			</div><div
            class="para">
				Setiap mesin dapat diidentifikasi dengan nama DNS atau alamat IP-nya. Seluruh set mesin juga dapat ditentukan dengan menggunakan sintaks seperti <code
              class="literal">*. falcot.com</code> atau kisaran alamat IP seperti <code
              class="literal">192.168.0.0/255.255.255.0</code> atau <code
              class="literal">192.168.0.0/24</code>.
			</div><div
            class="para">
				Directories are made available as read-only by default (or with the <code
              class="literal">ro</code> option). The <code
              class="literal">rw</code> option allows read-write access. NFS clients typically connect from a port restricted to root (in other words, below 1024); this restriction can be lifted by the <code
              class="literal">insecure</code> option (the <code
              class="literal">secure</code> option is implicit, but it can be made explicit if needed for clarity).
			</div><a
            id="id-1.14.7.11.10"
            class="indexterm"></a><div
            class="para">
				By default, the server only answers an NFS query when the current disk operation is complete (<code
              class="literal">sync</code> option); this can be disabled with the <code
              class="literal">async</code> option. Asynchronous writes increase performance a bit, but they decrease reliability since there is a data loss risk in case of the server crashing between the acknowledgment of the write and the actual write on disk. Since the default value changed recently (as compared to the historical value of NFS), an explicit setting is recommended.
			</div><div
            class="para">
				In order to not give root access to the filesystem to any NFS client, all queries appearing to come from a root user are considered by the server as coming from the <code
              class="literal">nobody</code> user. This behavior corresponds to the <code
              class="literal">root_squash</code> option, and is enabled by default. The <code
              class="literal">no_root_squash</code> option, which disables this behavior, is risky and should only be used in controlled environments. The <code
              class="literal">anonuid=<em
                class="replaceable">uid</em></code> and <code
              class="literal">anongid=<em
                class="replaceable">gid</em></code> options allow specifying another fake user to be used instead of UID/GID 65534 (which corresponds to user <code
              class="literal">nobody</code> and group <code
              class="literal">nogroup</code>).
			</div><div
            class="para">
				With NFSv4, you can add a <code
              class="literal">sec</code> option to indicate the security level that you want: <code
              class="literal">sec=sys</code> is the default with no special security features, <code
              class="literal">sec=krb5</code> enables authentication only, <code
              class="literal">sec=krb5i</code> adds integrity protection, and <code
              class="literal">sec=krb5p</code> is the most complete level which includes privacy protection (with data encryption). For this to work you need a working Kerberos setup (that service is not covered by this book).
			</div><div
            class="para">
				Other options are available; they are documented in the <span
              class="citerefentry"><span
                class="refentrytitle">exports</span>(5)</span> manual page.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>HATI-HATI</em></span> Instalasi pertama</strong></p></div></div></div><div
              class="para">
				The <code
                class="filename">/etc/init.d/nfs-kernel-server</code> boot script only starts the server if the <code
                class="filename">/etc/exports</code> lists one or more valid NFS shares. On initial configuration, once this file has been edited to contain valid entries, the NFS server must therefore be started with the following command:
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>service nfs-kernel-server start</code></strong></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.14.7.12"></a>11.4.3. Klien NFS</h3></div></div></div><a
            id="id-1.14.7.12.2"
            class="indexterm"></a><a
            id="id-1.14.7.12.3"
            class="indexterm"></a><div
            class="para">
				As with other filesystems, integrating an NFS share into the system hierarchy requires mounting. Since this filesystem has its peculiarities, a few adjustments were required in the syntaxes of the <code
              class="command">mount</code> command and the <code
              class="filename">/etc/fstab</code> file.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.14.7.12.5"></a><p
              class="title"><strong>Contoh 11.22. Manually mounting with the <code
                  class="command">mount</code> command</strong></p><div
              class="example-contents"><pre
                class="screen">
          <code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>mount -t nfs4 -o rw,nosuid arrakis.internal.falcot.com:/shared /srv/shared</code></strong></pre></div></div><div
            class="example"><a
              xmlns=""
              id="id-1.14.7.12.6"></a><p
              class="title"><strong>Contoh 11.23. Entri NFS di berkas <code
                  class="filename">/etc/fstab</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
arrakis.internal.falcot.com:/shared /srv/shared nfs4 rw,nosuid 0 0</pre></div></div><div
            class="para">
				The entry described above mounts, at system startup, the <code
              class="filename">/shared/</code> NFS directory from the <code
              class="literal">arrakis</code> server into the local <code
              class="filename">/srv/shared/</code> directory. Read-write access is requested (hence the <code
              class="literal">rw</code> parameter). The <code
              class="literal">nosuid</code> option is a protection measure that wipes any <code
              class="literal">setuid</code> or <code
              class="literal">setgid</code> bit from programs stored on the share. If the NFS share is only meant to store documents, another recommended option is <code
              class="literal">noexec</code>, which prevents executing programs stored on the share. Note that on the server, the <code
              class="filename">shared</code> directory is below the NFSv4 root export (for example <code
              class="filename">/export/shared</code>), it is not a top-level directory.
			</div><div
            class="para">
				The <span
              class="citerefentry"><span
                class="refentrytitle">nfs</span>(5)</span> manual page describes all the options in some detail.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.ftp-file-server.html"><strong>Sebelumnya</strong>11.3. Server Berkas FTP</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Induk</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Depan</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.windows-file-server-with-samba.html"><strong>Lanjut</strong>11.5. Setting Up Windows Shares with Samba</a></li></ul></body></html>
