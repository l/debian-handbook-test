<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.3. 管理权限</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-CN-1.0-1" /><meta
        name="keywords"
        content="系统启动, 启动脚本, SSH, Telnet, 权限, 许可, 管理, Inetd, Cron, 备份, 热插拔, PCMCIA接口, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="unix-services.html"
        title="第 9 章 Unix 服务" /><link
        rel="prev"
        href="sect.remote-login.html"
        title="9.2. 远程登录" /><link
        rel="next"
        href="sect.administration-interfaces.html"
        title="9.4. 管理员介面" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/zh-CN/stable/sect.rights-management.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一页</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.rights-management"></a>9.3. 管理权限</h2></div></div></div><div
          class="para">
			Linux 是一个典型的多用户系统，这就有必要提供许可制度来控制对文件和目录的操作，其中包含了所有的系统资源和设备（在Unix 系统中，任何设备都由文件或目录来表示）。这一原则对所有Unix 系统通用，这里再提醒一下，特别是对一些有趣的相对高级应用。
		</div><a
          id="id-1.12.6.3"
          class="indexterm"></a><a
          id="id-1.12.6.4"
          class="indexterm"></a><a
          id="id-1.12.6.5"
          class="indexterm"></a><a
          id="id-1.12.6.6"
          class="indexterm"></a><a
          id="id-1.12.6.7"
          class="indexterm"></a><a
          id="id-1.12.6.8"
          class="indexterm"></a><div
          class="para">
			每个文件和文件夹有三种用户许可类型：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					所有者 （使用符号 <code
                  class="literal">u</code> “user”首字母）；
				</div></li><li
              class="listitem"><div
                class="para">
					所有者组（使用符号 <code
                  class="literal">g</code> “group”首字母），代表组中的所有成员；
				</div></li><li
              class="listitem"><div
                class="para">
					其他（使用符号 <code
                  class="literal">o</code> “other”的首字母）。
				</div></li></ul></div><div
          class="para">
			有三种可以相互结合的权限类型：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					读取（使用符号 <code
                  class="literal">r</code> “read”的首字母）；
				</div></li><li
              class="listitem"><div
                class="para">
					写（使用符号 <code
                  class="literal">w</code> “write”的首字母）；
				</div></li><li
              class="listitem"><div
                class="para">
					执行（使用“eXecute”中的符号 <code
                  class="literal">x</code> ）。
				</div></li></ul></div><a
          id="id-1.12.6.13"
          class="indexterm"></a><a
          id="id-1.12.6.14"
          class="indexterm"></a><a
          id="id-1.12.6.15"
          class="indexterm"></a><a
          id="id-1.12.6.16"
          class="indexterm"></a><div
          class="para">
			In the case of a file, these rights are easily understood: read access allows reading the content (including copying), write access allows changing it, and execute access allows you to run it (which will only work if it is a program).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setgid</code> 目录和 <span
                      class="emphasis"><em>粘着位</em></span></strong></p></div></div></div><div
            class="para">
			两个特殊权限和可执行文件相关：<code
              class="literal">setuid</code> 和 <code
              class="literal">setgid</code>（使用字符“s”表示）。请注意，我们常常称之为“位”，因为这些布尔值可以用一个0或者一个1表示。这两种权限允许任何用户以相应文件的所有者或组的身份执行程序。这种机制可以允许用户使用那些需要更高级别的授权才能工作的特性，即使普通用户原本不具备其使用权限。
		</div><a
            id="id-1.12.6.18.3"
            class="indexterm"></a><a
            id="id-1.12.6.18.4"
            class="indexterm"></a><div
            class="para">
			由于 <code
              class="literal">setuid</code> 根程序在系统层以超级用户的身份运行，有必要确定其安全性和可靠性。实际上，如果用户可以侵入该程序并调用自己设定的命令，就有可能伪装成超级用户并获取系统的所有权限。
		</div></div><div
          class="para">
			A directory is handled differently. Read access gives the right to consult the list of its entries (files and directories), write access allows creating or deleting files, and execute access allows crossing through it (especially to go there with the <code
            class="command">cd</code> command). Being able to cross through a directory without being able to read it gives permission to access the entries therein that are known by name, but not to find them if you do not know their existence or their exact name.
		</div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.setgid-dir"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setgid</code> 目录和 <span
                      class="emphasis"><em>粘着位</em></span></strong></p></div></div></div><a
            id="id-1.12.6.20.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="literal">setgid</code> 位也适用于目录。在这种目录中新创建的条目会被自动赋予其父目录的所有组，而不是通常情况下那样继承创建者的主用户组。这种设置可以避免几个同组用户在共享文件树中协同工作时（为保持所创建文件的所有组的一致性）而不得不改变自身主用户组的额外工作（使用 <code
              class="command">newgrp</code> 命令）。
		</div><a
            id="id-1.12.6.20.4"
            class="indexterm"></a><div
            class="para">
			“粘着”位（使用符号“t”）是仅用于目录的许可位。专门用于所有人都有写权限的临时目录（例如 <code
              class="filename">/tmp/</code>）：它严格限制删除操作，只有所有者（或者父目录的所有者）可以删除。少了它，所有人都能删除其他用户在 <code
              class="filename">/tmp/</code>中的文件。
		</div></div><div
          class="para">
			有三个控制文件许可权限的命令：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chown <em
                    class="replaceable">用户</em> <em
                    class="replaceable">文件</em></code> 命令更改文件的所有者；
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chgrp <em
                    class="replaceable">组</em> <em
                    class="replaceable">文件</em></code> 改变所有组
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chmod <em
                    class="replaceable">权限</em> <em
                    class="replaceable">文件</em></code> 改变文件许可权限。
				</div></li></ul></div><div
          class="para">
			有两种方法表示权限。其中，符号表示是最易于理解和记忆的。它使用前述的符号链接。可以通过显示的设置（<code
            class="literal">u</code>/<code
            class="literal">g</code>/<code
            class="literal">o</code>），通过加（<code
            class="literal">+</code>），或者减（<code
            class="literal">-</code>）定义每种用户的权限类型。一个 <code
            class="literal">u=rwx,g+rw,o-r</code> 格式的命令会赋予所有者读，写和执行权限，给所有组添加读写权限，移除其他用户的读权限。其他命令中未通过加或者减列出的权限保持不变。字母 <code
            class="literal">a</code>是指“所有”，涵盖三种类型的用户，因此 <code
            class="literal">a=rx</code> 命令会赋予三种用户相同的权限（读和执行，没有写）。
		</div><a
          id="id-1.12.6.24"
          class="indexterm"></a><a
          id="id-1.12.6.25"
          class="indexterm"></a><a
          id="id-1.12.6.26"
          class="indexterm"></a><a
          id="id-1.12.6.27"
          class="indexterm"></a><a
          id="id-1.12.6.28"
          class="indexterm"></a><div
          class="para">
			与权限相关的（八进制）数字表示：4是读，2是写，1是执行。各种权限组合通过代表的数字求和得到。通过把每个值置于端到端序列不同位置关联不同的用户类型（所有者，所有组，其他用户）。
		</div><div
          class="para">
			比如， <code
            class="command">chmod 754 <em
              class="replaceable">file</em></code> 会设置如下的权限：所有者读，写和执行（由于7 = 4 + 2 + 1）；所有组读和执行（由于 5 = 4 + 1）；其他用户只读。 <code
            class="literal">0</code> 意味着没有任何权限；因此 <code
            class="command">chmod 600 <em
              class="replaceable">file</em></code> 允许所有者读写，而其他人没有任何权限。对可执行文件和目录，最常用的权限组合是 <code
            class="literal">755</code> ，对数据文件是 <code
            class="literal">644</code> 。
		</div><div
          class="para">
			要表示特殊权限，可以根据同样的原则在数字上加入第四个前缀位，位 <code
            class="literal">setuid</code>， <code
            class="literal">setgid</code> 和 <code
            class="literal">sticky</code> 分别对应4，2，和1。<code
            class="command">chmod 4754</code> 会设置前面描述的 <code
            class="literal">setuid</code> 位权限。
		</div><div
          class="para">
			Note that the use of octal notation only allows to set all the rights at once on a file; you cannot use it to simply add a new right, such as read access for the group owner, since you must take into account the existing rights and compute the new corresponding numerical value.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>提示</em></span> 递归操作</strong></p></div></div></div><div
            class="para">
			有时需要更改整个文件树的权限。以上所有的命令都有 <code
              class="literal">-R</code> 选项来递归操作子目录。
		</div><div
            class="para">
			The distinction between directories and files sometimes causes problems with recursive operations. That is why the “X” letter has been introduced in the symbolic representation of rights. It represents a right to execute which applies only to directories (and not to files lacking this right). Thus, <code
              class="command">chmod -R a+X <em
                class="replaceable">directory</em></code> will only add execute rights for all categories of users (<code
              class="literal">a</code>) for all of the sub-directories and files for which at least one category of user (even if their sole owner) already has execute rights.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>提示</em></span> 改变组和用户</strong></p></div></div></div><div
            class="para">
			Frequently you want to change the group of a file at the same time that you change the owner. The <code
              class="command">chown</code> command has a special syntax for that: <code
              class="command">chown <em
                class="replaceable">user</em>:<em
                class="replaceable">group</em> <em
                class="replaceable">file</em></code>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>进阶</em></span> <code
                      class="command">umask</code></strong></p></div></div></div><div
            class="para">
			当应用程序创建文件的时候，它指定许可权限，而系统则会根据 <code
              class="command">umask</code>命令的内容，自动地移除某些权限。在命令介面输入 <code
              class="command">umask</code> ：会看到类似 <code
              class="computeroutput">0022</code>的掩码。这是一个八进制数代表了会被系统移除的权限（在本例中，是指对所有组和其他用户的写权限）。
		</div><a
            id="id-1.12.6.35.3"
            class="indexterm"></a><a
            id="id-1.12.6.35.4"
            class="indexterm"></a><a
            id="id-1.12.6.35.5"
            class="indexterm"></a><div
            class="para">
			如果指定新的八进制数值， <code
              class="command">umask</code> 命令会修改掩码。在命令行介面初始化文件中使用 （例如<code
              class="filename">~/.bash_profile</code>），它会改变会话默认的掩码。
		</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>上一页</strong>9.2. 远程登录</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一页</strong>9.4. 管理员介面</a></li></ul></body></html>
