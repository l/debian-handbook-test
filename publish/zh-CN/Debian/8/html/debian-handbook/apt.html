<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">第 6 章 维护和更新：APT 工具</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-CN-1.0-1" /><meta
        name="keywords"
        content="高级包管理工具(Advanced Packaging Tool), apt-get, apt-cache, aptitude 更安全的apt, 新立得包管理器, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="prev"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. 与其它软件包共存" /><link
        rel="next"
        href="sect.apt-get.html"
        title="6.2. aptitude、apt-get和 apt 命令" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/zh-CN/stable/apt.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>下一页</strong></a></li></ul><div
        xml:lang="zh-CN"
        class="chapter"
        lang="zh-CN"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  xmlns=""
                  id="apt"></a>第 6 章 维护和更新：APT 工具</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="apt.html#sect.apt-sources.list">6.1. 写入<code
                    class="filename">sources.list</code>文件</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.6">6.1.1. 句法</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.7">6.1.2. 给<span
                        class="distribution distribution">Stable</span> 使用者的仓库</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.8">6.1.3. 给<span
                        class="distribution distribution">测试</span>/<span
                        class="distribution distribution">非稳定</span> 版本用户的仓库</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.9">6.1.4. 非官方来源： <code
                        class="literal">mentors.debian.net</code></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.10">6.1.5. Debian 软件包 缓存 代理</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-get.html">6.2. <code
                    class="command">aptitude</code>、<code
                    class="command">apt-get</code>和 <code
                    class="command">apt</code> 命令</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.7">6.2.1. 开端</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.8">6.2.2. 安装和卸载</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-upgrade">6.2.3. 系统升级</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-config">6.2.4. 配置选项</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt.priorities">6.2.5. 包的优先级管理</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-mix-distros">6.2.6. 在多个发行版工作</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.automatic-tracking">6.2.7. 自动追踪已安装的套件</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-cache.html">6.3. The <code
                    class="command">apt-cache</code> 命令</a></span></dt><dt><span
                class="section"><a
                  href="sect.apt-frontends.html">6.4. 前置：<code
                    class="command">aptitude</code>、<code
                    class="command">synaptic</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#sect.aptitude">6.4.1. <code
                        class="command">aptitude</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#id-1.9.13.7">6.4.2. <code
                        class="command">synaptic</code></a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.package-authentication.html">6.5. 检查套件真伪</a></span></dt><dt><span
                class="section"><a
                  href="sect.dist-upgrade.html">6.6. 升级至下个稳定发行版</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.3">6.6.1. 建议进程</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.4">6.6.2. 处理升级后的问题</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.regular-upgrades.html">6.7. 保持系统在最新状态</a></span></dt><dt><span
                class="section"><a
                  href="sect.automatic-upgrades.html">6.8. 自动升级</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.5">6.8.1. 配置 <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.6">6.8.2. 配置 APT</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.7">6.8.3. 配置 <code
                        class="command">debconf</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.8">6.8.4. 处理命令行接口</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.9">6.8.5. 神奇的组合</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.searching-packages.html">6.9. 搜索套件</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Debian 之所以如此受系统管理员欢迎，是因为项目提供的软件极易安装，整个系统的更新也极为简单。这一独特的优点主要得归功于 <span
              class="emphasis"><em>APT</em></span> 程序，其特性在 Falcot 公司得到系统管理员们热情的研究。
	</div></div><div
          class="para">
		<a
            id="id-1.9.4.1"
            class="indexterm"></a> 是高级软件包管理器 <a
            id="id-1.9.4.2"
            class="indexterm"></a> 的缩写。它的‘高级’之处在于对软件包的管理方法不同。APT并不是简单地独立评估每个包，而是将包看做一个整体系统，根据现有的和兼容的已有包找到最佳组合（包括依赖于这个软件包的其他包）。
	</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>词汇</em></span> 软件源和源代码软件包</strong></p></div></div></div><div
            class="para">
		<span
              class="emphasis"><em>源</em></span>这个词的意思会有一些模糊不清。一个源代码软件包- 是一个包含有源程序代码的包，—不要和软件源相混淆—这是指一个包所在的仓库（网站，FTP服务器，CD-ROM光驱，本地磁盘等等）。
	</div></div><div
          class="para">
		APT需要一个”软件源列表“：文件<code
            class="filename">/etc/apt/sources.list</code>会列出发布 Debian 软件包不同的仓库（或软件源）。接下来APT会从每一个软件源导入所发布的软件包列表。这个过程是通过下载 <code
            class="filename">Packages.xz</code>或使用不同压缩方法的变体(比如<code
            class="filename">Packages.gz</code>或者<code
            class="filename">.bz2</code>) )文件（若是二进制包的仓库）和<code
            class="filename">Sources.xz</code>文件（若是软件包源的仓库），并分析这两个文件内容。如果文件的旧版本已经存在，APT仅下载更新的部分（参见：sidebar <a
            class="xref"
            href="sect.apt-get.html#sidebar.apt-pdiff"><span
              class="emphasis"><em>TIP</em></span> 增量更新</a>）。
	</div><a
          id="id-1.9.7"
          class="indexterm"></a><a
          id="id-1.9.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>回到基础</em></span> <code
                      class="command">gzip</code>, <code
                      class="command">bzip2</code>, <code
                      class="command">LZMA</code> 和<code
                      class="command">XZ</code> 压缩</strong></p></div></div></div><a
            id="id-1.9.9.2"
            class="indexterm"></a><a
            id="id-1.9.9.3"
            class="indexterm"></a><a
            id="id-1.9.9.4"
            class="indexterm"></a><a
            id="id-1.9.9.5"
            class="indexterm"></a><div
            class="para">
		文件名后缀<code
              class="filename">.gz</code> 表示文件经过<code
              class="command">gzip</code>工具的压缩。<code
              class="command">gzip</code> 是一个经典的 Unix 命令，用于快速高效压缩文件。一些新的压缩工具更为有效，但需要更多内存和时间来完成压缩和解压。按照出现的次序，这些工具有：<code
              class="command">bzip2</code> （生成文件名后缀为<code
              class="filename">.bz2</code>），<code
              class="command">lzma</code>（生成文件名后缀为<code
              class="filename">.lzma</code>）和<code
              class="command">xz</code>（生成文件名后缀为<code
              class="filename">.xz</code>）。
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    xmlns=""
                    id="sect.apt-sources.list"></a>6.1. 写入<code
                    class="filename">sources.list</code>文件</h2></div></div></div><a
            id="id-1.9.10.2"
            class="indexterm"></a><a
            id="id-1.9.10.3"
            class="indexterm"></a><a
            id="id-1.9.10.4"
            class="indexterm"></a><a
            id="id-1.9.10.5"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.6"></a>6.1.1. 句法</h3></div></div></div><div
              class="para">
				<code
                class="filename">/etc/apt/sources.list</code> 文件中每个有效的代码行包括对源的描述，由三个被空格分开的部分组成。
			</div><div
              class="para">
				第一个区域指示源的类型：
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb</code>” 表示二进制软件包，
					</div></li><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb-src</code>”表示源代码包。
					</div></li></ul></div><div
              class="para">
				第二个区域表示源的基本 URL （结合文件 <code
                class="filename">Packages.gz</code> 中给出的文件名，必须是有效URL的全称）：此区域存在于一个 Debian 镜像或其他任何由第三方所建的软件源文档中。这个 URL 可以用 <code
                class="literal">file://</code> 起始来表示系统里安装了本地仓库，或以 <code
                class="literal">http://</code> 表示仓库可通过网络服务器来获取，或用 <code
                class="literal">ftp://</code> 表示软件源在一个 FTP 服务器上。URL 还可以用 起始表示从 <code
                class="literal">cdrom:</code> 开始安装。因基于网络的安装愈来愈流行，这个方法已不那么常用了。
			</div><div
              class="para">
				最后这一区域的句法取决于仓库的结构。从最简单的例子开始，你可以很简单地描述一个软件源的子目录 （必须用到结尾处的斜线）（通常用 “<code
                class="filename">./</code>” 表示子目录不存在 - 这个软件源就位于给定的 URL上）。 不过一般来讲，仓库的结构类似于一个 Debian 的镜像， 包括很多分支，每一分支有很多组成部分。通常命名选定的分支（由 “codename” 来命名 - 参看附栏中的目录<a
                class="xref"
                href="sect.foundation-documents.html#sidebar.bruce-perens"><span
                  class="emphasis"><em>社区</em></span> Bruce Perens，一位有争议的领导者</a> 或是由对应的 “suites” — <code
                class="literal">stable</code>, <code
                class="literal">testing</code>, <code
                class="literal">unstable</code> ），然后命名下面的组成部分（或分区）（从<code
                class="literal">main</code>, <code
                class="literal">contrib</code> 和<code
                class="literal">non-free</code>中选择） 来激活一个典型的 Debian 镜像。
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.sections"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>关键词</em></span> <code
                          class="literal">main</code>, <code
                          class="literal">contrib</code> 和 <code
                          class="literal">non-free</code> 存档</strong></p></div></div></div><a
                id="id-1.9.10.6.7.2"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.3"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.4"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.5"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.6"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.7"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.8"
                class="indexterm"></a><div
                class="para">
				Debian 根据开发者所选定的许可声明，使用这三部分来区分不同的软件包。<code
                  class="literal">Main</code> 收集了完全遵守Debian 免费软件指南的所有软件包。
			</div><div
                class="para">
				<code
                  class="literal">non-free</code> 文档有所不同，它包括没有（ 完全）遵循上述原则，未受约束但仍然被发布的软件。这种文档为使用者提供服务，但不是 Debian 的官方组成部分- 不过 Debian 从来都提倡优先使用自由软件。这类文档的存在代表了一个来自 Richard M. Stallman 的重要问题，也阻碍了自由软件基金会向用户推荐 Debian.
			</div><div
                class="para">
				<code
                  class="literal">Contrib</code> (贡献)是一类没有一些非自由元件就不能正常运作的开源软件。这类元件会是来自非自由 <code
                  class="literal">non-free</code> 部分的软件， 或非自由文件如游戏 ROMs, 控制台BIOS等。<code
                  class="literal">Contrib</code> 也包括需要专利元件来编译的自由软件。早先的例子是OpenOffice.org 办公软件套装，曾经需要带专利的 Java 环境来运行。
			</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> <code
                          class="filename">/etc/apt/sources.list.d/*.list</code> 文件</strong></p></div></div></div><div
                class="para">
				如果很多个软件包的源库在被引用，将它们分成多个文件会很实用。每一部分存在<code
                  class="filename">/etc/apt/sources.list.d/<em
                    class="replaceable">文件名</em>.list</code> （参见边栏<a
                  class="xref"
                  href="sect.apt-get.html#sidebar.directory.d"><span
                    class="emphasis"><em>基本</em></span> 结尾是 <code
                    class="filename">.d</code> 的文件夹名称</a>)。
			</div></div><a
              id="id-1.9.10.6.9"
              class="indexterm"></a><div
              class="para">
				<code
                class="literal">cdrom</code> 条目描述了你所有的CD/DVD光盘。 与其他条目不同，因为一个CD光盘需要插入光驱中，并且每次只能读一张，所以并不总是可用。因此这种仓库管理起来稍有不同，需要加在<code
                class="command">apt-cdrom</code> 程序中，经常与<code
                class="literal">add</code> 参数一起执行。后者会要求驱动中插入光盘，并会浏览内容，寻找<code
                class="filename">Packages</code> 文件。这些文件会用于更新可用软件包的数据库（此过程由<code
                class="command">apt update</code> 命令执行）。 自此， 如果某软件包需要光盘，APT 可发出要求插入光驱。
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.7"></a>6.1.2. 给<span
                      class="distribution distribution">Stable</span> 使用者的仓库</h3></div></div></div><div
              class="para">
				下面是一个标准的<code
                class="filename">sources.list</code>文件，它被用于 <span
                class="distribution distribution">Stable</span> 版本的 Debian 系统：
			</div><div
              class="example"><a
                xmlns=""
                id="example.stable-sources-list"></a><p
                class="title"><strong>例 6.1. <code
                    class="filename">/etc/apt/sources.list</code> 给 Debian Stable 使用者的文件</strong></p><div
                class="example-contents"><pre
                  class="programlisting"># Security updates
deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free

## Debian mirror

# Base repository
deb http://ftp.debian.org/debian jessie main contrib non-free
deb-src http://ftp.debian.org/debian jessie main contrib non-free

# Stable updates
deb http://ftp.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.debian.org/debian jessie-updates main contrib non-free

# Stable backports
deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb-src http://ftp.debian.org/debian jessie-backports main contrib non-free</pre></div></div><div
              class="para">
				此文件列出了 与Debian <span
                class="distribution distribution">Jessie</span> 版本相关软件包的所有来源（此手册写作当前<span
                class="distribution distribution">稳定</span>版本）。我们不希望当下一个稳定版本发布时，所有基于它的分支在我们控制范围外被改变，因此决定用“Jessie” 而不是用相对应的 “stable““ 稳定” 的别名（<code
                class="literal">stable</code>, <code
                class="literal">stable-updates</code>, <code
                class="literal">stable-backports</code>）来命名。
			</div><div
              class="para">
				大多数软件包来源于“基础仓库”，它拥有所有的软件包，但极少更新（大概每两个月根据“点发布”更新）。其他仓库不完全（不包括所有软件包），不过可以支持更新（软件包是较新版本）。接下来的几章将会介绍这些仓库管理的目的和规则。
			</div><div
              class="para">
				请注意，当你所需要的软件包版本存在于几个仓库中时，在文件<code
                class="filename">sources.list</code>中所列出的第一个会被使用。因此，非官方来源的包一般在此文件末尾处。
			</div><div
              class="para">
				本节提到的<span
                class="distribution distribution">稳定Stable</span> 对于<span
                class="distribution distribution">Oldstable</span> 一样适用。后者只是同时维护的较旧<span
                class="distribution distribution">Stable</span> 版本。
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.security-updates"></a>6.1.2.1. 安全更新</h4></div></div></div><a
                id="id-1.9.10.7.8.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.4"
                class="indexterm"></a><div
                class="para">
					安全更新一般不在 Debian 镜像通常所在的网络上，而是在<code
                  class="literal">security.debian.org</code>（位于<a
                  class="link"
                  href="sect.debian-internals.html#dsa-team"> Debian 系统管理员Debian System Administrators</a>维护的小范围网络）。其上的文档包括为那些<span
                  class="distribution distribution">稳定</span>版本准备的安全更新（由 Debian 安全团队和/或软件包维护者预备）。
				</div><div
                class="para">
					服务器上也有针对<span
                  class="distribution distribution">测试版</span>的安全更新。这类更新经常通过从<span
                  class="distribution distribution">非稳定版</span>流入<span
                  class="distribution distribution">测试版</span>，因此单独存在于服务器上的更新不常见。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.stable-updates"></a>6.1.2.2. 稳定更新</h4></div></div></div><a
                id="id-1.9.10.7.9.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.4"
                class="indexterm"></a><div
                class="para">
					稳定更新对安全性不敏感，在下一个稳定版本点发布前，它还是很重要，需要推送给使用者。
				</div><div
                class="para">
					这个仓库的典型例子包括修复在发布前无法修复的严重漏洞和后续更新引入的漏洞。根据紧急性，它还包含长期的软件包更新，比如<span
                  class="pkg pkg">spamassassin</span> 的广告监测规则，<span
                  class="pkg pkg">clamav</span>病毒库，或是各个时区的夏令时规则（<span
                  class="pkg pkg">tzdata</span>）。
				</div><div
                class="para">
					实际上，这个仓库是 <code
                  class="literal">计划-更新proposed-updates</code> 的子库，是由稳定更新管理员小心选定的。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.proposed-updates"></a>6.1.2.3. 计划更新</h4></div></div></div><a
                id="id-1.9.10.7.10.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.10.3"
                class="indexterm"></a><div
                class="para">
					一旦发布，<span
                  class="distribution distribution">稳定</span>分布只每两个月更新一次。接下来的更新在<code
                  class="literal">计划更新</code>仓库里准备（由稳定发布管理员监督）。
				</div><div
                class="para">
					这个仓库中通常有安全更新和稳定更新的文档，还有更多：软件包维护者可能在这里修复一些不需要马上发布的重要的漏洞。
				</div><div
                class="para">
					任何人都可以使用这个仓库在正式发布前来检测更新。下面的摘录使用<code
                  class="literal">jessie-proposed-updates</code>别名。因为<code
                  class="literal">wheezy-proposed-updates</code> 也存在，别名的使用更清楚更一致（对于<span
                  class="distribution distribution">Oldstable</span>更新来讲）：
				</div><pre
                class="programlisting">deb http://ftp.debian.org/debian jessie-proposed-updates main contrib non-free</pre></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.backports"></a>6.1.2.4. 向后移植到稳定版(Stable Backports)</h4></div></div></div><a
                id="id-1.9.10.7.11.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.4"
                class="indexterm"></a><div
                class="para">
					<code
                  class="literal">stable-backports</code>仓库存放“软件包的向后移植版本”。该术语指的是一些近期发布的软件针对旧的发行版重新编译的包，这里所指的旧发行版通常是指<span
                  class="distribution distribution">稳定（Stable）</span>的发行版本。
				</div><div
                class="para">
					当发行版本经过一段时间后，大量的软件项目都发布了新的软件版本，但它们都没有整合进入当前的<span
                  class="distrubution distrubution">稳定版</span>（它仅接受能够解决最重要问题的那些修改，例如安全问题相关）。因为<span
                  class="distribution distribution">测试版</span>和<span
                  class="distribution distribution">不稳定版</span>均具有一定风险，软件包维护者有时会针对<span
                  class="distribution distribution">稳定版</span>提供近期发布的软件的重新编译版本，这样做可以将可能存在的不稳定因素限制在一小部分经过选择的软件包之间，因而具有一定的优势。 <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://backports.debian.org">http://backports.debian.org</a></div>
				</div><div
                class="para">
					<code
                  class="literal">stable-backports</code>仓库与通常的Debian镜像共同存在，但是<span
                  class="distribution distribution">Squeeze</span>对应的仓库仍然在一个单独的服务器（<code
                  class="literal">backports.debian.org</code>）上存放，且需要增加以下特殊的<code
                  class="filename">sources.list</code>条目才能使用：
				</div><a
                id="id-1.9.10.7.11.8"
                class="indexterm"></a><pre
                class="programlisting">deb http://backports.debian.org/debian-backports squeeze-backports main contrib non-free</pre><div
                class="para">
					<code
                  class="literal">stable-backports</code>里的软件包(Backports)通常是从<span
                  class="distribution distribution">Testing</span>版本创建的。这确保一旦下一个稳定的Debian版本可用，所有安装的backports都可以升级到相应的稳定版本。
				</div><div
                class="para">
					尽管该仓库提供软件包较新的版本，APT 只会在您给出明确指示的情况下再安装它们（或者除非您已经在系统上安装了对应 backport(向后移植软件）的稍旧的版本）：
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install <em
                      class="replaceable">package</em>/jessie-backports
</code></strong><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install -t jessie-backports <em
                      class="replaceable">package</em>
</code></strong></pre></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.8"></a>6.1.3. 给<span
                      class="distribution distribution">测试</span>/<span
                      class="distribution distribution">非稳定</span> 版本用户的仓库</h3></div></div></div><div
              class="para">
				下面是一个标准 <code
                class="filename">sources.list</code>文件，用于系统运行 Debian <span
                class="distribution distribution">测试</span>或<span
                class="distribution distribution">非稳定</span> 版本：
			</div><div
              class="example"><a
                xmlns=""
                id="example.testing-sources-list"></a><p
                class="title"><strong>例 6.2. Debian <span
                    class="distribution distribution">Testing</span>/<span
                    class="distribution distribution">Unstable</span> 用户的 <code
                    class="filename">/etc/apt/sources.list</code>文件</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
↵
# Unstable↵
deb http://ftp.debian.org/debian unstable main contrib non-free↵
deb-src http://ftp.debian.org/debian unstable main contrib non-free↵
↵
# Testing↵
deb http://ftp.debian.org/debian testing main contrib non-free↵
deb-src http://ftp.debian.org/debian testing main contrib non-free↵
↵
# Stable↵
deb http://ftp.debian.org/debian stable main contrib non-free↵
deb-src http://ftp.debian.org/debian stable main contrib non-free↵
↵
# Security updates↵
deb http://security.debian.org/ stable/updates main contrib non-free↵
deb http://security.debian.org/ testing/updates main contrib non-free↵
deb-src http://security.debian.org/ stable/updates main contrib non-free↵
deb-src http://security.debian.org/ testing/updates main contrib non-free↵</pre></div></div><div
              class="para">
				APT 通过<code
                class="filename">sources.list</code> 文件来从<span
                class="distribution distribution">非稳定</span>安装软件包。如果这不是你所需要的，用<code
                class="literal">APT::Default-Release</code> 设置（参见 <a
                class="xref"
                href="sect.apt-get.html#sect.apt-upgrade">第 6.2.3 节 “系统升级”</a>）来指示 APT 从另一分布获取软件包（一般用 <span
                class="distribution distribution">测试</span>）。
			</div><div
              class="para">
				应该纳入这些典藏库，即使一个也该这么做。<span
                class="distribution distribution">测试版</span> 用户将感谢管理者从 <span
                class="distribution distribution">不稳定版</span> 中挑选修改过的套件，当 <span
                class="distribution distribution">测试版</span> 受到错误的干扰时。反过来说，被无预期错误干扰的 <span
                class="distribution distribution">不稳定版</span> 用户，可能降级至他们 (若以此工作) 使用的 <span
                class="distribution distribution">测试版</span> 套件。
			</div><div
              class="para">
				<span
                class="distribution distribution">稳定版</span> 的内容较有争议，但可接触被发展版移除的套件。同时也确保取得尚未被修改的最新套件。
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="id-1.9.10.8.7"></a>6.1.3.1. <span
                        class="distribution distribution">实验</span> 仓库</h4></div></div></div><a
                id="id-1.9.10.8.7.2"
                class="indexterm"></a><div
                class="para">
					<span
                  class="distribution distribution">实验性</span> 典藏所的套件是所有 Debian 镜射站的内容，包括因为品质关系尚未被纳入 <span
                  class="distribution distribution">不稳定版</span> 的套件 — 通常是发展中的软件版本或前置版 (alpha、beta、待发布…)。修改过的套件多少有点问题，可送至此处。在高端用户的协助下，维护者努力找出该等问题。经过第一阶段后，把套件移至 <span
                  class="distribution distribution">不稳定版</span>，更多的用户以更详细的方式测试它。
				</div><div
                class="para">
					不在乎系统崩盘并有能力自行修复的用户，就会取用 <span
                  class="distribution distribution">实验性</span> 的套件。用户导入此等套件并测试其功能、检查是否满足其需求。这就是 Debian 的诉求，加入 APT 的 <code
                  class="filename">sources.list</code> 内，并不表示该套件可顺利使用，应加入这一个行：
				</div><div
                class="informalexample"><pre
                  class="programlisting">deb http://ftp.debian.org/debian experimental main contrib non-free↵</pre></div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.9"></a>6.1.4. 非官方来源： <code
                      class="literal">mentors.debian.net</code></h3></div></div></div><a
              id="id-1.9.10.9.2"
              class="indexterm"></a><div
              class="para">
				高级用户们为一些重新编译过的软件建立了众多的非官方的 Debian 软件源(Ubuntu 使用他们的个人包存档服务)，程序员提供他们编写的软件提供给所有人，甚至有 Debian 开发人员在线提供他们的软件包的预版本。
			</div><div
              class="para">
				<code
                class="literal">mentors.debian.net</code>站点比较有意思（虽然它只提供源码包）。它搜集Debian开发者候选人员制作的软件包，以及那些希望创建Debian软件包又不想经历成为Debian开发者整套流程的那些志愿者的软件包。这些软件包提供时没有任何质量保证；请确保您在将它们用于生产环境之前检查它们的来源和完整性并进行测试。
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>社区</em></span> <code
                          class="literal">debian.net</code> 站点</strong></p></div></div></div><a
                id="id-1.9.10.9.5.2"
                class="indexterm"></a><div
                class="para">
				<span
                  class="emphasis"><em>debian.net</em></span> 域名不是一个 Debian 项目的官方源。每个 Debian 开发者都可基于自己用途而使用此域名。这些网址包含一些非官方服务（有时为个人站点），其主机不属于项目本身而由 Debian 开发者设置，甚至还有将要迁移到<span
                  class="emphasis"><em>debian.org</em></span>的项目原型。有两个理由来解释为什么这些项目原型会留在<span
                  class="emphasis"><em>debian.net</em></span>：或者是没有人做出足够的努力将其迁移到官方服务（ 位于<span
                  class="emphasis"><em>debian.org</em></span> 域名上，具备一定维护保证），或者是服务争议太大以至于无法官方化。
			</div></div><div
              class="para">
				安装一个包意味着需要给包的创建者以 root 权限，因为其决定了以该身份运行的初始化脚本的内容。官方的 Debian 包由志愿者创建，志愿者经过指派和评估，且能封装软件包，因而软件包的来源与完整性可以确认。
			</div><div
              class="para">
				一般地，需当心来源未知以及并非位于官方 Debian 服务器之一上的软件包：评估包创建者的可信度，并检查包的完整性。<div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://mentors.debian.net/">http://mentors.debian.net/</a></div>
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.snapshot.debian.org"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>进阶</em></span>旧包版本： <code
                          class="literal">snapshot.debian.org</code></strong></p></div></div></div><a
                id="id-1.9.10.9.8.2"
                class="indexterm"></a><div
                class="para">
				<code
                  class="literal">snapshot.debian.org</code>服务，于 2010 年 4 月引入，可用于“时间回溯”及查找软件包的旧版本。例如，它可用于识别某个回溯的软件包版本，更具体地，在等待回溯修复时可以回到先前的版本。
			</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.10"></a>6.1.5. Debian 软件包 缓存 代理</h3></div></div></div><a
              id="id-1.9.10.10.2"
              class="indexterm"></a><a
              id="id-1.9.10.10.3"
              class="indexterm"></a><div
              class="para">
				当一整个网络的机器被配置为使用同样的远程服务器并下载同样的更新包时，管理员会知晓有一个当作网络-本地间缓存器的中介代理是有好处的（参见侧边栏<a
                class="xref"
                href="sect.apt-cache.html#sidebar.cache"><span
                  class="emphasis"><em>术语</em></span> 缓存</a>）。
			</div><div
              class="para">
				您可以配置 APT 使用一个“标准”的代理（参见<a
                class="xref"
                href="sect.apt-get.html#sect.apt-config">第 6.2.4 节 “配置选项”</a> 获取 APT 相关内容，参见<a
                class="xref"
                href="sect.http-ftp-proxy.html">第 11.6 节 “HTTP/FTP Proxy”</a>获取代理相关内容），Debian 体系提供了一个解决问题的更佳手段。本段中所述的专用软件比普通的代理缓存更加智能，因为它们可依赖于 APT 软件源的特定结构（例如，它们了解单独的文件在什么时间废弃与否，并由此来调整在保持阶段的时间）。
			</div><a
              id="id-1.9.10.10.6"
              class="indexterm"></a><a
              id="id-1.9.10.10.7"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">apt-cacher</span>与<span
                class="pkg pkg">apt-cacher-ng</span>的工作方式类似代理缓存服务器。对于外部请求，APT 的<code
                class="filename">sources.list</code> 保持不变，但是 APT 被配置为把它们作为代理使用。
			</div><a
              id="id-1.9.10.10.9"
              class="indexterm"></a><div
              class="para">
				另一方面，<span
                class="pkg pkg">approx</span>，工作方式则类似一个 HTTP 服务器，其在它的顶级 URL 地址上“镜像”任意数量的远程软件源。这些顶级目录与远程 URL 之间的映射存储于<code
                class="filename">/etc/approx/approx.conf</code>中：
			</div><pre
              class="programlisting">
↵
# &lt;name&gt; &lt;repository-base-url&gt;↵
debian   http://ftp.debian.org/debian↵
security http://security.debian.org↵</pre><div
              class="para">
				<span
                class="pkg pkg">approx</span> 通过inetd (参见<a
                class="xref"
                href="sect.inetd.html">第 9.6 节 “The <code
                  class="command">inetd</code> 超级服务器”</a>)默认在9999端口运行，并需要用户调整<code
                class="filename">sources.list</code> 文件来指向 approx 服务器：
			</div><pre
              class="programlisting"># 指向本地 approx 服务器的sources.list 范例
deb http://apt.falcot.com:9999/security jessie/updates main contrib non-free
deb http://apt.falcot.com:9999/debian jessie main contrib non-free
</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>上一页</strong>5.5. 与其它软件包共存</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>下一页</strong>6.2. aptitude、apt-get和 apt 命令</a></li></ul></body></html>
