<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">3.2. Jak migrować</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-pl-PL-1.0-1" /><meta
        name="keywords"
        content="Istniejąca konfiguracja, Ponowne użycie, Migracja" /><link
        rel="home"
        href="index.html"
        title="Podręcznik Administratora Debiana" /><link
        rel="up"
        href="existing-setup.html"
        title="Rozdział 3. Analiza istniejącej konfiguracji i migracja" /><link
        rel="prev"
        href="existing-setup.html"
        title="Rozdział 3. Analiza istniejącej konfiguracji i migracja" /><link
        rel="next"
        href="installation.html"
        title="Rozdział 4. Instalacja" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/pl-PL/stable/sect.how-to-migrate.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Poprzedni</strong></a></li><li
          class="home">Podręcznik Administratora Debiana</li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Następny</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.how-to-migrate"></a>3.2. Jak migrować</h2></div></div></div><a
          id="id-1.6.5.2"
          class="indexterm"></a><div
          class="para">
			W celu zapewnienia ciągłości usług, każda migracja na komputerze musi być zaplanowana i realizowana zgodnie z planem. Zasada ta ma zastosowanie bez względu na używany system operacyjny.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.4"></a>3.2.1. Ankieta i identyfikacja usług</h3></div></div></div><div
            class="para">
				Ten krok jest niezbędny i jest tak prosty, jak tylko się wydaje. Dobry administrator zna główne role każdego serwera, ale takie role mogą się zmieniać. Czasem, nawet doświadczeni użytkownicy mogą mieć zainstalowane usługi na "dziko". Wiedza o tym, że takie usługi istnieją, pozwoli administratorowi zadecydować o ich dalszym losie i zapobiegnie przypadkowemu usuwaniu usług.
			</div><div
            class="para">
				W tym celu dobrze jest poinformować użytkowników o projekcie przed migracją serwera. Zaangażowanie ich w projekt przed migracją może być przydatne w instalacji najbardziej znanych, wolnych programów na ich komputerach. Po migracji do Debiana zetkną się z tymi programami ponownie: pakiet Libre Office i pakiet Mozilla są tego najlepszymi przykładami.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.6.5.4.4"></a>3.2.1.1. Sieć komputerowa i procesy</h4></div></div></div><a
              id="id-1.6.5.4.4.2"
              class="indexterm"></a><div
              class="para">
					Narzędzie <code
                class="command">nmap</code> (w pakiecie o tej samej nazwie) szybko zidentyfikuje usługi internetowe uruchomione na maszynie podłączonej do sieci komputerowej, nawet bez potrzeby logowania sie na tej maszynie. Po prostu, wywołaj następujące polecenie na innej maszynie, podłączonej do tej samej sieci:
				</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>nmap mirwiz</code></strong>
<code
                class="computeroutput">Starting Nmap 7.40 ( https://nmap.org ) at 2017-06-06 14:41 CEST
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.00062s latency).
Not shown: 992 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
25/tcp   open  smtp
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
5666/tcp open  nrpe
9999/tcp open  abyss

Nmap done: 1 IP address (1 host up) scanned in 0.06 seconds</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATYWA</em></span> Użyj polecenia <code
                          class="command">netstat</code> aby znależć listę dostępnych usług</strong></p></div></div></div><div
                class="para">
					Na maszynie linuksowej, polecenie <code
                  class="command">netstat -tupan</code> wyświetli listę aktywnych i oczekujących sesji TCP, jak i portów UDP, na których są nasłuchiwane programy uruchomione. Ułatwia to identyfikację usług oferowanych w sieci komputerowej.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>IDĄC DALEJ</em></span> IPv6</strong></p></div></div></div><div
                class="para">
					Niektóre polecenia sieciowe mogą pracować zarówno z IPv4 (zazwyczaj domyślnie) lub z IPv6. Należą do nich polecenia <code
                  class="command">nmap</code> i <code
                  class="command">netstat</code>, ale również inne, takie jak <code
                  class="command">route</code> lub <code
                  class="command">ip</code>. Konwencja polega na tym, że to zachowanie jest włączane przez opcję linii poleceń <em
                  class="parameter"><code> -6</code></em>.
				</div></div><div
              class="para">
					Jeśli serwer maszyny uniksowej oferuje konta powłoki użytkownikom, to interesujące jest określenie tego, czy procesy wykonywane są w tle pod nieobecność ich właściciela. Polecenie <code
                class="command">ps auxw</code> wyświetla listę wszystkich procesów, razem z tożsamością ich użytkownika. Poprzez sprawdzenie informacji, uzyskanych za pomocą polecenia <code
                class="command">who</code>, które daje listę zalogowanych użytkowników, możliwe jest zidentyfikowanie nieuczciwych lub niezadeklarowanych serwerów lub programów uruchomionych w tle. Rzut okiem na <code
                class="filename">crontabs</code> (tabele nasłuchujące automatycznych działań zaplanowanych przez użytkowników) często dostarczy interesujących informacji na temat funkcji spełnianych przez serwer (pełne wyjaśnienie polecenia <code
                class="command">cron</code> jest dostępne w <a
                class="xref"
                href="sect.task-scheduling-cron-atd.html">Sekcja 9.7, „Scheduling Tasks with <code
                  class="command">cron</code> and <code
                  class="command">atd</code>”</a>).
				</div><div
              class="para">
					W każdym przypadku, konieczne jest tworzenie kopii zapasowych serwerów, co pozwala na odzyskanie danych po fakcie, gdy użytkownicy będą raportować specyficzne problemy, związane z migracją.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.5"></a>3.2.2. Tworzenie kopii zapasowej dla konfiguracji</h3></div></div></div><div
            class="para">
				Dobrze jest, aby utrzymać konfigurację każdej zidentyfikowanej usługi, aby móc potem zainstalować jej odpowiednik na zaktualizowanym serwerze. Absolutne minimum to stworzenie kopii zapasowej plików konfiguracyjnych.
			</div><div
            class="para">
				Pliki konfiguracyjne dla maszyn uniksowych znajdują się zwykle w katalogu <code
              class="filename">/etc/</code>, ale mogą też znajdować się w podkatalogu <code
              class="filename">/usr/local/</code>. Jest to przypadek, gdy program jest zainstalowany raczej ze źródeł, a nie z pakietu. W niektórych przypadkach, pliki konfiguracyjne można również znaleźć w katalogu <code
              class="filename">/opt/</code>.
			</div><div
            class="para">
				Dla usług zarządzających danymi, które, przykładowo, zarządzają bazami danych usilnie zaleca się, aby wyeksportować dane do standardowego formatu, który będzie można łatwo zaimportować za pomocą nowego oprogramowania. Taki format zazwyczaj jest w trybie tekstowym i jest udokumentowany; może to być, przykładowo, zrzut SQL dla bazy danych lub plik LDIF dla serwera LDAP.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-2.png"
                  alt="Kopie zapasowe bazy danych" /></div></div><p
              class="title"><strong>Rysunek 3.2. Kopie zapasowe bazy danych</strong></p></div><div
            class="para">
				Każdy oprogramowanie serwera jest inne. Nie jest możliwe szczegółowe opisanie wszystkich przypadków. Proszę porównać dokumentację dla istniejących i nowych oprogramowań, które mogą wyeksportować (i ponownie zaimportować) części oprogramowań i dokumentację tych oprogramowań, które wymagają ręcznej obsługi. W dalszej części tej książki zostanie wyjaśniona konfiguracja głównych programów serwera Linuksa.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.6"></a>3.2.3. Przejmowanie (na własność) istniejącego serwera Debiana</h3></div></div></div><a
            id="id-1.6.5.6.2"
            class="indexterm"></a><a
            id="id-1.6.5.6.3"
            class="indexterm"></a><a
            id="id-1.6.5.6.4"
            class="indexterm"></a><div
            class="para">
				Aby efektywnie przejąć kontrolę nad serwerem Debiana, dobrze jest wcześniej przeanalizować maszynę już uruchomioną z tym systemem.
			</div><div
            class="para">
				Pierwszym plikiem do sprawdzenia jest <code
              class="filename">/etc/debian_version</code>. Zawiera on zwykle numer wersji zainstalowanego systemu Debian (jest to cześć pakietu <span
              class="emphasis"><em>base-files</em></span>). Jeśli plik zawiera wpis, odnoszący się do <code
              class="literal"><em
                class="replaceable">nazwy kodowej</em>/sid</code>, to wnioskujemy, że system został zaktualizowany za pomocą pakietów, pochodzących z dystrybucji rozwojowej (testowej lub niestabilnej).
			</div><div
            class="para">
				Program (polecenie konsolowe) <code
              class="command">apt-show-versions</code> (z pakietu Debiana o tej samej nazwie) sprawdza listę zainstalowanych pakietów oraz identyfikuje ich dostępne wersje (Po prostu, wpisujemy nazwę tego programu za znakiem zachęty w konsoli lub w terminalu). Do tych samych zadań można użyć programu (polecenia) <code
              class="command">aptitude</code>. Jego działanie jest jednak mniej systematyczne.
			</div><div
            class="para">
				Rzut oka na plik <code
              class="filename">/etc/apt/sources.list</code> (i katalog <code
              class="filename">/etc/apt/sources.list.d/</code>) z dużym prawdopodobieństwem pokaże skąd pochodzą zainstalowane pakiety Debiana. Jeśli pojawi się wiele nieznanych źródeł, to administrator może wybrać całkowitą reinstalację systemu komputerowego, aby zapewnić optymalna kompatybilność z oprogramowaniem dostarczanym przez Debiana.
			</div><div
            class="para">
				Plik <code
              class="filename">sources.list</code> jest często dobrym wskaźnikiem: większość administratorów zachowuje, przynajmniej w komentarzach, listę źródeł APT, które były wcześniej używane. Ale nie należy zapominać, że źródła wykorzystane w przeszłości mogły zostać usunięte, a niektóre losowe pakiety, podpatrzone w Internecie, mogą być zainstalowane ręcznie (za pomocą polecenia <code
              class="command">dpkg</code>). W tym przypadku, urządzenie wprowadza w błąd poprzez swój "standardowy" wygląd Debiana. Dlatego należy zwrócić uwagę na wskazania obecności pakietów zewnętrznych (pojawienie się plików <code
              class="filename">deb</code> w nietypowych katalogach, na numery wersji pakietu ze specjalną końcówką wskazującą, że pochodzi on spoza projektu Debian, przykładowo, <code
              class="literal">ubuntu</code> lub <code
              class="literal">lmde</code>, itp)
			</div><div
            class="para">
				Podobnie, warto przeanalizować zawartość pliku w katalogu <code
              class="filename">/usr/local/</code>, w którym są ręcznie zainstalowane i skompilowane programy. Wyliczenie oprogramowania zainstalowanego w ten sposób jest pouczające, ponieważ rodzi to pytania dotyczące powodów nie używania odpowiedniego pakietu Debiana, jeżeli takie pakiety istnieją.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SZYBKIE SPOJRZENIE</em></span> <span
                        class="pkg pkg">cruft</span></strong></p></div></div></div><div
              class="para">
				Pakiet <span
                class="pkg pkg">cruft</span> proponuje utworzenie listy dostępnych plików, które nie są własnością żadnego pakietu. Posiada on filtry (mniej lub bardziej skuteczne, w zależności od tego jak bardzo są aktualne) i służy do tego, aby uniknąć raportowania niektórych prawomocnych plików (plików wygenerowanych przez pakiety Debiana lub wygenerowanych plików konfiguracyjnych nie zarządzanych przez <code
                class="command">dpkg</code>, itp).
			</div><div
              class="para">
				Uważaj, aby nie usunąć wszystkiego, co <code
                class="command">cruft</code> może wylistować!
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.7"></a>3.2.4. Instalowanie Debiana</h3></div></div></div><div
            class="para">
				Gdy wszystkie wymagane informacje na bieżącym serwerze są już znane, możemy go zamknąć i rozpocząć na nim instalację Debiana.
			</div><a
            id="id-1.6.5.7.3"
            class="indexterm"></a><div
            class="para">
				Aby wybrać odpowiednią wersję, musimy znać architekturę komputera. Jeśli jest to w miarę nowy PC, to jest bardzo prawdopodobne, iż będzie to amd64 (starsze komputery miały zwykle architekturę i386). W innych przypadkach, możemy zawęzić możliwości zgodnie z poprzednio używanym systemem.
			</div><div
            class="para">
				<a
              class="xref"
              href="sect.how-to-migrate.html#tab-corresp">Tabela 3.1</a> nie jest wyczerpująca, ale może być pomocna. W każdym przypadku, oryginalna dokumentacja dla komputera jest najbardziej wiarygodnym źródłem, w którym można znaleźć te informacje.
			</div><div
            class="table"><a
              xmlns=""
              id="tab-corresp"></a><p
              class="title"><strong>Tabela 3.1. Dopasowanie systemu operacyjnego i architektury</strong></p><div
              class="table-contents"><table
                xmlns:d="http://docbook.org/ns/docbook"
                class="lt-4-cols gt-7-rows"
                summary="Dopasowanie systemu operacyjnego i architektury"><colgroup><col /><col /></colgroup><thead><tr><th>System operacyjny</th><th>Architektur(a/y)</th></tr></thead><tbody><tr><td>DEC Unix (OSF/1)</td><td>alpha, mipsel</td></tr><tr><td>HP Unix</td><td>ia64, hppa</td></tr><tr><td>IBM AIX</td><td>powerpc</td></tr><tr><td>Irix</td><td>mips</td></tr><tr><td>OS X</td><td>amd64, powerpc, i386</td></tr><tr><td>z/OS, MVS</td><td>s390x, s390</td></tr><tr><td>Solaris, SunOS</td><td>sparc, i386, m68k</td></tr><tr><td>Ultrix</td><td>mips</td></tr><tr><td>VMS</td><td>alpha</td></tr><tr><td>Windows 95/98/ME</td><td>i386</td></tr><tr><td>Windows NT/2000</td><td>i386, alpha, ia64, mipsel</td></tr><tr><td>Windows XP / Windows Server 2008</td><td>i386, amd64, ia64</td></tr><tr><td>Windows RT</td><td>armel, armhf, arm64</td></tr><tr><td>Windows Vista / Windows 7-8-10</td><td>i386, amd64</td></tr></tbody></table></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SPRZĘT KOMPUTEROWY</em></span> 64 bit PC vs 32 bit PC</strong></p></div></div></div><a
              id="id-1.6.5.7.7.2"
              class="indexterm"></a><a
              id="id-1.6.5.7.7.3"
              class="indexterm"></a><div
              class="para">
				Najnowsze komputery mają 64 bitowe procesory Intel lub AMD, zgodne ze starszymi procesorami 32-bitowymi. Programy skompilowane dla architektury "i386" także działają. Z drugiej strony, kompatybilność nie jest w stanie wykorzystywać najnowszych możliwości nowych procesorów. Dlatego też Debian dostarcza architekturę "amd64", która współpracuje z najnowszymi mikroprocesorami AMD jak i procesorami Intel "em64t" (łącznie z większością procesorów serii Core), które są bardzo podobne do AMD64.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.8"></a>3.2.5. Instalowanie i konfigurowanie wybranych usług</h3></div></div></div><div
            class="para">
				Gdy został zainstalowany Debian, musimy też zainstalować i skonfigurować, po kolei, wszystkie usługi dla tego komputera. Nowa konfiguracja musi wziąć pod uwagę wcześniejszą konfigurację, aby zapewnić płynne przejście. Wszystkie informacje zebrane w pierwszych dwóch etapach będą przydatne, aby pomyślnie zakończyć tę część konfiguracji.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.8.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-4.png"
                  alt="Instalowanie wybranych usług" /></div></div><p
              class="title"><strong>Rysunek 3.3. Instalowanie wybranych usług</strong></p></div><div
            class="para">
				Przed intensywnym rozpoczęciem tego ćwiczenia usilnie zaleca się przeczytanie książki do końca. Potem potrzebne będzie dokładniejsze zrozumienie sposobu konfigurowania oczekiwanych usług.
			</div><div
            class="para">
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Poprzedni</strong>Rozdział 3. Analiza istniejącej konfiguracji i mi...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Początek rozdziału</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Spis treści</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Następny</strong>Rozdział 4. Instalacja</a></li></ul></body></html>
