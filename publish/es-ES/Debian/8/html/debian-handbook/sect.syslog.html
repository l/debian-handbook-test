<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.5. syslog Eventos de sistema</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Arranque del sistema, Scripts de inicio, SSH, Telnet, Derechos, Permisos, Supervisión, Inetd, Cron, Respaldo, Conexión en caliente («hotplug»), PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="El manual del Administrador de Debian" /><link
        rel="up"
        href="unix-services.html"
        title="Capítulo 9. Servicios Unix" /><link
        rel="prev"
        href="sect.administration-interfaces.html"
        title="9.4. Interfaces de administración" /><link
        rel="next"
        href="sect.inetd.html"
        title="9.6. El superservidor inetd" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/es-ES/stable/sect.syslog.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>Anterior</strong></a></li><li
          class="home">El manual del Administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.syslog"></a>9.5. <code
                  class="command">syslog</code> Eventos de sistema</h2></div></div></div><a
          id="id-1.12.8.2"
          class="indexterm"></a><a
          id="id-1.12.8.3"
          class="indexterm"></a><a
          id="id-1.12.8.4"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-principe"></a>9.5.1. Principio y mecanismo</h3></div></div></div><div
            class="para">
				El demonio <code
              class="command">rsyslogd</code> es responsable de recolectar los mensajes de servicio que provienen de aplicaciones y el núcleo para luego distribuirlos en archivos de registros (usualmente almacenados en el directorio <code
              class="filename">/var/log/</code>). Obedece a su archivo de configuración: <code
              class="filename">/etc/rsyslog.conf</code>.
			</div><div
            class="para">
				Cada mensaje de registro es asociado con un subsistema de aplicaciones (llamados «facility» en la documentación):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">auth</code> y <code
                    class="literal">authpriv</code>: para autenticación;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">cron</code>: proviene servicios de programación de tareas, <code
                    class="command">cron</code> y <code
                    class="command">atd</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">daemon</code>: afecta un demonio sin clasificación especial (DNS, NTP, etc.);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">ftp</code>: el servidor FTP;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">kern</code>: mensaje que proviene del núcleo;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">lpr</code>: proviene del subsistema de impresión;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">mail</code>: proviene del subsistema de correo electrónico;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">news</code>: mensaje del subsistema Usenet (especialmente de un servidor NNTP — protocolo de transferencia de noticias en red, «Network News Transfer Protocol» — que administra grupos de noticias);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">syslog</code>: mensajes del servidor <code
                    class="command">syslogd</code> en sí;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">user</code>: mensajes de usuario (genéricos);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uucp</code>: mensajes del servidor UUCP (programa de copia Unix a Unix, «Unix to Unix Copy Program», un protocolo antiguo utilizado notablemente para distribuir correo electrónico);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">local0</code> a <code
                    class="literal">local7</code>: reservados para uso local.
					</div></li></ul></div><div
            class="para">
				Cada mensaje tiene asociado también un nivel de prioridad. Aquí está la lista en orden decreciente:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">emerg</code>: «¡Ayuda!» Hay una emergencia y el sistema probablemente está inutilizado.
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">alerta</code>: apúrese, cualquier demora puede ser peligrosa, debe reaccionar inmediatamente;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">crit</code>: las condiciones son críticas;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">err</code>: error;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">warn</code>: advertencia (error potencial);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">notice</code>: las condiciones son normales pero el mensaje es importante;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">info</code>: mensaje informativo;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">debug</code>: mensaje de depuración.
					</div></li></ul></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-config"></a>9.5.2. El archivo de configuración</h3></div></div></div><div
            class="para">
				La sintaxis del archivo <code
              class="filename">/etc/rsyslog.conf</code> está detallada en la página de manual <span
              class="citerefentry"><span
                class="refentrytitle">rsyslog.conf</span>(5)</span>, pero también hay disponible documentación HTML en el paquete <span
              class="pkg pkg">rsyslog-doc</span> (<code
              class="filename">/usr/share/doc/rsyslog-doc/html/index.html</code>). El principio general es escribir pares de «selector» y «acción». El selector define los mensajes relevantes y la acción describe qué hacer con ellos.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-selector-syntax"></a>9.5.2.1. Sintaxis del selector</h4></div></div></div><div
              class="para">
					El selector es una lista separada por punto y coma de pares <code
                class="literal"><em
                  class="replaceable">subsistema</em>.<em
                  class="replaceable">prioridad</em></code> (por ejemplo: <code
                class="literal">auth.notice;mail.info</code>). Un asterisco puede representar todos los subsistemas o todas las prioridades (por ejemplo: <code
                class="literal">*.alert</code> o <code
                class="literal">mail.*</code>). Puede agrupar varios subsistemas separándolos con una coma (por ejemplo: <code
                class="literal">auth,mail.info</code>). La prioridad indicada también incluye los mensajes de prioridad igual o mayor; por lo tanto, <code
                class="literal">auth.alert</code> indica los mensajes del subsistema <code
                class="literal">auth</code> de prioridad <code
                class="literal">alert</code> o <code
                class="literal">emerg</code>. Si se agrega un signo de exclamación (!) como prefijo, indica lo contrario; en otras palabras, prioridades estrictamente menores. Por lo tanto, <code
                class="literal">auth.!notice</code> sólo incluye los mensajes del subsistema <code
                class="literal">auth</code> con prioridades <code
                class="literal">info</code> o <code
                class="literal">debug</code>. Si se agrega un signo igual (=) como prefijo corresponde única y exactamente con la prioridad indicada (<code
                class="literal">auth.=notice</code> sólo incluye los mensajes del subsistema <code
                class="literal">auth</code> con prioridad <code
                class="literal">notice</code>).
				</div><div
              class="para">
					Cada elemento en la lista del selector reemplaza elementos anteriores. Así es posible restringir un conjunto o excluir ciertos elementos del mismo. Por ejemplo, <code
                class="literal">kern.info;kern.!err</code> significa los mensajes del núcleo con prioridades entre <code
                class="literal">info</code> y <code
                class="literal">warn</code>. La prioridad <code
                class="literal">none</code> indica el conjunto vacío (ninguna prioridad) y puede servir para excluir un subsistema de un conjunto de mensajes. Por lo tanto <code
                class="literal">*.crit;kern.none</code> indica todos los mensajes con prioridad igual o mayor a <code
                class="literal">crit</code> que no provengan del núcleo.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-action-syntax"></a>9.5.2.2. Sintaxis de las acciones</h4></div></div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> La tubería («pipe») con nombre, una tubería persistente</strong></p></div></div></div><a
                id="id-1.12.8.6.4.2.2"
                class="indexterm"></a><a
                id="id-1.12.8.6.4.2.3"
                class="indexterm"></a><div
                class="para">
					Una tubería con nombre es un tipo particular de archivo que funciona como una tubería tradicional (la tubería que crea con el símbolo «|» en una consola), pero a través de un archivo. Este mecanismo tiene la ventaja de poder relacionar dos procesos que no están relacionados. Todo lo que se escriba en una tubería con nombre bloquea el proceso que escribe hasta que un proceso intente leer los datos escritos. Este segundo proceso lee los datos escritos por el primero, que puede luego continuar ejecutando.
				</div><div
                class="para">
					Puede crear estos archivos con el programa <code
                  class="command">mkfifo</code>.
				</div></div><div
              class="para">
					Las acciones posibles son:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							agregar el mensaje a un archivo (ejemplo: <code
                      class="filename">/var/log/messages</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							enviar el mensaje a un servidor <code
                      class="command">syslog</code> remoto (ejemplo: <code
                      class="literal">@log.falcot.com</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							enviar el mensaje a una tubería con nombre existente (ejemplo: <code
                      class="literal">|/dev/xconsole</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							enviar el mensaje a uno o más usuarios si tienen una sesión iniciada (ejemplo: <code
                      class="literal">root,rhertzog</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							enviar el mensaje a todos los usuarios con sesiones activas (ejemplo: <code
                      class="literal">*</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							escribir el mensaje en una consola de texto (ejemplo: <code
                      class="literal">/dev/tty8</code>).
						</div></li></ul></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SEGURIDAD</em></span> Reenvío de registros</strong></p></div></div></div><a
                id="id-1.12.8.6.4.5.2"
                class="indexterm"></a><div
                class="para">
					Es buena idea grabar los registros más importantes en una máquina separada (tal vez dedicada a este propósito), ya que evitará que cualquier intruso elimine los rastros de su intromisión (a menos, por supuesto, que también comprometa este otro servidor). Lo que es más, en el caso de un problema mayor (como un fallo abrupto del núcleo) tendrá disponible los registros en otro equipo, lo que aumenta sus probabilidades de determinar la secuencia de eventos que llevó al fallo.
				</div><div
                class="para">
					Para aceptar mensajes de registro enviados por otras máquinas debe reconfigurar <span
                  class="emphasis"><em>rsyslog</em></span>: en la práctica es suficiente activar las líneas ya preparadas en el archivo <code
                  class="filename">/etc/rsyslog.conf</code> (<code
                  class="literal">$ModLoad imudp</code> y <code
                  class="literal">$UDPServerRun 514</code>).
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>Anterior</strong>9.4. Interfaces de administración</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>Siguiente</strong>9.6. El superservidor inetd</a></li></ul></body></html>
