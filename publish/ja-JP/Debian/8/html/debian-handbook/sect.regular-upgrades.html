<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.7. システムを最新の状態に保つ</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ja-JP-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="apt.html"
        title="第 6 章 メンテナンスと更新、APT ツール" /><link
        rel="prev"
        href="sect.dist-upgrade.html"
        title="6.6. 安定版から次のディストリビューションへのアップグレード" /><link
        rel="next"
        href="sect.automatic-upgrades.html"
        title="6.8. 自動アップグレード" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ja-JP/stable/sect.regular-upgrades.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.dist-upgrade.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.automatic-upgrades.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.regular-upgrades"></a>6.7. システムを最新の状態に保つ</h2></div></div></div><div
          class="para">
			Debian ディストリビューションは活動的で、絶えず変化しています。変更のほとんどは<span
            class="distribution distribution">テスト版</span>と<span
            class="distribution distribution">不安定版</span>バージョンに対するものが多いですが、<span
            class="distribution distribution">安定版</span>も多くの場合セキュリティ関連の修正によって時々更新されます。システムでどんな Debian のバージョンを使っていたとしても、システムを最新の状態に保つのが通常得策です。そうすれば、最新の進化とバグ修正の恩恵を受けることが可能です。
		</div><div
          class="para">
			利用できる更新を確認してアップグレードを実行するために日常的にツールを実行することはもちろん可能ですが、特に複数のマシンでこれを行う必要がある場合、このような反復作業は面白くありません。幸いなことに、多くの反復作業と同様この作業もある程度自動化が可能で、効果的な一連のツールが開発されています。
		</div><div
          class="para">
			更新作業の自動化を担うツールの 1 つ目は <code
            class="command">apticron</code> で、同名のパッケージに含まれます。<code
            class="command">apticron</code> の主たる挙動は (<code
            class="command">cron</code> を使って) 毎日スクリプトを実行することです。スクリプトは利用できるパッケージのリストを更新し、インストール済みパッケージが入手できる最新バージョンと異なる場合、そのようなパッケージのリストと新しいバージョンにおける修正点をメールで送信します。<code
            class="command">apticron</code> の挙動は明らかに Debian <span
            class="distribution distribution">安定版</span>のユーザを対象にしています。なぜなら、より頻繁にパッケージが更新される Debian の他のディストリビューションでは毎日のメールがとても長くなるからです。更新が利用できるようになったら、<code
            class="command">apticron</code> は自動的にそれらをダウンロードします。<code
            class="command">apticron</code> はインストール作業を行いません。すなわち管理者が手作業でインストールを実行する必要があります。しかしながら、パッケージをダウンロードして手元 (APT のキャッシュ) に保存しておくことで、管理者は作業を迅速に行うことが可能です。
		</div><div
          class="para">
			コンピュータを複数担当している管理者が保留中のアップグレードを通知されることの重要性を理解しているのは間違いありません。しかしながら、システムのアップグレードは相変わらずまだ退屈なものです。このような状況では <code
            class="filename">/etc/cron.daily/apt</code> スクリプト (<span
            class="pkg pkg">apt</span> パッケージに含まれます) が役に立ちます。<code
            class="filename">/etc/cron.daily/apt</code> スクリプトは <code
            class="command">cron</code> によって毎日 (非対話的に) 実行されます。スクリプトの挙動を制御するためには APT 設定変数を使います (このため変数は <code
            class="filename">/etc/apt/apt.conf.d/</code> 内のファイルに記載されます)。以下に主な変数を示します。
		</div><div
          class="variablelist"><dl
            class="variablelist"><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Update-Package-Lists</code></span></dt><dd><div
                class="para">
						このオプションを使えば、パッケージリストを更新する頻度 (日単位) を設定することが可能です。<code
                  class="command">apticron</code> ユーザならこの変数を設定しなくても大丈夫です。なぜなら <code
                  class="command">apticron</code> が設定するからです。
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Download-Upgradeable-Packages</code></span></dt><dd><div
                class="para">
						このオプションを使えば、パッケージをダウンロードする頻度 (日単位) を設定することが可能です。<code
                  class="command">apticron</code> ユーザはこの変数を設定する必要はありません。
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::AutocleanInterval</code></span></dt><dd><div
                class="para">
						これは <code
                  class="command">apticron</code> が備えていない機能を担うオプションです。このオプションはどの程度の頻度で時代遅れのパッケージ (どのディストリビューションにも含まれないパッケージ) を APT キャッシュから削除するかを制御します。このオプションを使うことで APT キャッシュを合理的なサイズに保ち、キャッシュの削除作業について心配する必要がなくなります。
					</div></dd><dt><span
                class="term"><code
                  class="literal">APT::Periodic::Unattended-Upgrade</code></span></dt><dd><a
                id="id-1.9.16.6.4.2.1"
                class="indexterm"></a><div
                class="para">
						このオプションが有効化されると、毎日のスクリプトで <code
                  class="command">unattended-upgrade</code> (<span
                  class="pkg pkg">unattended-upgrades</span> パッケージに含まれます) が実行さるようになります。これはその名前が示す通りいくつかのパッケージのアップグレード作業を自動化します (デフォルトでは、セキュリティ更新だけを処理しますが <code
                  class="filename">/etc/apt/apt.conf.d/50unattended-upgrades</code> で挙動をカスタマイズできます)。このオプションを設定するには <code
                  class="command">dpkg-reconfigure -plow unattended-upgrades</code> を実行して debconf の助けを借りることに注意してください。
					</div></dd></dl></div><div
          class="para">
			上記以外のオプションを使うことで、さらに精密なキャッシュ消去挙動を制御できます。それらのオプションをここに載せることはしませんが、詳しい説明は <code
            class="filename">/etc/cron.daily/apt</code> スクリプトを参照してください。
		</div><a
          id="id-1.9.16.8"
          class="indexterm"></a><div
          class="para">
			サーバではこれらのツールがとてもうまく動きますが、通常デスクトップユーザはより対話的なシステムを好みます。このため「グラフィカルデスクトップ環境」タスクは <span
            class="pkg pkg">gnome-packagekit</span> をインストールします (デスクトップ環境として GNOME を選択した場合)。<span
            class="pkg pkg">gnome-packagekit</span> パッケージは、更新が利用できるようになった時、デスクトップ環境の通知エリアにアイコンを表示します。さらに、表示されたアイコンをクリックすると <code
            class="command">gpk-update-viewer</code> が実行されます。これは更新を実行する簡易化されたインターフェースです。利用できる更新を閲覧したり、関連するパッケージと対応する <code
            class="filename">changelog</code> エントリの短い説明文を読んだり、個々の場合に応じてその更新を適用するか否かを選択したりできます。
		</div><div
          class="figure"><a
            xmlns=""
            id="id-1.9.16.10"></a><div
            class="figure-contents"><div
              class="mediaobject"><img
                src="images/gnome-packagekit.png"
                alt="gpk-update-viewer を使ったアップグレード" /></div></div><p
            class="title"><strong>図 6.3 <code
                class="command">gpk-update-viewer</code> を使ったアップグレード</strong></p></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.dist-upgrade.html"><strong>戻る</strong>6.6. 安定版から次のディストリビューションへのアップグレード</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.automatic-upgrades.html"><strong>次へ</strong>6.8. 自動アップグレード</a></li></ul></body></html>
