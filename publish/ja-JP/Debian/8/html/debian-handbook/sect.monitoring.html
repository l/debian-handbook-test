<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">12.4. 監視</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ja-JP-1.0-1" /><meta
        name="keywords"
        content="RAID, LVM, FAI, Preseed, 監視, 仮想化, Xen, LXC" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="advanced-administration.html"
        title="第 12 章 高度な管理" /><link
        rel="prev"
        href="sect.automated-installation.html"
        title="12.3. 自動インストール" /><link
        rel="next"
        href="workstation.html"
        title="第 13 章 ワークステーション" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ja-JP/stable/sect.monitoring.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.automated-installation.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="workstation.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.monitoring"></a>12.4. 監視</h2></div></div></div><div
          class="para">
			監視は一般的な用語で、さまざまな目的で行われるさまざまな活動を意味します。すなわち一方では、マシンの提供するリソースが使い切られ、更新が必要になることを予測することが可能です。さらに他方では、サービスが利用できなくなったり適切に動作していないことを可能な限り早く管理者に警告することにより、発生した問題の早急な修正を可能にすることを意味します。
		</div><div
          class="para">
			<span
            class="emphasis"><em>Munin</em></span> は最初の範囲をカバーします。すなわち <span
            class="emphasis"><em>Munin</em></span> はいくつかのパラメータの経時変化をグラフィカルに図示します (使用された RAM、専有されたディスク領域、プロセッサの負荷、ネットワークトラフィック、Apache/MySQL の負荷などを図示します)。<span
            class="emphasis"><em>Nagios</em></span> は 2 番目の範囲をカバーします。すなわち <span
            class="emphasis"><em>Nagios</em></span> はサービスの稼働状態と利用可能状態を定期的に確認し、適切な経路 (電子メール、テキストメッセージなど) を通じて警告を送信します。<span
            class="emphasis"><em>Munin</em></span> と <span
            class="emphasis"><em>Nagios</em></span> はモジュール式に設計されているので、特定のパラメータやサービスを監視する新しいプラグインを簡単に作成できます。
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVE</em></span> Zabbix、統合監視ツール</strong></p></div></div></div><a
            id="id-1.15.7.4.2"
            class="indexterm"></a><div
            class="para">
			Munin と Nagios はとてもよく使われていますが、監視分野における唯一の選択肢というわけではありませんし、両者が担当している範囲は監視タスクの半分 (片方がグラフ化、もう一方が警告) に留まっています。これに対して、Zabbix は監視タスクの両方を統合しています。さらに Zabbix は最もよく使われる側面を設定するためのウェブインターフェースを備えています。Zabbix は最近の数年間で急速に成長し続けており、今や Munin と Nagios の対抗馬と考えられています。監視サーバには <span
              class="pkg pkg">zabbix-server-pgsql</span> (または <span
              class="pkg pkg">zabbix-server-mysql</span>) をインストールし、ウェブインターフェースを使うには <span
              class="pkg pkg">zabbix-frontend-php</span> もインストールします。監視対象ホストには <span
              class="pkg pkg">zabbix-agent</span> をインストールして、監視サーバからのデータ要求に応答します。<div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.zabbix.com/">http://www.zabbix.com/</a></div>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVE</em></span> Icinga、Nagios のフォーク</strong></p></div></div></div><a
            id="id-1.15.7.5.2"
            class="indexterm"></a><div
            class="para">
			Nagios の開発モデル (開発は企業によって管理されています) に関する意見の食い違いが引き金となり、多数の開発者が Nagios をフォークし、新しい名前として Icinga を使っています。現時点で Icinga はまだ Nagios の設定およびプラグインと互換性を持っています。しかし、Icinga にはいくつかの機能が追加されています。<div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.icinga.org/">http://www.icinga.org/</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.munin"></a>12.4.1. Munin のセットアップ</h3></div></div></div><a
            id="id-1.15.7.6.2"
            class="indexterm"></a><div
            class="para">
				Munin の目的は多くのマシンを監視することです。そしてこのため、Munin は当然クライアント/サーバアーキテクチャを採用しています。グラフ化を担当している中央ホストがすべての監視されているホストからデータを収集し、データの履歴グラフを生成します。
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.7.6.4"></a>12.4.1.1. 監視対象ホストの設定</h4></div></div></div><div
              class="para">
					最初に <span
                class="pkg pkg">munin-node</span> パッケージをインストールします。<span
                class="pkg pkg">munin-node</span> パッケージによってインストールされるデーモンはポート 4949 番をリッスンし、すべての動作しているプラグインによって収集されたデータを送り返します。それぞれのプラグインは収集されたデータの説明および最新の計測値を返す簡単なプログラムです。プラグインは <code
                class="filename">/usr/share/munin/plugins/</code> に保存されますが、実際に使われるのは <code
                class="filename">/etc/munin/plugins/</code> 内からシンボリックリンクを張られたプラグインだけです。
				</div><div
              class="para">
					<span
                class="pkg pkg">munin-node</span> パッケージのインストールが完了したら、利用できるソフトウェアと現在のホストの設定に基づいて有効なプラグイン群が決定されます。しかしながら、有効プラグインの自動決定は各プラグインの提供する機能に依存します。通常、手作業で結果を確認して微調整することを推奨します。すべてのプラグインに対して包括的な文書が用意されているわけではありませんが、<a
                href="http://gallery.munin-monitoring.org">プラグインギャラリー</a>を閲覧すると面白いかもしれません。さらに、すべてのプラグインはスクリプトで、その多くは単純かつ詳細に説明されています。このため、各プラグインの機能を理解して無効化するべきプラグインを決定するには <code
                class="filename">/etc/munin/plugins/</code> を閲覧すると良いでしょう。同様に、<code
                class="filename">/usr/share/munin/plugins/</code> の中にある興味深いプラグインを有効化するには、<code
                class="command">ln -sf /usr/share/munin/plugins/<em
                  class="replaceable">plugin</em> /etc/munin/plugins/</code> を使ってシンボリックリンクを作成するだけです。プラグイン名がアンダースコア「_」で終わる場合、そのプラグインはパラメータが必要という点に注意してください。シンボリックリンクの名前を使って、このパラメータを指定します。従って、たとえば「if_」プラグインは必ず <code
                class="filename">if_eth0</code> シンボリックリンクを使って有効化しなければいけません。こうすることで、eth0 インターフェースのネットワークトラフィックを監視します。
				</div><div
              class="para">
					すべてのプラグインを正常に設定したら、収集されたデータへのアクセス制御に関するデーモン設定を更新します。これを行うには、<code
                class="filename">/etc/munin/munin-node.conf</code> ファイルの中で <code
                class="literal">allow</code> 指示文を使います。デフォルト設定は <code
                class="literal">allow ^127\.0\.0\.1$</code> で、ローカルホストへのアクセスのみを許可します。通常、管理者はグラフ化を担当しているホストの IP アドレスを含めた同様の行を追加します。その後、<code
                class="command">service munin-node restart</code> を使ってデーモンを再起動します。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> ローカルプラグインの作成</strong></p></div></div></div><div
                class="para">
					Munin にはプラグインの動作様式と新規プラグインの開発方法に関する詳細な文書が用意されています。<div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://munin-monitoring.org/wiki/plugins">http://munin-monitoring.org/wiki/plugins</a></div>
				</div><div
                class="para">
					プラグインを検査するには、プラグインが munin-node から実行されたのと同じ状況下で実行するのが最良の方法です。この状況を模倣するには root で <code
                  class="command">munin-run <em
                    class="replaceable">plugin</em></code> を実行します。このコマンドに与えられた 2 番目のパラメータ (<code
                  class="literal">config</code> など) はパラメータとしてプラグインに渡されます。
				</div><div
                class="para">
					プラグインに <code
                  class="literal">config</code> パラメータを付けて実行した場合、プラグイン自身を説明する一連のフィールドが返されます。
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo munin-run load config
</code></strong><code
                  class="computeroutput">graph_title Load average
graph_args --base 1000 -l 0
graph_vlabel load
graph_scale no
graph_category system
load.label load
graph_info The load average of the machine describes how many processes are in the run-queue (scheduled to run "immediately").
load.info 5 minute load average
</code></pre><div
                class="para">
					利用できるさまざまなフィールドは「Munin ガイド」の一部として提供されている「プラグインリファレンス」で説明されています。<div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://munin.readthedocs.org/en/latest/reference/plugin.html">http://munin.readthedocs.org/en/latest/reference/plugin.html</a></div>
				</div><div
                class="para">
					パラメータを付けずにプラグインを実行した場合、プラグインは最新の計測値を返却します。従って、たとえば <code
                  class="command">sudo munin-run load</code> を実行すると <code
                  class="literal">load.value 0.12</code> が返されます。
				</div><div
                class="para">
					最後に、プラグインに <code
                  class="literal">autoconf</code> パラメータを付けて実行した場合、プラグインは自分が対象のホストで有効化されているか否かに基づいて「yes」(終了ステータス 0) または「no」(終了ステータス 1) を返すべきです。
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.7.6.5"></a>12.4.1.2. グラフ化担当マシンの設定</h4></div></div></div><div
              class="para">
					「グラフ化担当マシン」はデータを集計し対応するグラフを生成するだけのコンピュータです。「グラフ化担当マシン」に必要なソフトウェアは <span
                class="pkg pkg">munin</span> パッケージに含まれます。標準的な設定は <code
                class="command">munin-cron</code> を (5 分ごとに) 実行します。このコマンドは <code
                class="filename">/etc/munin/munin.conf</code> にリストされているすべてのホスト (デフォルトではローカルホストのみがリストされています) からデータを収集し、時系列データを <code
                class="filename">/var/lib/munin/</code> にある RRD ファイル (<span
                class="emphasis"><em>Round Robin Database</em></span>、経時変化するデータを保存するために設計されたファイルフォーマット) に保存し、<code
                class="filename">/var/cache/munin/www/</code> に含まれるグラフを使って HTML ページを生成します。
				</div><div
              class="para">
					すべての監視対象のマシンは <code
                class="filename">/etc/munin/munin.conf</code> 設定ファイルにリストされていなければいけません。各マシンは完全なセクションの形でリストされています。セクションはマシンと同じ名前で、少なくとも対応する IP アドレスを指定する <code
                class="literal">address</code> エントリを持っていなければいけません。
				</div><pre
              class="programlisting">[ftp.falcot.com]
    address 192.168.0.12
    use_node_name yes</pre><div
              class="para">
					セクションをさらに複雑にして、複数のマシンからのデータをまとめて作成されるグラフを追加することも可能です。設定ファイルの中で提供されている見本がカスタマイズの良い足掛かりとなります。
				</div><div
              class="para">
					最後の段階は生成されたページを公開することです。そしてこれは、ウェブサイトから <code
                class="filename">/var/cache/munin/www/</code> の内容を利用できるようにするようウェブサーバを設定することを意味しています。通常このウェブサイトへのアクセスは認証メカニズムか IP に基づくアクセス制御を使って制限されています。アクセス制御の詳細は<a
                class="xref"
                href="sect.http-web-server.html">第 11.2 節「ウェブサーバ (HTTP)」</a>をご覧ください。
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.nagios"></a>12.4.2. Nagios のセットアップ</h3></div></div></div><a
            id="id-1.15.7.7.2"
            class="indexterm"></a><div
            class="para">
				Munin と異なり、Nagios の場合、必ずしも監視対象のホストに何かをインストールする必要はありません。そしてほとんどの場合、Nagios はネットワークサービスの可用性を確認するために使われます。たとえば Nagios を使うことで、ウェブサーバに接続して特定のウェブページがある時間内に取得できるかを確認することが可能です。
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.7.7.4"></a>12.4.2.1. インストール</h4></div></div></div><div
              class="para">
					Nagios をセットアップするには、最初に <span
                class="pkg pkg">nagios3</span>、<span
                class="pkg pkg">nagios-plugins</span>、<span
                class="pkg pkg">nagios3-doc</span> パッケージをインストールします。これらのパッケージをインストールするとウェブインターフェースが設定され、最初の <code
                class="literal">nagiosadmin</code> ユーザが作成されます (このユーザのパスワードが尋ねられます)。他のユーザを追加するには、Apache の <code
                class="command">htpasswd</code> コマンドを使ってユーザを <code
                class="filename">/etc/nagios3/htpasswd.users</code> ファイルに追加するだけです。Debconf 質問がインストール中に表示されない場合、<code
                class="command">dpkg-reconfigure nagios3-cgi</code> を使って <code
                class="literal">nagiosadmin</code> のパスワードを定義することも可能です。
				</div><div
              class="para">
					ブラウザで <code
                class="literal">http://<em
                  class="replaceable">server</em>/nagios3/</code> にアクセスすると、ウェブインターフェースが表示されます。特に、Nagios は自分が実行されているマシンのいくつかのパラメータを既に監視している点に注意してください。しかしながら、たとえばホストに対するコメントを追加するなどの対話型機能は動作しません。Nagios のデフォルト設定はこれらの機能を無効化し、セキュリティの理由からとても厳しい制限を設けています。
				</div><div
              class="para">
					<code
                class="filename">/usr/share/doc/nagios3/README.Debian</code> で説明されている通り、いくつかの機能を有効化するには <code
                class="filename">/etc/nagios3/nagios.cfg</code> を編集し、<code
                class="literal">check_external_commands</code> パラメータを「1」に設定します。また、以下のようにして、Nagios が使うディレクトリに書き込みパーミッションを設定する必要があります。
				</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>service nagios3 stop</code></strong>
<code
                class="computeroutput">[...]
# </code><strong
                class="userinput"><code>dpkg-statoverride --update --add nagios www-data 2710 /var/lib/nagios3/rw
</code></strong><code
                class="computeroutput"># </code><strong
                class="userinput"><code>dpkg-statoverride --update --add nagios nagios 751 /var/lib/nagios3
</code></strong><code
                class="computeroutput"># </code><strong
                class="userinput"><code>service nagios3 start</code></strong>
<code
                class="computeroutput">[...]</code></pre></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.7.7.5"></a>12.4.2.2. 設定</h4></div></div></div><div
              class="para">
					Nagios のウェブインターフェースはかなり良くできていますが、設定もできませんし、監視対象のホストやサービスの追加もできません。全体の設定は中央設定ファイル <code
                class="filename">/etc/nagios3/nagios.cfg</code> から参照されているオブジェクト設定ファイルを使って管理されます。
				</div><div
              class="para">
					Nagios の概念を理解していない場合、オブジェクト設定ファイルの内容に立ち入るべきではありません。オブジェクト設定ファイルから設定するオブジェクトには以下の種類があります。
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>host</em></span> は監視対象のマシンです。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>hostgroup</em></span> はグループ化して表示されたり、同じ設定要素を持つホスト群です。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>service</em></span> はホストやホストグループへの検査項目を定義します。これは多くの場合、あるネットワークサービスに対する検査を定義するものですが、いくつかのパラメータ (たとえば空きディスク領域やプロセッサ負荷) が条件を満たす範囲内にあるかに対する検査を定義することも可能です。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>servicegroup</em></span> はグループ化して表示されるサービス群です。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>contact</em></span> は警告を受け取る人です。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>contactgroup</em></span> は警告を受け取る人のグループです。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>timeperiod</em></span> は時間範囲で、この範囲内にいくつかのサービスを確認します。
						</div></li><li
                  class="listitem"><div
                    class="para">
							<span
                      class="emphasis"><em>command</em></span> はサービスを確認するために実行するコマンドラインです。
						</div></li></ul></div><div
              class="para">
					オブジェクトの種類に応じて、各オブジェクトにはカスタマイズが可能な複数の属性が含まれます。完全なリストはここに挙げるには長すぎますが、最重要の属性はオブジェクト間の関係性を示す属性です。
				</div><div
              class="para">
					<span
                class="emphasis"><em>service</em></span> は <span
                class="emphasis"><em>command</em></span> を使い、<span
                class="emphasis"><em>timeperiod</em></span> で定めた時間内に <span
                class="emphasis"><em>host</em></span> (または <span
                class="emphasis"><em>hostgroup</em></span>) で稼働する特定の機能を確認します。問題が起きた場合、Nagios はそのサービスに関連付けられた <span
                class="emphasis"><em>contactgroup</em></span> のメンバーに警告を送信します。各メンバーは対応する <span
                class="emphasis"><em>contact</em></span> オブジェクトに書かれたチャンネルを介して警告を受け取ります。
				</div><div
              class="para">
					継承システムにより、情報を複製せずに多くのオブジェクト間の属性群を簡単に共有することが可能です。加えて、初期設定には数多くの標準的なオブジェクトが定義されています。このため多くの場合、初期設定の標準的なオブジェクトに加えて新たな <span
                class="emphasis"><em>host</em></span>、<span
                class="emphasis"><em>service</em></span>、<span
                class="emphasis"><em>contact</em></span> を定義するだけで簡単に設定を完了させることが可能です。<code
                class="filename">/etc/nagios3/conf.d/</code> に含まれるファイルはオブジェクトの動作に関する良い情報源です。
				</div><div
              class="para">
					Falcot Corp の管理者は以下の設定を使います。
				</div><div
              class="example"><a
                xmlns=""
                id="id-1.15.7.7.5.9"></a><p
                class="title"><strong>例 12.3 <code
                    class="filename">/etc/nagios3/conf.d/falcot.cfg</code> ファイル</strong></p><div
                class="example-contents"><pre
                  class="programlisting">define contact{
    name                            generic-contact
    service_notification_period     24x7
    host_notification_period        24x7
    service_notification_options    w,u,c,r
    host_notification_options       d,u,r
    service_notification_commands   notify-service-by-email
    host_notification_commands      notify-host-by-email
    register                        0 ; Template only
}
define contact{
    use             generic-contact
    contact_name    rhertzog
    alias           Raphael Hertzog
    email           hertzog@debian.org
}
define contact{
    use             generic-contact
    contact_name    rmas
    alias           Roland Mas
    email           lolando@debian.org
}

define contactgroup{
    contactgroup_name     falcot-admins
    alias                 Falcot Administrators
    members               rhertzog,rmas
}

define host{
    use                   generic-host ; Name of host template to use
    host_name             www-host
    alias                 www.falcot.com
    address               192.168.0.5
    contact_groups        falcot-admins
    hostgroups            debian-servers,ssh-servers
}
define host{
    use                   generic-host ; Name of host template to use
    host_name             ftp-host
    alias                 ftp.falcot.com
    address               192.168.0.6
    contact_groups        falcot-admins
    hostgroups            debian-servers,ssh-servers
}

# 'check_ftp' コマンドにカスタムパラメータを渡します
define command{
    command_name          check_ftp2
    command_line          /usr/lib/nagios/plugins/check_ftp -H $HOSTADDRESS$ -w 20 -c 30 -t 35
}

# Falcot の運用する一般サービスを定義します
define service{
    name                  falcot-service
    use                   generic-service
    contact_groups        falcot-admins
    register              0
}

# www-host 上の監視対象サービスを定義します
define service{
    use                   falcot-service
    host_name             www-host
    service_description   HTTP
    check_command         check_http
}
define service{
    use                   falcot-service
    host_name             www-host
    service_description   HTTPS
    check_command         check_https
}
define service{
    use                   falcot-service
    host_name             www-host
    service_description   SMTP
    check_command         check_smtp
}

# ftp-host 上の監視対象サービスを定義します
define service{
    use                   falcot-service
    host_name             ftp-host
    service_description   FTP
    check_command         check_ftp2
}</pre></div></div><div
              class="para">
					この設定ファイルでは、2 種類の監視対象ホストが定義されています。1 番目のホストはウェブサーバです。Nagios はこのホストに対してウェブサーバが HTTP (80) とセキュア HTTP (443) ポートで稼働していること、SMTP サーバがポート 25 番で稼働していることを確認します。2 番目のホストは FTP サーバです。Nagios はこのホストに対して応答が 20 秒以内に返されることが保証されることを確認します。Nagios は FTP サーバからの応答にかかる時間が 20 秒より長い場合に<span
                class="emphasis"><em>警告</em></span>を、30 秒より長い場合に危機的な警告を発します。Nagios のウェブインターフェースは SSH サービスが監視されていることを示しています。すなわちこれは <code
                class="literal">ssh-servers</code> ホストグループに所属するホストの情報です。標準的なサービスの稼動状態確認は <code
                class="filename">/etc/nagios3/conf.d/services_nagios2.cfg</code> で定義されています。
				</div><div
              class="para">
					継承の使い方に注意してください。具体的に言えば、オブジェクトを継承するには「use <em
                class="replaceable">parent-name</em>」の形で親オブジェクトの名前を指定します。親オブジェクトは識別可能でなければいけません。つまり、親オブジェクトに「name <em
                class="replaceable">identifier</em>」属性を与える必要があります。親オブジェクトが真のオブジェクトでなく、属性継承の機能を担うだけの場合、このオブジェクトに「register 0」属性を与えます。こうすることで Nagios はこのオブジェクトを考慮しなくなり、真のオブジェクトならば必須とされるいくつかのパラメータが欠けていてもその問題を無視するようになります。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DOCUMENTATION</em></span> オブジェクト属性のリスト</strong></p></div></div></div><div
                class="para">
					Nagios を設定するさまざまな方法に関してより深い理解を得るには、<span
                  class="pkg pkg">nagios3-doc</span> パッケージに含まれる文書を読むと良いでしょう。この文書はウェブインターフェースの左上にある「Documentation」リンクから直接的に利用できます。この文書には、すべてのオブジェクト型のリストと各オブジェクトの取りうるすべての属性が説明されています。さらに、新しいプラグインの作り方も説明されています。
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GOING FURTHER</em></span> NRPE を使ったリモートマシンの状態検査</strong></p></div></div></div><div
                class="para">
					多くの Nagios プラグインでは、あるホストに固有のいくつかのパラメータを確認することが可能です。多くのマシンに対するパラメータの確認が必要にも関わらず Nagios サーバでパラメータを収集する場合、NRPE (<span
                  class="emphasis"><em>Nagios Remote Plugin Executor</em></span>) プラグインを配備する必要があります。Nagios サーバには <span
                  class="pkg pkg">nagios-nrpe-plugin</span> パッケージをインストールし、ローカルでテストを実行するホストに <span
                  class="pkg pkg">nagios-nrpe-server</span> をインストールする必要があります。<span
                  class="pkg pkg">nagios-nrpe-server</span> は <code
                  class="filename">/etc/nagios/nrpe.cfg</code> から設定を取得します。このファイルには、リモートからの命令に従って実行されるテストとリモートからのテスト開始命令を受け入れるマシンの IP アドレスをリストするべきです。Nagios サーバ側でリモートテストを有効化するには、<span
                  class="emphasis"><em>check_nrpe</em></span> コマンドを使って一致するサービスを追加するだけで済みます。
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.automated-installation.html"><strong>戻る</strong>12.3. 自動インストール</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="workstation.html"><strong>次へ</strong>第 13 章 ワークステーション</a></li></ul></body></html>
