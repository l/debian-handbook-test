<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">3.2. چگونگی مهاجرت</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fa-IR-1.0-1" /><meta
        name="keywords"
        content="پیکربندی موجود, استفاده مجدد, مهاجرت" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="existing-setup.html"
        title="فصل 3. بررسی ابزار نصب‌شده موجود و مهاجرت" /><link
        rel="prev"
        href="existing-setup.html"
        title="فصل 3. بررسی ابزار نصب‌شده موجود و مهاجرت" /><link
        rel="next"
        href="installation.html"
        title="فصل 4. Installation" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.how-to-migrate.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.how-to-migrate"></a>3.2. چگونگی مهاجرت</h2></div></div></div><a
          id="id-1.6.5.2"
          class="indexterm"></a><div
          class="para">
			به منظور تضمین ادامه این خدمات، مهاجرت هر رایانه باید با برنامه‌ریزی و زمان‌بندی طبق طرح اصلی باشد. این اصول اولیه در مورد هر سیستم عاملی صدق می‌کند.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.4"></a>3.2.1. نظرسنجی و شناسایی خدمات</h3></div></div></div><div
            class="para">
				این گام با اینکه ساده به نظر می‌رسد، اما ضروری است. یک مدیر سیستم جدی نقش تمام سرورهای تحت کنترلش را می‌داند، اما این نقش‌ها می‌توانند تغییر یابند و گاهی اوقات کاربران باتجربه ممکن است خدمات “عجیب و غریب” را اضافه کنند. اطلاع از وجود این خدمات به شما اجازه تصمیم‌گیری می‌دهد تا اینکه به طور اتفاقی همه را پاک کنید.
			</div><div
            class="para">
				به همین منظور، بهتر است که کاربران خود را قبل از مهاجرت آگاه سازید. برای مشارکت آن‌ها در پروژه، نصب اکثر برنامه‌های آزاد روی میزکارشان قبل از مهاجرت کار خوبی بنظر می‌رسد، برنامه‌هایی که بعداً با آن‌ها سر و کار خواهند داشت پس از مهاجرت به دبیان؛ بهترین نمونه‌ها عبارتند از لیبره آفیس و مجموعه موزیلا.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.6.5.4.4"></a>3.2.1.1. شبکه و فرآیندها</h4></div></div></div><a
              id="id-1.6.5.4.4.2"
              class="indexterm"></a><div
              class="para">
					ابزار <code
                class="command">nmap</code> (در بسته‌ای با همین نام) به سرعت سرویس‌ها اینترنتی موجود در یک شبکه توسط ماشین‌های مختلف را شناسایی می‌کند بدون آنکه نیاز باشد به این ماشین‌ها وارد شویم. تنها کافی است دستور زیر را روی ماشین دیگری از همان شبکه اجرا کنید:
				</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>nmap mirwiz</code></strong>
<code
                class="computeroutput">Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-24 11:34 CET
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.0037s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>جایگزین</em></span> از <code
                          class="command">netstat</code> برای جستجوی فهرستی از سرویس‌های موجود استفاده کنید</strong></p></div></div></div><div
                class="para">
					در یک ماشین لینوکس، دستور <code
                  class="command">netstat -tupan</code> فهرستی از اتصال‌های فعال یا غیرفعال TCP را نمایش می‌دهد، به همراه پورت‌های UDP که روی آن‌ها برنامه‌ها در انتظار دریافت داده هستند. این ابزار، به شناسایی سرویس‌ها ارائه شده در شبکه کمک بسیاری می‌کند.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>مطالعه بیشتر</em></span> IPv6</strong></p></div></div></div><div
                class="para">
					برخی دستورات شبکه ممکن است تنها با IPv4 (گزینه پیش‌فرض) یا IPv6 کار کنند که از میان آن‌ها می‌توان به دستورات <code
                  class="command">nmap</code> و <code
                  class="command">netstat</code> اشاره کرد، اما دستورات دیگر نیز مانند <code
                  class="command">route</code> یا <code
                  class="command">ip</code> این قابلیت را دارند. قرارداد اولیه این است که این قابلیت با استفاده از گزینه خط‌فرمان <em
                  class="parameter"><code>-6</code></em> فعال می‌شود.
				</div></div><div
              class="para">
					اگر سرور یک ماشین یونیکس باشد که حساب‌کاربری شل در اختیار کاربرانش می‌گذارد، شناسایی اینکه فرآیندها در پیش‌زمینه در غیاب مالکشان اجرا می‌شوند، امر جالبی است. دستور <code
                class="command">ps auxw</code> فهرستی از تمام فرآیندها به همراه هویت کاربرشان ارائه می‌دهد. با بررسی اطلاعات خروجی با دستور <code
                class="command">who</code>، که فهرستی از کاربران وارد شده را نمایش می‌دهد، شناسایی سرورها و برنامه‌هایی که بدون نام در پیش‌زمینه اجرا شده‌اند، ممکن می‌شود. نگاهی بر <code
                class="filename">crontabs</code> (جدولی که رویدادهای خودکار را در بازه‌ای از زمان برای کاربر اجرا می‌کند) معمولاً اطلاعات جالبی در شیوه استفاده از سرور در اختیار می‌گذارد (توضیح کامل <code
                class="command">cron</code> در <a
                class="xref"
                href="sect.task-scheduling-cron-atd.html">
      قسمت 9.7, “Scheduling Tasks with <code
                  class="command">cron</code> and <code
                  class="command">atd</code>”
    </a> موجود است).
				</div><div
              class="para">
					در هر صورت، پشتیبان‌گیری از سرور امری ضروری است: این عملیات امکان بازیابی اطلاعات سرور پس از یک گزارش بروز مشکل در عملیات مهاجرت را فراهم می‌سازد.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.5"></a>3.2.2. پشتیبان‌گیری از فایل‌های پیکربندی</h3></div></div></div><div
            class="para">
				منطقی است که از فایل‌های پیکربندی سرویس موجود که قصد جایگزین کردن آن با سرویس جدیدی را داریم، پشتیبان تهیه کنیم. حداقل می‌توان یک کپی از تمام فایل‌های پیکربندی برای هر سرویس را تهیه کرد.
			</div><div
            class="para">
				برای ماشین‌های یونیکس، فایل‌های پیکربندی معمولاً در مسیر <code
              class="filename">/etc/</code> قرار دارند، اما ممکن است در یک زیرمجموعه از <code
              class="filename">/usr/local/</code> نیز قرار بگیرند. این مورد از برنامه‌هایی که مستقیماً از سورس کامپایل می‌شوند صدق می‌کند، جدای از بسته‌های موجود. در بعضی موارد، ممکن است این فایل‌ها را در <code
              class="filename">/opt/</code> نیز پیدا کنید.
			</div><div
            class="para">
				برای سرویس‌هایی که با مدیریت داده سروکار دارند (مانند پایگاه‌داده‌ها)، به شدت توصیه می‌شود که تمام داده موجود در یک قالب استاندارد که توسط نرم‌افزار جدید خوانده خواهد شد، خروجی گرفته شود. چنین قالبی معمولاً به صورت متنی و مستندسازی شده است؛ برای نمونه، ممکن است یک فایل SQL از پایگاه‌داده یا یک فایل LDIF از سرور LDAP باشد.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-2.png"
                  alt="پشتیبان‌گیری از پایگاه‌داده" /></div></div><p
              class="title"><strong>
      شكل 3.2. پشتیبان‌گیری از پایگاه‌داده</strong></p></div><div
            class="para">
				هر نرم‌افزار سرور متفاوت است و عملاً ممکن نیست که بتوان به تمام جزیئات این نرم‌افزارها اشاره کرد. به مستندات نرم‌افزار موجود و جدید جهت درک درستی از قالب‌های استاندارد ورودی و خروجی مراجعه کنید و آن‌هایی که نیاز به تغییرات دستی دارند. مطالعه این کتاب پیکربندی برنامه‌های اصلی سرور در لینوکس را برای شما روشن می‌سازد.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.6"></a>3.2.3. سازوکار در اختیار گرفتن یک سرور دبیان موجود</h3></div></div></div><a
            id="id-1.6.5.6.2"
            class="indexterm"></a><a
            id="id-1.6.5.6.3"
            class="indexterm"></a><a
            id="id-1.6.5.6.4"
            class="indexterm"></a><div
            class="para">
				برای نگهداری موثر آن، کسی ممکن است ماشین موجود که دبیان روی آن نصب شده است را تحلیل کند.
			</div><div
            class="para">
				اولین فایلی که باید بررسی شود <code
              class="filename">/etc/debian_version</code> است، که معمولاً نسخه دبیان نصب شده روی سیستم را نشان می‌دهد (که جزو بسته <span
              class="emphasis"><em>base-files</em></span> است). اگر نشانه‌هایی از <code
              class="literal"><em
                class="replaceable">codename</em>/sid</code> بود بدین معنی است که سیستم با استفاده از بسته‌های موجود در توزیع در حال توسعه (خواه تحت‌آزمون یا ناپایدار) بروزرسانی شده است.
			</div><div
            class="para">
				برنامه <code
              class="command">apt-show-versions</code> (از بسته دبیان با همین نام) فهرست بسته‌های نصب شده را بررسی کرده و نسخه‌های موجود را شناسایی می‌کند. برای این منظور، از <code
              class="command">aptitude</code> نیز می‌توان استفاده کرد، البته به شکل دیگری.
			</div><div
            class="para">
				نگاهی بر فایل <code
              class="filename">/etc/apt/sources.list</code> (و دایرکتوری <code
              class="filename">/etc/apt/sources.list.d/</code>) نشان می‌دهد که بسته‌های نصب شده از چه منبعی می‌آیند. اگر منابع نامشخص فراوانی در این فایل وجود داشت، مدیر سیستم می‌تواند سیستم را از دوباره نصب کرده تا با اینکار حداکثر سازگاری نرم‌افزاری با دبیان را ممکن سازد.
			</div><div
            class="para">
				فایل <code
              class="filename">/sources.list</code> یک نشانگر خوب است: اکثر مدیر سیستم‌ها، به صورت توضیحات متنی، فهرستی از منابع APT که در گذشته استفاده می‌کردند را در آن ذخیره می‌کنند. اما نباید فراموش کنید که منابع گذشته ممکن است حذف شده باشند، و بسته‌های دلخواهی که به صورت دستی از اینترنت دریافت شده‌اند، ممکن است روی سیستم نصب باشند (با استفاده از دستور <code
              class="command">dpkg</code>). در این مورد، ماشین از هدف اصلی در “استاندارد” دبیان دور شده است. اینجاست که باید به هر نشانه از وجود بسته‌های خارج از سیستم دبیان توجه کنید (وجود فایل‌های <code
              class="filename">deb</code> در مسیرهای نامتعارف، شماره نسخه‌ بسته با یک پسوند اضافی نشانگر وجود بسته از جارج از چارچوب دبیان می‌دهد مانند <code
              class="literal">ubuntu</code> یا <code
              class="literal">lmde</code>).
			</div><div
            class="para">
				در همین راستا، بررسی محتوای دایرکتوری <code
              class="filename">/usr/local/</code> نیز جالب بنظر می‌رسد، که هدفش نگهداری از برنامه‌هایی است که به صورت دستی کامپایل و نصب شده‌اند. فهرست نرم‌افزارهای نصب‌شده در این روش آموزنده است، چراکه نشان می‌دهد چرا از بسته‌های موجود در سیستم دبیان استفاده نشده است، اگر چنین بسته‌ای وجود داشته باشد.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>نگاه سریع</em></span> <span
                        class="pkg pkg">cruft</span></strong></p></div></div></div><div
              class="para">
				بسته <span
                class="pkg pkg">cruft</span> فهرستی از فایل‌های موجود که در اختیار هیچ بسته‌ای نیستند را نمایش می‌دهد. شامل فیلترهایی است (کم و بیش موثر و بروز) که فایل‌های اصلی سیستم را گزارش نکند (فایل‌هایی که توسط بسته‌های دبیان ایجاد می‌گردند، یا فایل‌های پیکربندی که توسط <code
                class="command">dpkg</code> مدیریت نمی‌شوند و از این قبیل).
			</div><div
              class="para">
				مواظب باشید که هر فایل گزارش شده توسط <code
                class="command">cruft</code> را ندانسته پاک نکنید!
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.7"></a>3.2.4. نصب دبیان</h3></div></div></div><div
            class="para">
				زمانی که تمام اطلاعات مورد نیاز درباره سرور کنونی بدست آمد، می‌توانیم آن را خاموش کرده و فرآیند نصب دبیان را أغاز نماییم.
			</div><a
            id="id-1.6.5.7.3"
            class="indexterm"></a><div
            class="para">
				برای انتخاب نسخه مناسب، باید از معماری رایانه خبر داشته باشیم. اگر یک رایانه رومیزی استاندارد است، به احتمال زیاد از amd64 (یا i386 برای سیستم‌های قدیمی‌تر) استفاده می‌کند. در سایر موارد، احتمالات موجود را می‌توان با استفاده از سیستم قبلی بدست آورد.
			</div><div
            class="para">
				... کامل نیست ولی ممکن است بدرد بخورد. در هر صورت، مستندات رسمی موجود با رایانه، قابل اطمینان‌ترین منبع برای کسب این اطلاعات است.
			</div><div
            class="table"><a
              xmlns=""
              id="tab-corresp"></a><p
              class="title"><strong>
      جدول 3.1. سازگاری سیستم عامل با معماری</strong></p><div
              class="table-contents"><table
                xmlns:d="http://docbook.org/ns/docbook"
                class="lt-4-cols gt-7-rows"
                summary="سازگاری سیستم عامل با معماری"><colgroup><col /><col /></colgroup><thead><tr><th>سیستم عامل</th><th>معماری(ها)</th></tr></thead><tbody><tr><td>DEC Unix (OSF/1)</td><td>alpha, mipsel</td></tr><tr><td>HP Unix</td><td>ia64, hppa</td></tr><tr><td>IBM AIX</td><td>powerpc</td></tr><tr><td>Irix</td><td>mips</td></tr><tr><td>OS X</td><td>amd64, powerpc, i386</td></tr><tr><td>z/OS, MVS</td><td>s390x, s390</td></tr><tr><td>Solaris, SunOS</td><td>sparc, i386, m68k</td></tr><tr><td>Ultrix</td><td>mips</td></tr><tr><td>VMS</td><td>alpha</td></tr><tr><td>Windows 95/98/ME</td><td>i386</td></tr><tr><td>Windows NT/2000</td><td>i386, alpha, ia64, mipsel</td></tr><tr><td>Windows XP / Windows Server 2008</td><td>i386, amd64, ia64</td></tr><tr><td>Windows Vista / Windows 7 / Windows 8</td><td>i386, amd64</td></tr></tbody></table></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>سحت‌افزار</em></span> رایانه ۶۴ بیت در مقابل ۳۲ بیت</strong></p></div></div></div><a
              id="id-1.6.5.7.7.2"
              class="indexterm"></a><a
              id="id-1.6.5.7.7.3"
              class="indexterm"></a><div
              class="para">
				اکثر رایانه‌های جدید دارای پردازنده‌های ۶۴ بیتی Intel یا AMD هستند که با پردازنده‌های قدیمی‌تر ۳۲ بیت سازگاری دارند؛ بنابراین نرم‌افزاری که برای “i386” کامپایل می‌شود روی آن‌ها قابل اجرا است. از طرف دیگر، این حالت سازگاری، به تمام قابلیت‌های موجود در این پردازنده‌های جدید دسترسی ندارد. این همان دلیلی است که دبیان معماری “amd64” را فراهم کرده است، که برای پردازنده‌های اخیر AMD و پردازنده‌های “em64t” از Intel کار می‌کند (که شامل اکثر خانواده Core می‌شود)، که شباهت بسیاری به AMD64 دارند.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.8"></a>3.2.5. نصب و پیکربندی سرویس‌های انتخاب شده</h3></div></div></div><div
            class="para">
				زمانی که دبیان نصب می‌شود، باید تک به تک تمام سرویس‌هایی که این رایانه از آن‌ها میزبانی می‌کند را نصب و پیکربندی کنیم. پیکربندی جدید باید بر اساس نیازهای موجود در پیکربندی سابق صورت گیرد تا فرآیند مهاجرت آسان‌تر دنبال شود. تمام اطلاعاتی که در گام‌های قبل جمع‌آوری گردیده‌اند برای ببا موفقیت اجرا کردن این قسمت، کاربردی خواهند بود.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.8.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-4.png"
                  alt="نصب سرویس‌های انتخاب شده" /></div></div><p
              class="title"><strong>
      شكل 3.3. نصب سرویس‌های انتخاب شده</strong></p></div><div
            class="para">
				قبل از ورود به این تمرین، به شدت توصیه می‌شود که باقی کتاب را بخوانید. پس از مطالعه آن است که می‌توانید به درک درستی از چگونگی پیکربندی سرویس‌های مورد نیاز دست یابید.
			</div><div
            class="para">
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>قبلی</strong>
      فصل 3. بررسی ابزار نصب‌شده موجود و مهاجرت</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>بعدی</strong>
      فصل 4. Installation</a></li></ul></body></html>
