<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.5. syslog رویدادهای سیستمی</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="راه‌اندازی سیستم, اسکریپت‌های init, SSH, Telnet, حقوق, مجوزها, نظارت, Inetd, Cron, پشتیبان‌گیری, Hotplug, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="unix-services.html"
        title="فصل 9. سرویس‌های یونیکس" /><link
        rel="prev"
        href="sect.administration-interfaces.html"
        title="9.4. رابط‌های مدیریتی" /><link
        rel="next"
        href="sect.inetd.html"
        title="9.6. ابر-سرور inetd" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.syslog.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.syslog"></a>9.5. <code
                  class="command">syslog</code> رویدادهای سیستمی</h2></div></div></div><a
          id="id-1.12.8.2"
          class="indexterm"></a><a
          id="id-1.12.8.3"
          class="indexterm"></a><a
          id="id-1.12.8.4"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-principe"></a>9.5.1. اصل و مکانیزم</h3></div></div></div><div
            class="para">
				فرآیند پس‌زمینه <code
              class="command">rsyslogd</code> مسئول دریافت پیام‌های ارسالی از کرنل و برنامه‌های مختلف است تا آن‌ها را به فایل‌های گزارش مخابره کند (که معمولا در دایرکتوری <code
              class="filename">/var/log/</code> ذخیره می‌شوند). این دستور از فایل پیکربندی <code
              class="filename">/etc/rsyslog.conf</code> تبعیت می‌کند.
			</div><div
            class="para">
				هر پیام گزارش متناسب با یک زیرسیستم از برنامه است (که در مستندات با نام “facility” شناخته می‌شود):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">auth</code> و <code
                    class="literal">authpriv</code>: برای احراز هویت؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">cron</code>: که از سرویس‌های مدیریت وظیفه مانند <code
                    class="command">cron</code> و <code
                    class="command">atd</code> می‌آید؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">daemon</code>: روی یک فرآیند پس‌زمینه بدون هیچ طبقه‌بندی خاصی تاثیر می‌گذارد (DNS، NTP و از این قبیل)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">ftp</code>: مرتبط با سرور FTP؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">kern</code>: پیامی که از کرنل می‌آید؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">lpr</code>: از زیرسیستم چاپ نشات می‌گیرد؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">mail</code>: از زیرسیستم ایمیل نشات می‌گیرد؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">news</code>: پیام زیرسیستم Usenet (به خصوص از سمت یک سرور NTP - Network News Transfer Protocol - که گروه‌های خبری را مدیریت می‌کند)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">syslog</code>: پیام‌هایی که از خود سرور <code
                    class="command">syslogd</code> می‌آیند؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">user</code>: پیام‌های کاربر (عمومی)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uucp</code>:پیام‌های ارسالی از سرور UUCP (Unix to Unix Copy Program، یک پروتکل قدیمی برای انتقال پیام‌های ایمیل)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">local0</code> تا <code
                    class="literal">local7</code>: رزرو شده برای استفاده محلی؛
					</div></li></ul></div><div
            class="para">
				هر پیام همچنین با یک سطح اولویت نیز همراه است. اینجا فهرستی از آن‌ها به صورت کاهش درجه اهمیت قرار دارد:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">emerg</code>: “کمک!” یک موقعیت اضطراری وجود دارد، سیستم به احتمال زیاد غیرقابل استفاده خواهد شد.
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">alert</code>: عجله کن، هر تاخیری ممکن است خطرناک باشد، اقدام باید در اولین فرصت صورت گیرد؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">crit</code>: شرایط بحرانی است؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">err</code>: خطا؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">warn</code>: هشدار (خطای احتمالی)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">notice</code>: شرایط عادی است، اما پیام حائز اهمیت است؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">info</code>: پیام آگاهی‌رسان؛
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">debug</code>: پیام عیب‌زدایی؛
					</div></li></ul></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-config"></a>9.5.2. فایل پیکربندی</h3></div></div></div><div
            class="para">
				شیوه دستوری فایل <code
              class="filename">/etc/rsyslog.conf</code> در صفحه راهنما <span
              class="citerefentry"><span
                class="refentrytitle">rsyslog.conf</span>(5)</span> آمده است، اما همچنین مستندات HTML آن در بسته <span
              class="pkg pkg">rsyslog-doc</span> نیز قرار دارد (<code
              class="filename">/usr/share/doc/rsyslog-doc/html/index.html</code>). اصل کبی نوشتن جفت‌های “selector” و “action” است. selector تمام پیام‌های مرتبط را انتخاب می‌کند و action می‌گوید چطور با آن‌ها برخورد شود.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-selector-syntax"></a>9.5.2.1. شیوه دستوری انتخابگر</h4></div></div></div><div
              class="para">
					انتخابگر یک فهرست دوتایی از <code
                class="literal"><em
                  class="replaceable">subsystem</em>.<em
                  class="replaceable">priority</em></code> است که با ; از هم جدا شده‌اند (نمونه: <code
                class="literal">auth.notice;mail.info</code>). یک * نشان‌دهنده کل زیرسیستم‌ها یا اولویت‌ها می‌باشد (نمونه: <code
                class="literal">*.alert</code> یا <code
                class="literal">mail.*</code>). چندین زیرسیستم با استفاده از , می‌توانند گروه‌بندی شوند (نمونه: <code
                class="literal">auth,mail.info</code>). اولویت مشخص شده شامل تمام پیام‌های با آن اولویت یا بالاتر می‌باشد؛ بنابراین <code
                class="literal">auth.alert</code> نشان‌دهنده زیرسیستم <code
                class="literal">auth</code> با اولویت <code
                class="literal">alert</code> یا <code
                class="literal">emerg</code> است. اگر با یک علامت ! پیشوند شود، نشانگر خلاف آن عمل است، به عبارت دیگر اولویت‌های پایین‌تر؛ <code
                class="literal">auth.!notice</code>، بنابراین نشان‌دهنده پیام‌های زیرسیستم <code
                class="literal">auth</code> با اولویت <code
                class="literal">info</code> یا <code
                class="literal">debug</code> است. اگر با = پیشوند شود، تنها همان اولویت مشخص شده را شامل می‌گردد (<code
                class="literal">auth.=notice</code> تنها شامل پیام‌های زیرسیستم <code
                class="literal">auth</code> با اولویت <code
                class="literal">notice</code> می‌باشد).
				</div><div
              class="para">
					هر عنصر موجود در فهرست selector عنصر قبلی را خنثی می‌کند. بنابراین امکان جداسازی یا محدودساختن برخی عناصر وجود دارد. برای نمونه، <code
                class="literal">kern.info;kern.!err</code> یعنی پیام‌های ارسالی کرنل با اولویت بین <code
                class="literal">info</code> و <code
                class="literal">warn</code>. اولویت <code
                class="literal">none</code> نشان‌دهنده مجموعه خالی است (بدون اولویت) و ممکن است برای خارج‌کردن یک زیرسیستم از مجموعه پیام‌ها بکار رود. پس، <code
                class="literal">*.crit;kern.none</code> یعنی تمام پیام‌های با اولویت برابر یا بزرگتر از <code
                class="literal">crit</code> که از کرنل نمی‌آیند.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-action-syntax"></a>9.5.2.2. شیوه دستوری اقدامات</h4></div></div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>بازگشت به مقدمات</em></span> لوله نامگذاری شده، یک حالت پایدار</strong></p></div></div></div><a
                id="id-1.12.8.6.4.2.2"
                class="indexterm"></a><a
                id="id-1.12.8.6.4.2.3"
                class="indexterm"></a><div
                class="para">
					یک لوله نامگذاری شده نوع مشخصی از فایل است که مانند یک لوله سنتی کار می‌کند (عملگری که با استفاده از نماد “|” ایجاد می‌کنید) اما از طریق یک فایل. این مکانیزم مزیت مرتبط کردن دو فرآیند نامربوط را دارا است. هر چیزی که به یک لوله نامگذاری شده ارسال شود فرآیند نوشتن را متوقف می‌کند تا زمانی که یک فرآیند دیگر تلاش برای خواندن داده نوشته‌شده انجام دهد. این فرآیند دوم با خواندن داده توسط فرآیند اول که آن را نوشته است موجب ادامه عملیات اجرایی می‌گردد.
				</div><div
                class="para">
					چنین فایلی با استفاده از دستور <code
                  class="command">mkfifo</code> ایجاد می‌گردد.
				</div></div><div
              class="para">
					اقدامات ممکن عبارتند از:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							افزودن پیام به یک فایل (نمونه: <code
                      class="filename">/var/log/messages</code>)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							ارسال پیام به یک سرور راه‌دور <code
                      class="command">syslog</code> (نمونه؛ <code
                      class="literal">@log.falcot.com</code>)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							ارسال پیام به یک لوله موجود نامگذاری شده (نمونه: <code
                      class="literal">|/dev/xconsole</code>)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							ارسال پیام به یک یا چند کاربر، اگر در سیستم حاضر باشند (نمونه: <code
                      class="literal">root,rhertzog</code>)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							ارسال پیام به تمام کاربران حاضر در سیستم (نمونه: <code
                      class="literal">*</code>)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							نوشتن پیام در یک کنسول متنی (نمونه: <code
                      class="literal">/dev/tty8</code>).
						</div></li></ul></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>امنیت</em></span> فورواردکردن گزارش‌ها</strong></p></div></div></div><a
                id="id-1.12.8.6.4.5.2"
                class="indexterm"></a><div
                class="para">
					ایده خوبی است که مهم‌ترین گزارش‌ها را در یک سیستم جداگانه ثبت کنیم (که شاید برای همین منظور وجود داشته باشد)، چرا که اینکار احتمال خرابکاری نفوذگرهای احتمالی در از بین بردن رد پایشان را از بین می‌برد (مگر اینکه این سیستم جداگانه را نیز تحت نظر بگیرند). به علاوه، در زمان بروز یک مشکل بزرگ (مانند کرش کردن کرنل)، به گزارش‌ها در سیستم دوم دسترسی دارید که شانس شناسایی عوامل موجود در بروز حادثه را افزایش می‌دهد.
				</div><div
                class="para">
					برای پذیرش پیام‌های گزارش ارسال شده توسط سایر رایانه‌ها، باید <span
                  class="emphasis"><em>rsyslog</em></span> را پیکربندی مجدد کنید: در عمل، تنها کافی است قابلیت ready-for-use را در فایل <code
                  class="filename">/etc/rsyslog.conf</code> فعال سازید (<code
                  class="literal">$ModLoad imudp</code> و <code
                  class="literal">$UDPServerRun 514</code>).
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>قبلی</strong>9.4. رابط‌های مدیریتی</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>بعدی</strong>9.6. ابر-سرور inetd</a></li></ul></body></html>
