<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.6. سرورهای نام دامنه (DNS)</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="شبکه, Gateway, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="راهنمای دبیان برای مدیر سیستم‌ها" /><link
        rel="up"
        href="network-infrastructure.html"
        title="فصل 10. زیرساخت شبکه" /><link
        rel="prev"
        href="sect.ipv6.html"
        title="10.5. IPv6" /><link
        rel="next"
        href="sect.dhcp.html"
        title="10.7. DHCP" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.domain-name-servers.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای دبیان برای مدیر سیستم‌ها</li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.domain-name-servers"></a>10.6. سرورهای نام دامنه (DNS)</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-principe"></a>10.6.1. اصول و مکانیزم</h3></div></div></div><a
            id="id-1.13.9.2.2"
            class="indexterm"></a><a
            id="id-1.13.9.2.3"
            class="indexterm"></a><div
            class="para">
				<span
              class="emphasis"><em>سرویس نام دامنه</em></span> (DNS) یک جز اساسی از اینترنت به حساب می‌آید: کار آن نگاشت نام‌ دامنه به نشانی IP (و برعکس) است، به طوری که امکان استفاده <code
              class="literal">www.debian.org</code> بجای <code
              class="literal">5.153.231.4</code> یا <code
              class="literal">2001:41c8:1000:21::21:4</code> را فراهم می‌کند.
			</div><div
            class="para">
				رکوردهای DNS به صورت منطقه یا zone طبقه‌بندی می‌شوند؛ هر منطقه شامل یک دامنه (یا زیردامنه) یا یک نشانی IP (از آنجا که این نشانی‌ها به صورت متوالی تخصیص داده می‌شوند) است. یک سرور اصلی قابلیت مدیریت محتوای یک منطقه را دارد؛ سرورهای فرعی، که معمولا روی رایانه‌های جداگانه قرار می‌گیرند، رونوشت‌های تازه‌ای از منطقه اصلی را فراهم می‌آورند.
			</div><a
            id="id-1.13.9.2.6"
            class="indexterm"></a><a
            id="id-1.13.9.2.7"
            class="indexterm"></a><div
            class="para">
				هر منطقه می‌تواند شامل رکوردها با انواع گوناگونی باشد (<span
              class="emphasis"><em>Resource Records</em></span>):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">A</code>: نشانی IPv4. <a
                    id="id-1.13.9.2.9.1.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">CNAME</code>: نام مستعار (<span
                    class="emphasis"><em>canonical name</em></span>). <a
                    id="id-1.13.9.2.9.2.1.3"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">MX</code>: <span
                    class="emphasis"><em>mail exchange</em></span>، یک سرور ایمیل. این اطلاعات توسط سایر سرورهای ایمیل برای یافتن مکان مورد نیاز جهت ارسال نشانی‌های ایمیل است. هر رکورد MX یک اولویت دارد. سرور اولویت-بالا (با کمترین عدد) ابتدا استفاده می‌شود (قسمت <a
                    class="xref"
                    href="network-services.html#sidebar.smtp"><span
                      class="emphasis"><em>بارگشت به مقدمات</em></span> SMTP</a> را مشاهده کنید)؛ در صورت عدم برقراری ارتباط با این سرور، سایر سرورها بر اساس اولویت خود مورد استفاده قرار می‌گیرند. <a
                    id="id-1.13.9.2.9.3.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">PTR</code>: نگاشت یک نشانی IP به یک منطقه. چنین رکوردی در یک منطقه “DNS معکوس” نامگذاری شده با محدوده نشانی IP قرار می‌گیرد. برای نمونه، <code
                    class="literal">1.168.192.in-addr.arpa</code> منطقه شامل نگاشت برعکس برای تمام نشانی‌های موجود در بازه <code
                    class="literal">192.168.1.0/24</code> است. <a
                    id="id-1.13.9.2.9.4.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">AAAA</code>: نشانی‌های IPv6. <a
                    id="id-1.13.9.2.9.5.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">NS</code>: یک نام را به یک سرور نام نگاشت می‌کند. هر دامنه حداقل باید یک رکورد NS داشته باشد. این رکوردها به سرور DNS اشاره می‌کنند که می‌توانند به درخواست‌های این دامنه پاسخ دهند؛ معمولا به سرورهای اصلی و فرعی این دامنه اشاره دارند. این رکوردها همچنین اجازه DNS Delegation را می‌دهند؛ برای نمونه، منطقه <code
                    class="literal">falcot.com</code> می‌تواند شامل یک رکورد NS برای <code
                    class="literal">falcot.com</code> باشد، که یعنی منطقه <code
                    class="literal">internal.falcot.com</code> توسط سرور دیگری مدیریت می‌شود. البته، این سرور باید یک منطقه <code
                    class="literal">internal.falcot.com</code> را تعریف کند. <a
                    id="id-1.13.9.2.9.6.1.6"
                    class="indexterm"></a>
					</div></li></ul></div><a
            id="id-1.13.9.2.10"
            class="indexterm"></a><a
            id="id-1.13.9.2.11"
            class="indexterm"></a><div
            class="para">
				Bind، سرور نام مرجع، توسط ISC (<span
              class="emphasis"><em>Internet Software Consortium</em></span>) توسعه یافته و مدیریت می‌شود. در دبیان توسط بسته <span
              class="pkg pkg">bind9</span> ارائه می‌گردد. نسخه ۹ شامل دو تغییر بزرگ در مقایسه با نسخه‌های پیشین است. ابتدا، سرور DNS اکنون می‌تواند تحت فرمان یک کاربر عادی نیز کار کند، به منظور اینکه در زمان بروز آسیب‌پذیری امنیتی مجوزهای اصلی آن به فرد مهاجم منتقل نشود (طوری که در نسخه‌های ۸ دیده می‌شد).
			</div><div
            class="para">
				علاوه بر این، Bind از استاندارد DNSSEC برای امضا (و احراز هویت) رکوردهای DNS پشتیبانی می‌کند که حین حملات مرد میانی (MITM) امکان مسدودسازی داده‌های جعلی را فراهم می‌سازد.
			</div><a
            id="id-1.13.9.2.14"
            class="indexterm"></a><a
            id="id-1.13.9.2.15"
            class="indexterm"></a><a
            id="id-1.13.9.2.16"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>فرهنگ</em></span> DNSSEC</strong></p></div></div></div><a
              id="id-1.13.9.2.17.2"
              class="indexterm"></a><div
              class="para">
				مفهوم DNSSEC کمی پیچیده است؛ این امر نشان دهنده عدم استفاده گسترده آن است (حتی اگر به خوبی با سرورهای DNS ناآگاه از این ویژگی، سازگار باشد). برای درک تمام ویژگی‌های آن باید مقاله پیش رو را مطالعه کنید. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions">http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions</a></div>
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-config"></a>10.6.2. پیکربندی</h3></div></div></div><div
            class="para">
				فایل‌های پیکربندی <code
              class="command">bind</code>، صرف‌نظر از نسخه آن، ساختار مشابهی دارند.
			</div><div
            class="para">
				مدیرسیستم‌های فالکوت یک منطقه اصلی به نام <code
              class="literal">falcot.com</code> برای ذخیره اطلاعات مربوط به این دامنه و یک منطقه به نام <code
              class="literal">168.192.in-addr.arpa</code> برای نگاشت معکوس نشانی‌های IP در شبکه‌های محلی تعریف کرده‌اند.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>احتیاط</em></span> نامگذاری مناطق معکوس</strong></p></div></div></div><a
              id="id-1.13.9.3.4.2"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.3"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.4"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.5"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.6"
              class="indexterm"></a><div
              class="para">
				مناطق معکوس نام ویژه‌ای دارند. منطقه‌ای که شبکه <code
                class="literal">192.168.0.0/16</code> را پوشش می‌دهد باید به صورت <code
                class="literal">168.192.in-addr.arpa</code> نامگذاری گردد: قسمت نشانی‌های IP معکوس شده و به همراه پسوند <code
                class="literal">in-addr.arpa</code> قرار می‌گیرد.
			</div><div
              class="para">
				برای شبکه‌های IPv6، پسوند عبارت است از <code
                class="literal">ip6.arpa</code> و قسمت نشانی IP که به صورت معکوس در آمده شامل کاراکترهای هگزادسیمال کامل برای نمایش نشانی IP است. بنابراین، شبکه <code
                class="literal">2001:0bc8:31a0::/48</code> می‌تواند از منطقه‌ای با نام <code
                class="literal">0.a.1.3.8.c.b.0.1.0.0.2.ip6.arpa</code> استفاده کند.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>نکته</em></span> آزمایش‌کردن سرور DNS</strong></p></div></div></div><div
              class="para">
				دستور <code
                class="command">host</code> (در بسته <span
                class="pkg pkg">bind9-host</span>) از یک سرور DNS پرس و جو می‌کند و می‌تواند برای آزمایش پیکربندی سرور استفاده شود. برای نمونه، <code
                class="command">host machine.falcot.com localhost</code> به بررسی پاسخ سرور محلی از <code
                class="literal">machine.falcot.com</code> می‌پردازد. <code
                class="command">host <em
                  class="replaceable">ipaddress</em> localhost</code> عکس این عمل را انجام می‌دهد.
			</div><a
              id="id-1.13.9.3.5.3"
              class="indexterm"></a></div><div
            class="para">
				گزیده پیکربندی پیش رو، که از فایل‌های شرکت فالکوت برداشت شده، می‌تواند به عنوان نقطه آغازی برای پیکربندی سرور DNS استفاده شود:
			</div><a
            id="id-1.13.9.3.7"
            class="indexterm"></a><a
            id="id-1.13.9.3.8"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.bind-named.conf.local"></a><p
              class="title"><strong>
      مثال 10.12. گزیده‌ای از <code
                  class="filename">/etc/bind/named.conf.local</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
zone "falcot.com" {
        type master;
        file "/etc/bind/db.falcot.com";
        allow-query { any; };
        allow-transfer {
                195.20.105.149/32 ; // ns0.xname.org
                193.23.158.13/32 ; // ns1.xname.org
        };
};

zone "internal.falcot.com" {
        type master;
        file "/etc/bind/db.internal.falcot.com";
        allow-query { 192.168.0.0/16; };
};

zone "168.192.in-addr.arpa" {
        type master;
        file "/etc/bind/db.192.168";
        allow-query { 192.168.0.0/16; };
};</pre></div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.falcot.com"></a><p
              class="title"><strong>
      مثال 10.13. گزیده‌ای از <code
                  class="filename">/etc/bind/db.falcot.com</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; falcot.com Zone 
; admin.falcot.com. =&gt; zone contact: admin@falcot.com
$TTL    604800
@       IN      SOA     falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
; The @ refers to the zone name ("falcot.com" here)
; or to $ORIGIN if that directive has been used
;
@       IN      NS      ns
@       IN      NS      ns0.xname.org.

internal IN      NS      192.168.0.2

@       IN      A       212.94.201.10
@       IN      MX      5 mail
@       IN      MX      10 mail2

ns      IN      A       212.94.201.10
mail    IN      A       212.94.201.10
mail2   IN      A       212.94.201.11
www     IN      A       212.94.201.11

dns     IN      CNAME   ns</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>احتیاط</em></span> شیوه نگارش یک نام</strong></p></div></div></div><div
              class="para">
				شیوه نگارش نام رایانه‌ها از قواعد ثابتی پیروی می‌کند. برای نمونه، <code
                class="literal">machine</code> به معنی <code
                class="literal">machine.<em
                  class="replaceable">domain</em></code> است. اگر نام دامنه نباید به نام افزوده شود، نام مورد نظر باید به صورت <code
                class="literal">machine.</code> (با یک نقطه در پسوند) نوشته شود. مشخص کردن یک نام DNS خارج از محدوده دامنه نیازمند شیوه نگارشی مشابه با <code
                class="literal">machine.otherdomain.com.</code> است (با یک نقطه در پسوند).
			</div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.192.168"></a><p
              class="title"><strong>
      مثال 10.14. گزیده‌ای از <code
                  class="filename">/etc/bind/db.192.168</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; Reverse zone for 192.168.0.0/16
; admin.falcot.com. =&gt; zone contact: admin@falcot.com
$TTL    604800
@       IN      SOA     ns.internal.falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL

        IN      NS      ns.internal.falcot.com.

; 192.168.0.1 -&gt; arrakis
1.0     IN      PTR     arrakis.internal.falcot.com.
; 192.168.0.2 -&gt; neptune
2.0     IN      PTR     neptune.internal.falcot.com.

; 192.168.3.1 -&gt; pau
1.3     IN      PTR     pau.internal.falcot.com.</pre></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>قبلی</strong>10.5. IPv6</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>بعدی</strong>10.7. DHCP</a></li></ul></body></html>
