<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.8. بروزرسانی‌های خودکار</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="apt.html"
        title="فصل 6. نگهداری و بروزرسانی: ابزار APT" /><link
        rel="prev"
        href="sect.regular-upgrades.html"
        title="6.7. بروز نگهداشتن یک سیستم" /><link
        rel="next"
        href="sect.searching-packages.html"
        title="6.9. جستجو برای بسته‌ها" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.automatic-upgrades.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automatic-upgrades"></a>6.8. بروزرسانی‌های خودکار</h2></div></div></div><a
          id="id-1.9.17.2"
          class="indexterm"></a><a
          id="id-1.9.17.3"
          class="indexterm"></a><div
          class="para">
			از آنجایی که شرکت فالکوت تعداد زیادی رایانه به همراه نیروی انسانی محدود دارد، مدیرسیستم‌های آن تلاش دارند تا فرآیند بروزرسانی را تا آنجا که ممکن است خودکار سازند. برنامه‌هایی که برای این فرآیند لازم هستند باید بدون دخالت انسان اجرا شوند.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.5"></a>6.8.1. پیکربندی <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				همانطور که قبلا اشاره کردیم (قسمت <a
              class="xref"
              href="sect.package-meta-information.html#sidebar.questions-conffiles"><span
                class="emphasis"><em>مطالعه بیشتر</em></span> پیشگیری از پرسش‌های فایل پیکربندی</a> را مشاهده کنید)، <code
              class="command">dpkg</code> می‌تواند طوری تنظیم شود که برای تغییر یک گزینه پیکربندی نیازی به تاییدیه کاربر نداشته باشد (با استفاده از گزینه <code
              class="literal">--force-confdef --force-confold</code>). این تعامل، می‌تواند سه منبع دیگر نیز داشته باشد: برخی از خود APT می‌آیند، برخی توسط <code
              class="command">debconf</code> مدیریت می‌شوند و برخی نیز در خط فرمان با استفاده از اسکریپت‌های پیکربندی صورت می‌پذیرند.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.6"></a>6.8.2. پیکربندی APT</h3></div></div></div><div
            class="para">
				در مورد APT اینکار به سادگی صورت می‌گیرد: گزینه <code
              class="literal">-y</code> (یا <code
              class="literal">--assume-yes</code>) به APT می‌گوید پاسخ تمام پرسش‌ها را مثبت فرض کند.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.7"></a>6.8.3. پیکربندی <code
                    class="command">debconf</code></h3></div></div></div><div
            class="para">
				در مورد <code
              class="command">debconf</code> جزئیات بیشتری لازم است. این برنامه، در حقیقت برای کنترل میزان ارتباط و حجم پرسش‌های مربوط به یک بسته از کاربر به همراه چگونگی نحوه نمایش آن طراحی شده است. به همین دلیل است که پیکربندی آن نیازمند تعیین اولویت برای پرسش‌ها است؛ تنها پرسش‌هایی که بالاتر از حداقل اولویت تعریف شده باشند، نمایش می‌یابند. <code
              class="command">debconf</code> برای پرسش‌هایی که تصمیم به نشان دادنشان ندارد از پاسخ پیش‌فرض (که نگهدارنده بسته تعریف کرده است) استفاده می‌کند.
			</div><div
            class="para">
				عنصر مرتبط پیکربندی دیگر، رابطی است که توسط برنامه استفاده می‌شود. اگر گزینه <code
              class="literal">noninteractive</code> را انتخاب کنید، تمام تعاملات با کاربر غیر فعال می‌شود. اگر بسته‌ای تلاش کند که اطلاعات مهمی را به کاربر نشان دهد، از طریق ایمیل به مدیرسیستم اطلاع داده می‌شود.
			</div><div
            class="para">
				برای پیکربندی مجدد <code
              class="command">debconf</code>، از ابزار <code
              class="command">dpkg-reconfigure</code> موجود در بسته <span
              class="pkg pkg">debconf</span> استفاده کنید؛ دستور مورد نظر عبارت است از <code
              class="command">dpkg-reconfigure debconf</code>. نکته اینکه مقادیر تنظیم‌شده به صورت موقت می‌توانند با استفاده از متغیرهای محیطی هر زمان که لازم باشد، تغییر یابند (برای نمونه متغیر <code
              class="varname">DEBIAN_FRONTEND</code> رابط کاربری را کنترل می‌کند که مستندات آن در <span
              class="citerefentry"><span
                class="refentrytitle">debconf</span>(7)</span> آمده است).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.8"></a>6.8.4. مدیریت شیوه تعامل با خط فرمان</h3></div></div></div><div
            class="para">
				آخرین منبع تعاملات و دشوارترین آن‌ها تنظیم، اسکریپت‌های پیکربندی هستند که توسط <code
              class="command">dpkg</code> اجرا می‌شوند. متاسفانه روش استاندارد و پاسخ سراسری برای مدیریت آن‌ها وجود ندارد.
			</div><div
            class="para">
				رویکرد متداول برای جلوگیری از ورودی استاندارد، فرستادن محتوای خالی <code
              class="filename">/dev/null</code> به سمت آن با استفاده از دستور <code
              class="command"><em
                class="replaceable">command</em> &lt;/dev/null</code> است یا استفاده از تعداد نامحدودی newline. هیچ یک از این شیوه‌ها ۱۰۰٪ قابل اعتماد نیستند، اما معمولا منجر به استفاده از پاسخ پیش‌فرض می‌گردند چرا که اکثر اسکریپت‌ها عدم پاسخ به پرسش‌ها را به منزله پاسخ پیش‌فرض می‌دانند.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.9"></a>6.8.5. ترکیب جادویی</h3></div></div></div><div
            class="para">
				با ترکیب عناصر پیشین، امکان طراحی یک اسکریپت کوچک که توانایی مدیریت بروزرسانی‌های خودکار را داشته باشد، وجود دارد.
			</div><div
            class="example"><a
              xmlns=""
              id="example.non-interactive-upgrade"></a><p
              class="title"><strong>
      مثال 6.4. اسکریپت غیر-تعاملی بروزرسانی</strong></p><div
              class="example-contents"><pre
                class="programlisting">export DEBIAN_FRONTEND=noninteractive
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>در عمل</em></span> مورد شرکت فالکوت</strong></p></div></div></div><div
              class="para">
				رایانه‌های شرکت فالکوت ساختار پیوسته‌ای دارند، با ماشین‌هایی که هر کدام عملکرد خاصی دارند. مدیرسیستم‌ها باید مرتبط‌ترین راه‌حل را برای هر رایانه انتخاب کنند.
			</div><div
              class="para">
				In practice, the servers running <span
                class="distribution distribution">Stretch</span> are configured with the “miracle combination” above, and are kept up to date automatically. Only the most critical servers (the firewalls, for instances) are set up with <code
                class="command">apticron</code>, so that upgrades always happen under the supervision of an administrator.
			</div><div
              class="para">
				The office workstations in the administrative services also run <span
                class="distribution distribution">Stretch</span>, but they are equipped with <span
                class="pkg pkg">gnome-packagekit</span>, so that users trigger the upgrades themselves. The rationale for this decision is that if upgrades happen without an explicit action, the behavior of the computer might change unexpectedly, which could cause confusion for the main users.
			</div><div
              class="para">
				در آزمایشگاه تعداد محدودی از رایانه‌ها بر روی <span
                class="distribution distribution">Testing</span> تنظیم شده‌اند -- تا از آخرین نرم‌افزارهای کاربردی بهره‌مند شوند -- به صورت خودکار بروزرسانی نمی‌شوند. مدیرسیستم‌ها APT را تنظیم کرده‌اند که تنها بروزرسانی‌ها را آماده کند ولی هیچ اقدامی جهت نصب صورت ندهد؛ زمانی که تصمیم به بروزرسانی بگیرند (به صورت دستی)، فرآیند خسته‌کننده بروزرسانی بسته‌ها و دانلود آن‌ها دیگر ضرورتی ندارد و مدیرسیستم‌ها می‌توانند روی بخش‌های کاربردی دیگر تمرکز کنند.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>قبلی</strong>6.7. بروز نگهداشتن یک سیستم</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>بعدی</strong>6.9. جستجو برای بسته‌ها</a></li></ul></body></html>
