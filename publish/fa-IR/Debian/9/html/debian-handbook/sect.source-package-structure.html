<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.3. ساختار یک بسته سورس</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="بسته باینری, بسته سورس, dpkg, وابستگی‌ها, تداخل" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="packaging-system.html"
        title="فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بنیادین" /><link
        rel="prev"
        href="sect.package-meta-information.html"
        title="5.2. اطلاعات-جانبی بسته" /><link
        rel="next"
        href="sect.manipulating-packages-with-dpkg.html"
        title="5.4. مدیریت بسته‌ها با استفاده از dpkg" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.source-package-structure.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.source-package-structure"></a>5.3. ساختار یک بسته سورس</h2></div></div></div><a
          id="id-1.8.7.2"
          class="indexterm"></a><a
          id="id-1.8.7.3"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.7.4"></a>5.3.1. قالب</h3></div></div></div><a
            id="id-1.8.7.4.2"
            class="indexterm"></a><a
            id="id-1.8.7.4.3"
            class="indexterm"></a><a
            id="id-1.8.7.4.4"
            class="indexterm"></a><a
            id="id-1.8.7.4.5"
            class="indexterm"></a><div
            class="para">
				A source package is usually comprised of three files, a <code
              class="filename">.dsc</code>, a <code
              class="filename">.orig.tar.gz</code>, and a <code
              class="filename">.debian.tar.xz</code> (or <code
              class="filename">.diff.gz</code>). They allow creation of binary packages (<code
              class="filename">.deb</code> files described above) from the source code files of the program, which are written in a programming language.
			</div><div
            class="para">
				فایل <code
              class="filename">.dsc</code> یا Debian Source Control فایل کوتاهی است مبتنی بر استاندارد RFC 2822 (درست مانند فایل <code
              class="filename">control</code> که در قسمت <a
              class="xref"
              href="sect.package-meta-information.html#sect.control">
      قسمت 5.2.1, “توضیح: فایل <code
                class="filename">control</code>”
    </a> بررسی شد) که بسته سورس و محتویات آن را مشخص می‌نماید. این فایل توسط توسعه‌دهنده آن امضا شده است که صحت آن را نمایش می‌دهد. برای مطالعه بیشتر در این زمینه به <a
              class="xref"
              href="sect.package-authentication.html">
      قسمت 6.5, “بررسی صحت بسته‌ها”
    </a> مراجعه کنید.
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.8.7.4.8"></a><p
              class="title"><strong>
      مثال 5.1. یک فایل <code
                  class="filename">.dsc</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.65-4
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.8
Vcs-Browser: https://anonscm.debian.org/cgit/collab-maint/zim.git
Vcs-Git: https://anonscm.debian.org/git/collab-maint/zim.git
Build-Depends: debhelper (&gt;= 9), xdg-utils, python (&gt;= 2.6.6-3~), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg, dh-python
Package-List:
 zim deb x11 optional arch=all
Checksums-Sha1:
 4a9be85c98b7f4397800f6d301428d64241034ce 1899614 zim_0.65.orig.tar.gz
 0ec38c990ec7662205dd0c843bf81f9033906a2e 10332 zim_0.65-4.debian.tar.xz
Checksums-Sha256:
 5442f3334395a2beafc5b9a2bbec2e53e38270d4bad696b5c4053dd51dc1ed96 1899614 zim_0.65.orig.tar.gz
 78271df16aa166dce916b3ff4ecd705ed3a8832e49d3ef0bd8738a4fe8dd2b4f 10332 zim_0.65-4.debian.tar.xz
Files:
 63ab7a2070e6d1d3fb32700a851d7b8b 1899614 zim_0.65.orig.tar.gz
 648559b38e04eaf4f6caa97563c057ff 10332 zim_0.65-4.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Comment: Signed by Raphael Hertzog

iQEzBAEBCgAdFiEE1823g1EQnhJ1LsbSA4gdq+vCmrkFAlgzZXkACgkQA4gdq+vC
mrnyXAf+M/PzZFjqk6Hvv1QSbocIDZ3bEqRjVpNLApubsPsEZZT6yw9vypzNE2hZ
/BbLPa0Ntbhew4U+SJpuujV7VnLs9mZgOFuKRHKWYQBQ+oxw+gtM6iePwVj58aP/
LW7K5gE428ohMdjIkf42Lz4Fve3dVPgPLIzQxRZ87N6OKqmS81M6/RRIF3TS/gJp
CwpN1yifCfQs46gxL5/CgA4uhI8taz+g+8ZDd6fL5BQeFuNsgplY4QL1uGno3F7G
VY7WZhM601Re2ePnv+6vjh8kDWMjZhfB4RJy0+hHezuoVGKljyaxc1O4P/fxvXus
CEETju6cAE/HgDubDXDqExMwEd4odA==
=HUvj
-----END PGP SIGNATURE-----</pre></div></div><a
            id="id-1.8.7.4.9"
            class="indexterm"></a><div
            class="para">
				نکته اینکه بسته‌های سورس نیز وابستگی‌های مربوط به خود را دارند (<code
              class="literal">Build-Depends</code>) که کاملاً با وابستگی‌های موجود در بسته‌های باینری تفاوت دارد، چرا که شامل ابزاری جهت کامپایل کردن نرم‌افزار مورد نظر و ایجاد فایل باینری آن هستند.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>احتیاط</em></span> فضای‌نامگذاری منحصربفرد</strong></p></div></div></div><div
              class="para">
				نکته حائر اهمیت در اینجا این است که ممکن است هیچ انطباقی بین نام بسته سورس و بسته باینری آن وجود نداشته باشد. درک این نکته ساده است که بدانید هر بسته سورس می‌تواند چندین بسته باینری ایجاد کند. این همان دلیلی است که فایل <code
                class="filename">.dsc</code> فیلدهای جداگانه‌ای برای <code
                class="literal">Source</code> و <code
                class="literal">Binary</code> دارد که به ازای هر بسته سورس، نام بسته باینری آن را تعیین کند.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>فرهنگ</em></span> علت تقسیم به چند بسته</strong></p></div></div></div><div
              class="para">
				تقریباً در اکثر اوقات، یک بسته سورس (برای یک نرم‌افزار مورد نظر) می‌تواند چندین بسته باینری ایجاد کند. این تقسیم‌بندی به منظور احتمال استفاده (قسمتی از) نرم‌افزار در شرایط گوناگون در نظر گرفته می‌شود. یک کتابخانه اشتراکی را در نظر بگیرید، ممکن است به منظور اجرای یک برنامه نصب شده باشد (برای نمونه <span
                class="pkg pkg">libc6</span>) یا ممکن است به منظور ایجاد یک برنامه جدید نصب شده باشد (در این حالت <span
                class="pkg pkg">libc6-dev</span> بسته مورد نظر خواهد بود). این منطق در سرویس‌های client/server نیز وجود دارد که می‌خواهیم قسمت server را در یک ماشین و قسمت client را در ماشین دیگر نصب کنیم (برای نمونه، <span
                class="pkg pkg">openssh-server</span> و <span
                class="pkg pkg">openssh-client</span> برای سرویس OpenSSH).
			</div><div
              class="para">
				درست مانند نرم‌افزار، مستندات هر نرم‌افزار نیز در بسته مربوط به خود قرار دارند: کاربر ممکن است جدای از نرم‌افزار اقدام به نصب آن کند و در هر لحظه که بخواهد برای دستیابی به فضای دیسک بیشتر، آن‌ها را حذف کند. به علاوه، این کار موجب صرفه‌جویی در فضای دیسک موجود در سرورهای دبیان می‌گردد، چرا که بسته مستندسازی‌شده در تمام معماری‌های یکسان بکارگرفته می‌شود (بجای اینکه برای هر معماری یک مستندات مربوط به بسته باینری آن موجود باشد).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>چشم‌انداز</em></span> قالب‌های متفاوت بسته سورس</strong></p></div></div></div><div
              class="para">
				در ابتدا تنها یک قالب برای بسته سورس وجود داشت. این قالب <code
                class="literal">1.0</code> است که ارتباط بین یک آرشیو <code
                class="filename">.orig.tar.gz</code> با <code
                class="filename">.diff.gz</code> که فایل پچ “مخصوص دبیان” است را برقرار می‌کند (همچنین یک نسخه <code
                class="filename">.tar.gz</code> وجود دارد در صورتی که فایل <code
                class="filename">.orig.tar.gz</code> موجود نباشد).
			</div><div
              class="para">
				Since Debian <span
                class="distribution distribution">Squeeze</span>, Debian developers have the option to use new formats that correct many problems of the historical format. Format <code
                class="literal">3.0 (quilt)</code> can combine multiple upstream archives in the same source package: in addition to the usual <code
                class="filename">.orig.tar.gz</code>, supplementary <code
                class="filename">.orig-<em
                  class="replaceable">component</em>.tar.gz</code> archives can be included. This is useful with software that is distributed in several upstream components but for which a single source package is desired. These archives can also be compressed with <code
                class="command">xz</code> rather than <code
                class="command">gzip</code>, which saves disk space and network resources. Finally, the monolithic patch, <code
                class="filename">.diff.gz</code> is replaced by a <code
                class="filename">.debian.tar.xz</code> archive containing the compiling instructions and a set of upstream patches contributed by the package maintainer. These last are recorded in a format compatible with <code
                class="command">quilt</code> — a tool that facilitates the management of a series of patches.
			</div></div><div
            class="para">
				فایل <code
              class="filename">.orig.tar.gz</code> آرشیو شامل سورس کد از توسعه‌دهنده اصلی برنامه است. از توسعه‌دهندگان بسته در دبیان تقاضا می‌شود که این فایل را به منظور سازگاری هر چه بیشتر با فایل اصلی برنامه، تغییر ندهند (که این کار توسط یک عملیات مقایسه‌ای انجام می‌شود) و به نقظه نظرات نویسنده اصلی احترام بگذارند.
			</div><div
            class="para">
				The <code
              class="filename">.debian.tar.xz</code> contains all of the modifications made by the Debian maintainer, especially the addition of a <code
              class="filename">debian</code> directory containing the instructions to execute to construct a Debian package.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ابزار</em></span> خارج‌سازی بسته از حالت فشرده</strong></p></div></div></div><a
              id="id-1.8.7.4.16.2"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.3"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.4"
              class="indexterm"></a><a
              id="id-1.8.7.4.16.5"
              class="indexterm"></a><div
              class="para">
				اگر بسته سورسی دارید، می‌تواند با استفاده از دستور <code
                class="command">dpkg-source</code> (از بسته <span
                class="pkg pkg">dpkg-dev</span>) آن را از حالت فشرده خارج سازید:
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg-source -x package_0.7-1.dsc</code></strong></pre><div
              class="para">
				همچنین می‌توانید از <code
                class="command">apt-get</code> برای دانلود بسته استفاده کنید و آن را از حالت فشرده خارج سازید. این کار مستلزم وجود خط‌های <code
                class="literal">deb-src</code> در فایل <code
                class="filename">/etc/apt/sources.list</code> می‌باشد (برای مطالعه بیشتر به قسمت <a
                class="xref"
                href="apt.html#sect.apt-sources.list">
      قسمت 6.1, “پر کردن فایل <code
                  class="filename">sources.list</code>”
    </a> مراجعه کنید). این خطوط به منظور دسترسی به “source” بسته‌های سورس قرار داده شده‌اند (سرورهایی که روی آن‌ها بسته‌های سورس میزبانی می‌شوند).
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>apt-get source <em
                    class="replaceable">package</em></code></strong></pre></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.8.7.5"></a>5.3.2. کاربرد در دبیان</h3></div></div></div><div
            class="para">
				بسته سورس پایه و اساس هر چیز دیگری در دبیان است. تمام بسته‌های دبیان از یک بسته سورس نشات می‌گیرند، تغییر در هر بسته دبیان مستلزم تغییر در بسته سورس آن است. توسعه‌دهندگان دبیان که روی بسته‌های سورس کار می‌کنند، می‌دانند که کوچکترین تغییر در آن‌ها روی بسته‌های دبیان تاثیر خواهد گذاشت. حاصل کار نهایی آن‌ها در بسته‌های سورس قرار می‌گیرد: به راحتی می‌توانید به آن‌ها مراجعه کنید و ببینید که تمام تغییرات از آنجا شروع می‌شود.
			</div><div
            class="para">
				زمانی که نسخه جدیدی از یک بسته (یک بسته سورس و یک یا چند بسته باینری) روی سرورهای دبیان قرار می‌گیرد، بسته سورس مهمترین آن‌ها است. در واقع، توسط شبکه‌ای از ماشین‌ها با معماری‌های متفاوت برای کامپایل و ساخت نسخه‌های مختلف از آن بسته در معماری‌های گوناگون مورد استفاده قرار می‌گیرد. در حقیقت اینکه توسعه‌دهنده خود اقدام به انتشار نسخه‌های متفاوت برای معماری‌های گوناگون می‌کند (معمولا i386 یا amd64) اهمیت خاصی ندارد، چرا که این فعالیت‌ها به صورت خودکار صورت می‌پذیرند.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-meta-information.html"><strong>قبلی</strong>5.2. اطلاعات-جانبی بسته</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.manipulating-packages-with-dpkg.html"><strong>بعدی</strong>5.4. مدیریت بسته‌ها با استفاده از dpkg</a></li></ul></body></html>
