<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.10. ترجمة النواة</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ar-MA-1.0-1" /><meta
        name="keywords"
        content="ضبط, توطين, الإعدادات الإقليمية, الشبكة, استبيان الأسماء, المستخدمون, المجموعات, الحسابات, مفسر سطر الأوامر, الصَدَفة, الطباعة, محمّل الإقلاع, ترجمة النواة" /><link
        rel="home"
        href="index.html"
        title="دفتر مدير دبيان" /><link
        rel="up"
        href="basic-configuration.html"
        title="فصل 8. الإعدادات الأساسية: الشبكة، الحسابات، الطباعة..." /><link
        rel="prev"
        href="sect.config-misc.html"
        title="8.9. الإعدادات الأخرى: مزامنة الوقت، السجلات، مشاركة الوصول..." /><link
        rel="next"
        href="sect.kernel-installation.html"
        title="8.11. تثبيت النواة" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ar-MA/stable/sect.kernel-compilation.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>السابق</strong></a></li><li
          class="home">دفتر مدير دبيان</li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>التالي</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.kernel-compilation"></a>8.10. ترجمة النواة</h2></div></div></div><a
          id="id-1.11.14.2"
          class="indexterm"></a><a
          id="id-1.11.14.3"
          class="indexterm"></a><div
          class="para">
			تتضمن النواة التي توفرها دبيان أكبر كمية ممكنة من الميزات، بالإضافة إلى أكبر كمية من تعريفات الأجهزة، في سبيل تغطية أوسع طيف من تجميعات العتاد الموجودة. لهذا تجد بعض المستخدمين الذين يفضلون إعادة ترجمة النواة حتى تتضمن ما يحتاجونه بشكل خاص فقط. هناك دافعين رئيسيين وراء ذلك. أولاً، قد يُحسن هذا من استهلاك الذاكرة، لأن كود النواة سيحجز الذاكرة دون سبب، حتى لو تكن هناك حاجة له (كما أنه لا ”ينزل“ إلى مساحة التبديل أبداً، لذلك فهو يستهلك الذاكرة RAM الفعلية)، وهذا قد يخفض الأداء الكلي للنظام. كما أن النواة المترجمة محلياً قد تحدّ من خطر المشاكل الأمنية لأن كود النواة المترجم والمستعمل يشكل جزءاً فقط من الكود الكلي.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ملاحظة</em></span> التحديثات الأمنية</strong></p></div></div></div><div
            class="para">
			إذا اخترت ترجمة نواة خاصة بك، فعليك أن ترضى بالعواقب: لا تستطيع دبيان توفير تحديثات أمنية لنواتك المخصصة. أما باحتفاظك بالنواة التي توفرها دبيان، سوف تستفيد من التحديثات التي يُحضّرها فريق الحماية في مشروع دبيان.
		</div></div><div
          class="para">
			إعادة ترجمة النواة ضرورية أيضاً إذا كنت تريد استخدام ميزات معينة متاحة بشكل رقع (patches) فقط (وليست مضمنة في نسخ النواة القياسية).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>التعمق أكثر</em></span> دفتر نواة دبيان</strong></p></div></div></div><a
            id="id-1.11.14.7.2"
            class="indexterm"></a><div
            class="para">
			تشرف فرق نواة دبيان على صيانة ”Debian Kernel Handbook“ (متوفر أيضاً في الحزمة <span
              class="pkg pkg">debian-kernel-handbook</span>) الذي يحوي توثيقاً شاملاً عن معظم المهام المتعلقة بالنواة وطريقة التعامل مع حزم نواة دبيان الرسمية. هذا هو المكان الأول الذي يجب أن تبحث فيه إذا احتجت معلومات إضافية غير موجودة في هذا القسم. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://kernel-handbook.alioth.debian.org">http://kernel-handbook.alioth.debian.org</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-compilation-prerequisites"></a>8.10.1. المتطلبات الأولية ومقدمة</h3></div></div></div><div
            class="para">
				ليس غريباً أن تدير دبيان النواة بشكل حزمة، ولم تكن هذه الطريقة هي المتبعة في ترجمة وتثبيت النوى تقليدياً. بما أن النواة تبقى تحت سيطرة نظام الحزم، فيمكن عندها إزالتها بشكل نظيف، أو تنصيبها على عدة أجهزة. بالإضافة لذلك، تؤتمت السكربتات المرتبطة بهذه الحزم التفاعلات مع محمل الإقلاع ومولد initrd.
			</div><div
            class="para">
				تحوي أكواد لينكس المنبعية (upstream) كل ما تحتاجه لبناء حزمة دبيان للنواة. لكنك تحتاج مع ذلك تثبيت <span
              class="pkg pkg">build-essential</span> لضمان أنك تملك الأدوات اللازمة لبناء حزمة دبيان. بالإضافة لذلك، تحتاج خطوة ضبط النواة للحزمة <span
              class="pkg pkg">libncurses5-dev</span>. أخيراً، تسمح الحزمة <span
              class="pkg pkg">fakeroot</span> بإنشاء حزمة دبيان دون استخدام الصلاحيات الإدارية.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ثقافة</em></span> <span
                        class="pkg pkg">kernel-package</span> وأيامها الجميلة الخالية</strong></p></div></div></div><a
              id="id-1.11.14.8.4.2"
              class="indexterm"></a><div
              class="para">
				قبل أن يملك نظام بناء لينكس القدرة على بناء حزم دبيان صحيحة، كانت الطريقة المفضلة لبناء هذه الحزم هي استخدام <code
                class="command">make-kpkg</code> من الحزمة <span
                class="pkg pkg">kernel-package</span>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-sources"></a>8.10.2. الحصول على الشفرة المصدرية</h3></div></div></div><a
            id="id-1.11.14.9.2"
            class="indexterm"></a><a
            id="id-1.11.14.9.3"
            class="indexterm"></a><a
            id="id-1.11.14.9.4"
            class="indexterm"></a><div
            class="para">
				تتوفر الشِّفرة المصدرية للنواة لينكس في حزمة، ككل الأشياء التي قد تكون لها فائدة في نظام دبيان. للحصول عليها، فقط ثبّت الحزمة <span
              class="pkg pkg">linux-source-<em
                class="replaceable">version</em></span>. يسرد الأمر <code
              class="command">apt-cache search ^linux-source</code> نسخ النواة المختلفة التي توفرها دبيان. يتوفر الإصدار الأخير في التوزيعة <span
              class="distribution distribution">غير المستقرة</span>: يمكنك الحصول عليه دون مخاطرة كبيرة (خصوصاً إذا أعددت APT عندك حسب تعليمات <a
              class="xref"
              href="sect.apt-get.html#sect.apt-mix-distros">قسم 6.2.6, “العمل مع عدة توزيعات”</a>). لاحظ أن الشفرة المصدرية التي تحويها هذه الحزم لا تتفق تماماً مع تلك التي ينشرها لينوس تورفالدس ومطورو النواة؛ لأن دبيان –كباقي التوزيعات– تطبّق عدداً من الرقع، التي قد تصل (أو لا تصل) إلى النسخة المنبعية من لينكس. تشمل هذه التعديلات نقلاً خلفياً لتصحيحات أو مزايا أو تعاريف من نسخ النواة الأحدث، ومزايا لم تُدمج (بالكامل) بعد في شجرة لينكس المنبعية، وأحياناً بعض تعديلات الخاصة بدبيان.
			</div><div
            class="para">
				تركز بقية هذا القسم على النسخة 3.16 من النواة لينكس، لكن يمكن طبعاً تطبيق الأمثلة على أي نسخة تريدها من النواة.
			</div><div
            class="para">
				نحن نفترض أنك قد ثبّتَّ الحزمة <span
              class="pkg pkg">linux-source-3.16</span>. تحوي هذه الحزمة الأرشيف <code
              dir="ltr"
              class="filename">/usr/src/linux-source-3.16.tar.xz</code>، وهي نسخة مضغوطة من أكواد النواة. عليك فك الضغط عن هذه الملفات في مجلد جديد (ليس تحت <code
              class="filename">/usr/src/</code> مباشرة، لعدم الحاجة لصلاحيات خاصة لترجمة النواة لينكس): المجلد <code
              dir="ltr"
              class="filename">~/kernel/</code> سيكون مناسباً.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>mkdir ~/kernel؛ cd ~/kernel</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>tar -xaf /usr/src/linux-source-3.16.tar.xz</code></strong></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ثقافة</em></span> موقع أكواد النواة</strong></p></div></div></div><div
              class="para">
				تقليدياً، كانت أكواد النواة توضع في <code
                class="filename">/usr/src/linux/</code> بالتالي كانت تحتاج صلاحيات الجذر للترجمة. لكن يجب تفادي العمل بصلاحيات الجذر عندما لا تكون ضرورية. هناك مجموعة <code
                class="literal">src</code> تسمح لأعضائها بالعمل في هذا المجلد، لكن يجب تفادي العمل في <code
                class="filename">/usr/src/</code> على أي حال. عندما تضع أكواد النواة في مجلد شخصي، سوف تزيد الأمان على كل الأصعدة: فلا تضاف ملفات في <code
                class="filename">/usr/</code> لا يعرفها نظام الحزم، ولا تخشى أي برامج مضللة تقرأ <code
                class="filename">/usr/src/linux/</code> لتحاول جمع معلومات عن النواة المستخدمة.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-kernel"></a>8.10.3. ضبط النواة</h3></div></div></div><a
            id="id-1.11.14.10.2"
            class="indexterm"></a><a
            id="id-1.11.14.10.3"
            class="indexterm"></a><a
            id="id-1.11.14.10.4"
            class="indexterm"></a><div
            class="para">
				تتمثل الخطوة التالية في إعداد النواة حسب احتياجاتك. تعتمد الإجراءات الدقيقة على أهدافك.
			</div><div
            class="para">
				عند إعادة ترجمة نسخة أحدث من النواة (تحوي رقع إضافية مثلا)، ستبقى الإعدادات أقرب ما يمكن إلى الإعدادات التي تقترحها دبيان على الأغلب. في هذه الحالة، يمكن بدلاً من إعادة ضبط كل شيء بدءاً من الصفر أن تنسخ الملف <code
              dir="ltr"
              class="filename">/boot/config-<em
                class="replaceable">version</em></code> (يقصد بكلمة <em
              class="replaceable">version</em> نسخة النواة المستخدمة حالياً، التي يمكن معرفتها بالأمر <code
              class="command">uname -r</code>) إلى ملف <code
              dir="ltr"
              class="filename">.config</code> في المجلد الذي يحوي أكواد النواة.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cp /boot/config-3.16.0-4-amd64 ~/kernel/linux-source-3.16/.config</code></strong></pre><div
            class="para">
				يمكنك أن تتوقف هنا وتقفز إلى <a
              class="xref"
              href="sect.kernel-compilation.html#sect.kernel-build">قسم 8.10.4, “ترجمة وبناء الحزمة”</a>، ما لم تكن مضطراً لتغيير الإعدادات. لكن إذا كنت تحتاج تغيير الإعدادات، أو إذا قررت إعادة ضبط كل شيء من الصفر، عليك تخصيص وقت كاف لضبط النواة. هناك واجهات متنوعة مخصصة لهذا الغرض في مجلد أكواد النواة التي يمكن استخدامها عبر استدعاء الأمر <code
              class="command">make <em
                class="replaceable">target</em></code>، حيث يأخذ <em
              class="replaceable">target</em> إحدى القيم المذكورة أدناه.
			</div><div
            class="para">
				يترجم الأمر <code
              class="command">make menuconfig</code> وينفّذ واجهة نصية (هنا تظهر الحاجة للحزمة <span
              class="pkg pkg">libncurses5-dev</span>) التي تسمح بتصفح الخيارات المتاحة بشكل بنية شجرية. يمكن تغيير قيمة الخيار المحدد عبر ضغط مفتاح <span
              class="keycap"><strong>Space</strong></span>، أما <span
              class="keycap"><strong>Enter</strong></span> فيفعّل الزر المحدد أسفل الشاشة؛ زر <span
              class="guibutton"><strong>Select</strong></span> يعود إلى القائمة الفرعية المحددة؛ و <span
              class="guibutton"><strong>Exit</strong></span> يغلق الشاشة الحالية ويتحرك للأعلى في الشجرة؛ يعرض <span
              class="guibutton"><strong>Help</strong></span> معلومات مفصلة أكثر عن دور الخيار المحدد. تسمح مفاتيح الأسهم بالتحرك ضمن قائمة الخيارات والأزرار. للخروج من برنامج الإعداد، اختر <span
              class="guibutton"><strong>Exit</strong></span> من القائمة الرئيسية. عندها يعرض عليك البرنامج حفظ التعديلات التي أجريتها؛ وافق على ذلك إذا كنت راضياً عن اختياراتك.
			</div><div
            class="para">
				للواجهات الأخرى ميزات مشابهة، لكنها تعمل ضمن واجهات رسومية أكثر تطوراً؛ مثل <code
              class="command">make xconfig</code> التي تستخدم الواجهة الرسومية Qt، و <code
              class="command">make gconfig</code> التي تستخدم +GTK. تحتاج الأولى حزمة <span
              class="pkg pkg">libqt4-dev</span>، بينما تعتمد الثانية على <span
              class="pkg pkg">libglade2-dev</span> و <span
              class="pkg pkg">libgtk2.0-dev</span>.
			</div><div
            class="para">
				عند استخدام إحدى واجهات الضبط هذه، يفضل دوماً البدء من إعدادات افتراضية مقبولة. توفر النواة إعدادات كهذه في <code
              class="filename">arch/<em
                class="replaceable">arch</em>/configs/*_defconfig</code> ويمكنك أن تضع الإعدادات التي اخترتها حيز التطبيق باستخدام <code
              class="command">make x86_64_defconfig</code> (على حواسيب 64 بت) أو <code
              class="command">make i386_defconfig</code> (على حواسيب 32 بت).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>تلميح</em></span> التعامل مع ملفات <code
                        dir="ltr"
                        class="filename">.config</code> القديمة</strong></p></div></div></div><div
              class="para">
				عندما تقدم ملف <code
                dir="ltr"
                class="filename">.config</code> ولدته باستخدام نسخة نواة أخرى (أقدم عادة)، ستضطر لتحديثه. يمكنك عمل ذلك باستخدام <code
                class="command">make oldconfig</code>، الذي سيطرح عليك الأسئلة المتعلقة بخيارات الضبط الجديدة تفاعلياً. إذا كنت تريد استخدام الإجابة الافتراضية لكل هذه الأسئلة يمكنك استخدام <code
                class="command">make olddefconfig</code>. أما إذا استخدمت <code
                class="command">make oldnoconfig</code>، فسوف يفترض أن تريد الإجابة بالنفي على جميع الأسئلة.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-build"></a>8.10.4. ترجمة وبناء الحزمة</h3></div></div></div><a
            id="id-1.11.14.11.2"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ملاحظة</em></span> التنظيف قبل إعادة البناء</strong></p></div></div></div><div
              class="para">
				إذا ترجمت النواة سابقاً وتنوي إعادة بناء كل شيء من الصفر ثانية في المجلد نفسه (مثلاً لأنك عدلت كثيراً في إعدادات النواة)، عليك استدعاء <code
                class="command">make clean</code> لإزالة الملفات المترجمة. أما <code
                class="command">make distclean</code> فيحذف كل الملفات المولّدة، بما فيها ملف <code
                dir="ltr"
                class="filename">.config</code> أيضاً، لذلك تأكد من أخذ نسخة احتياطية عنه أولاً.
			</div></div><div
            class="para">
				بعد تجهيز إعدادات النواة، سيولد الأمر البسيط <code
              class="command">make deb-pkg</code>‏ 5 حزم دبيانية على الأكثر: <span
              class="pkg pkg">linux-image-<em
                class="replaceable">version</em></span> التي تحوي صورة النواة والوحدات المرتبطة بها، و <span
              class="pkg pkg">linux-headers-<em
                class="replaceable">version</em></span> التي تحوي ملفات الترويسات التي تلزم عند ترجمة وحدات خارجية، و <span
              class="pkg pkg">linux-firmware-image-<em
                class="replaceable">version</em></span> التي تحوي ملفات فيرم وير (firmware) تحتاجها بعض التعريفات (قد تكون هذه الحزمة مفقودة عند البناء من الشفرات المصدرية التي توفرها دبيان)، و <span
              class="pkg pkg">linux-image-<em
                class="replaceable">version</em>-dbg</span> التي تحوي رموز التنقيح (debugging symbols) لصورة النواة ووحداتها، و <span
              class="pkg pkg">linux-libc-dev</span> التي تحوي الترويسات الخاصة ببعض مكتبات ساحة المستخدم مثل GNU glibc.
			</div><div
            class="para">
				يتحدد <em
              class="replaceable">version</em> عبر دمج رقم النسخة المنبعية (الذي يتحدد بالمتغيرات <code
              class="literal">VERSION</code> و <code
              class="literal">PATCHLEVEL</code> و <code
              class="literal">SUBLEVEL</code> و <code
              class="literal">EXTRAVERSION</code> في ملف <code
              class="filename">Makefile</code>)، ومتغير الضبط <code
              class="literal">LOCALVERSION</code>، ومتغير البيئة <code
              class="literal">LOCALVERSION</code>. أما نسخة الحزمة فتستخدم السلسلة النصية نفسها مع إضافة رقم مراجعة يتزايد آلياً (ويُخزَّن في <code
              dir="ltr"
              class="filename">.version</code>)، إلا إذا تجاوزته باستخدام متغير البيئة <code
              class="literal">KDEB_PKGVERSION</code>.
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make deb-pkg LOCALVERSION=-falcot KDEB_PKGVERSION=$(make kernelversion)-1
</code></strong><code
              class="computeroutput">[...]
$ </code><strong
              class="userinput"><code>ls ../*.deb
</code></strong><code
              class="computeroutput">../linux-headers-3.16.7-ckt4-falcot_3.16.7-1_amd64.deb
../linux-image-3.16.7-ckt4-falcot_3.16.7-1_amd64.deb
../linux-image-3.16.7-ckt4-falcot-dbg_3.16.7-1_amd64.deb
../linux-libc-dev_3.16.7-1_amd64.deb
</code></pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.modules-build"></a>8.10.5. ترجمة الوحدات الخارجية</h3></div></div></div><a
            id="id-1.11.14.12.2"
            class="indexterm"></a><a
            id="id-1.11.14.12.3"
            class="indexterm"></a><a
            id="id-1.11.14.12.4"
            class="indexterm"></a><div
            class="para">
				تُطوّر بعض الوحدات خارج نواة لينكس الرسمية. لاستخدام هذه الوحدات، يجب ترجمتها مع النواة التي ستستخدم معها. هناك عدد من الوحدات الخارجية الشهيرة التي توفرها دبيان في حزم خاصة، مثل <span
              class="pkg pkg">xtables-addons-source</span> (وحدات iptables إضافية) أو <span
              class="pkg pkg">oss4-source</span>‏ (Open Sound System، تعاريف بديلة للصوت).
			</div><div
            class="para">
				هذه الوحدات الخارجية عديدة ومتنوعة ولا يمكننا ذكرها جميعاً هنا؛ قد يضيق الأمر <code
              dir="ltr"
              class="command">apt-cache search source$</code> مجال البحث. على أي حال، لن تفيد هذه القائمة كثيراً لعدم وجود سبب يدعو لترجمة الوحدات الخارجية إلا إذا كنت تعلم أنك تحتاجها. في هذه الحالات، سوف تذكر وثائق الجهاز نموذجياً الوحدات الخاصة التي تحتاجها حتى تعمل في لينكس.
			</div><div
            class="para">
				مثلاً، لنلق نظرة على الحزمة <span
              class="pkg pkg">xtables-addons-source</span>: بعد تثبيتها، نحصل على ملف <code
              dir="ltr"
              class="filename">.tar.bz2</code> يحوي أكواد الوحدة في المجلد <code
              class="filename">/usr/src/</code>. ومع أننا نستطيع فك الضغط عن الأرشيف وترجمة الوحدة بأنفسنا، إلا أننا نفضل أتمتة هذه العملية بكاملها باستخدام DKMS. توفر معظم الوحدات تكاملات DKMS المطلوبة في حزمة ينتهي اسمها باللاحقة <code
              dir="ltr"
              class="literal">-dkms</code>. في حالتنا، كل ما نحتاجه هو تثبيت الحزمة <span
              class="pkg pkg">xtables-addons-dkms</span> لترجمة الوحدة للنواة المستخدمة حالياً شرط أن تكون حزمة <span
              dir="ltr"
              class="pkg pkg">linux-headers-*</span> التي توافق نسخة النواة المثبتة موجودة على النظام. مثلاً، إذا استخدمت <span
              class="pkg pkg">linux-image-amd64</span>، عليك أيضاً تثبيت <span
              class="pkg pkg">linux-headers-amd64</span>.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>sudo apt install xtables-addons-dkms</code></strong>
<code
              class="computeroutput">
[...]
Setting up xtables-addons-dkms (2.6-1) ...
Loading new xtables-addons-2.6 DKMS files...
First Installation: checking all kernels...
Building only for 3.16.0-4-amd64
Building initial module for 3.16.0-4-amd64
Done.

xt_ACCOUNT:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/3.16.0-4-amd64/updates/dkms/
[...]
DKMS: install completed.
$ </code><strong
              class="userinput"><code>sudo dkms status</code></strong>
<code
              class="computeroutput">xtables-addons, 2.6, 3.16.0-4-amd64, x86_64: installed
$ </code><strong
              class="userinput"><code>sudo modinfo xt_ACCOUNT</code></strong>
<code
              class="computeroutput">filename:       /lib/modules/3.16.0-4-amd64/updates/dkms/xt_ACCOUNT.ko
license:        GPL
alias:          ipt_ACCOUNT
author:         Intra2net AG &lt;opensource@intra2net.com&gt;
description:    Xtables: per-IP accounting for large prefixes
[...]
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>بدائل</em></span> module-assistant</strong></p></div></div></div><a
              id="id-1.11.14.12.9.2"
              class="indexterm"></a><div
              class="para">
				قبل DKMS، كان <span
                class="pkg pkg">module-assistant</span> هو الحل الأبسط لبناء وتنصيب وحدات النواة. لا يزال استخدامه ممكناً، خصوصاً مع الحزم التي تفتقر لتكامل DKMS: فإذا استدعيت أمراً يشبه <code
                class="command">module-assistant auto-install xtables-addons</code> ( أو <code
                class="command">m-a a-i xtables-addons</code> اختصاراً)، سوف تترجم الوحدات للنواة الحالية، وتوضع في حزمة دبيان جديدة، وتُثبَّت تلك الحزمة مباشرة.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-patch"></a>8.10.6. ترقيع النواة</h3></div></div></div><a
            id="id-1.11.14.13.2"
            class="indexterm"></a><a
            id="id-1.11.14.13.3"
            class="indexterm"></a><div
            class="para">
				لا تتضمن النواة القياسية بعض المزايا لأنها غير ناضجة أو نتيجة بعض الخلافات مع مشرفي النواة. يمكن توزيع هذه المزايا كرقع يستطيع أي أحد تطبيقها على أكواد النواة إذا أراد.
			</div><div
            class="para">
				توزع دبيان بعض هذه الرقع في الحزم <span
              dir="ltr"
              class="pkg pkg">linux-patch-*</span> أو <span
              dir="ltr"
              class="pkg pkg">kernel-patch-*</span> (مثل <span
              class="pkg pkg">linux-patch-grsecurity2</span>، التي تضيّق بعض النواحي في سياسة النواة الأمنية). تُثبِّتُ هذه الحزم ملفات في المجلد <code
              class="filename">/usr/src/kernel-patches/</code>.
			</div><div
            class="para">
				إذا أردت تطبيق بعض من هذه الرقع، استخدم الأمر <code
              class="command">patch</code> في مجلد الأكواد المصدرية ثم ابدأ ترجمة النواة كما شرحنا سابقاً.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd ~/kernel/linux-source-3.16</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make clean</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>zcat /usr/src/kernel-patches/diffs/grsecurity2/grsecurity-3.0-3.17.1-201410250027.patch.gz | patch -p1</code></strong></pre><div
            class="para">
				لاحظ أنه لا يشترط أن تعمل أي رقعة مع جميع إصدارات النواة؛ قد يخفق الأمر <code
              class="command">patch</code> عند تطبيق بعض الرقع على أكواد النواة. ستعرض رسالة خطأ تعطي بعض التفاصيل عن سبب الإخفاق؛ في هذه الحالة، راجع الوثائق المتوفرة في حزمة الرقعة (في المجلد <code
              dir="ltr"
              class="filename">/usr/share/doc/linux-patch-*/</code>). في معظم الحالات، يذكر مشرف الحزمة إصدارات النواة التي أُعدَّت الرقعة لها.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>السابق</strong>8.9. الإعدادات الأخرى: مزامنة الوقت، السجلات، مشا...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>أعلى</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>البداية</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>التالي</strong>8.11. تثبيت النواة</a></li></ul></body></html>
