<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.10. Cadangan</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-id-ID-1.0-1" /><meta
        name="keywords"
        content="Boot sistem, Initscript, SSH, Telnet, Hak, Izin, Pengawasan, Inetd, Cron, Cadangan, Hotplug, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="Buku Panduan Administrator Debian" /><link
        rel="up"
        href="unix-services.html"
        title="Bab 9. Layanan Unix" /><link
        rel="prev"
        href="sect.quotas.html"
        title="9.9. Kuota" /><link
        rel="next"
        href="sect.hotplug.html"
        title="9.11. Hot Plugging: hotplug" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/id-ID/stable/sect.backup.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.quotas.html"><strong>Sebelumnya</strong></a></li><li
          class="home">Buku Panduan Administrator Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.hotplug.html"><strong>Lanjut</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.backup"></a>9.10. Cadangan</h2></div></div></div><div
          class="para">
			Membuat cadangan adalah salah satu tanggung jawab utama administrator manapun, tetapi itu adalah subjek yang kompleks, yang melibatkan alat yang seringkali sulit untuk dikuasai.
		</div><a
          id="id-1.12.13.3"
          class="indexterm"></a><a
          id="id-1.12.13.4"
          class="indexterm"></a><div
          class="para">
			Banyak program yang ada, seperti <code
            class="command">amanda</code>, <code
            class="command">bacula</code>, <code
            class="command">BackupPC</code>. Mereka adalah sistem klien/server yang menampilkan banyak pilihan, yang konfigurasi yang agak sulit. Beberapa diantaranya menyediakan antarmuka web yang ramah pengguna untuk mengurangi ini. Tapi Debian berisi puluhan perangkat lunak cadangan lain yang meliputi semua kemungkinan penggunaan kasus, yang Anda dapat Anda konfirmasi dengan mudah memakai <code
            class="command">apt-cache search backup</code>.
		</div><a
          id="id-1.12.13.6"
          class="indexterm"></a><a
          id="id-1.12.13.7"
          class="indexterm"></a><a
          id="id-1.12.13.8"
          class="indexterm"></a><div
          class="para">
			Daripada merinci beberapa dari mereka, artikel ini akan menyajikan pikiran para administrator Falcot Corp ketika mereka mendefinisikan strategi cadangan mereka.
		</div><div
          class="para">
			Di Falcot Corp, cadangan memiliki dua tujuan: memulihkan berkas yang salah hapus, dan cepat memulihkan komputer (server atau desktop) yang hard disknya gagal.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.12.13.11"></a>9.10.1. Back Up dengan <code
                    class="command">rsync</code></h3></div></div></div><div
            class="para">
				Cadangan pada tape telah dianggap terlalu lambat dan mahal, data akan disimpan pada hard drive dalam server terdedikasi, yang penggunaan RAID perangkat lunak (lihat <a
              class="xref"
              href="advanced-administration.html#sect.raid-soft">Bagian 12.1.1, “RAID Perangkat Lunak”</a>) akan melindungi data dari kegagalan hard drive. Komputer desktop tidak dibuat cadangannya secara individual, tetapi pengguna disarankan bahwa akun pribadi mereka pada server berkas departemen mereka yang akan dibackup. Perintah <code
              class="command">rsync</code> (dari paket dengan nama yang sama) digunakan sehari-hari untuk membuat cadangan server-server yang berbeda ini.
			</div><a
            id="id-1.12.13.11.3"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KEMBALI KE DASAR</em></span> Hard link, nama kedua untuk berkas</strong></p></div></div></div><a
              id="id-1.12.13.11.4.2"
              class="indexterm"></a><a
              id="id-1.12.13.11.4.3"
              class="indexterm"></a><div
              class="para">
				Hard link, sebagai lawan dari link simbolik, tidak bisa dibedakan dari berkas tertautnya. Membuat hard link pada dasarnya adalah sama dengan memberikan nama kedua pada berkas yang ada. Inilah sebabnya mengapa penghapusan hard link hanya menghapus salah satu dari nama-nama yang terkait dengan berkas. Selama nama lain masih diberikan ke berkas, data di dalamnya tetap ada pada sistem berkas. Hal ini menarik untuk dicatat bahwa, tidak seperti salinan, hard link tidak mengambil tambahan ruang pada hard drive.
			</div><div
              class="para">
				Hard link dibuat dengan perintah <code
                class="command">ln <em
                  class="replaceable">target</em> <em
                  class="replaceable">tautan</em></code>. Berkas <em
                class="replaceable">tautan</em> ini adalah nama baru untuk berkas <em
                class="replaceable">target</em>. Hard link hanya dapat dibuat pada sistem berkas yang sama, sementara link simbolik tidak tunduk pada pembatasan ini.
			</div></div><div
            class="para">
				Ruang hard drive yang tersedia melarang pelaksanaan pembuatan cadangan harian yang lengkap. Dengan demikian, perintah <code
              class="command">rsync</code> didahului oleh duplikasi konten cadangan sebelumnya dengan hard link, yang mencegah penggunaan terlalu banyak ruang hard drive. Proses <code
              class="command">rsync</code> kemudian hanya menggantikan berkas yang telah diubah sejak terakhir dibuat cadangan. Dengan mekanisme ini sejumlah besar cadangan akan disimpan dalam ruang yang kecil. Karena semua cadangan seketika tersedia dan dapat diakses (misalnya, di berbagai direktori bersama pada jaringan), Anda dapat dengan cepat membuat perbandingan antara dua tanggal yang diberikan.
			</div><a
            id="id-1.12.13.11.6"
            class="indexterm"></a><a
            id="id-1.12.13.11.7"
            class="indexterm"></a><a
            id="id-1.12.13.11.8"
            class="indexterm"></a><div
            class="para">
				Mekanisme pembuatan cadangan ini mudah diimplementasikan dengan program <code
              class="command">dirvish</code>. Menggunakan ruang penyimpanan cadangan ("bank" dalam kosa katanya) untuk menempatkan salinan set berkas cadangan yang diberi stempel waktu (set ini yang disebut "vault" dalam dokumentasi dirvish).
			</div><div
            class="para">
				Konfigurasi utama ada di berkas <code
              class="filename">/etc/dirvish/master.conf</code>. Itu mendefinisikan lokasi ruang penyimpanan cadangan, daftar "vault" yang dikelola, dan nilai default bagi kedaluwarsa cadangan. Sisa konfigurasi terletak di berkas <code
              class="filename"><em
                class="replaceable">bank</em>/<em
                class="replaceable">vault</em>/dirvish/default.conf</code> dan berisi konfigurasi spesifik untuk set berkas yang terkait.
			</div><div
            class="example"><a
              xmlns=""
              id="example.dirvish-master"></a><p
              class="title"><strong>Contoh 9.3. Berkas <code
                  class="filename">/etc/dirvish/master.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">bank:
    /backup
exclude:
    lost+found/
    core
    *~
Runall:
    root    22:00
expire-default: +15 days
expire-rule:
#   MIN HR    DOM MON       DOW  STRFTIME_FMT
    *   *     *   *         1    +3 months
    *   *     1-7 *         1    +1 year
    *   *     1-7 1,4,7,10  1</pre></div></div><div
            class="para">
				Pengaturan <code
              class="literal">bank</code> menunjukkan direktori di mana cadangan disimpan. Pengaturan <code
              class="literal">exclude</code> memungkinkan Anda untuk menunjukkan berkas (atau jenis berkas) yang dikecualikan dari cadangan. <code
              class="literal">Runall</code> adalah daftar set berkas yang akan dibuat cadangannya dengan sebuah stempel waktu untuk setiap set, yang memungkinkan Anda untuk menetapkan tanggal yang benar yang akan disalin, dalam kasus cadangan tidak dipicu pada tepat waktu yang ditetapkan. Anda harus menunjukkan waktu yang tepat sebelum waktu eksekusi yang sebenarnya (yang, secara default, 22:04 di Debian, menurut <code
              class="filename">/etc/cron.d/dirvish</code>). Akhirnya, pengaturan <code
              class="literal">expire-default</code> dan <code
              class="literal">expire-rule</code> menetapkan kebijakan kedaluwarsa untuk cadangan. Contoh di atas menyimpan selamanya cadangan yang dihasilkan pada hari Minggu pertama setiap kuartal, menghapus setelah satu tahun dari hari Minggu pertama setiap bulan, dan setelah 3 bulan dari hari Minggu lainnya. Cadangan harian lainnya disimpan selama 15 hari. Urutan aturan penting, Dirvish menggunakan aturan terakhir yang cocok, atau <code
              class="literal">expire-default</code> jika tidak ada <code
              class="literal">expire-rule</code> yang cocok.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DALAM PRAKTEK</em></span> Kedaluwarsa terjadwal</strong></p></div></div></div><div
              class="para">
				Aturan kedaluwarsa tidak digunakan oleh <code
                class="command">dirvish-expire</code> untuk melakukan tugasnya. Pada kenyataannya, aturan kedaluwarsa diterapkan ketika membuat salinan cadangan baru untuk menentukan tanggal kedaluwarsa yang terkait dengan salinan itu. <code
                class="command">dirvish-expire</code> cukup memeriksa salinan disimpan dan menghapus berkas yang tanggal kedaluwarsanya telah berlalu.
			</div></div><div
            class="example"><a
              xmlns=""
              id="example.dirvish-vault"></a><p
              class="title"><strong>Contoh 9.4. Berkas <code
                  class="filename">/backup/root/dirvish/default.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">client: rivendell.falcot.com
tree: /
xdev: 1
index: gzip
image-default: %Y%m%d
exclude:
    /var/cache/apt/archives/*.deb
    /var/cache/man/**
    /tmp/**
    /var/tmp/**
    *.bak</pre></div></div><div
            class="para">
				The above example specifies the set of files to back up: these are files on the machine <span
              class="emphasis"><em>rivendell.falcot.com</em></span> (for local data backup, simply specify the name of the local machine as indicated by <code
              class="command">hostname</code>), especially those in the root tree (<code
              class="literal">tree: /</code>), except those listed in <code
              class="literal">exclude</code>. The backup will be limited to the contents of one filesystem (<code
              class="literal">xdev: 1</code>). It will not include files from other mount points. An index of saved files will be generated (<code
              class="literal">index: gzip</code>), and the image will be named according to the current date (<code
              class="literal">image-default: %Y%m%d</code>).
			</div><div
            class="para">
				Ada banyak pilihan yang tersedia, semua didokumentasikan di halaman manual <span
              class="citerefentry"><span
                class="refentrytitle">dirvish.conf</span>(5)</span>. Setelah berkas konfigurasi ini disiapkan, Anda mesti menginisialisasi setiap set berkas dengan perintah <code
              class="command">dirvish --vault <em
                class="replaceable">vault</em>--init</code>. Selanjutnya dari sana eksekusi harian <code
              class="command">dirvish-runall</code> akan secara otomatis membuat salinan cadangan baru setelah menghapus yang kedaluwarsa.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DALAM PRAKTEK</em></span> Cadangan remote melalui SSH</strong></p></div></div></div><div
              class="para">
				When dirvish needs to save data to a remote machine, it will use <code
                class="command">ssh</code> to connect to it, and will start <code
                class="command">rsync</code> as a server. This requires the root user to be able to automatically connect to it. The use of an SSH authentication key allows precisely that (see <a
                class="xref"
                href="sect.remote-login.html#sect.ssh-key-based-auth">Bagian 9.2.1.1, “Otentikasi Berbasis Kunci”</a>).
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.12.13.12"></a>9.10.2. Memulihkan Mesin tanpa Cadangan</h3></div></div></div><div
            class="para">
				Desktop komputer, yang tidak di backup, akan sangat mudah untuk diinstal ulang dari DVD-ROM kustom yang disiapkan dengan <span
              class="emphasis"><em>Simple-CDD</em></span> (lihat <a
              class="xref"
              href="sect.automated-installation.html#sect.simple-cdd">Bagian 12.3.3, “Simple-CDD: Solusi Semua-Jadi-Satu”</a>). Karena ini melakukan instalasi dari awal, itu kehilangan kustomisasi apapun yang mungkin telah dibuat setelah instalasi awal. Ini tidak apa karena semua sistem terhubung ke direktori LDAP pusat untuk akun dan sebagian besar aplikasi desktop yang telah diprakonfigurasikan berkat dconf (lihat <a
              class="xref"
              href="sect.graphical-desktops.html#sect.gnome-desktop">Bagian 13.3.1, “GNOME”</a> untuk informasi lebih lanjut tentang ini).
			</div><div
            class="para">
				Para administrator Falcot Corp menyadari batas kebijakan cadangan mereka. Karena mereka tidak bisa melindungi server cadangan serta tape di tempat yang aman yang tahan api, mereka telah terinstal di ruang yang terpisah sehingga bencana seperti kebakaran pada ruang server tidak akan menghancurkan backup bersama dengan segala sesuatu yang lain. Selain itu, mereka melakukan backup incremental pada DVD-ROM sekali per minggu — hanya berkas yang telah dimodifikasi sejak cadangan terakhir yang disertakan.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>LEBIH LANJUT</em></span> Membuat cadangan layanan LDAP dan SQL</strong></p></div></div></div><div
              class="para">
				Banyak layanan (seperti basis data LDAP atau SQL) tidak dapat dibuat cadangannya hanya dengan menyalin berkas-berkas mereka (kecuali mereka dihentikan dengan benar selama penciptaan cadangan, yang seringkali bermasalah, karena mereka dimaksudkan untuk menjadi tersedia setiap saat). Dengan demikian, perlu menggunakan mekanisme "ekspor" untuk membuat "curah data" yang dapat dengan aman dibuat cadangannya. Ini sering cukup besar, tetapi mereka juga dapat dimampatkan. Untuk mengurangi ruang penyimpanan yang diperlukan, Anda akan hanya menyimpan berkas teks lengkap per minggu, dan <code
                class="command">diff</code> setiap hari, yang dibuat dengan perintah jenis <code
                class="command">diff <em
                  class="replaceable">berkas_kemarin</em> <em
                  class="replaceable">berkas_hari_ini</em></code>. Program <code
                class="command">xdelta</code> menghasilkan perbedaan inkremental dari curah biner.
			</div><a
              id="id-1.12.13.12.4.3"
              class="indexterm"></a><a
              id="id-1.12.13.12.4.4"
              class="indexterm"></a><a
              id="id-1.12.13.12.4.5"
              class="indexterm"></a></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KULTUR</em></span> <span
                        class="emphasis"><em>TAR</em></span>, standar untuk cadangan tape</strong></p></div></div></div><a
              id="id-1.12.13.12.5.2"
              class="indexterm"></a><a
              id="id-1.12.13.12.5.3"
              class="indexterm"></a><a
              id="id-1.12.13.12.5.4"
              class="indexterm"></a><div
              class="para">
				Secara historis, cara paling sederhana untuk membuat cadangan pada Unix adalah untuk menyimpan arsip <span
                class="emphasis"><em>TAR</em></span> pada tape. Perintah <code
                class="command">tar</code> bahkan mendapat namanya dari "Tape ARchive".
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.quotas.html"><strong>Sebelumnya</strong>9.9. Kuota</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Induk</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Depan</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hotplug.html"><strong>Lanjut</strong>9.11. Hot Plugging: hotplug</a></li></ul></body></html>
