<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="network-services" lang="id-ID">
	<chapterinfo>
		 <keywordset>
			<keyword>Postfix</keyword>
			 <keyword>Apache</keyword>
			 <keyword>NFS</keyword>
			 <keyword>Samba</keyword>
			 <keyword>Squid</keyword>
			 <keyword>OpenLDAP</keyword>
			 <keyword>SIP</keyword>

		</keywordset>

	</chapterinfo>
	 <title>Layanan Jaringan: Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN</title>
	 <highlights> <para>
		Layanan jaringan adalah program-program yang berinteraksi secara langsung dengan para pengguna dalam pekerjaan mereka sehari-hari. Mereka adalah puncak gunung es sistem informasi, dan bab ini akan memfokuskan pada mereka; bagian tak terlihat tempat mereka bertumpu adalah infrastruktur yang sudah kita terangkan sebelumnya.
	</para>
	 <para>
		Kebanyakan layanan jaringan moderm memerlukan teknologi enkripsi agar beroperasi secara aman dan terpercaya, khususnya ketika digunakan pada internet publik. Sertifikat X.509 (yang mana dapat direferensikan sebagai Sertifikat SSL atau Sertifikat TLS) sering digunakan untuk tujuan ini. Sebuah sertifikat untuk domain tertentu seringkali dapat berbagi antara lebih dari satu layanan dibahas pada bagian ini.
	</para>
	 <indexterm>
		<primary>TLS</primary>
	</indexterm>
	 <indexterm>
		<primary>X.509</primary>
	</indexterm>
	 <indexterm>
		<primary>Sertifikat</primary>
	</indexterm>
	 </highlights> <section id="sect.smtp-mail-server">
		<title>Server Mail</title>
		 <para>
			Administrator Falcot Corp memilih Postfix untuk server surel elektroniknya, karena keandalan dan kemudahan konfigurasinya. Memang, desainnya memberlakukan bahwa setiap tugas diimplementasikan dalam sebuah proses dengan seperangkat izin minimum yang dibutuhkan, yang merupakan langkah mitigasi yang besar terhadap masalah keamanan.
		</para>
		 <indexterm>
			<primary>surel</primary>
			<secondary>server</secondary>
		</indexterm>
		 <indexterm>
			<primary>server surel</primary>
		</indexterm>
		 <indexterm>
			<primary>Postfix</primary>
		</indexterm>
		 <sidebar> <title><emphasis>ALTERNATIF</emphasis> Server Exim4</title>
		 <indexterm>
			<primary>Exim</primary>
		</indexterm>
		 <para>
			Debian menggunakan Exim4 sebagai peladen posel bawaan (instalasi awal menyertakan Exim4). Konfigurasi disediakan oleh paket yang terpisah, <emphasis role="pkg">exim4-config</emphasis>, dan diatur secara otomatis berdasarkan jawaban dari pertanyaan Debconf yang mirip dengan pertanyaan yang diajukan oleh paket <emphasis role="pkg">postfix</emphasis>.
		</para>
		 <para>
			Konfigurasi dapat berupa berkas tunggal (<filename>/etc/exim4/exim4.conf.template</filename>) atau terpecah dalam beberapa potongan konfigurasi tersimpan di bawah <filename>/etc/exim4/conf.d/</filename>. Keduanya, berkas tersebut digunakan olehperintah <command>update-exim4.conf</command> sebagai palet untuk menghasilkan <filename>/var/lib/exim4/config.autogenerated</filename>. Yang terakhir adalah berkas yang digunakan oleh Exim4. Berkat mekanisme ini, nilai yang dihasilkan melalui konfigurasi debconf Exim --yang tersimpan dalam <filename>/etc/exim4/update-exim4.conf.conf</filename>-- dapat disuntikkan ke dalam berkas konfigurasi Exim, bahkan ketika administrator atau paket lain telah mengubah konfigurasi bawaan Exim.
		</para>
		 <para>
			Sintaks berkas konfigurasi Exim4 memiliki kekhasan dan kurva belajarnya; namun, begitu keanehan ini dipahami, Exim4 merupakan peladen surel yang sangat lengkap dan hebat, yang dibuktikan dengan puluhan halaman dokumentasi. <ulink type="block" url="http://www.exim.org/docs.html" />
		</para>
		 </sidebar> <section>
			<title>Instalasi Postfix</title>
			 <para>
				Paket <emphasis role="pkg">postfix</emphasis> menyertakan daemon SMTP utama. Paket lain (seperti <emphasis role="pkg">postfix-ldap</emphasis> dan <emphasis role="pkg">postfix-pgsql</emphasis>) menambahkan fungsionalitas tambahakan ke Postfix, termasuk mengakses basisdata terpetakan. Anda hanya perlu menginstallnya jika Anda tahu Anda memerlukannya.
			</para>
			 <sidebar id="sidebar.smtp"> <title><emphasis>KEMBALI KE DASAR</emphasis> SMTP</title>
			 <indexterm>
				<primary>SMTP</primary>
			</indexterm>
			 <indexterm>
				<primary>Simple Mail Transfer Protocol</primary>
			</indexterm>
			 <indexterm>
				<primary>peladen</primary>
				<secondary>SMTP</secondary>
			</indexterm>
			 <para>
				SMTP (<emphasis>Simple Mail Transfer Protocol</emphasis>) protokol yang digunakan oleh peladen posel untuk bertukar dan mengarahkan posel.
			</para>
			 </sidebar> <para>
				Beberapa pertanyaan Debconf ditanyakan saat instalasi paket tersebut. Jawabannya memungkinkan menghasilkan versi pertama berkas konfigurasi <filename>/etc/postfix/main.cf</filename>.
			</para>
			 <para>
				Pertanyaan pertama berkaitan dengan jenis pengaturan. Hanya dua jawaban relevan yang diajukan jika ada server yang tersambung ke internet, "situs internet" dan "internet dengan smarthost". Yang pertama sesuai untuk server yang menerima email masuk dan mengirim email keluar langsung ke penerimanya, dan karenanya cocok untuk kasus Falcot Corp. Yang terakhir ini sesuai untuk server yang menerima email masuk secara normal, namun mengirimkan email keluar melalui server SMTP menengah — ”smarthost” — bukan langsung ke server penerima. Ini sangat berguna bagi individu dengan alamat IP dinamis, karena banyak server email menolak pesan yang datang langsung dari alamat IP semacam itu. Dalam kasus ini, smarthost biasanya adalah SMTP server milik ISP, yang selalu dikonfigurasi untuk menerima email dari pelanggan ISP dan meneruskannya dengan tepat. Pengaturan ini (dengan smarthost) selalu relevan untuk server yang tidak terhubung secara permanen ke internet, karena menghindari harus mengatur antrian pesan tidak terkirim yang perlu dicoba ulang di waktu yang lain.
			</para>
			 <sidebar> <title><emphasis>KOSAKATA</emphasis> ISP</title>
			 <indexterm>
				<primary>ISP, Internet Service Provider, Penyedia Layanan Internet</primary>
			</indexterm>
			 <para>
				ISP merupakan akronim dari "Internet Service Provider" (penyedia layanan internet). Sebuah entitas, seringkali berupa perusaan komersial, yang menyediakan koneksi internet dan layanan dasar yang sesuai (email, berita, dan lain-lain).
			</para>
			 <para>
			</para>
			 </sidebar> <para>
				Pertanyaan kedua berkaitan dengan nama lengkap mesin, digunakan untuk menghasilkan alamat email dari nama pengguna lokal; nama lengkap mesin sebagai bagian setelah simbol-at ("@"). Dalam kasus Falcot, jawabannya seharusnya <literal>mail.falcot.com</literal>. Pertanyaan ini yang diajukan secara default, namun konfigurasi yang diembannya tidak cukup lengkap untuk kebutuhan Falcot, karenanya administrator menjalankan perintah <command>dpkg-reconfigure postfix</command> agar dapat menyesuaikan lebih banyak parameter.
			</para>
			 <para>
				Salah satu pertanyaan tambahan yang diajukan untuk semua nama domain yang berhubungan dengan mesin. Daftar bawaan yang menyertakan nama lengkapnya sebagaimana sedikit padanan untuk <literal>localhost</literal>, namun domain utama <literal>falcot.com</literal> perlu ditambahkan sendiri. Lebih umumnya, pertanyaan ini seharusnya biasanya dijawab dengan seluruh nama domain yang mana mesin ini seharusnya melayani sebagai sebuah MX server; dengan kata lain, seluruh nama domain yang mana disebutkan DNS bahwa mesin ini akan menerima surel. Informasi ini berpangkal pada variabel <literal>mydestination</literal> pada berkas konfigurasi Postfix — <filename>/etc/postfix/main.cf</filename>.
			</para>
			 <indexterm>
				<primary>peladen</primary>
				<secondary>MX</secondary>
			</indexterm>
			 <indexterm>
				<primary>MX</primary>
				<secondary>peladen</secondary>
			</indexterm>
			 <figure>
				<title>Aturan record DNS <emphasis>MX</emphasis> saat mengirimkan surel</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/mail-server.png" format="PNG" scalefit="1" width="60%" />
					</imageobject>

				</mediaobject>

			</figure>
			 <sidebar> <title><emphasis>EXTRA</emphasis> Query record MX</title>
			 <para>
				Ketika DNS tidak memilik record MX untuk sebuah domain, peladen surel akan mencoba mengirim pesan ke host-nya sendiri, dengan menggunakan record A (atau AAAA dalam IPv6).
			</para>
			 </sidebar> <para>
				Dalam beberapa kasus, instalasi juga dapat meminta jaringan apa yang harus diperbolehkan untuk mengirim surel melalui mesin. Dengan konfigurasi default, Postfix hanya menerima surel yang datang dari mesin itu sendiri; jaringan lokal biasanya akan ditambahkan. Administrator Falcot Corp menambahkan <literal>192.168.0.0/16</literal> ke jawaban default. Jika pertanyaan itu tidak muncul, variabel yang relevan dalam berkas konfigurasi adalah <literal>mynetworks</literal>, seperti yang terlihat dalam contoh di bawah ini.
			</para>
			 <para>
				Surel lokal juga dapat dikirimkan melalui <command>procmail</command>. Alat ini memungkinkan pengguna untuk memilah surel masuk mereka menurut aturan yang disimpan dalam berkas <filename>~/.procmailrc</filename> mereka.
			</para>
			 <indexterm>
				<primary><command>procmail</command></primary>
			</indexterm>
			 <indexterm>
				<primary>surel</primary>
				 <secondary>penyaringan</secondary>
			</indexterm>
			 <indexterm>
				<primary>menyaring surel</primary>
			</indexterm>
			 <para>
				Setelah langkah pertama ini, para administrator mendapat berkas konfigurasi berikut; ini akan digunakan sebagai titik awal untuk menambahkan beberapa fungsi tambahan di bagian berikutnya.
			</para>
			 <example>
				<title>Berkas<filename>/etc/postfix/main.cf</filename> awal</title>
				 
<programlisting>
# See /usr/share/postfix/main.cf.dist for a commented, more complete version


# Debian specific:  Specifying a file name will cause the first
# line of that file to be used as the name.  The Debian default
# is /etc/mailname.
#myorigin = /etc/mailname

smtpd_banner = $myhostname ESMTP $mail_name (Debian/GNU)
biff = no

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate "delayed mail" warnings
#delay_warning_time = 4h

readme_directory = no

# TLS parameters
smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
smtpd_use_tls=yes
smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache

# See /usr/share/doc/postfix/TLS_README.gz in the postfix-doc package for
# information on enabling SSL in the smtp client.

smtpd_relay_restrictions = permit_mynetworks permit_sasl_authenticated defer_unauth_destination
myhostname = mail.falcot.com
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = mail.falcot.com, falcot.com, localhost.localdomain, localhost
relayhost = 
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 192.168.0.0/16
mailbox_command = procmail -a "$EXTENSION"
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all
inet_protocols = all</programlisting>

			</example>
			 <sidebar> <title><emphasis>KEAMANAN</emphasis> Sertifikat SSL <emphasis>Snake oil</emphasis></title>
			 <para>
				Sertifikat <emphasis>minyak ular</emphasis>, seperti "obat" <emphasis>minyak ular</emphasis> yang dijual oleh dukun palsu di jaman dahulu, benar-benar tidak memiliki nilai: Anda tidak dapat mengandalkan mereka untuk mengotentikasi server karena mereka sertifikat yang ditandatangani sendiri yang dihasilkan secara otomatis. Namun mereka sangat berguna untuk meningkatkan privasi pertukaran.
			</para>
			 <para>
				Pada umumnya mereka hanya boleh digunakan untuk tujuan pengujian, dan layanan normal harus menggunakan sertifikat nyata; ini dapat dihasilkan dengan prosedur yang dijelaskan dalam <xref linkend="sect.easy-rsa" />.
			</para>
			 </sidebar>
		</section>
		 <section id="sect.configuring-virtual-domains">
			<title>Mengkonfigurasi Domain Virtual</title>
			 <indexterm>
				<primary>domain</primary>
				<secondary>virtual</secondary>
			</indexterm>
			 <indexterm>
				<primary>domain virtual</primary>
			</indexterm>
			 <para>
				Server surat dapat menerima surel yang ditujukan kepada domain lain selain domain utama; ini kemudian dikenal sebagai domain virtual. Dalam kebanyakan kasus di mana hal ini terjadi, surel pada akhirnya tidak ditujukan ke pengguna lokal. Postfix menyediakan dua fitur menarik untuk menangani virtual domain.
			</para>
			 <sidebar> <title><emphasis>HATI-HATI</emphasis> Domain virtual dan domain kanonik</title>
			 <para>
				Tak satu pun dari domain virtual boleh dirujuk dalam variabel <literal>mydestination</literal>; variabel ini hanya berisi nama-nama domain "kanonik" yang secara langsung terkait dengan mesin dan pengguna lokal.
			</para>
			 </sidebar> <section>
				<title>Domain Alias Virtual</title>
				 <indexterm>
					<primary>alias</primary>
					<secondary>domain alias virtual</secondary>
				</indexterm>
				 <indexterm>
					<primary>domain virtual</primary>
					<secondary>domain alias virtual</secondary>
				</indexterm>
				 <para>
					Suatu domain alias virtual hanya berisi alias, yaitu alamat-alamat yang hanya meneruskan surel ke alamat lain.
				</para>
				 <para>
					Domain seperti itu diaktifkan dengan menambahkan nama ke variabel <literal>virtual_alias_domains</literal>, dan mereferensi berkas pemetaan alamat dalam variabel <literal>virtual_alias_maps</literal>.
				</para>
				 <example>
					<title>Direktif yang ditambahkan dalam berkas <filename>/etc/postfix/main.cf</filename></title>
					 
<programlisting>
virtual_alias_domains = falcotsbrand.com
virtual_alias_maps = hash:/etc/postfix/virtual</programlisting>

				</example>
				 <para>
					Berkas <filename>/etc/postfix/virtual</filename> menjelaskan pemetaan dengan sintaks yang agak sederhana: setiap baris berisi dua field yang dipisahkan oleh spasi; field pertama adalah nama alias, field kedua adalah daftar alamat surel tujuan pengalihan. Sintaks khusus <literal>@domain.com</literal> mencakup semua sisa alias dalam suatu domain.
				</para>
				 <example>
					<title>Contoh berkas <filename>/etc/postfix/virtual</filename></title>
					 
<programlisting>
webmaster@falcotsbrand.com  jean@falcot.com
contact@falcotsbrand.com    laure@falcot.com, sophie@falcot.com
# The alias below is generic and covers all addresses within 
# the falcotsbrand.com domain not otherwise covered by this file.
# These addresses forward email to the same user name in the
# falcot.com domain.
@falcotsbrand.com           @falcot.com</programlisting>

				</example>

			</section>
			 <section>
				<title>Domain Kotak Surat Virtual</title>
				 <sidebar> <title><emphasis>HATI-HATI</emphasis> Gabungan domain virtual?</title>
				 <para>
					Postfix tidak mengizinkan menggunakan domain yang sama sekaligus di <literal>virtual_alias_domains</literal> dan <literal>virtual_mailbox_domains</literal>. Namun, setiap domain <literal>virtual_mailbox_domains</literal> secara implisit dimasukkan ke dalam <literal>virtual_alias_domains</literal>, yang memungkinkan untuk mencampur alias dan kotak surat dalam suatu domain virtual.
				</para>
				 </sidebar> <indexterm>
					<primary>kotak surat, domain virtual</primary>
				</indexterm>
				 <indexterm>
					<primary>domain virtual</primary>
					<secondary>domain kotak surat virtual</secondary>
				</indexterm>
				 <para>
					Pesan-pesan yang ditujukan ke kotak surat domain virtual disimpan dalam kotak surat yang tidak ditugaskan ke pengguna sistem lokal.
				</para>
				 <para>
					Memfungsikan kotak surat domain virtual memerlukan menamai domain ini dalam variabel <literal>virtual_mailbox_domains</literal>, dan mereferensi ke berkas pemetaan kotak surat di <literal>virtual_mailbox_maps</literal>. Parameter <literal>virtual_mailbox_base</literal> berisi direktori di mana kotak pesan akan disimpan.
				</para>
				 <para>
					Parameter <literal>virtual_uid_maps</literal> (dan <literal>virtual_gid_maps</literal>) mengacu ke berkas yang berisi pemetaan antara alamat surel dan sistem pengguna (dan kelompok) yang "memiliki" kotak surat yang sesuai. Agar semua kotak surat dimiliki oleh pemilik/kelompok yang sama, sintaks <literal>static:5000</literal> menetapkan UID/GID tertentu (yang bernilai 5000 di sini).
				</para>
				 <example>
					<title>Direktif yang ditambahkan dalam berkas <filename>/etc/postfix/main.cf</filename></title>
					 
<programlisting>
virtual_mailbox_domains = falcot.org
virtual_mailbox_maps = hash:/etc/postfix/vmailbox
virtual_mailbox_base = /var/mail/vhosts</programlisting>

				</example>
				 <para>
					Sekali lagi, sintaks berkas <filename>/etc/postfix/vmailbox</filename> cukup sederhana: dua field dipisahkan dengan spasi. Field pertama adalah alamat surel dalam salah satu domain virtual, dan field kedua adalah lokasi kotak surat yang terkait (relatif terhadap direktori yang ditentukan dalam <emphasis>virtual_mailbox_base</emphasis>). Jika nama kotak surat berakhir dengan garis miring (<literal>/</literal>), surel akan disimpan dalam format <emphasis>maildir</emphasis>; jika tidak, format tradisional <emphasis>mbox</emphasis> akan digunakan. Format <emphasis>maildir</emphasis> menggunakan seluruh direktori untuk menyimpan kotak surat, masing-masing pesan disimpan dalam berkas terpisah. Dalam format <emphasis>mbox</emphasis>, seluruh kotak surat disimpan dalam satu berkas, dan setiap baris yang dimulai dengan "<literal>From </literal>" (<literal>From</literal> diikuti dengan spasi) menandai awal pesan baru.
				</para>
				 <example>
					<title>Berkas <filename>/etc/postfix/vmailbox</filename></title>
					 
<programlisting>
# Surel Jean disimpan sebagai maildir, dengan
# satu berkas per surel dalam suatu direktori
# terdedikasi
jean@falcot.org falcot.org/jean/
# Surel Sophie's disimpan dalam suatu berkas "mbox"
# tradisional dengan semua surel disambung ke dalam
# satu berkas tunggal
sophie@falcot.org falcot.org/sophie</programlisting>

				</example>

			</section>

		</section>
		 <section id="sect.restrictions-for-receiving-and-sending">
			<title>Pembatasan Penerimaan dan Pengiriman</title>
			 <para>
				Meningkatnya jumlah surel massal yang tidak diminta (<emphasis>spam</emphasis>) memerlukan menjadi semakin ketat ketika memutuskan surel mana yang mesti diterima oleh server. Bagian ini menyajikan beberapa strategi yang termasuk dalam Postfix.
			</para>
			 <sidebar> <title><emphasis>KULTUR</emphasis> Masalah spam</title>
			 <indexterm>
				<primary>spam</primary>
			</indexterm>
			 <para>
				"Spam" adalah istilah umum yang digunakan untuk menamai semua surel komersial yang tidak diinginkan (juga dikenal sebagai UCE) yang membanjiri kotak surat elektronik kita; individu-individu yang tidak bermoral yang mengirim mereka dikenal sebagai spammer. Mereka tidak peduli tentang gangguan yang mereka sebabkan, karena mengirimkan surel biayanya sangat rendah, dan hanya persentase yang sangat kecil dari penerima yang perlu tertarik dengan tawaran agar operasi spam menghasilkan lebih daripada biaya. Prosesnya kebanyakan otomatis, dan alamat surel yang dibuat publik (misalnya, di forum web, atau di arsip milis, atau di blog, dan sebagainya) akan ditemukan oleh robot spammer, dan menjadi sasaran pesan tak diharapkan yang tidak pernah berakhir.
			</para>
			 <para>
				Semua administrator sistem mencoba untuk menghadapi gangguan dengan filter spam, tapi tentu saja spammer terus menyesuaikan diri dengan mencoba menghindari filter ini. Beberapa bahkan menyewa jaringan mesin yang terkompromi oleh worm dari berbagai sindikat kejahatan. Statistik baru-baru ini memperkirakan bahwa hingga 95% dari semua surel yang beredar di Internet adalah spam!
			</para>
			 </sidebar> <section>
				<title>Pembatasan Akses Berbasis IP</title>
				 <para>
					Direktif <literal>smtpd_client_restrictions</literal> mengendalikan mesin mana yang diperbolehkan untuk berkomunikasi dengan server surel.
				</para>
				 <example>
					<title>Pembatasan Berbasis Alamat Klien</title>
					 
<programlisting>
smtpd_client_restrictions = permit_mynetworks,
    warn_if_reject reject_unknown_client,
    check_client_access hash:/etc/postfix/access_clientip,
    reject_rbl_client sbl-xbl.spamhaus.org,
    reject_rbl_client list.dsbl.org</programlisting>

				</example>
				 <para>
					Ketika suatu variabel berisi daftar aturan, seperti pada contoh di atas, aturan-aturan ini dievaluasi berurutan, dari pertama sampai terakhir. Setiap aturan dapat menerima pesan, menolak, atau menyerahkan keputusan ke aturan berikutnya. Sebagai akibatnya, urutan penting, dan sekedar mempertukarkan dua aturan dapat menyebabkan perilaku yang sangat berbeda.
				</para>
				 <para>
					Direktif <literal>permit_mynetworks</literal>, yang digunakan sebagai aturan pertama, menerima semua surel yang datang dari mesin jaringan lokal (seperti yang didefinisikan oleh variabel konfigurasi <emphasis>mynetworks</emphasis>).
				</para>
				 <para>
					Direktif kedua biasanya akan menolak surel yang datang dari mesin tanpa konfigurasi DNS yang sepenuhnya valid. Sebuah konfigurasi yang valid berarti bahwa alamat IP dapat di-resolve ke suatu nama, dan bahwa nama ini, pada gilirannya, di-resolve ke alamat IP. Pembatasan ini sering terlalu ketat, karena banyak server surel yang tidak memiliki reverse DNS untuk alamat IP mereka. Ini menjelaskan mengapa para administrator Falcot mengawali pengubah <literal>warn_if_reject</literal> ke direktif <literal>reject_unknown_client</literal>: pengubah ini mengubah penolakan menjadi peringatan sederhana yang tercatat dalam log. Administrator dapat kemudian mengawasi jumlah pesan yang akan ditolak jika aturan yang benar-benar ditegakkan, dan membuat keputusan kemudian jika mereka ingin memberlakukan aturan itu.
				</para>
				 <sidebar> <title><emphasis>TIP</emphasis> tabel <emphasis>access</emphasis></title>
				 <para>
					Kriteria pembatasan termasuk tabel yang dapat dimodifikasi oleh administrator berisi daftar kombinasi pengirim, alamat IP, dan nama host yang diperbolehkan atau dilarang. Tabel ini dapat dibuat dari salinan berkas terkompresi <filename>/usr/share/doc/postfix-doc/examples/access.gz</filename>. Model ini didokumentasikan mandiri dalam komentar, yang berarti setiap tabel menjelaskan sintaksnya sendiri.
				</para>
				 <para>
					Tabel <filename>/etc/postfix/access_clientip</filename> menampung daftar alamat IP dan jaringan; <filename>/etc/postfix/access_helo</filename> berisi daftar nama domain; <filename>/etc/postfix/access_sender</filename> berisi alamat surel pengirim. Semua berkas ini harus diubah menjadi tabel hash (format yang dioptimalkan untuk akses cepat) setelah setiap perubahan, dengan perintah <command>postmap /etc/postfix/<replaceable>berkas</replaceable></command>.
				</para>
				 </sidebar> <para>
					Direktif ketiga memungkinkan administrator untuk mengatur blacklist dan whitelist server surel, disimpan dalam berkas <filename>/etc/postfix/access_clientip</filename>. Server di whitelist dianggap sebagai dipercaya, dan surel yang datang dari sana tidak diperiksa memakai aturan penyaringan berikut.
				</para>
				 <para>
					Dua aturan terakhir menolak pesan yang berasal dari server yang tercantum dalam salah satu blacklist yang ditunjukkan. RBL adalah akronim untuk <emphasis>Remote Black List</emphasis>; ada beberapa daftar seperti itu, tetapi mereka semua memuat daftar server yang dikonfigurasi secara buruk yang dipakai oleh spammer untuk me-relay surel mereka, maupun pe-relay surel yang tak terduga seperti mesin-mesin yang terinfeksi worm atau virus.
				</para>
				 <indexterm>
					<primary>RBL</primary>
				</indexterm>
				 <indexterm>
					<primary>Remote Black List</primary>
				</indexterm>
				 <sidebar> <title><emphasis>TIPS</emphasis> Daftar putih dan RBL</title>
				 <para>
					Blacklist kadang-kadang mencakup server sah yang telah mengalami insiden. Dalam situasi ini, semua surel yang datang dari salah satu server tersebut akan ditolak kecuali apabila server tercantum dalam daftar putih yang didefinisikan oleh <filename>/etc/postfix/access_clientip</filename>.
				</para>
				 <para>
					Kehati-hatian karena itu merekomendasikan memasukkan di whitelist semua server terpercaya yang biasanya kita terima banyak surel dari mereka.
				</para>
				 </sidebar>
			</section>
			 <section>
				<title>Memeriksa Validitas Perintah <literal>EHLO</literal> atau <literal>HELO</literal></title>
				 <para>
					Setiap pertukaran SMTP dimulai dengan perintah <literal>HELO</literal> (atau <literal>EHLO</literal>), diikuti oleh nama server email pengirim; memeriksa validitas nama ini bisa menarik.
				</para>
				 <indexterm>
					<primary><literal>HELO</literal></primary>
				</indexterm>
				 <indexterm>
					<primary><literal>EHLO</literal></primary>
				</indexterm>
				 <example>
					<title>Pembatasan pada nama yang diumumkan di <literal>EHLO</literal></title>
					 
<programlisting>
smtpd_helo_restrictions = permit_mynetworks,
    reject_invalid_hostname,
    check_helo_access hash:/etc/postfix/access_helo,
    reject_non_fqdn_hostname,
    warn_if_reject reject_unknown_hostname</programlisting>

				</example>
				 <para>
					Direktir <literal>permit_mynetworks</literal> pertama memungkinkan semua mesin di jaringan lokal untuk memperkenalkan diri dengan bebas. Hal ini penting, karena beberapa program email tidak menghormati bagian dari protokol SMTP ini secara cukup memadai, dan mereka dapat memperkenalkan diri dengan nama-nama yang tidak masuk akal.
				</para>
				 <para>
					Aturan <literal>reject_invalid_hostname</literal> menolak surel ketika <literal>EHLO</literal> mengumumkan daftar nama host yang secara sintaksis salah. Aturan <literal>reject_non_fqdn_hostname</literal> menolak pesan ketika nama host yang diumumkan bukan fully-qualified domain name (yang memuat nama domain maupun nama host). Aturan <literal>reject_unknown_hostname</literal> menolak pesan jika nama yang diumumkan tidak ada di DNS. Karena aturan terakhir ini sayangnya mengarah ke penolakan yang terlalu banyak, para administrator mengubah efeknya menjadi peringatan sederhana dengan pengubah <literal>warn_if_reject</literal> sebagai langkah pertama; mereka mungkin memutuskan untuk menghapus pengubah ini pada tahap berikutnya, setelah audit hasil peraturan ini.
				</para>
				 <para>
					Menggunakan <literal>permit_mynetworks</literal> sebagai aturan pertama memiliki efek samping yang menarik: aturan berikutnya hanya diterapkan ke host di luar jaringan lokal. Hal ini memungkinkan mencekal semua host yang mengumumkan diri mereka sebagai bagian dari <literal>falcot.com</literal>, misalnya dengan menambahkan baris <literal>falcot.com REJECT Anda tidak berada dalam jaringan kami!</literal> ke dalam berkas <filename>/ postfix/dll/access_helo</filename>.
				</para>

			</section>
			 <section>
				<title>Menerima atau Menolak Berdasarkan Pengirim yang Diumumkan</title>
				 <para>
					Setiap pesan memiliki pengirim, diumumkan oleh perintah <literal>MAIL FROM</literal> dari protokol SMTP; sekali lagi, informasi ini dapat divalidasi dalam beberapa cara yang berbeda.
				</para>
				 <indexterm>
					<primary><literal>MAIL FROM</literal></primary>
				</indexterm>
				 <indexterm>
					<primary>surel</primary>
					 <secondary>penyaringan pada pengirim</secondary>
				</indexterm>
				 <example>
					<title>Pemeriksaan pengirim</title>
					 
<programlisting>
smtpd_sender_restrictions = 
    check_sender_access hash:/etc/postfix/access_sender,
    reject_unknown_sender_domain, reject_unlisted_sender,
    reject_non_fqdn_sender</programlisting>

				</example>
				 <para>
					Tabel <filename>/etc/postfix/access_sender</filename> memetakan beberapa perlakuan khusus untuk beberapa pengirim. Ini biasanya berarti memasukkan beberapa pengirim ke daftar putih atau daftar hitam.
				</para>
				 <para>
					Aturan <literal>reject_unknown_sender_domain</literal> memerlukan domain pengirim yang valid, karena dibutuhkan untuk alamat yang valid. Aturan <literal>reject_unlisted_sender</literal> menolak pengirim lokal jika alamat tidak ada; hal ini mencegah surel dari yang dikirim dari alamat yang tidak valid dalam domain <literal>falcot.com</literal>, dan pesan yang berasal dari <literal>joe.bloggs@falcot.com</literal> hanya diterima jika alamat tersebut benar-benar ada.
				</para>
				 <para>
					Akhirnya, aturan <literal>reject_non_fqdn_sender</literal> menolak surel yang mengaku berasal dari alamat tanpa fully-qualified domain name. Dalam prakteknya, ini berarti menolak surel yang datang dari <literal>user@machine</literal>: alamat harus diumumkan sebagai <literal>user@machine.example.com</literal> atau <literal>user@example.com</literal>.
				</para>

			</section>
			 <section>
				<title>Menerima atau Menolak Berdasarkan Penerima</title>
				 <para>
					Setiap surel yang memiliki minimal satu penerima, diumumkan dengan perintah <literal>RCPT TO</literal> dalam protokol SMTP. Alamat ini juga memerlukan validasi, bahkan jika itu mungkin kurang relevan daripada pemeriksaan atas alamat pengirim.
				</para>
				 <indexterm>
					<primary>RCPT TO</primary>
				</indexterm>
				 <indexterm>
					<primary>surel</primary>
					<secondary>penyaringan pada penerima</secondary>
				</indexterm>
				 <example>
					<title>Pemeriksaan penerima</title>
					 
<programlisting>
smtpd_recipient_restrictions = permit_mynetworks, 
    reject_unauth_destination, reject_unlisted_recipient, 
    reject_non_fqdn_recipient</programlisting>

				</example>
				 <para>
					<literal>reject_unauth_destination</literal> adalah aturan dasar yang mempersyaratkan pesan dari luar ditujukan kepada kami; pesan yang dikirim ke alamat yang tidak dilayani oleh server ini akan ditolak. Tanpa aturan ini, server menjadi relay terbuka yang memungkinkan spammer untuk mengirim surel yang tidak diinginkan; aturan ini wajib, dan itu paling baik disertakan di bagian awal dari daftar, sehingga tidak ada aturan lainnya mungkin mengotorisasi pesan sebelum tujuan telah diperiksa.
				</para>
				 <para>
					Aturan <literal>reject_unlisted_recipient</literal> menolak pesan yang dikirim ke pengguna lokal yang tidak ada. Ini masuk akal. Akhirnya, aturan <literal>reject_non_fqdn_recipient</literal> menolak alamat yang bukan fully-qualified; ini menjadikannya mustahil untuk mengirim surel ke <literal>jean</literal> atau <literal>jean@machine</literal>, dan memerlukan menggunakan alamat lengkap, seperti <literal>jean@machine.falcot.com</literal> atau <literal>jean@falcot.com</literal>.
				</para>

			</section>
			 <section>
				<title>Pembatasan Terkait dengan Perintah <literal>DATA</literal></title>
				 <para>
					Perintah <literal>DATA</literal> SMTP dikirimkan sebelum isi pesan. Tidak memberikan informasi apapun per se, selain mengumumkan apa yang datang berikutnya. Masih bisa dipersyaratkan untuk pemeriksaan.
				</para>
				 <indexterm>
					<primary><literal>DATA</literal></primary>
				</indexterm>
				 <example>
					<title>Pemeriksaan <literal>DATA</literal></title>
					 
<programlisting>
smtpd_data_restrictions = reject_unauth_pipelining</programlisting>

				</example>
				 <para>
					Direktif <literal>reject_unauth_pipelining</literal> menyebabkan pesan ditolak jika pihak pengirim mengirim perintah sebelum balasan atas perintah sebelumnya dikirim. Ini penjaga terhadap optimasi yang umum digunakan oleh robot spammer, karena mereka biasanya tidak peduli isi balasan dan fokus hanya pada mengirim surel sebanyak mungkin dalam waktu sependek mungkin.
				</para>

			</section>
			 <section>
				<title>Menerapkan Pembatasan</title>
				 <para>
					Meskipun perintah di atas memvalidasi informasi di berbagai tahap pertukaran SMTP, Postfix hanya mengirimkan penolakan sebenarnya sebagai jawaban atas perintah <literal>RCPT TO</literal>.
				</para>
				 <para>
					Ini berarti bahwa bahkan jika pesan tersebut ditolak karena perintah <literal>EHLO</literal> yang tidak valid, Postfix tahu pengirim dan penerima ketika mengumumkan penolakan. Ini kemudian mencatat log pesan yang lebih eksplisit daripada yang bisa dilakukan jika transaksi telah terputus dari awal. Selain itu, sejumlah klien SMTP tidak mengharapkan kegagalan pada perintah SMTP awal, dan klien ini akan kurang terganggu oleh penolakan akhir ini.
				</para>
				 <para>
					Keuntungan akhir pilihan ini adalah bahwa aturan dapat mengumpulkan informasi selama berbagai tahap pertukaran SMTP; hal ini memungkinkan mendefinisikan izin lebih halus, seperti menolak koneksi non-lokal jika itu mengumumkan dirinya dengan pengirim lokal.
				</para>

			</section>
			 <section>
				<title>Penyaringan Berdasarkan Isi Pesan</title>
				 <para>
					Sistem validasi dan pembatasan tidak akan lengkap tanpa cara untuk menerapkan pemeriksaan ke isi pesan. Postfix membedakan pemeriksaan yang berlaku ke header surel dari mereka yang berlaku ke tubuh surel.
				</para>
				 <example>
					<title>Memfungsikan penyaring berbasis konten</title>
					 
<programlisting>
header_checks = regexp:/etc/postfix/header_checks
body_checks = regexp:/etc/postfix/body_checks</programlisting>

				</example>
				 <indexterm>
					<primary>surel</primary>
					 <secondary>penyaringan pada isi</secondary>
				</indexterm>
				 <para>
					Kedua berkas berisi daftar ekspresi reguler (umumnya dikenal sebagai <emphasis>regexps</emphasis> atau <emphasis>regexes</emphasis>) dan tindakan menjadi dipicu ketika header surel (atau tubuh) cocok dengan ekspresi yang terkait.
				</para>
				 <sidebar> <title><emphasis>LIHAT CEPAT</emphasis> Tabel regex</title>
				 <para>
					Berkas <filename>/usr/share/doc/postfix-doc/examples/header_checks.gz</filename> berisi banyak komentar penjelasan dan dapat digunakan sebagai titik awal untuk membuat berkas <filename>/etc/postfix/header_checks</filename> dan <filename>/etc/postfix /body_checks</filename>.
				</para>
				 </sidebar> <example>
					<title>Berkas contoh <filename>/etc/postfix/header_checks</filename></title>
					 
<programlisting>
/^X-Mailer: GOTO Sarbacane/ REJECT I fight spam (GOTO Sarbacane)
/^Subject: *Your email contains VIRUSES/ DISCARD virus notification</programlisting>

				</example>
				 <sidebar id="sidebar.regexp"> <title><emphasis>KEMBALI KE DASAR</emphasis> Ekspresi reguler</title>
				 <para>
					Istilah <emphasis>ekspresi reguler</emphasis> (disingkat menjadi <emphasis>regexp</emphasis> atau <emphasis>regex</emphasis>) mengacu ke notasi generik untuk mengekspresikan deskripsi dari isi dan/atau struktur serangkaian karakter. Karakter khusus tertentu memungkinkan mendefinisikan alternatif (misalnya, <literal>foo|bar</literal> cocok dengan "foo" atau "bar"), set karakter yang diizinkan (misalnya, <literal>[0-9]</literal> berarti setiap digit, dan <literal>.</literal> — dot — berarti sebarang karakter), kuantifikasi (<literal>s?</literal> cocok dengan <literal>s</literal> atau string kosong, dengan kata lain 0 atau 1 kali munculnya <literal>s</literal>; <literal>s+</literal> cocok dengan satu atau lebih karakter <literal>s</literal> berturut-turut; dan seterusnya). Kurung memungkinkan pengelompokan hasil pencarian.
				</para>
				 <para>
					Sintaks yang tepat dari ungkapan-ungkapan ini bervariasi di seluruh alat yang menggunakan mereka, tapi fitur dasarnya sama. <ulink type="block" url="http://en.wikipedia.org/wiki/Regular_expression" />
				</para>
				 </sidebar> <para>
					Yang pertama memeriksa header yang menyebutkan perangkat lunak surel; jika <literal>GOTO Sarbacane</literal> (software surel massal) ditemukan, pesan tersebut akan ditolak. Ekspresi kedua mengendalikan subjek pesan; jika itu menyebutkan pemberitahuan virus, kita bisa memutuskan untuk tidak menolak pesan tetapi untuk membuangnya segera sebagai gantinya.
				</para>
				 <para>
					Menggunakan filter ini adalah pedang bermata dua, karena mudah untuk membuat aturan yang terlalu generik dan kehilangan surel yang sah sebagai akibatnya. Dalam kasus ini, tidak hanya pesan akan hilang, tapi pengirimnya akan mendapatkan pesan kesalahan yang tidak diinginkan (dan menjengkelkan).
				</para>

			</section>

		</section>
		 <section id="sect.setting-up-greylisting">
			<title>Menyiapkan <foreignphrase>greylisting</foreignphrase></title>
			 <indexterm>
				<primary>greylisting</primary>
			</indexterm>
			 <para>
				"Greylisting" adalah teknik penyaringan yang pesan awalnya ditolak dengan kode kesalahan sementara, dan hanya diterima pada percobaan lebih lanjut setelah penundaan. Hal ini sangat efisien terhadap spam yang dikirim oleh banyak mesin yang terinfeksi oleh virus dan worm karena software ini jarang bertindak sebagai agen SMTP penuh (dengan memeriksa kode kesalahan dan mencoba kembali pesan gagal kemudian), terutama karena banyak dari alamat yang dipanen sebenarnya tidak sah dan mencoba kembali berarti kehilangan waktu.
			</para>
			 <para>
				Postfix tidak menyediakan greylist secara native, tapi ada fitur dimana keputusan untuk menerima atau menolak pesan tertentu dapat diserahkan ke program eksternal. Paket <emphasis role="pkg">postgrey</emphasis> memuat program seperti itu, dirancang untuk berinteraksi dengan layanan delegasi kebijakan akses ini.
			</para>
			 <para>
				Setelah <emphasis role="pkg">postgrey</emphasis> terinstal, itu berjalan sebagai daemon dan mendengarkan pada port 10023. Postfix kemudian dapat dikonfigurasi untuk menggunakannya, dengan menambahkan parameter <literal>check_policy_service</literal> sebagai pembatasan tambahan:
			</para>
			 
<programlisting>
smtpd_recipient_restrictions = permit_mynetworks,
    [...]
    check_policy_service inet:127.0.0.1:10023</programlisting>
			 <para>
				Setiap kali Postfix mencapai aturan ini dalam set aturan, itu akan menyambung ke daemon <command>postgrey</command> dan mengirim informasi mengenai pesan yang relevan. Pada sisinya, Postgrey mempertimbangkan triplet alamat IP/pengirim/penerima triplet dan memeriksa basis data apakah triplet yang sama telah terlihat baru-baru ini. Jika demikian, Postgrey menjawab bahwa pesan harus diterima; jika tidak, jawaban menunjukkan bahwa pesan harus ditolak untuk sementara, dan triplet dicatat dalam basis data.
			</para>
			 <para>
				Kelemahan utama dari greylist adalah bahwa pesan yang sah tertunda, yang tidak selalu bisa diterima. Hal ini juga meningkatkan beban pada server yang mengirim banyak surel yang sah.
			</para>
			 <sidebar> <title><emphasis>DALAM PRAKTEK</emphasis> Kekurangan dari greylisting</title>
			 <para>
				Secara teori, greylist hanya harus menunda surat pertama dari pengirim yang diberikan kepada penerima tertentu, dan penundaan umumnya dalam orde menit. Kenyataannya, bagaimanapun, dapat sedikit berbeda. Beberapa ISP besar menggunakan cluster server SMTP, dan ketika pesan awalnya ditolak, server yang mencoba ulang transmisi mungkin tidak akan sama seperti yang pertama. Ketika itu terjadi, kedua server mendapat pesan kesalahan sementara karena greylist, dan seterusnya; mungkin butuh beberapa jam sampai transmisi ini dicoba oleh server yang sudah telah terlibat, karena server SMTP biasanya meningkatkan penundaan antara pengulangan di setiap kegagalan.
			</para>
			 <para>
				Sebagai akibatnya, alamat IP yang masuk dapat bervariasi dengan berjalannya waktu bahkan untuk pengirim tunggal. Tapi lebih jauh lagi: bahkan alamat pengirim dapat berubah. Sebagai contoh, banyak milis server menyandikan tambahan informasi dalam alamat pengirim untuk dapat menangani pesan kesalahan (dikenal sebagai <emphasis>bounces</emphasis>). Setiap pesan baru yang dikirim ke milis kemudian mungkin perlu pergi melalui greylist, yang berarti itu harus disimpan (secara sementara) pada server pengirim. Untuk milis yang sangat besar (dengan puluhan ribu pelanggan), ini dapat segera menjadi masalah.
			</para>
			 <para>
				Untuk memitigasi kelemahan ini, Postgrey mengelola daftar putih dari situs-situs seperti itu, dan pesan yang berasal dari mereka segera diterima tanpa melalui greulist. Daftar ini dengan mudah dapat disesuaikan dengan kebutuhan lokal, karena disimpan dalam berkas <filename>/etc/postgrey/whitelist_clients</filename>.
			</para>
			 </sidebar> <sidebar> <title><emphasis>LEBIH LANJUT</emphasis> Greylisting selektif dengan <emphasis role="pkg">milter-greylist</emphasis></title>
			 <para>
				Kelemahan dari greylist dapat dimitigsai dengan hanya menggunakan greylist pada subset dari klien yang sudah dianggap sebagai kemungkinan sumber spam (karena mereka tercantum dalam daftar hitam DNS). Hal ini tidak mungkin dengan <emphasis role="pkg">postgrey</emphasis> tapi <emphasis role="pkg">milter-greylist</emphasis> dapat digunakan dengan cara itu.
			</para>
			 <para>
				Dalam skenario itu, karena blacklist DNS tidak pernah memicu penolakan definitif, menjadi masuk akal untuk menggunakan blacklist agresif, termasuk daftar semua alamat IP dinamis dari klien ISP (seperti <literal>pbl.spamhaus.org</literal> atau <literal>dul.dnsbl.Sorbs.net</literal>).
			</para>
			 <para>
				Karena milter-greylist menggunakan antarmuka milter Sendmail, konfigurasi sisi postfix-nya terbatas ke "<literal>smtpd_milters = unix:/var/run/milter-greylist/milter-greylist.sock</literal>". Halaman manual <citerefentry><refentrytitle>greylist.conf</refentrytitle>
				<manvolnum>5</manvolnum></citerefentry> mendokumentasikan <filename>/etc/milter-greylist/greylist.conf</filename> dan banyak cara untuk mengkonfigurasi milter-greylist. Anda juga harus menyunting <filename>/etc/default/milter-greylist</filename> untuk benar-benar mengaktifkan layanan.
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Mengubah Filter Berdasarkan Penerima</title>
			 <para>
				<xref linkend="sect.restrictions-for-receiving-and-sending" /> dan <xref linkend="sect.setting-up-greylisting" /> meninjau banyak kemungkinan pembatasan. Mereka semua memiliki kegunaan dalam membatasi jumlah spam yang diterima, tetapi mereka semua juga memiliki kelemahan. Maka semakin umum untuk menyesuaikan set filter tergantung pada penerima. Pada Falcot Corp, greylist menarik bagi sebagian pengguna, tapi mengganggu pekerjaan beberapa pengguna yang membutuhkan latensi rendah dalam surel mereka (seperti layanan dukungan teknis). Demikian pula, layanan komersial kadang-kadang memiliki masalah menerima surel dari beberapa penyedia Asia yang mungkin tercantum di daftar hitam; layanan ini meminta alamat tak tersaring untuk bisa berkorespondensi.
			</para>
			 <para>
				Postfix menyediakan kustomisasi filter dengan konsep "kelas pembatasan". Kelas dideklarasikan dalam parameter <literal>smtpd_restriction_classes</literal>, dan didefinisikan dengan cara yang sama sebagai <literal>smtpd_recipient_restrictions</literal>. Direktif <literal>check_recipient_access</literal> kemudian mendefinisikan tabel pemetaan penerima tertentu untuk seperangkat batasan.
			</para>
			 <example>
				<title>Mendefinisikan kelas pembatasan dalam <filename>main.cf</filename></title>
				 
<programlisting>smtpd_restriction_classes = greylisting, aggressive, permissive

greylisting = check_policy_service inet:127.0.0.1:10023
aggressive = reject_rbl_client sbl-xbl.spamhaus.org,
        check_policy_service inet:127.0.0.1:10023
permissive = permit

smtpd_recipient_restrictions = permit_mynetworks,
        reject_unauth_destination,
        check_recipient_access hash:/etc/postfix/recipient_access</programlisting>

			</example>
			 <example>
				<title>Berkas <filename>/etc/postfix/recipient_access</filename></title>
				 
<programlisting>
# Unfiltered addresses
postmaster@falcot.com  permissive
support@falcot.com     permissive
sales-asia@falcot.com  permissive

# Aggressive filtering for some privileged users
joe@falcot.com         aggressive

# Special rule for the mailing-list manager
sympa@falcot.com       reject_unverified_sender

# Greylisting by default
falcot.com             greylisting</programlisting>

			</example>

		</section>
		 <section id="sect.postfix-antivirus">
			<title>Mengintegrasikan Antivirus</title>
			 <indexterm>
				<primary>anti virus</primary>
			</indexterm>
			 <para>
				Banyak virus yang beredar sebagai lampiran surel membuat penting untuk mengatur antivirus di titik entri jaringan perusahaan, karena meskipun sudah ada kampanye kesadaran, beberapa pengguna masih akan membuka lampiran dari pesan yang jelas-jelas mencurigakan.
			</para>
			 <para>
				Para administrator Falcot memilih <command>clamav</command> untuk antivirus gratis mereka. Paket utama adalah <emphasis role="pkg">clamav</emphasis>, tetapi mereka juga memasang beberapa paket tambahan seperti <emphasis role="pkg">arj</emphasis>, <emphasis role="pkg">unzoo</emphasis>, <emphasis role="pkg">unrar</emphasis>, dan <emphasis role="pkg">lha</emphasis>, karena mereka diperlukan oleh antivirus untuk menganalisis lampiran yang diarsipkan dalam salah satu format ini.
			</para>
			 <indexterm>
				<primary><command>clamav</command></primary>
			</indexterm>
			 <indexterm>
				<primary><command>clamav-milter</command></primary>
			</indexterm>
			 <para>
				Tugas antarmuka antara antivirus dan server surel jatuh ke <command>clamav-milter</command>. <emphasis>milter</emphasis> (singkatan dari <emphasis>mail filter</emphasis>) adalah sebuah program penyaringan yang dirancang khusus untuk menyambung dengan server surel. Suatu milter menggunakan standar antarmuka pemrograman aplikasi (API) yang memberikan kinerja lebih baik daripada filter eksternal ke server surel. Milters awalnya diperkenalkan oleh <emphasis>Sendmail</emphasis>, tetapi <emphasis>Postfix</emphasis> segera mengikutinya.
			</para>
			 <sidebar> <title><emphasis>LIHAT SEKILAS</emphasis> Milter untuk Spamassassin</title>
			 <indexterm>
				<primary><emphasis role="pkg">spamass-milter</emphasis></primary>
			</indexterm>
			 <para>
				Paket <emphasis role="pkg">spamass-milter</emphasis> menyediakan sebuah milter berbasis <emphasis>SpamAssassin</emphasis>, detektor spam terkenal. Dapat digunakan untuk menandai pesan sebagai mungkin spam (dengan menambahkan sebuah header tambahan) dan/atau menolak pesan sama sekali jika nilai "spamminess" mereka melampaui ambang batas tertentu.
			</para>
			 </sidebar> <para>
				Setelah paket <emphasis role="pkg">clamav-milter</emphasis> diinstal, milter harus ditata ulang untuk berjalan pada sebuah port TCP bukan pada named socket yang default. Hal ini dapat dicapai dengan <command>dpkg-reconfigure clamav-milter</command>. Ketika diminta untuk "Antarmuka komunikasi dengan Sendmail", jawablah "<literal>inet:10002@127.0.0.1</literal>".
			</para>
			 <sidebar> <title><emphasis>CATATAN</emphasis> Port TCP nyata vs soket bernama</title>
			 <para>
				Alasan mengapa kita menggunakan port TCP nyata daripada soket bernama adalah bahwa daemon postfix sering dijalankan dengan mode chroot dan tidak memiliki akses ke direktori tempat soket bernama. Anda juga dapat memutuskan untuk tetap menggunakan soket bernama dan memilih lokasi chroot (<filename>/var/spool/postfix/</filename>).
			</para>
			 </sidebar> <para>
				Konfigurasi ClamAV standar cocok untuk kebanyakan situasi, tetapi beberapa parameter penting masih dapat disesuaikan dengan <command>dpkg-reconfigure clamav-base</command>.
			</para>
			 <para>
				Langkah terakhir melibatkan meemberitahu Postfix untuk menggunakan filter yang baru-baru ini dikonfigurasi. Ini bisa dilakukan sekedar dengan menambahkan direktif berikut untuk <filename>/etc/postfix/main.cf</filename>:
			</para>
			 
<programlisting>
# Virus check with clamav-milter
smtpd_milters = inet:[127.0.0.1]:10002</programlisting>
			 <para>
				Jika antivirus yang menyebabkan masalah, baris ini dapat dijadikan komentar dan <command>service postfix reload</command> harus dijalankan sehingga perubahan ini diperhitungkan.
			</para>
			 <sidebar> <title><emphasis>DALAM PRAKTEK</emphasis> Menguji antivirus</title>
			 <para>
				Setelah antivirus disiapkan, perilaku yang benar harus diuji. Cara termudah untuk melakukannya adalah dengan mengirim surel percobaan dengan lampiran yang berisi berkas <filename>eicar.com</filename> (atau <filename>eicar.com.zip</filename>), yang dapat diunduh secara daring: <ulink type="block" url="http://www.eicar.org/86-0-Intended-use.html" />
			</para>
			 <para>
				Berkas ini bukan virus yang benar, tetapi berkas uji yang didiagnosa sebagai sebuah virus oleh semua perangkat lunak antivirus di pasar agar memungkinkan memeriksa instalasi.
			</para>
			 </sidebar> <para>
				Semua pesan yang ditangani oleh Postfix sekarang pergi melalui saringan antivirus.
			</para>

		</section>
		 <section id="sect.authenticated-smtp">
			<title>SMTP Terotentikasi</title>
			 <para>
				Mampu mengirim surel memerlukan server SMTP yang dapat dijangkau; ini juga memerlukan server SMTP untuk mengirim surel melalui itu. Untuk pengguna roaming, ini mungkin memerlukan secara teratur mengubah konfigurasi klien SMTP, karena server SMTP Falcot's menolak pesan yang datang dari alamat IP yang tampaknya bukan milik perusahaan. Ada dua solusi: pengguna roaming menginstal server SMTP pada komputer mereka atau mereka masih menggunakan server perusahaan dengan beberapa cara untuk otentikasi sebagai karyawan. Solusi pertama tidak dianjurkan karena komputer tidak akan dihubungkan secara permanen, dan tidak akan dapat mengulangi pengiriman pesan jika terjadi masalah; kita akan fokus pada solusi yang terakhir.
			</para>
			 <para>
				Otentikasi SMTP di Postfix mengandalkan SASL (<emphasis>Simple Authentication and Security Layer</emphasis>). Hal ini membutuhkan instalasi paket <emphasis role="pkg">libsasl2-modules</emphasis> dan <emphasis role="pkg">sasl2-bin</emphasis>, kemudian mendaftarkan suatu kata sandi di basis data SASL untuk setiap pengguna yang memerlukan otentikasi pada server SMTP. Hal ini dilakukan dengan perintah <command>saslpasswd2</command>, yang memerlukan beberapa parameter. Opsi <literal>-U</literal> mendefinisikan domain otentikasi, yang harus cocok dengan parameter <literal>smtpd_sasl_local_domain</literal> dalam konfigurasi Postfix. Opsi <literal>-C</literal> memungkinkan membuat pengguna, dan <literal>-f</literal> menetapkan berkas yang akan dipakai jika basis data SASL perlu disimpan di lokasi yang berbeda dari default (<filename>/etc/sasldb2</filename>).
			</para>
			 
<screen role="scale">
<computeroutput># </computeroutput><userinput>saslpasswd2 -u `postconf -h myhostname` -f /var/spool/postfix/etc/sasldb2 -c jean</userinput>
<computeroutput>[... ketikkan kata sandi jean dua kali ...]</computeroutput></screen>
			 <para>
				Perhatikan bahwa basis data SASL dibuat dalam direktori milik Postfix. Untuk memastikan konsistensi, kita juga mengubah <filename>/etc/sasldb2</filename> menjadi link simbolik menunjuk pada basis data yang digunakan oleh Postfix, dengan perintah <command>ln -sf /var/spool/postfix/etc/sasldb2 /etc/sasldb2</command>.
			</para>
			 <para>
				Sekarang kita perlu mengkonfigurasi Postfix agar menggunakan SASL. Pertama pengguna <literal>postfix</literal> perlu ditambahkan ke grup <literal>sasl</literal>, sehingga dapat mengakses basis data akun SASL. Beberapa parameter baru juga diperlukan untuk mengaktifkan SASL, dan parameter <literal>smtpd_recipient_restrictions</literal> perlu dikonfigurasi untuk memungkinkan kilen terotentikasi-SASL untuk mengirim surel dengan bebas.
			</para>
			 <example>
				<title>Memfungsikan SASL di <filename>/etc/postfix/main.cf</filename></title>
				 
<programlisting>
# Memfungsikan otentikasi SASL
smtpd_sasl_auth_enable = yes
# Define the SASL authentication domain to use
smtpd_sasl_local_domain = $myhostname
[...]
# Menambahkan permit_sasl_authenticated before reject_unauth_destination
# mengizinkan merelay surel yang dikirim oleh pengguna SASL-authenticated
smtpd_recipient_restrictions = permit_mynetworks,
    permit_sasl_authenticated,
    reject_unauth_destination,
[...]</programlisting>

			</example>
			 <sidebar> <title><emphasis>EKSTRA</emphasis> Klien SMTP terotentikasi</title>
			 <para>
				Kebanyakan klien surel dapat untuk melakukan otentikasi ke server SMTP sebelum mengirim pesan keluar, dan menggunakan fitur itu cukup dengan sekedar mengkonfigurasi parameter yang tepat. Jika klien yang digunakan tidak menyediakan fitur itu, solusinya adalah untuk menggunakan server Postfix lokal dan mengkonfigurasi dengan relay surel melalui server SMTP remote. Dalam kasus ini, Postfix lokal itu sendiri adalah klien yang mengotentikasi dengan SASL. Berikut adalah parameter yang diperlukan:
			</para>
			 
<programlisting>
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
relay_host = [mail.falcot.com]</programlisting>
			 <para>
				The <filename>/etc/postfix/sasl_passwd</filename> file needs to contain the username and password to use for authenticating on the <literal>mail.falcot.com</literal> server. Here is an example:
			</para>
			 
<programlisting>
[mail.falcot.com]   joe:LyinIsji</programlisting>
			 <para>
				As for all Postfix maps, this file must be turned into <filename>/etc/postfix/sasl_passwd.db</filename> with the <command>postmap</command> command.
			</para>
			 </sidebar>
		</section>

	</section>
	 <section id="sect.http-web-server">
		<title>Server Web (HTTP)</title>
		 <para>
			The Falcot Corp administrators decided to use the Apache HTTP server, included in Debian <emphasis role="distribution">Jessie</emphasis> at version 2.4.10.
		</para>
		 <indexterm>
			<primary><command>apache</command></primary>
		</indexterm>
		 <indexterm>
			<primary>server</primary>
			<secondary>web</secondary>
		</indexterm>
		 <indexterm>
			<primary>web server</primary>
		</indexterm>
		 <indexterm>
			<primary>server</primary>
			<secondary>HTTP</secondary>
		</indexterm>
		 <indexterm>
			<primary>HTTP</primary>
			<secondary>server</secondary>
		</indexterm>
		 <sidebar> <title><emphasis>ALTERNATIF</emphasis> Server web lain</title>
		 <para>
			Apache is merely the most widely-known (and widely-used) web server, but there are others; they can offer better performance under certain workloads, but this has its counterpart in the smaller number of available features and modules. However, when the prospective web server is built to serve static files or to act as a proxy, the alternatives, such as <emphasis role="pkg">nginx</emphasis> and <emphasis role="pkg">lighttpd</emphasis>, are worth investigating.
		</para>
		 <indexterm>
			<primary><emphasis role="pkg">nginx</emphasis></primary>
		</indexterm>
		 <indexterm>
			<primary><emphasis role="pkg">lighttpd</emphasis></primary>
		</indexterm>
		 </sidebar> <section>
			<title>Memasang Apache</title>
			 <para>
				Memasang paket <emphasis role="pkg">apache2</emphasis> adalah semua yang diperlukan. Ini berisi semua modul, termasuk <emphasis>Multi-Processing Modules</emphasis> (MPM) yang mempengaruhi bagaimana Apache menangani pemrosesan paralel dari banyak permintaan (yang biasanya disediakan dalam paket terpisah <emphasis role="pkg">apache2-mpm-*</emphasis>). Ini juga akan menarik <emphasis role="pkg">apache2-utils</emphasis> yang mengandung utilitas baris perintah yang kita akan temui nanti.
			</para>
			 <para>
				The MPM in use affects significantly the way Apache will handle concurrent requests. With the <emphasis>worker</emphasis> MPM, it uses <emphasis>threads</emphasis> (lightweight processes), whereas with the <emphasis>prefork</emphasis> MPM it uses a pool of processes created in advance. With the <emphasis>event</emphasis> MPM it also uses threads, but the inactive connections (notably those kept open by the HTTP <emphasis>keep-alive</emphasis> feature) are handed back to a dedicated management thread.
			</para>
			 <para>
				Para administrator Falcot juga memasang <emphasis role="pkg">libapache2-mod-php5</emphasis> untuk menyertakan dukungan PHP di Apache. Hal ini menyebabkan MPM <emphasis>event</emphasis> baku dinonaktifkan, dan <emphasis>prefork</emphasis> digunakan sebagai pengganti, karena PHP hanya bekerja di bawah MPM tertentu itu.
			</para>
			 <sidebar> <title><emphasis>KEAMANAN</emphasis> Eksekusi di bawah pengguna <literal>www-data</literal></title>
			 <indexterm>
				<primary><literal>www-data</literal></primary>
			</indexterm>
			 <indexterm>
				<primary>suexec</primary>
			</indexterm>
			 <para>
				By default, Apache handles incoming requests under the identity of the <literal>www-data</literal> user. This means that a security vulnerability in a CGI script executed by Apache (for a dynamic page) won't compromise the whole system, but only the files owned by this particular user.
			</para>
			 <para>
				Menggunakan modul <emphasis>suexec</emphasis> memungkinkan melewati aturan ini sehingga beberapa skrip CGI dijalankan di bawah identitas pengguna lain. Ini dikonfigurasi dengan direktif <literal><replaceable>pengguna</replaceable> SuexecUserGroup <replaceable>kelompok</replaceable></literal> dalam konfigurasi Apache.
			</para>
			 <indexterm>
				<primary><emphasis role="pkg">libapache2-mpm-itk</emphasis></primary>
			</indexterm>
			 <para>
				Another possibility is to use a dedicated MPM, such as the one provided by <emphasis role="pkg">libapache2-mpm-itk</emphasis>. This particular one has a slightly different behavior: it allows “isolating” virtual hosts (actually, sets of pages) so that they each run as a different user. A vulnerability in one website therefore cannot compromise files belonging to the owner of another website.
			</para>
			 </sidebar> <sidebar> <title><emphasis>LIHAT SEKILAS</emphasis> Daftar modul</title>
			 <para>
				Daftar lengkap modul standar Apache dapat ditemukan daring. <ulink type="block" url="http://httpd.apache.org/docs/2.4/mod/index.html" />
			</para>
			 </sidebar> <para>
				Apache is a modular server, and many features are implemented by external modules that the main program loads during its initialization. The default configuration only enables the most common modules, but enabling new modules is a simple matter of running <command>a2enmod <replaceable>module</replaceable></command>; to disable a module, the command is <command>a2dismod <replaceable>module</replaceable></command>. These programs actually only create (or delete) symbolic links in <filename>/etc/apache2/mods-enabled/</filename>, pointing at the actual files (stored in <filename>/etc/apache2/mods-available/</filename>).
			</para>
			 <para>
				Dengan konfigurasi bakunya, server web mendengarkan pada port 80 (seperti yang dikonfigurasi di <filename>/etc/apache2/ports.conf</filename>), dan menyajikan halaman dari direktori <filename>/var/www/html/</filename> (seperti yang dikonfigurasi di <filename>/etc/apache2/sites-enabled/000-default.conf</filename>).
			</para>
			 <sidebar> <title><emphasis>LEBIH JAUH</emphasis> Menambahkan dukungan untuk SSL</title>
			 <indexterm>
				<primary>HTTPS</primary>
			</indexterm>
			 <indexterm>
				<primary>HTTP</primary>
				<secondary>aman</secondary>
			</indexterm>
			 <para>
				Apache 2.4 termasuk modul SSL yang diperlukan untuk HTTP yang aman (HTTPS) secara baku. Hanya perlu diaktifkan dengan <command>a2enmod ssl</command>, kemudian direktif yang diperlukan harus ditambahkan ke berkas konfigurasi. Contoh konfigurasi tersedia di <filename>/etc/apache2/sites-available/default-ssl.conf</filename>. <ulink type="block" url="http://httpd.apache.org/docs/2.4/mod/mod_ssl.html" />
			</para>
			 <para>
				Mesti lebih hati-hati jika Anda ingin lebih menyukai koneksi SSL dengan <emphasis>Perfect Forward Secrecy</emphasis> (koneksi-koneksi tersebut menggunakan kunci sesi ephemeral yang memastikan bahwa terungkapnya kunci rahasia server tidak mengakibatkan terungkapnya lalu lintas lama yang terenkripsi yang mungkin tersimpan ketika menguping pada jaringan). Silakan lihat pada rekomendasi Mozilla, khususnya: <ulink type="block" url="https://wiki.mozilla.org/Security/Server_Side_TLS#Apache" />
			</para>
			 <indexterm>
				<primary><emphasis>Perfect Forward Secrecy</emphasis></primary>
			</indexterm>
			 </sidebar>
		</section>
		 <section>
			<title>Mengkonfigurasi Host Virtual</title>
			 <para>
				Suatu host virtual adalah identitas tambahan untuk server web.
			</para>
			 <indexterm>
				<primary>host virtual</primary>
			</indexterm>
			 <para>
				Apache considers two different kinds of virtual hosts: those that are based on the IP address (or the port), and those that rely on the domain name of the web server. The first method requires allocating a different IP address (or port) for each site, whereas the second one can work on a single IP address (and port), and the sites are differentiated by the hostname sent by the HTTP client (which only works in version 1.1 of the HTTP protocol — fortunately that version is old enough that all clients use it already).
			</para>
			 <para>
				(Semakin) langkanya alamat IPv4 biasanya lebih mengarah ke metode kedua; namun, itu dibuat lebih kompleks jika host virtual perlu menyediakan HTTPS juga, karena protokol SSL tidak selalu disediakan untuk berbasis nama virtual hosting; ekstensi SNI (<emphasis>Server Name Indication</emphasis>) yang memungkinkan kombinasi tersebut tidak ditangani oleh semua browser. Ketika beberapa situs HTTPS perlu menjalankan pada server yang sama, mereka akan biasanya dibedakan baik dengan berjalan pada port lain atau pada alamat IP yang berbeda (IPv6 dapat membantu di sana).
			</para>
			 <para>
				The default configuration for Apache 2 enables name-based virtual hosts. In addition, a default virtual host is defined in the <literal>/etc/apache2/sites-enabled/000-default.conf</literal> file; this virtual host will be used if no host matching the request sent by the client is found.
			</para>
			 <sidebar> <title><emphasis>HATI-HATI</emphasis> Host virtual pertama</title>
			 <para>
				Permintaan mengenai host virtual yang tak dikenal akan selalu disajikan oleh host virtual yang pertama didefinisikan, itulah sebabnya mengapa kita definisikan <literal>www.falcot.com</literal> pertama di sini.
			</para>
			 </sidebar> <sidebar> <title><emphasis>LIHAT SEKILAS</emphasis> Apache mendukung SNI</title>
			 <indexterm>
				<primary>Server Name Indication</primary>
			</indexterm>
			 <para>
				Server Apache mendukung ekstensi protokol SSL yang bernama <emphasis>Server Name Indication</emphasis> (SNI). Ekstensi ini memungkinkan peramban untuk mengirim nama host server web selama pembentukan sambungan SSL, jauh lebih awal daripada permintaan HTTP itu sendiri, yang sebelumnya digunakan untuk mengidentifikasi host virtual yang diminta di antara yang di-host pada server yang sama (dengan alamat IP dan port yang sama). Hal ini memungkinkan Apache untuk memilih sertifikat SSL yang paling tepat agar transaksi dapat berlanjut.
			</para>
			 <para>
				Sebelum SNI, Apache akan selalu menggunakan sertifikat yang didefinisikan dalam host virtual baku. Klien yang mencoba untuk mengakses host virtual lain kemudian akan menampilkan peringatan, karena sertifikat yang mereka terima tidak cocok dengan situs web mereka coba akses. Untungnya, sebagian besar peramban sekarang bekerja dengan SNI; ini termasuk Microsoft Internet Explorer mulai versi 7.0 (mulai pada Vista), Mozilla Firefox dimulai dengan versi 2.0, Apple Safari sejak versi 3.2.1 dan semua versi Google Chrome.
			</para>
			 <para>
				Paket Apache yang tersedia di Debian dibangun dengan dukungan untuk SNI; maka tidak ada konfigurasi tertentu yang diperlukan.
			</para>
			 <para>
				Care should also be taken to ensure that the configuration for the first virtual host (the one used by default) does enable TLSv1, since Apache uses the parameters of this first virtual host to establish secure connections, and they had better allow them!
			</para>
			 </sidebar> <para>
				Each extra virtual host is then described by a file stored in <filename>/etc/apache2/sites-available/</filename>. Setting up a website for the <literal>falcot.org</literal> domain is therefore a simple matter of creating the following file, then enabling the virtual host with <command>a2ensite www.falcot.org</command>.
			</para>
			 <example>
				<title>Berkas <filename>/etc/apache2/sites-available/www.falcot.org.conf</filename></title>
				 
<programlisting>
&lt;VirtualHost *:80&gt;
ServerName www.falcot.org
ServerAlias falcot.org
DocumentRoot /srv/www/www.falcot.org
&lt;/VirtualHost&gt;</programlisting>

			</example>
			 <para>
				Apache server, yang dikonfigurasi sejauh ini, menggunakan berkas log yang sama untuk semua host virtual (walaupun ini bisa diganti dengan menambahkan direktif <literal>CustomLog</literal> dalam definisi host virtual). Maka masuk akal untuk menyesuaikan format berkas log ini agar menyertakan nama host virtual. Ini dapat dilakukan dengan menciptakan sebuah berkas <filename>/etc/apache2/conf-available/customlog.conf</filename> yang menentukan format baru untuk semua berkas log (dengan direktif <literal>LogFormat</literal>) dan memfungsikannya dengan <command>a2enconf customlog </command>. Baris <literal>CustomLog</literal> harus juga akan dihapus (atau dijadikan komentar) dari berkas <filename>/etc/apache2/sites-available/000-default.conf</filename>.
			</para>
			 <example>
				<title>Berkas <filename>/etc/apache2/conf.d/customlog.conf</filename></title>
				 
<programlisting role="scale">
# Format log baru termasuk nama host (virtual)
LogFormat "%v %h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\"" vhost

# Sekarang mari kita pakai format "vhost" ini secara baku
CustomLog /var/log/apache2/access.log vhost</programlisting>

			</example>

		</section>
		 <section>
			<title>Direktif Umum</title>
			 <para>
				Bagian ini mengulas secara singkat beberapa direktif konfigurasi Apache yang sering digunakan.
			</para>
			 <indexterm>
				<primary>Direktif Apache</primary>
			</indexterm>
			 <indexterm>
				<primary>direktif, Apache</primary>
			</indexterm>
			 <para>
				Berkas konfigurasi utama biasanya memuat beberapa blok <literal>Directory</literal> blok; mereka memungkinkan menentukan perilaku yang berbeda untuk server tergantung pada lokasi berkas yang diminta. Blok tersebut umumnya memuat direktif <literal>Options</literal> dan <literal>AllowOverride</literal>.
			</para>
			 <indexterm>
				<primary><literal>Options</literal>, direktif Apache</primary>
			</indexterm>
			 <indexterm>
				<primary><literal>AllowOverride</literal>, direktif Apache</primary>
			</indexterm>
			 <example>
				<title>Blok direktori</title>
				 
<programlisting>
&lt;Directory /var/www&gt;
Options Includes FollowSymlinks
AllowOverride All
DirectoryIndex index.php index.html index.htm
&lt;/Directory&gt;</programlisting>

			</example>
			 <para>
				Direktif <literal>DirectoryIndex</literal> berisi daftar berkas yang akan dicoba ketika permintaan klien cocok dengan suatu direktori. Berkas pertama yang ada dalam daftar digunakan dan dikirim sebagai respon.
			</para>
			 <indexterm>
				<primary><literal>DirectoryIndex</literal>, direktif Apache</primary>
			</indexterm>
			 <para>
				Direktif <literal>Options</literal> diikuti oleh daftar pilihan yang diaktifkan. Nilai <literal>None</literal> menonaktifkan semua pilihan; sejalan dengan itu, <literal>All</literal> memfungsikan mereka semua kecuali <literal>MultiViews</literal>. Pilihan yang tersedia meliputi:
			</para>
			 <itemizedlist>
				<listitem>
					<para>
						<literal>ExecCGI</literal> menunjukkan bahwa skrip CGI dapat dijalankan. <indexterm><primary><literal>ExecCGI</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>
				 <listitem>
					<para>
						<literal>FollowSymlinks</literal> memberitahu server bahwa taut simbolik dapat diikuti, dan bahwa respon harus berisi isi dari target taut tersebut. <indexterm><primary><literal>FollowSymlinks</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>
				 <listitem>
					<para>
						<literal>SymlinksIfOwnerMatch</literal> juga memberitahu server untuk mengikuti taut simbolik, tetapi hanya bila taut dan target memiliki pemilik yang sama. <indexterm><primary><literal>SymlinksIfOwnerMatch</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>
				 <listitem>
					<para>
						<literal>Includes</literal> memfungsikan <emphasis>Server Side Includes</emphasis> (disingkat <emphasis>SSI</emphasis>). Ini adalah direktif yang tertanam di halaman HTML dan dieksekusi sambil jalan untuk setiap permintaan. <indexterm><primary><literal>Includes</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>
				 <listitem>
					<para>
						<literal>Indexes</literal> memberitahu server untuk memberikan daftar isi direktori jika permintaan HTTP yang dikirim oleh klien menunjuk ke direktori tanpa berkas indeks (yaitu, ketika tidak ada berkas yang disebutkan oleh direktif <literal>DirectoryIndex</literal> yang ada dalam direktori ini). <indexterm><primary><literal>Indeks</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>
				 <listitem>
					<para>
						<literal>MultiViews</literal> memungkinkan negosiasi konten; ini dapat digunakan oleh server untuk mengembalikan halaman web yang cocok dengan bahasa pilihan sebagaimana dikonfigurasi dalam peramban. <indexterm><primary><literal>MultiViews</literal>, direktif Apache</primary></indexterm>
					</para>

				</listitem>

			</itemizedlist>
			 <para>
			</para>
			 <sidebar> <title><emphasis>KEMBALI KE DASAR</emphasis> berkas <filename>.htaccess</filename></title>
			 <para>
				Berkas <filename>.htaccess</filename> berisi direktif konfigurasi Apache yang diberlakukan setiap kali suatu permintaan terkait dengan elemen dari direktori tempat itu disimpan. Lingkup direktif ini juga berlaku rekursif untuk semua subdirektori di dalamnya.
			</para>
			 <indexterm>
				<primary><filename>.htaccess</filename></primary>
			</indexterm>
			 <para>
				Sebagian besar direktif yang bisa muncul dalam blok <literal>Directory</literal> juga legal dalam berkas <filename>.htaccess</filename>.
			</para>
			 </sidebar> <para>
				Direktif <literal>AllowOverride</literal> mencantumkan semua pilihan yang dapat diaktifkan atau dinonaktifkan melalui berkas <filename>.htaccess</filename>. Penggunaan umum pilihan ini adalah untuk membatasi <literal>ExecCGI</literal>, sehingga administrator memilih pengguna yang diizinkan untuk menjalankan program di bawah identitas server web (pengguna <literal>www-data</literal>).
			</para>
			 <indexterm>
				<primary><literal>AllowOverride</literal>, direktif Apache</primary>
			</indexterm>
			 <section>
				<title>Memerlukan Otentikasi</title>
				 <indexterm>
					<primary>otentikasi web</primary>
				</indexterm>
				 <para>
					Dalam beberapa keadaan, akses ke sebagian dari sebuah situs web harus dibatasi, jadi hanya pengguna sah yang memberikan nama pengguna dan kata sandi yang diberikan akses ke isi.
				</para>
				 <example>
					<title>berkas <filename>.htaccess</filename> yang memerlukan otentikasi</title>
					 
<programlisting>
Require valid-user
AuthName "Private directory"
AuthType Basic
AuthUserFile /etc/apache2/authfiles/htpasswd-private</programlisting>

				</example>
				 <sidebar> <title><emphasis>KEAMANAN</emphasis> Tidak ada keamanan</title>
				 <para>
					Sistem otentikasi yang digunakan dalam contoh di atas (<literal>Basic</literal>) memiliki keamanan minimal karena kata sandi dikirim dalam bentuk teks (hanya dikodekan sebagai <emphasis>base64</emphasis>, yang merupakan pengkodean sederhana, bukan suatu metode enkripsi). Juga harus dicatat bahwa dokumen-dokumen yang "dilindungi" oleh mekanisme ini juga pergi melalui jaringan dalam keadaan polos. Jika keamanan penting, seluruh sambungan HTTP harus dienkripsi dengan SSL.
				</para>
				 </sidebar> <para>
					Berkas <filename>/etc/apache2/authfiles/htpasswd-private</filename> berisi daftar pengguna dan kata sandi; itu umumnya dimanipulasi dengan perintah <command>htpasswd</command>. Sebagai contoh, perintah berikut digunakan untuk menambahkan pengguna atau mengubah sandi: <indexterm><primary><command>htpasswd</command></primary></indexterm>
				</para>
				 
<screen>
<computeroutput># </computeroutput><userinput>htpasswd /etc/apache2/authfiles/htpasswd-private <replaceable>user</replaceable>
</userinput><computeroutput>New password:
Re-type new password:
Adding password for user <replaceable>user</replaceable>
</computeroutput></screen>

			</section>
			 <section>
				<title>Membatasi Akses</title>
				 <indexterm>
					<primary>pembatasan akses web</primary>
				</indexterm>
				 <para>
					Direktif <literal>Require</literal> mengendalikan pembatasan akses untuk suatu direktori (dan subdirektorinya, secara rekursif).
				</para>
				 <indexterm>
					<primary>Direktif Apache</primary>
				</indexterm>
				 <indexterm>
					<primary>direktif, Apache</primary>
				</indexterm>
				 <indexterm>
					<primary><literal>Require</literal>, direktif Apache</primary>
				</indexterm>
				 <para>
					Dapat digunakan untuk membatasi akses berdasarkan kepada banyak kriteria; kita akan berhenti di menggambarkan pembatasan akses berdasarkan alamat IP dari klien, tapi itu bisa dibuat jauh lebih kuat daripada itu, terutama ketika beberapa direktif <literal>Require</literal> digabung dalam sebuah blok <literal>RequireAll</literal>.
				</para>
				 <example>
					<title>Hanya mengizinkan dari jaringan lokal</title>
					 
<programlisting>Require ip 192.168.0.0/16</programlisting>

				</example>
				 <sidebar> <title><emphasis>ALTERNATIF</emphasis> Sintaks lama</title>
				 <para>
					Sintaks <literal>Require</literal> hanya tersedia di Apache 2.4 (versi di <emphasis role="distribution">Jessie</emphasis>). Untuk pengguna <emphasis role="distribution">Wheezy</emphasis>, sintaks Apache 2.2 berbeda, dan kami menjelaskan di sini hanya untuk referensi, walaupun itu juga dapat dibuat tersedia di Apache 2.4 menggunakan modul <literal>mod_access_compat</literal>.
				</para>
				 <para>
					Direktif <literal>Allow from</literal> dan <literal>Deny from</literal> mengendalikan pembatasan akses untuk suatu direktori (dan subdirektorinya, secara rekursif).
				</para>
				 <indexterm>
					<primary><literal>Allow from</literal>, direktif Apache</primary>
				</indexterm>
				 <indexterm>
					<primary><literal>Deny from</literal>, direktif Apache</primary>
				</indexterm>
				 <indexterm>
					<primary><literal>Order</literal>, direktif Apache</primary>
				</indexterm>
				 <para>
					Direktif <literal>Order</literal> memberitahu server dari urutan atas direktif <literal>Allow from</literal> dan <literal>Deny from</literal> diterapkan; yang terakhir cocok didahulukan. Secara konkret, <literal>Order deny,allow</literal> memungkinkan akses jika tidak ada <literal>Deny from</literal> yang berlaku, atau jika sebuah direktif <literal>Allow from</literal> berlaku. Sebaliknya, <literal>Order allow,deny</literal> menolak akses jika tidak ada direktif <literal>Allow from</literal> yang cocok (atau jika direktif <literal>Deny from</literal> berlaku).
				</para>
				 <para>
					Direktif <literal>Allow from</literal> dan <literal>Deny from</literal> dapat diikuti oleh sebuah alamat IP, suatu jaringan (seperti <literal>192.168.0.0/255.255.255.0</literal>, <literal>192.168.0.0/24</literal>, atau bahkan <literal>192.168.0</literal> ), nama host atau nama domain, atau kata kunci <literal>all</literal>, yang berlaku untuk semua.
				</para>
				 <para>
					Misalnya, untuk menolak koneksi secara default, tetapi memungkinkan mereka dari jaringan lokal, Anda bisa menggunakan ini:
				</para>
				 
<programlisting>
Order deny,allow
Allow from 192.168.0.0/16
Deny from all</programlisting>
				 </sidebar>
			</section>

		</section>
		 <section>
			<title>Penganalisis Log</title>
			 <para>
				Penganalisis log sering dipasang pada sebuah server web; karena memberi administrator gambaran yang presisi atas pola penggunaan server.
			</para>
			 <para>
				Para administrator Falcot Corp memilih <emphasis>AWStats</emphasis> (<emphasis>Advanced Web Statistics</emphasis>), untuk menganalisis berkas log Apache mereka.
			</para>
			 <indexterm>
				<primary><emphasis>AWStats</emphasis></primary>
			</indexterm>
			 <indexterm>
				<primary>penganalisis log web</primary>
			</indexterm>
			 <indexterm>
				<primary>log</primary>
				<secondary>penganalisis log web</secondary>
			</indexterm>
			 <indexterm>
				<primary>penganalisis log web</primary>
			</indexterm>
			 <para>
				Langkah konfigurasi pertama adalah penyesuaian berkas <filename>/etc/awstats/awstats.conf</filename>. Para administrator Falcot mempertahankannya kecuali parameter berikut:
			</para>
			 
<programlisting>
LogFile="/var/log/apache2/access.log"
LogFormat = "%virtualname %host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot"
SiteDomain="www.falcot.com"
HostAliases="falcot.com REGEX[^.*\.falcot\.com$]"
DNSLookup=1
LoadPlugin="tooltips"</programlisting>
			 <para>
				Semua parameter ini didokumentasikan oleh komentar dalam berkas templat. Secara khusus, parameter <varname>LogFile</varname> dan <varname>LogFormat</varname> menggambarkan lokasi dan format berkas log dan informasi di dalamnya; <varname>SiteDomain</varname> dan <varname>HostAliases</varname> berisi daftar berbagai nama yang dipakai oleh situs web utama.
			</para>
			 <para>
				Untuk situs lalu lintas tinggi, <varname>DNSLookup</varname> biasanya tidak diatur ke <literal>1</literal>; untuk situs kecil, seperti Falcot yang dijelaskan di atas, pengaturan ini memungkinkan mendapatkan laporan yang lebih mudah dibaca yang meliputi nama-nama lengkap mesin bukan alamat IP mentah.
			</para>
			 <sidebar> <title><emphasis>KEAMANAN</emphasis> Akses ke statistik</title>
			 <para>
				AWStats membuat statistik yang tersedia di situs web tanpa batasan secara default, tetapi pembatasan dapat diatur sehingga (mungkin) hanya beberapa alamat IP (internal) yang dapat mengaksesnya; daftar alamat IP yang diperbolehkan perlu didefinisikan dalam parameter <varname>AllowAccessFromWebToFollowingIPAddresses</varname>
			</para>
			 </sidebar> <para>
				AWStats juga akan diaktifkan untuk host virtual lain; masing-masing host virtual perlu memiliki berkas konfigurasi tersendiri, seperti misalnya <filename>/etc/awstats/awstats.www.falcot.org.conf</filename>.
			</para>
			 <example>
				<title>Berkas konfigurasi AWStats untuk sebuah host virtual</title>
				 
<programlisting>
Include "/etc/awstats/awstats.conf"
SiteDomain="www.falcot.org"
HostAliases="falcot.org"</programlisting>

			</example>
			 <para>
				AWStats menggunakan banyak ikon yang disimpan dalam direktori <filename>/usr/share/awstats/ikon/</filename>. Agar ikon ini akan tersedia di situs web, konfigurasi Apache perlu disesuaikan untuk menyertakan direktif berikut:
			</para>
			 
<programlisting>
Alias /awstats-icon/ /usr/share/awstats/icon/</programlisting>
			 <para>
				Setelah beberapa menit (dan setelah skrip dijalankan beberapa kali), hasil tersedia daring: <ulink type="block" url="http://www.falcot.com/cgi-bin/awstats.pl" /> <ulink type="block" url="http://www.falcot.org/cgi-bin/awstats.pl" />
			</para>
			 <sidebar> <title><emphasis>HATI-HATI</emphasis> Rotasi berkas log</title>
			 <para>
				Agar statistik memperhitungkan semua log, <emphasis>AWStats</emphasis> perlu dijalankan tepat sebelum berkas log Apache tersebut diputar. Melihat direktif <literal>prerotate</literal> dari berkas <filename>/etc/logrotate.d/apache2</filename>, ini dapat diselesaikan dengan meletakkan symlink ke <filename>/usr/share/awstats/tools/update.sh</filename> di <filename>/etc/logrotate.d/ httpd-prerotate</filename>:
			</para>
			 
<screen><computeroutput>$ </computeroutput><userinput>cat /etc/logrotate.d/apache2
</userinput><computeroutput>/var/log/apache2/*.log {
  daily
  missingok
  rotate 14
  compress
  delaycompress
  notifempty
  create 644 root adm
  sharedscripts
  postrotate
    if /etc/init.d/apache2 status &gt; /dev/null ; then \
      /etc/init.d/apache2 reload &gt; /dev/null; \
    fi;
  endscript
  prerotate
    if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
      run-parts /etc/logrotate.d/httpd-prerotate; \
    fi; \
  endscript
}
$ </computeroutput><userinput>sudo mkdir -p /etc/logrotate.d/httpd-prerotate
</userinput><computeroutput>$ </computeroutput><userinput>sudo ln -sf /usr/share/awstats/tools/update.sh \
  /etc/logrotate.d/httpd-prerotate/awstats
</userinput></screen>
			 <para>
				Perhatikan juga bahwa berkas log yang dibuat oleh <command>logrotate</command> harus dibaca oleh semua orang, terutama AWStats. Dalam contoh di atas, ini dijamin oleh baris <literal>create 644 root adm</literal> (bukan izin default <literal>640</literal>).
			</para>
			 </sidebar>
		</section>

	</section>
	 <section id="sect.ftp-file-server">
		<title>Server Berkas FTP</title>
		 <indexterm>
			<primary>FTP (<emphasis>File Transfer Protocol</emphasis>)</primary>
		</indexterm>
		 <para>
			FTP (<emphasis>File Transfer Protocol</emphasis>) adalah salah satu protokol pertama Internet (RFC 959 dikeluarkan pada tahun 1985!). Itu digunakan untuk mendistribusikan berkas bahkan sebelum Web lahir (protokol HTTP diciptakan pada tahun 1990, dan secara resmi ditetapkan untuk versi 1.0 oleh RFC 1945, diterbitkan pada tahun 1996).
		</para>
		 <para>
			Protokol ini memungkinkan pengunggahan berkas dan pengunduhan berkas; untuk alasan ini, masih banyak digunakan untuk menyebarkan pembaruan ke sebuah situs web yang diselenggarakan oleh salah satu penyedia layanan Internet (atau entitas lain yang mewadahi situs web). Dalam kasus ini, akses aman dipaksakan dengan pengidentifikasi pengguna dan kata sandi; saat otentikasi sukses, server FTP memberikan akses baca-tulis ke direktori home pengguna.
		</para>
		 <para>
			Other FTP servers are mainly used to distribute files for public downloading; Debian packages are a good example. The contents of these servers is fetched from other, geographically remote, servers; it is then made available to less distant users. This means that client authentication is not required; as a consequence, this operating mode is known as “anonymous FTP”. To be perfectly correct, the clients do authenticate with the <literal>anonymous</literal> username; the password is often, by convention, the user's email address, but the server ignores it.
		</para>
		 <para>
			Many FTP servers are available in Debian (<emphasis role="pkg">ftpd</emphasis>, <emphasis role="pkg">proftpd-basic</emphasis>, <emphasis role="pkg">pyftpd</emphasis> and so on). The Falcot Corp administrators picked <emphasis role="pkg">vsftpd</emphasis> because they only use the FTP server to distribute a few files (including a Debian package repository); since they don't need advanced features, they chose to focus on the security aspects.
		</para>
		 <indexterm>
			<primary><emphasis role="pkg">vsftpd</emphasis></primary>
		</indexterm>
		 <para>
			Installing the package creates an <literal>ftp</literal> system user. This account is always used for anonymous FTP connections, and its home directory (<filename>/srv/ftp/</filename>) is the root of the tree made available to users connecting to this service. The default configuration (in <filename>/etc/vsftpd.conf</filename>) requires some changes to cater to the simple need of making big files available for public downloads: anonymous access needs to be enabled (<literal>anonymous_enable=YES</literal>) and read-only access of local users needs to be disabled (<literal>local_enable=NO</literal>). The latter is particularly important since the FTP protocol doesn't use any form of encryption and the user password could be intercepted over the wire.
		</para>

	</section>
	 <section id="sect.nfs-file-server">
		<title>Server Berkas NFS</title>
		 <para>
			NFS (<emphasis>Network File System</emphasis>) is a protocol allowing remote access to a filesystem through the network. All Unix systems can work with this protocol; when Windows systems are involved, Samba must be used instead.
		</para>
		 <indexterm>
			<primary>NFS</primary>
		</indexterm>
		 <indexterm>
			<primary><emphasis>Network</emphasis></primary>
			<secondary><emphasis>File System</emphasis></secondary>
		</indexterm>
		 <indexterm>
			<primary>sistem berkas</primary>
			<secondary>jaringan</secondary>
		</indexterm>
		 <indexterm>
			<primary>berkas</primary>
			<secondary>server</secondary>
		</indexterm>
		 <indexterm>
			<primary>server</primary>
			<secondary>berkas</secondary>
		</indexterm>
		 <para>
			NFS is a very useful tool but, historically, it has suffered from many limitations, most of which have been addressed with version 4 of the protocol. The downside is that the latest version of NFS is harder to configure when you want to make use of basic security features such as authentication and encryption since it relies on Kerberos for those parts. And without those, the NFS protocol must be restricted to a trusted local network since data goes over the network unencrypted (a <emphasis>sniffer</emphasis> can intercept it) and access rights are granted based on the client's IP address (which can be spoofed).
		</para>
		 <sidebar> <title><emphasis>DOCUMENTATION</emphasis> NFS HOWTO</title>
		 <para>
			Dokumentasi yang baik untuk menggelar NFSv4 jarang ditemui. Berikut adalah beberapa petunjuk dengan konten dari berbagai kualitas yang setidaknya memberikan beberapa petunjuk tentang apa yang harus dilakukan. <ulink type="block" url="https://help.ubuntu.com/community/NFSv4Howto" /> <ulink type="block" url="http://wiki.linux-nfs.org/wiki/index.php/Nfsv4_configuration" />
		</para>
		 </sidebar> <section>
			<title>Mengamankan NFS</title>
			 <indexterm>
				<primary>NFS</primary>
				<secondary>keamanan</secondary>
			</indexterm>
			 <para>
				If you don't use the Kerberos-based security features, it is vital to ensure that only the machines allowed to use NFS can connect to the various required RPC servers, because the basic protocol trusts the data received from the network. The firewall must also block <emphasis>IP spoofing</emphasis> so as to prevent an outside machine from acting as an inside one, and access to the appropriate ports must be restricted to the machines meant to access the NFS shares.
			</para>
			 <sidebar> <title><emphasis>KEMBALI KE DASAR</emphasis> RPC</title>
			 <para>
				RPC (<emphasis>Remote Procedure Call</emphasis>) is a Unix standard for remote services. NFS is one such service.
			</para>
			 <indexterm>
				<primary>RPC</primary>
			</indexterm>
			 <indexterm>
				<primary><emphasis>Remote Procedure Call</emphasis></primary>
			</indexterm>
			 <para>
				RPC services register to a directory known as the <emphasis>portmapper</emphasis>. A client wishing to perform an NFS query first addresses the <emphasis>portmapper</emphasis> (on port 111, either TCP or UDP), and asks for the NFS server; the reply usually mentions port 2049 (the default for NFS). Not all RPC services necessarily use a fixed port.
			</para>
			 </sidebar> <para>
				Older versions of the protocol required other RPC services which used dynamically assigned ports. Fortunately, with NFS version 4, only port 2049 (for NFS) and 111 (for the portmapper) are needed and they are thus easy to firewall.
			</para>
			 <indexterm>
				<primary><command>portmapper</command></primary>
			</indexterm>

		</section>
		 <section>
			<title>Server NFS</title>
			 <para>
				The NFS server is part of the Linux kernel; in kernels provided by Debian it is built as a kernel module. If the NFS server is to be run automatically on boot, the <emphasis role="pkg">nfs-kernel-server</emphasis> package should be installed; it contains the relevant start-up scripts.
			</para>
			 <para>
				Berkas konfigurasi server NFS, <filename>/etc/exsports</filename>, menampung daftar direktori yang dibuat tersedia melalui jaringan (<emphasis>diekspor</emphasis>). Untuk setiap share NFS, hanya mesin yang terdaftar yang diberi akses. Lebih banyak kontrol akses halus dapat diperoleh dengan beberapa pilihan. Sintaks berkas ini cukup sederhana:
			</para>
			 <indexterm>
				<primary><filename>exports</filename></primary>
			</indexterm>
			 <indexterm>
				<primary><filename>/etc/exports</filename></primary>
			</indexterm>
			 
<programlisting>
/direktori/yang/akan/di-share mesin1(opsi1,opsi2,...) mesin2(...) ...</programlisting>
			 <para>
				Note that with NFSv4, all exported directories must be part of a single hierarchy and that the root directory of that hierarchy must be exported and identified with the option <literal>fsid=0</literal> or <literal>fsid=root</literal>.
			</para>
			 <para>
				Each machine can be identified either by its DNS name or its IP address. Whole sets of machines can also be specified using either a syntax such as <literal>*.falcot.com</literal> or an IP address range such as <literal>192.168.0.0/255.255.255.0</literal> or <literal>192.168.0.0/24</literal>.
			</para>
			 <para>
				Directories are made available as read-only by default (or with the <literal>ro</literal> option). The <literal>rw</literal> option allows read-write access. NFS clients typically connect from a port restricted to root (in other words, below 1024); this restriction can be lifted by the <literal>insecure</literal> option (the <literal>secure</literal> option is implicit, but it can be made explicit if needed for clarity).
			</para>
			 <indexterm>
				<primary>NFS</primary>
				<secondary>opsi</secondary>
			</indexterm>
			 <para>
				By default, the server only answers an NFS query when the current disk operation is complete (<literal>sync</literal> option); this can be disabled with the <literal>async</literal> option. Asynchronous writes increase performance a bit, but they decrease reliability since there is a data loss risk in case of the server crashing between the acknowledgment of the write and the actual write on disk. Since the default value changed recently (as compared to the historical value of NFS), an explicit setting is recommended.
			</para>
			 <para>
				In order to not give root access to the filesystem to any NFS client, all queries appearing to come from a root user are considered by the server as coming from the <literal>nobody</literal> user. This behavior corresponds to the <literal>root_squash</literal> option, and is enabled by default. The <literal>no_root_squash</literal> option, which disables this behavior, is risky and should only be used in controlled environments. The <literal>anonuid=<replaceable>uid</replaceable></literal> and <literal>anongid=<replaceable>gid</replaceable></literal> options allow specifying another fake user to be used instead of UID/GID 65534 (which corresponds to user <literal>nobody</literal> and group <literal>nogroup</literal>).
			</para>
			 <para>
				With NFSv4, you can add a <literal>sec</literal> option to indicate the security level that you want: <literal>sec=sys</literal> is the default with no special security features, <literal>sec=krb5</literal> enables authentication only, <literal>sec=krb5i</literal> adds integrity protection, and <literal>sec=krb5p</literal> is the most complete level which includes privacy protection (with data encryption). For this to work you need a working Kerberos setup (that service is not covered by this book).
			</para>
			 <para>
				Other options are available; they are documented in the <citerefentry><refentrytitle>exports</refentrytitle>
				 <manvolnum>5</manvolnum></citerefentry> manual page.
			</para>
			 <sidebar> <title><emphasis>HATI-HATI</emphasis> Instalasi pertama</title>
			 <para>
				The <filename>/etc/init.d/nfs-kernel-server</filename> boot script only starts the server if the <filename>/etc/exports</filename> lists one or more valid NFS shares. On initial configuration, once this file has been edited to contain valid entries, the NFS server must therefore be started with the following command:
			</para>
			 
<screen>
<computeroutput># </computeroutput><userinput>service nfs-kernel-server start</userinput></screen>
			 </sidebar>
		</section>
		 <section>
			<title>Klien NFS</title>
			 <indexterm>
				<primary>klien</primary>
				<secondary>NFS</secondary>
			</indexterm>
			 <indexterm>
				<primary>NFS</primary>
				<secondary>klien</secondary>
			</indexterm>
			 <para>
				As with other filesystems, integrating an NFS share into the system hierarchy requires mounting. Since this filesystem has its peculiarities, a few adjustments were required in the syntaxes of the <command>mount</command> command and the <filename>/etc/fstab</filename> file.
			</para>
			 <example>
				<title>Manually mounting with the <command>mount</command> command</title>
				 
<screen>
          <computeroutput># </computeroutput><userinput>mount -t nfs4 -o rw,nosuid arrakis.internal.falcot.com:/shared /srv/shared</userinput></screen>

			</example>
			 <example>
				<title>Entri NFS di berkas <filename>/etc/fstab</filename></title>
				 
<programlisting>
arrakis.internal.falcot.com:/shared /srv/shared nfs4 rw,nosuid 0 0</programlisting>

			</example>
			 <para>
				The entry described above mounts, at system startup, the <filename>/shared/</filename> NFS directory from the <literal>arrakis</literal> server into the local <filename>/srv/shared/</filename> directory. Read-write access is requested (hence the <literal>rw</literal> parameter). The <literal>nosuid</literal> option is a protection measure that wipes any <literal>setuid</literal> or <literal>setgid</literal> bit from programs stored on the share. If the NFS share is only meant to store documents, another recommended option is <literal>noexec</literal>, which prevents executing programs stored on the share. Note that on the server, the <filename>shared</filename> directory is below the NFSv4 root export (for example <filename>/export/shared</filename>), it is not a top-level directory.
			</para>
			 <para>
				The <citerefentry><refentrytitle>nfs</refentrytitle>
				 <manvolnum>5</manvolnum></citerefentry> manual page describes all the options in some detail.
			</para>

		</section>

	</section>
	 <section id="sect.windows-file-server-with-samba">
		<title>Setting Up Windows Shares with Samba</title>
		 <para>
			Samba adalah keluarga alat penanganan protokol SMB (juga dikenal sebagai "CIFS") di Linux. Protokol ini digunakan oleh Windows untuk share jaringan dan pencetak bersama.
		</para>
		 <indexterm>
			<primary>Windows share</primary>
		</indexterm>
		 <indexterm>
			<primary>Samba</primary>
		</indexterm>
		 <indexterm>
			<primary>SMB</primary>
		</indexterm>
		 <indexterm>
			<primary>CIFS</primary>
		</indexterm>
		 <indexterm>
			<primary>server</primary>
			<secondary>berkas</secondary>
		</indexterm>
		 <para>
			Samba juga dapat bertindak sebagai pengontrol domain Windows. Ini adalah alat yang luar biasa untuk memastikan mulusnya integrasi server Linux dan mesin desktop kantor yang masih menjalankan Windows.
		</para>
		 <section>
			<title>Server Samba</title>
			 <para>
				Paket <emphasis role="pkg">samba</emphasis> berisi dua server utama Samba 4, <command>smbd</command> dan <command>nmbd</command>.
			</para>
			 <indexterm>
				<primary><command>smbd</command></primary>
			</indexterm>
			 <indexterm>
				<primary><command>nmbd</command></primary>
			</indexterm>
			 <sidebar> <title><emphasis>DOKUMENTASI</emphasis> Lebih lanjut</title>
			 <para>
				The Samba server is extremely configurable and versatile, and can address a great many different use cases matching very different requirements and network architectures. This book only focuses on the use case where Samba is used as a standalone server, but it can also be a NT4 Domain Controller or a full Active Directory Domain Controller, or a simple member of an existing domain (which could be a managed by a Windows server).
			</para>
			 <indexterm>
				<primary>pengontrol domain</primary>
			</indexterm>
			 <indexterm>
				<primary>domain Windows</primary>
			</indexterm>
			 <para>
				Paket <emphasis role="pkg">samba-doc</emphasis> berisi banyak berkas contoh dengan komentar dalam <filename>/usr/share/doc/samba-doc/examples/</filename>.
			</para>
			 </sidebar> <sidebar> <title><emphasis>ALAT</emphasis> Mengotentikasi dengan sebuah Server Windows</title>
			 <para>
				Winbind gives system administrators the option of using a Windows server as an authentication server. Winbind also integrates cleanly with PAM and NSS. This allows setting up Linux machines where all users of a Windows domain automatically get an account.
			</para>
			 <indexterm>
				<primary>Winbind</primary>
			</indexterm>
			 <para>
				Informasi lebih lanjut dapat ditemukan di direktori <filename>/usr/share/doc/samba-doc/examples/pam_winbind/</filename>.
			</para>
			 </sidebar> <section>
				<title>Menata konfigurasi dengan <command>debconf</command></title>
				 <para>
					Paket menyiapkan sebuah konfigurasi minimal selama instalasi awal tetapi Anda mestinya menjalankan <command>dpkg-reconfigure samba-common</command> untuk mengadaptasinya:
				</para>
				 <para>
					The first piece of required information is the name of the workgroup where the Samba server will belong (the answer is <literal>FALCOTNET</literal> in our case).
				</para>
				 <para>
					Paket juga mengusulkan mengidentifikasi server WINS dari informasi yang diberikan oleh daemon DHCP. Para administrator Falcot Corp menolak pilihan ini, karena mereka berniat untuk menggunakan server Samba itu sendiri sebagai server WINS.
				</para>
				 <indexterm>
					<primary>WINS</primary>
				</indexterm>

			</section>
			 <section>
				<title>Mengkonfigurasi Secara Manual</title>
				 <section>
					<title>Perubahan atas <filename>smb.conf</filename></title>
					 <para>
						Persyaratan di Falcot membutuhkan pilihan lainnya untuk diubah di berkas konfigurasi <filename>/etc/samba/smb.conf</filename>. Kutipan-kutipan berikut meringkas perubahan yang dilakukan di bagian <literal>[global]</literal>.
					</para>
					 
<programlisting>
[global]

## Browsing/Identification ###

# Change this to the workgroup/NT-domain name your Samba server will part of
   workgroup = FALCOTNET

# Windows Internet Name Serving Support Section:
# WINS Support - Tells the NMBD component of Samba to enable its WINS Server
   wins support = yes <co id="smb.conf.wins"></co>

[...]

####### Authentication #######

# Server role. Defines in which mode Samba will operate. Possible
# values are "standalone server", "member server", "classic primary
# domain controller", "classic backup domain controller", "active
# directory domain controller". 
#
# Most people will want "standalone sever" or "member server".
# Running as "active directory domain controller" will require first
# running "samba-tool domain provision" to wipe databases and create a
# new domain.
   server role = standalone server

# "security = user" is always a good idea. This will require a Unix account
# in this server for every user accessing the server.
   security = user <co id="smb.conf.security"></co>

[...]</programlisting>
					 <calloutlist>
						<callout arearefs="smb.conf.wins">
							<para>
								Menunjukkan bahwa Samba harus bertindak sebagai server nama Netbios (WINS) untuk jaringan lokal.
							</para>

						</callout>
						 <callout arearefs="smb.conf.security">
							<para>
								This is the default value for this parameter; however, since it is central to the Samba configuration, filling it explicitly is recommended. Each user must authenticate before accessing any share.
							</para>

						</callout>

					</calloutlist>

				</section>
				 <section>
					<title>Menambahkan Pengguna</title>
					 <para>
						Setiap pengguna Samba perlu sebuah akun di server; akun Unix harus dibuat terlebih dahulu, kemudian pengguna perlu didaftarkan di basis data Samba. Langkah Unix dilakukan secara normal (menggunakan <command>adduser</command> misalnya).
					</para>
					 <para>
						Menambahkan pengguna ke basis data Samba adalah sekedar menjalankan perintah <command>smbpasswd -a <replaceable>pengguna</replaceable></command>; perintah ini meminta kata sandi secara interaktif.
					</para>
					 <para>
						A user can be deleted with the <command>smbpasswd -x <replaceable>user</replaceable></command> command. A Samba account can also be temporarily disabled (with <command>smbpasswd -d <replaceable>user</replaceable></command>) and re-enabled later (with <command>smbpasswd -e <replaceable>user</replaceable></command>).
					</para>

				</section>

			</section>

		</section>
		 <section>
			<title>Klien Samba</title>
			 <para>
				The client features in Samba allow a Linux machine to access Windows shares and shared printers. The required programs are available in the <emphasis role="pkg">cifs-utils</emphasis> and <emphasis role="pkg">smbclient</emphasis> packages.
			</para>
			 <indexterm>
				<primary><emphasis>smbclient</emphasis></primary>
			</indexterm>
			 <indexterm>
				<primary><emphasis>cifs-utils</emphasis></primary>
			</indexterm>
			 <section>
				<title>Program <command>smbclient</command></title>
				 <para>
					The <command>smbclient</command> program queries SMB servers. It accepts a <literal>-U <replaceable>user</replaceable></literal> option, for connecting to the server under a specific identity. <command>smbclient //<replaceable>server</replaceable>/<replaceable>share</replaceable></command> accesses the share in an interactive way similar to the command-line FTP client. <command>smbclient -L <replaceable>server</replaceable></command> lists all available (and visible) shares on a server.
				</para>

			</section>
			 <section>
				<title>Mounting Windows Shares</title>
				 <para>
					The <command>mount</command> command allows mounting a Windows share into the Linux filesystem hierarchy (with the help of <command>mount.cifs</command> provided by <emphasis role="pkg">cifs-utils</emphasis>).
				</para>
				 <indexterm>
					<primary><command>mount.cifs</command></primary>
				</indexterm>
				 <indexterm>
					<primary>Windows share, mounting</primary>
				</indexterm>
				 <example>
					<title>Mounting a Windows share</title>
					 
<programlisting>
mount -t cifs //arrakis/shared /shared \
      -o credentials=/etc/smb-credentials</programlisting>

				</example>
				 <para>
					Berkas <filename>/etc/smb-credentials</filename> (yang harus tidak bisa dibaca oleh pengguna) memiliki format berikut:
				</para>
				 
<programlisting>
username = <replaceable>pengguna</replaceable>
password = <replaceable>kata sandi</replaceable></programlisting>
				 <para>
					Other options can be specified on the command-line; their full list is available in the <citerefentry><refentrytitle>mount.cifs</refentrytitle>
					 <manvolnum>1</manvolnum></citerefentry> manual page. Two options in particular can be interesting: <literal>uid</literal> and <literal>gid</literal> allow forcing the owner and group of files available on the mount, so as not to restrict access to root.
				</para>
				 <para>
					A mount of a Windows share can also be configured in <filename>/etc/fstab</filename>:
				</para>
				 
<programlisting>
//<replaceable>server</replaceable>/shared /shared cifs credentials=/etc/smb-credentials</programlisting>
				 <para>
					Unmounting a SMB/CIFS share is done with the standard <command>umount</command> command.
				</para>

			</section>
			 <section>
				<title>Pencetakan pada Pencetak Bersama</title>
				 <para>
					CUPS is an elegant solution for printing from a Linux workstation to a printer shared by a Windows machine. When the <emphasis role="pkg">smbclient</emphasis> is installed, CUPS allows installing Windows shared printers automatically.
				</para>
				 <indexterm>
					<primary>pencetakan</primary>
					<secondary>jaringan</secondary>
				</indexterm>
				 <para>
					Ini adalah langkah-langkah yang diperlukan:
				</para>
				 <itemizedlist>
					<listitem>
						<para>
							Masukkan konfigurasi antarmuka CUPS: <literal>http://localhost:631/admin</literal>
						</para>

					</listitem>
					 <listitem>
						<para>
							Klik pada "Tambah Pencetak".
						</para>

					</listitem>
					 <listitem>
						<para>
							Pilih perangkat pencetak, pilih "Pencetak Windows melalui SAMBA".
						</para>

					</listitem>
					 <listitem>
						<para>
							Masukkan URI koneksi untuk pencetak jaringan. Seharusnya terlihat seperti berikut:
						</para>
						 <para>
							<literal>smb://<replaceable>pengguna</replaceable>:<replaceable>katasandi</replaceable>@<replaceable>server</replaceable>/<replaceable>pencetak</replaceable></literal>.
						</para>

					</listitem>
					 <listitem>
						<para>
							Masukkan nama yang akan mengidentifikasi pencetak ini secara unik. Kemudian masukkan keterangan dan lokasi pencetak. Mereka adalah string yang akan ditampilkan kepada pengguna akhir untuk membantu mereka mengidentifikasi pencetak.
						</para>

					</listitem>
					 <listitem>
						<para>
							Tunjukkan produsen/model pencetak, atau langsung berikan sebuah berkas deskripsi pencetak (PPD) yang bekerja.
						</para>

					</listitem>

				</itemizedlist>
				 <para>
					Voilà, pencetak operasional!
				</para>

			</section>

		</section>

	</section>
	 <section id="sect.http-ftp-proxy">
		<title>Proksi HTTP/FTP</title>
		 <para>
			Suatu proksi HTTP/FTP bertindak sebagai perantara untuk koneksi HTTP dan/atau FTP. Perannya ada dua:
		</para>
		 <itemizedlist>
			<listitem>
				<para>
					Penyinggahan: dokumen-dokumen yang baru saja diunduh akan disalin secara lokal, yang menghindari pengunduhan berganda.
				</para>

			</listitem>
			 <listitem>
				<para>
					Server penyaringan: jika penggunaan proksi wajib (dan koneksi keluar diblokir kecuali mereka pergi melalui proksi), maka proksi dapat menentukan apakah permintaan tersebut dikabulkan.
				</para>

			</listitem>

		</itemizedlist>
		 <indexterm>
			<primary>Proksi HTTP/FTP</primary>
		</indexterm>
		 <indexterm>
			<primary>proxy cache</primary>
		</indexterm>
		 <para>
			Falcot Corp memilih Squid sebagai server proksi mereka.
		</para>
		 <indexterm>
			<primary>Squid</primary>
		</indexterm>
		 <section>
			<title>Memasang</title>
			 <para>
				Paket Debian <emphasis role="pkg">squid3</emphasis> hanya berisi proksi modular (cache). Mengubahnya menjadi sebuah server penyaringan membutuhkan instalasi paket tambahan <emphasis role="pkg">squidguard</emphasis>. Selain itu, <emphasis role="pkg">squid-cgi</emphasis> menyediakan antarmuka administrasi dan kuiri untuk proksi Squid.
			</para>
			 <para>
				Sebelum memasang, perlu dipastikan bahwa sistem dapat mengidentifikasi nama lengkap sendiri: <command>hostname -f</command> harus mengembalikan nama lengkap (termasuk domain). Jika tidak, maka berkas <filename>/etc/hosts</filename> harus disunting agar memuat nama lengkap dari sistem (misalnya, <literal>arrakis.falcot.com</literal>). Nama resmi komputer harus divalidasi dengan administrator jaringan untuk menghindari kemungkinan konflik nama.
			</para>

		</section>
		 <section>
			<title>Mengkonfigurasi sebuah Singgahan</title>
			 <para>
				Mengaktifkan fitur server singgahan cukup hanya dengan menyunting berkas konfigurasi <filename>/etc/squid3/squid.conf</filename> dan mengizinkan mesin-mesin dari jaringan lokal untuk menjalankan kuiri melalui proksi. Contoh berikut menunjukkan modifikasi yang dibuat oleh administrator Falcot Corp:
			</para>
			 <example>
				<title>Berkas <filename>/etc/squid3/squid.conf</filename> (kutipan)</title>
				 
<programlisting>
# MASUKKAN ATURAN ANDA DI SINI UNTUK MENGIZINKAN AKSES DARI KLIEN ANDA

# Contoh aturan yang mengizinkan akses dari jaringan lokal Anda.
# Sesuaikan untuk menyertakan jaringan IP (internal) dari mana
# meramban mesti diizinkan.
acl our_networks src 192.168.1.0/24 192.168.2.0/24
http_access allow our_networks
http_access allow localhost
# Dan akhirnya tolak semua akses lain ke proksi ini
http_access deny all</programlisting>

			</example>

		</section>
		 <section>
			<title>Mengkonfigurasi suatu Penyaring</title>
			 <para>
				<command>squid</command> itu sendiri tidak melakukan penyaringan; tindakan ini diserahkan kepada <command>squidGuard</command>. Squid harus kemudian dikonfigurasi untuk berinteraksi dengan yang squidGuard. Ini termasuk menambahkan direktif berikut ke berkas <filename>/etc/squid3/squid.conf</filename>:
			</para>
			 <indexterm>
				<primary><command>squidGuard</command></primary>
			</indexterm>
			 
<programlisting>
url_rewrite_program /usr/bin/squidGuard -c /etc/squid3/squidGuard.conf</programlisting>
			 <para>
				Program CGI <filename>/usr/lib/cgi-bin/squidGuard.cgi</filename> juga perlu dipasang, menggunakan <filename>/usr/share/doc/squidguard/examples/squidGuard.cgi.gz</filename> sebagai titik awal. Modifikasi yang diperlukan pada skrip ini adalah variabel <varname>$proxy</varname> dan <varname>$proxymaster</varname> (masing-masing adalah nama proksi dan surel kontak administrator). Variabel <varname>$image</varname> dan <varname>$redirect</varname> harus menunjuk ke gambar yang ada yang mewakili penolakan kuiri.
			</para>
			 <para>
				Penyaring diaktifkan dengan perintah <command>service squid3 reload</command>. Namun, karena paket <emphasis role="pkg">squidguard</emphasis> tidak melakukan penyaringan secara default, itu adalah tugas administrator untuk menentukan kebijakan. Ini dapat dilakukan dengan membuat berkas <filename>/etc/squid3/squidGuard.conf</filename> (menggunakan <filename>/etc/squidguard/squidGuard.conf.default</filename> sebagai templat jika diperlukan).
			</para>
			 <para>
				Basis data kerja harus dibuat ulang dengan <command>update-squidguard</command> setelah setiap perubahan berkas konfigurasi <command>squidGuard</command> (atau salah satu daftar domain atau URL yang disebutkan). Sintaks berkas konfigurasi didokumentasikan pada situs web berikut: <ulink type="block" url="http://www.squidguard.org/Doc/configure.html" />
			</para>
			 <indexterm>
				<primary><command>update-squidguard</command></primary>
			</indexterm>
			 <sidebar> <title><emphasis>ALTERNATIF</emphasis> DansGuardian</title>
			 <indexterm>
				<primary><emphasis role="pkg">dansguardian</emphasis></primary>
			</indexterm>
			 <indexterm>
				<primary>PICS</primary>
			</indexterm>
			 <para>
				Paket <emphasis role="pkg">dansguardian</emphasis> adalah sebuah alternatif untuk <emphasis>squidguard</emphasis>. Perangkat lunak ini tidak hanya menangani daftar hitam URL yang terlarang, tetapi dapat mengambil keuntungan dari sistem PICS (<emphasis>Platform for Internet Content Selection</emphasis>) untuk memutuskan apakah sebuah halaman dapat diterima dengan analisis dinamis isinya.
			</para>
			 </sidebar>
		</section>

	</section>
	 <section id="sect.ldap-directory">
		<title>Direktori LDAP</title>
		 <indexterm>
			<primary>LDAP</primary>
		</indexterm>
		 <indexterm>
			<primary>OpenLDAP</primary>
		</indexterm>
		 <indexterm>
			<primary>direktori, LDAP</primary>
		</indexterm>
		 <para>
			OpenLDAP adalah sebuah implementasi protokol LDAP; dengan kata lain, itu adalah sebuah basis data tujuan khusus yang dirancang untuk menyimpan direktori. Dalam kasus penggunaan yang paling umum, menggunakan server LDAP memungkinkan pemusatan manajemen akun pengguna dan izin terkait. Selain itu, sebuah basis data LDAP mudah direplikasi, yang memungkinkan menyiapkan beberapa server LDAP yang tersinkronisasi. Ketika jaringan dan basis pengguna tumbuh cepat, beban kemudian dapat diseimbangkan ke beberapa server.
		</para>
		 <para>
			Data LDAP terstruktur dan hirarkis. Struktur didefinisikan oleh "skema" yang menggambarkan jenis objek yang dapat disimpan oleh basis data, dengan daftar semua atribut mereka yang mungkin. Sintaks yang digunakan untuk merujuk pada suatu obyek tertentu dalam basis data tersebut berdasarkan atas struktur ini, yang menjelaskan kompleksitasnya.
		</para>
		 <section>
			<title>Memasang</title>
			 <para>
				Paket <emphasis role="pkg">slapd</emphasis> berisi server OpenLDAP. Paket <emphasis role="pkg">ldap-utils</emphasis> memuat alat bantu baris perintah untuk berinteraksi dengan server LDAP.
			</para>
			 <indexterm>
				<primary><emphasis>slapd</emphasis></primary>
			</indexterm>
			 <para>
				Memasang <emphasis role="pkg">slapd</emphasis> biasanya mengajukan sangat sedikit pertanyaan dan basis data yang dihasilkan sangat boleh jadi tidak sesuai dengan kebutuhan Anda. Untungnya sekedar <command>dpkg-reconfigure slapd</command> memungkinkan Anda mengkonfigurasi ulang basis data LDAP dengan lebih banyak rincian:
			</para>
			 <itemizedlist>
				<listitem>
					<para>
						Abaikan konfigurasi server OpenLDAP? Tidak, tentu saja, kami ingin mengkonfigurasi layanan ini.
					</para>

				</listitem>
				 <listitem>
					<para>
						Nama domain DNS: "<literal>falcot.com</literal>".
					</para>

				</listitem>
				 <listitem>
					<para>
						Nama organisasi: "Falcot Corp".
					</para>

				</listitem>
				 <listitem>
					<para>
						Kata sandi administratif harus diketikkan.
					</para>

				</listitem>
				 <listitem>
					<para>
						Backend basis data yang dipakai: "MDB".
					</para>

				</listitem>
				 <listitem>
					<para>
						Apakah Anda ingin basis data dihapus ketika <emphasis role="pkg">slapd</emphasis> dibersihkan? Tidak. Tidak ada gunanya berrisiko kehilangan basis data jika terjadi kesalahan.
					</para>

				</listitem>
				 <listitem>
					<para>
						Memindahkan basis data lama? Ini hanya ditanyakan ketika konfigurasi diupayakan sementara basis data yang sudah ada. Hanya jawab "yes" jika Anda benar-benar ingin mulai lagi dari basis data yang bersih, misalnya jika Anda menjalankan <command>dpkg-reconfigure slapd</command> tepat setelah instalasi awal.
					</para>

				</listitem>
				 <listitem>
					<para>
						Izinkan protokol LDAPv2? Tidak, itu tidak ada gunanya. Semua alat yang akan kita gunakan memahami protokol LDAPv3.
					</para>

				</listitem>

			</itemizedlist>
			 <sidebar> <title><emphasis>KEMBALI KE DASAR</emphasis> format LDIF</title>
			 <para>
				Suatu berkas LDIF (<emphasis>LDAP Data Interchange Format</emphasis>) adalah sebuah berkas teks portabel yang menggambarkan isi dari basis data LDAP (atau bagian daripadanya); ini kemudian dapat digunakan untuk menyuntikkan data ke server LDAP lain.
			</para>
			 <indexterm>
				<primary>LDIF</primary>
			</indexterm>
			 </sidebar> <para>
				Basis data minimal sekarang dikonfigurasi, seperti yang ditunjukkan oleh kuiri berikut:
			</para>
			 
<screen>
<computeroutput>$ </computeroutput><userinput>ldapsearch -x -b dc=falcot,dc=com</userinput>
<computeroutput># extended LDIF
#
# LDAPv3
# base &lt;dc=falcot,dc=com&gt; with scope sub
# filter: (objectclass=*)
# requesting: ALL
#

# falcot.com
dn: dc=falcot,dc=com
objectClass: top
objectClass: dcObject
objectClass: organization
o: Falcot Corp
dc: falcot

# admin, falcot.com
dn: cn=admin,dc=falcot,dc=com
objectClass: simpleSecurityObject
objectClass: organizationalRole
cn: admin
description: LDAP administrator

# search result
search: 2
result: 0 Success

# numResponses: 3
# numEntries: 2
</computeroutput></screen>
			 <para>
				Kuiri mengembalikan dua objek: organisasi itu sendiri, dan pengguna administratif.
			</para>

		</section>
		 <section>
			<title>Mengisi Direktori</title>
			 <para>
				Karena basis data kosong yang tidak terlalu berguna, kita akan menyuntikkan ke dalamnya semua direktori yang ada; ini mencakup basis data pengguna, grup, layanan, dan host.
			</para>
			 <para>
				Paket <emphasis role="pkg">migrationtools</emphasis> menyediakan seperangkat skrip yang didedikasikan untuk mengekstrak data dari direktori standar Unix (<filename>/etc/passwd</filename>, <filename>/etc/group</filename>, <filename>/etc/services</filename>, <filename>/etc/hosts</filename>, dan seterusnya), mengkonversi data ini dan menyuntikkan ke basis data LDAP.
			</para>
			 <indexterm>
				<primary><emphasis role="pkg">migrationtools</emphasis></primary>
			</indexterm>
			 <para>
				Setelah paket terpasang, <filename>/etc/migrationtools/migrate_common.ph</filename> harus disunting; pilihan <varname>IGNORE_UID_BELOW</varname> dan <varname>IGNORE_GID_BELOW</varname> perlu diaktifkan (cukup dengan manghapus tanda komentar), dan <varname>DEFAULT_MAIL_DOMAIN</varname>/<varname>DEFAULT_BASE</varname> perlu diperbarui.
			</para>
			 <para>
				Operasi migrasi sebenarnya, ditangani oleh perintah <command>migrate_all_online.sh</command>, sebagai berikut:
			</para>
			 
<screen>
<computeroutput># </computeroutput><userinput>cd /usr/share/migrationtools</userinput>
<computeroutput># </computeroutput><userinput>LDAPADD="/usr/bin/ldapadd -c" ETC_ALIASES=/dev/null ./migrate_all_online.sh</userinput></screen>
			 <para>
				<command>migrate_all_online.sh</command> menanyakan beberapa pertanyaan tentang basis data LDAP tempat tujuan data akan dimigrasi. <xref linkend="tab-migrate-all" xrefstyle="select: label nopage" /> meringkas jawaban yang diberikan dalam use-case Falcot.
			</para>
			 <table colsep="1" id="tab-migrate-all">
				<title>Jawaban atas pertanyaan yang diajukan oleh skrip <command>migrate_all_online.sh</command></title>
				 <tgroup cols="2">
					<colspec align="justify"></colspec>
					<colspec align="justify"></colspec>
					 <thead>
						<row>
							<entry>Pertanyaan</entry>
							<entry>Jawaban</entry>
						</row>

					</thead>
					 <tbody>
						<row>
							<entry>konteks penamaan X.500</entry>
							 <entry><literal>dc=falcot,dc=com</literal></entry>

						</row>
						 <row>
							<entry>Nama host server LDAP</entry>
							 <entry><literal>localhost</literal></entry>

						</row>
						 <row>
							<entry>Manajer DN</entry>
							 <entry><literal>cn=admin,dc=falcot,dc=com</literal></entry>

						</row>
						 <row>
							<entry>Kredensial Bind</entry>
							 <entry>kata sandi administratif</entry>

						</row>
						 <row>
							<entry>Buat DUAConfigProfile</entry>
							 <entry>tidak</entry>

						</row>

					</tbody>

				</tgroup>

			</table>
			 <para>
				Kami sengaja mengabaikan migrasi dari berkas <filename>/etc/aliases</filename>, karena skema standar yang disediakan oleh Debian tidak termasuk struktur yang menggunakan skrip ini untuk menggambarkan alias email. Jika kita ingin mengintegrasikan data ini ke direktori, berkas <filename>/etc/ldap/schema/misc.schema</filename> harus ditambahkan ke skema standar.
			</para>
			 <sidebar> <title><emphasis>ALAT</emphasis> Meramban suatu direktori LDAP</title>
			 <para>
				Perintah <command>jxplorer</command> (dalam paket dengan nama yang sama) adalah alat grafis yang memungkinkan untuk meramban dan menyunting suatu basis data LDAP. Ini adalah alat yang menarik yang menyediakan gambaran yang baik ke administrator tentang struktur hirarkis data LDAP.
			</para>
			 <indexterm>
				<primary><command>jxplorer</command></primary>
			</indexterm>
			 </sidebar> <para>
				Perhatikan juga penggunaan opsi <literal>-c</literal> untuk perintah <command>ldapadd</command>; opsi ini meminta pengolahan tidak berhenti saat ada kesalahan. Penggunaan opsi ini diperlukan karena mengubah <filename>/etc/services</filename> sering menghasilkan beberapa kesalahan yang aman untuk diabaikan.
			</para>

		</section>
		 <section>
			<title>Mengelola akun dengan LDAP</title>
			 <para>
				Sekarang basis data LDAP berisi beberapa informasi yang berguna, waktunya telah tiba untuk memakai data ini. Bagian ini berfokus pada bagaimana mengkonfigurasi sistem Linux sehingga berbagai sistem direktori memanfaatkan basis data LDAP.
			</para>
			 <section id="sect.config-nss">
				<title>Mengkonfigurasi NSS</title>
				 <para>
					Sistem NSS (Name Service Switch, lihat bilah sisi <xref linkend="sidebar.intro-nss" />) adalah sebuah sistem modular yang dirancang untuk menentukan atau mengambil informasi untuk direktori sistem. Menggunakan LDAP sebagai sumber data untuk NSS memerlukan memasang paket <emphasis role="pkg">libnss-ldap</emphasis>. Instalasi menanyakan beberapa pertanyaan; jawaban dirangkum dalam <xref linkend="tab-libnss-ldap" xrefstyle="select: label nopage" />.
				</para>
				 <indexterm>
					<primary><emphasis>libnss-ldap</emphasis></primary>
				</indexterm>
				 <table colsep="1" id="tab-libnss-ldap">
					<title>Mengatur konfigurasi paket <emphasis role="pkg">libnss-ldap</emphasis></title>
					 <tgroup cols="2">
						<colspec align="justify"></colspec>
						 <colspec align="justify"></colspec>
						 <thead>
							<row>
								<entry>Pertanyaan</entry>
								 <entry>Jawaban</entry>

							</row>

						</thead>
						 <tbody>
							<row>
								<entry>Uniform Resource Identifier server LDAP</entry>
								 <entry><literal>ldap://ldap.falcot.com</literal></entry>

							</row>
							 <row>
								<entry>Distinguished name dari basis pencarian</entry>
								 <entry><literal>dc=falcot,dc=com</literal></entry>

							</row>
							 <row>
								<entry>Versi LDAP yang akan dipakai</entry>
								 <entry><literal>3</literal></entry>

							</row>
							 <row>
								<entry>Apakah basis data LDAP memerlukan login?</entry>
								 <entry>tidak</entry>

							</row>
							 <row>
								<entry>Hak LDAP khusus bagi root</entry>
								 <entry>ya</entry>

							</row>
							 <row>
								<entry>Jadikan berkas konfigurasi hanya dapat dibaca/ditulisi oleh pemiliknya</entry>
								 <entry>tidak</entry>

							</row>
							 <row>
								<entry>Akun LDAP untuk root</entry>
								 <entry><literal>cn=admin,dc=falcot,dc=com</literal></entry>

							</row>
							 <row>
								<entry>Kata sandi akun root LDAP</entry>
								 <entry>kata sandi administratif</entry>

							</row>

						</tbody>

					</tgroup>

				</table>
				 <para>
					Berkas <filename>/etc/nsswitch.conf</filename> lalu perlu diubah, sehingga mengkonfigurasi NSS untuk menggunakan modul <command>ldap</command> yang baru dipasang.
				</para>
				 <example>
					<title>Berkas <filename>/etc/nsswitch.conf</filename></title>
					 
<programlisting>
# /etc/nsswitch.conf
#
# Example configuration of GNU Name Service Switch functionality.
# If you have the `glibc-doc' and `info' packages installed, try:
# `info libc "Name Service Switch"' for information about this file.

passwd: ldap compat
group: ldap compat
shadow: ldap compat

hosts: files dns ldap
networks: ldap files

protocols: ldap db files
services: ldap db files
ethers: ldap db files
rpc: ldap db files

netgroup: ldap files</programlisting>

				</example>
				 <para>
					Modul <command>ldap</command> biasanya dimasukkan sebelum yang lain, dan itu karena itu dikuiri pertama. Pengecualian adalah layanan <literal>hosts</literal> karena menghubungi server LDAP membutuhkan terlebih dahulu konsultasi ke DNS (untuk me-resolve <literal>ldap.falcot.com</literal>). Tanpa pengecualian ini, suatu kuiri nama host akan mencoba untuk bertanya ke server LDAP; ini akan memicu resolusi nama untuk server LDAP, dan seterusnya dalam suatu pengulangan tanpa ujung.
				</para>
				 <para>
					Jika server LDAP mesti dianggap otoritatif (dan berkas lokal yang digunakan oleh modul <command>files</command> diabaikan), layanan dapat dikonfigurasi dengan sintaks berikut:
				</para>
				 <para>
					<literal><replaceable>service</replaceable>: ldap [NOTFOUND=return] files</literal>.
				</para>
				 <para>
					Jika entri yang diminta tidak ada di basis data LDAP, kuiri akan mengembalikan jawaban "tidak ada" bahkan jika sumber daya ada di salah satu berkas lokal; berkas-berkas lokal ini hanya dapat digunakan ketika layanan LDAP mati.
				</para>

			</section>
			 <section id="sect.config-pam">
				<title>Mengkonfigurasi PAM</title>
				 <para>
					Bagian ini menjelaskan tentang konfigurasi PAM (lihat bilah sisi <xref linkend="sidebar.intro-pam" />) yang akan memungkinkan aplikasi untuk melakukan otentikasi yang diperlukan terhadap basis data LDAP.
				</para>
				 <sidebar> <title><emphasis>HATI-HATI</emphasis> Otentikasi yang rusak</title>
				 <para>
					Mengubah konfigurasi PAM standar yang digunakan oleh berbagai program adalah sebuah operasi yang sensitif. Kesalahan dapat menyebabkan otentikasi yang rusak, yang dapat mencegah masuk. Mempertahankan sebuah shell root terbuka oleh karena itu adalah tindakan pencegahan yang baik. Jika terjadi kesalahan konfigurasi, mereka dapat kemudian diperbaiki dan layanan dijalankan ulang dengan usaha minimum.
				</para>
				 </sidebar> <para>
					Modul LDAP untuk PAM disediakan oleh paket <emphasis role="pkg">libpam-ldap</emphasis>. Memasang paket ini menanyakan beberapa pertanyaan sangat mirip dengan yang di <emphasis role="pkg">libnss-ldap</emphasis>; beberapa parameter konfigurasi (seperti URI untuk server LDAP) bahkan dipakai bersama dengan paket <emphasis role="pkg">libnss-ldap</emphasis>. Jawaban dirangkum dalam <xref linkend="tab-libpam-ldap" xrefstyle="select: label nopage" />.
				</para>
				 <indexterm>
					<primary><emphasis>libpam-ldap</emphasis></primary>
				</indexterm>
				 <table colsep="1" id="tab-libpam-ldap">
					<title>Konfigurasi <emphasis>libpam-ldap</emphasis></title>
					 <tgroup cols="2">
						<colspec align="justify"></colspec>
						 <colspec align="justify"></colspec>
						 <thead>
							<row>
								<entry>Pertanyaan</entry>
								 <entry>Jawaban</entry>

							</row>

						</thead>
						 <tbody>
							<row>
								<entry>Izinkan akun admin LDAP untuk berperilaku seperti root lokal?</entry>
								 <entry>Ya. Hal ini memungkinkan menggunakan perintah <command>passwd</command> yang biasa untuk mengubah kata sandi yang disimpan dalam basis data LDAP.</entry>

							</row>
							 <row>
								<entry>Apakah basis data LDAP memerlukan login?</entry>
								 <entry>tidak</entry>

							</row>
							 <row>
								<entry>Akun LDAP untuk root</entry>
								 <entry><literal>cn=admin,dc=falcot,dc=com</literal></entry>

							</row>
							 <row>
								<entry>Kata sandi akun root LDAP</entry>
								 <entry>kata sandi administratif basis data LDAP</entry>

							</row>
							 <row>
								<entry>Algoritma enkripsi lokal yang digunakan untuk kata sandi</entry>
								 <entry>crypt</entry>

							</row>

						</tbody>

					</tgroup>

				</table>
				 <para>
					Memasang <emphasis role="pkg">libpam-ldap</emphasis> secara otomatis mengadaptasi konfigurasi PAM default yang didefinisikan dalam berkas <filename>/etc/pam.d/common-auth</filename>, <filename>/etc/pam.d/common-password</filename>, dan <filename>/etc/pam.d/common-account</filename>. Mekanisme ini menggunakan alat khusus <command>pam-auth-update</command> (yang disediakan oleh paket <emphasis role="pkg">libpam-runtime</emphasis>). Alat ini juga dapat dijalankan oleh administrator jika mereka ingin mengaktifkan atau menonaktifkan modul PAM.
				</para>
				 <indexterm>
					<primary><filename>common-auth</filename></primary>
				</indexterm>
				 <indexterm>
					<primary><filename>/etc/pam.d/common-auth</filename></primary>
				</indexterm>
				 <indexterm>
					<primary><filename>common-password</filename></primary>
				</indexterm>
				 <indexterm>
					<primary><filename>/etc/pam.d/common-password</filename></primary>
				</indexterm>
				 <indexterm>
					<primary><filename>common-account</filename></primary>
				</indexterm>
				 <indexterm>
					<primary><filename>/etc/pam.d/common-account</filename></primary>
				</indexterm>

			</section>
			 <section>
				<title>Mengamankan Pertukaran Data LDAP</title>
				 <indexterm>
					<primary>LDAP</primary>
					<secondary>aman</secondary>
				</indexterm>
				 <para>
					Secara default, protokol LDAP transit pada jaringan sebagai teks polos; ini termasuk kata sandi (yang dienkripsi). Karena kata sandi terenkripsi dapat diekstrak dari jaringan, mereka dapat rentan terhadap serangan bertipe dictionary-attack. Ini dapat dihindari dengan menggunakan lapisan tambahan enkripsi; memfungsikan lapisan ini adalah topik bagian ini.
				</para>
				 <section>
					<title>Menata Server</title>
					 <indexterm>
						<primary><foreignphrase>OpenSSL</foreignphrase></primary>
						<secondary>membuat kunci</secondary>
					</indexterm>
					 <indexterm>
						<primary>pasangan kunci</primary>
					</indexterm>
					 <para>
						Langkah pertama adalah untuk membuat pasangan kunci (terdiri dari kunci publik dan kunci privat) untuk server LDAP. Para administrator Falcot kembali memakai <emphasis>easy-rsa</emphasis> untuk menghasilkan ini (lihat <xref linkend="sect.easy-rsa" />). Menjalankan <command>. /build-key-server ldap.falcot.com</command> mengajukan beberapa pertanyaan biasa (lokasi, nama organisasi, dan seterusnya). Jawaban untuk pertanyaan "common name" <emphasis>harus</emphasis> berupa fully-qualified hostname untuk server LDAP; dalam kasus kami, <literal>ldap.falcot.com</literal>.
					</para>
					 <para>
						Perintah ini akan membuat sertifikat dalam berkas <filename>keys/ldap.falcot.com.crt</filename>; kunci privat disimpan dalam <filename>keys/ldap.falcot.com.key</filename>.
					</para>
					 <para>
						Sekarang kunci ini harus dipasang di lokasi standar mereka, dan kita harus memastikan bahwa berkasi pribadi tersebut dapat dibaca oleh server LDAP yang berjalan di bawah identitas pengguna <literal>openldap</literal>:
					</para>
					 
<screen><computeroutput># </computeroutput><userinput>adduser openldap ssl-cert
</userinput><computeroutput>Adding user `openldap' to group `ssl-cert' ...
Adding user openldap to group ssl-cert
Done.
# </computeroutput><userinput>mv keys/ldap.falcot.com.key /etc/ssl/private/ldap.falcot.com.key
</userinput><computeroutput># </computeroutput><userinput>chown root:ssl-cert /etc/ssl/private/ldap.falcot.com.key
</userinput><computeroutput># </computeroutput><userinput>chmod 0640 /etc/ssl/private/ldap.falcot.com.key
</userinput><computeroutput># </computeroutput><userinput>mv newcert.pem /etc/ssl/certs/ldap.falcot.com.pem
</userinput></screen>
					 <para>
						Daemon <command>slapd</command> juga perlu diberitahu untuk menggunakan kunci-kunci ini untuk enkripsi. Konfigurasi server LDAP dikelola secara dinamis: konfigurasi dapat diperbarui dengan operasi LDAP normal pada hirarki objek <literal>cn=config</literal>, dan server memperbarui <filename>/etc/ldap/slapd.d</filename> secara real time untuk membuat konfigurasi persisten. <command>ldapmodify</command> adalah alat yang tepat untuk memperbarui konfigurasi:
					</para>
					 <example>
						<title>Mengkonfigurasi <command>slapd</command> untuk enkripsi</title>
						 
<screen><computeroutput># </computeroutput><userinput>cat &gt;ssl.ldif &lt;&lt;END
dn: cn=config
changetype: modify
add: olcTLSCertificateFile
olcTLSCertificateFile: /etc/ssl/certs/ldap.falcot.com.pem
-
add: olcTLSCertificateKeyFile
olcTLSCertificateKeyFile: /etc/ssl/private/ldap.falcot.com.key
-
END
</userinput><computeroutput># </computeroutput><userinput>ldapmodify -Y EXTERNAL -H ldapi:/// -f ssl.ldif
</userinput><computeroutput>SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry "cn=config"
</computeroutput></screen>

					</example>
					 <sidebar> <title><emphasis>ALAT</emphasis> <command>ldapvi</command> untuk menyunting direktori LDAP</title>
					 <indexterm>
						<primary><command>ldapvi</command></primary>
					</indexterm>
					 <para>
						Dengan <command>ldapvi</command>, Anda dapat menampilkan keluaran LDIF dari bagian manapun dari direktori LDAP, membuat beberapa perubahan dalam penyunting teks, dan membiarkan alat melakukan operasi LDAP yang sesuai untuk Anda.
					</para>
					 <para>
						Jadi itu adalah cara mudah untuk memperbarui konfigurasi server LDAP, cukup dengan menyunting hirarki <literal>cn=config</literal>.
					</para>
					 
<screen><computeroutput># </computeroutput><userinput>ldapvi -Y EXTERNAL -h ldapi:/// -b cn=config
</userinput></screen>
					 </sidebar> <para>
						Langkah terakhir untuk memfungsikan enkripsi adalah mengubah variabel <varname>SLAPD_SERVICES</varname> di berkas <filename>/etc/default/slapd</filename>. Kami akan bermain aman dan menonaktifkan LDAP tidak aman sama sekali.
					</para>
					 <example>
						<title>Berkas <filename>/etc/default/slapd</filename></title>
						 
<programlisting>
# Default location of the slapd.conf file or slapd.d cn=config directory. If
# empty, use the compiled-in default (/etc/ldap/slapd.d with a fallback to
# /etc/ldap/slapd.conf).
SLAPD_CONF=

# System account to run the slapd server under. If empty the server
# will run as root.
SLAPD_USER="openldap"

# System group to run the slapd server under. If empty the server will
# run in the primary group of its user.
SLAPD_GROUP="openldap"

# Path to the pid file of the slapd server. If not set the init.d script
# will try to figure it out from $SLAPD_CONF (/etc/ldap/slapd.conf by
# default)
SLAPD_PIDFILE=

# slapd normally serves ldap only on all TCP-ports 389. slapd can also
# service requests on TCP-port 636 (ldaps) and requests via unix
# sockets.
# Example usage:
# SLAPD_SERVICES="ldap://127.0.0.1:389/ ldaps:/// ldapi:///"
SLAPD_SERVICES="ldaps:/// ldapi:///"

# If SLAPD_NO_START is set, the init script will not start or restart
# slapd (but stop will still work).  Uncomment this if you are
# starting slapd via some other means or if you don't want slapd normally
# started at boot.
#SLAPD_NO_START=1

# If SLAPD_SENTINEL_FILE is set to path to a file and that file exists,
# the init script will not start or restart slapd (but stop will still
# work).  Use this for temporarily disabling startup of slapd (when doing
# maintenance, for example, or through a configuration management system)
# when you don't want to edit a configuration file.
SLAPD_SENTINEL_FILE=/etc/ldap/noslapd

# For Kerberos authentication (via SASL), slapd by default uses the system
# keytab file (/etc/krb5.keytab).  To use a different keytab file,
# uncomment this line and change the path.
#export KRB5_KTNAME=/etc/krb5.keytab

# Opsi tambahan yang diangsurkan ke slapd
SLAPD_OPTIONS=""</programlisting>

					</example>

				</section>
				 <section>
					<title>Mengkonfigurasi Klien</title>
					 <para>
						Pada sisi klien, konfigurasi untuk modul <emphasis>libpam-ldap</emphasis> dan <emphasis>libnss-ldap</emphasis> perlu dimodifikasi untuk menggunakan URI <literal>ldaps://</literal>.
					</para>
					 <para>
						Klien LDAP juga harus bisa mengotentikasi server. Di infrastuktur kunci publik X.509, sertifikat pubilk ditandatangani dengan kunci dari certificate authority (CA). Dengan <emphasis>easy-rsa</emphasis>, para administrator Falcot telah menciptakan CA mereka sendiri dan mereka sekarang perlu mengkonfigurasi sistem untuk mempercayai tanda tangan Falcot di CA. Ini dapat dilakukan dengan menempatkan sertifikat CA di <filename>/usr/local/share/ca-certificates</filename> dan menjalankan <command>update-ca-certificates</command>.
					</para>
					 
<screen><computeroutput># </computeroutput><userinput>cp keys/ca.crt /usr/local/share/ca-certificates/falcot.crt
</userinput><computeroutput># </computeroutput><userinput>update-ca-certificates
</userinput><computeroutput>Updating certificates in /etc/ssl/certs... 1 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d....
Adding debian:falcot.pem
done.
done.
</computeroutput></screen>
					 <para>
						Terakhir sama pentingnya, URI LDAP default dan base DN default yang digunakan oleh berbagai alat baris perintah dapat dimodifikasi dalam <filename>/etc/ldap/ldap.conf</filename>. Ini akan banyak menghemat pengetikan.
					</para>
					 <example>
						<title>Berkas <filename>/etc/ldap/ldap.conf</filename></title>
						 
<programlisting>#
#  Default LDAP
#

# Lihat ldap.conf(5) untuk rincian
# Berkas ini mesti dapat dibaca oleh siapapun tapi tidak dapat ditulisi oleh semua orang.

BASE   dc=falcot,dc=com
URI    ldaps://ldap.falcot.com

#SIZELIMIT      12
#TIMELIMIT      15
#DEREF          never

# sertifikat TLS (diperlukan untuk GnuTLS)
TLS_CACERT      /etc/ssl/certs/ca-certificates.crt</programlisting>

					</example>

				</section>

			</section>

		</section>

	</section>
	 <section id="sect.rtc-services">
		<title>Layanan Komunikasi Real-Time</title>
		 <para>
			Layanan Real-Time komunikasi (RTC) meliputi suara, video/webcam, pesan instan (IM), dan berbagi pakai desktop. Bab ini memberikan pengantar singkat tiga layanan yang diperlukan untuk mengoperasikan RTC, termasuk server TURN, server SIP, dan server XMPP. Rincian komprehensif tentang bagaimana untuk merencanakan, memasang, dan mengelola layanan ini tersedia dalam Panduan Ringkas Komunikasi Real-Time termasuk contoh spesifik untuk Debian. <ulink type="block" url="http://rtcquickstart.org" />
		</para>
		 <indexterm>
			<primary>VoIP</primary>
			<secondary>server</secondary>
		</indexterm>
		 <indexterm>
			<primary>RTC</primary>
			<secondary>server</secondary>
		</indexterm>
		 <indexterm>
			<primary>Pesan Instan</primary>
			<secondary>server</secondary>
		</indexterm>
		 <indexterm>
			<primary>Chat</primary>
			<secondary>server</secondary>
		</indexterm>
		 <para>
			SIP dan XMPP dapat menyediakan fungsionalitas yang sama. SIP sedikit lebih dikenal untuk suara dan video sementara XMPP secara tradisional dianggap sebagai protokol IM. Pada kenyataannya, keduanya dapat digunakan untuk tujuan ini. Untuk memaksimalkan pilihan konektivitas, disarankan untuk menjalankan keduanya secara paralel.
		</para>
		 <indexterm>
			<primary>SIP</primary>
		</indexterm>
		 <indexterm>
			<primary>XMPP</primary>
		</indexterm>
		 <para>
			Layanan-layanan ini bergantung pada sertifikat X.509 untuk otentikasi dan kerahasiaan. Lihat <xref linkend="sect.easy-rsa" /> untuk rincian tentang bagaimana untuk menciptakan mereka. <emphasis> Panduan Ringkas Komunikasi Real-Time</emphasis> juga memiliki beberapa penjelasan yang berguna: <ulink type="block" url="http://rtcquickstart.org/guide/multi/tls.html" />
		</para>
		 <section id="sect.rtc-dns-settings">
			<title>Pengaturan DNS untuk layanan RTC</title>
			 <para>
				Layanan RTC memerlukan record DNS SRV dan NAPTR. Suatu contoh konfigurasi yang dapat ditempatkan dalam berkas zona untuk <literal>falcot.com</literal>:
			</para>
			 <indexterm>
				<primary>DNS</primary>
				<secondary>record SRV</secondary>
			</indexterm>
			 <indexterm>
				<primary>DNS</primary>
				<secondary>record NAPTR</secondary>
			</indexterm>
			 
<programlisting>
; server tempat semua akan dijalankan
server1            IN     A      198.51.100.19
server1            IN     AAAA   2001:DB8:1000:2000::19

; IPv4 only for TURN for now, some clients are buggy with IPv6
turn-server        IN     A      198.51.100.19

; IPv4 and IPv6 addresses for SIP
sip-proxy          IN     A      198.51.100.19
sip-proxy          IN     AAAA   2001:DB8:1000:2000::19

; IPv4 and IPv6 addresses for XMPP
xmpp-gw            IN     A      198.51.100.19
xmpp-gw            IN     AAAA   2001:DB8:1000:2000::19

; DNS SRV and NAPTR for STUN / TURN
_stun._udp  IN SRV    0 1 3467 turn-server.falcot.com.
_turn._udp  IN SRV    0 1 3467 turn-server.falcot.com.
@           IN NAPTR  10 0 "s" "RELAY:turn.udp" "" _turn._udp.falcot.com.

; DNS SRV and NAPTR records for SIP
_sips._tcp  IN SRV    0 1 5061 sip-proxy.falcot.com.
@           IN NAPTR  10 0 "s" "SIPS+D2T" "" _sips._tcp.falcot.com.

; DNS SRV records for XMPP Server and Client modes:
_xmpp-client._tcp  IN     SRV    5 0 5222 xmpp-gw.falcot.com.
_xmpp-server._tcp  IN     SRV    5 0 5269 xmpp-gw.falcot.com.</programlisting>

		</section>
		 <section id="sect.turn-server">
			<title>Server TURN</title>
			 <para>
				TURN is a service that helps clients behind NAT routers and firewalls to discover the most efficient way to communicate with other clients and to relay the media streams if no direct media path can be found. It is highly recommended that the TURN server is installed before any of the other RTC services are offered to end users.
			</para>
			 <indexterm>
				<primary>TURN</primary>
				<secondary>server</secondary>
			</indexterm>
			 <para>
				TURN and the related ICE protocol are open standards. To benefit from these protocols, maximizing connectivity and minimizing user frustration, it is important to ensure that all client software supports ICE and TURN.
			</para>
			 <indexterm>
				<primary>ICE</primary>
			</indexterm>
			 <para>
				Agar algoritma ICE bekerja secara efektif, server harus memiliki dua alamat IPv4 publik.
			</para>
			 <section id="sect.turn-server-install">
				<title>Pasang server TURN</title>
				 <para>
					Pasang paket <emphasis role="pkg">reciprocate-turn-server</emphasis>.
				</para>
				 <para>
					Sunting berkas konfigurasi <filename>/etc/reTurn/reTurnServer.config</filename>. Yang paling penting untuk dilakukan adalah memasukkan alamat IP server.
				</para>
				 
<programlisting>
# alamat IP anda di sini:
TurnAddress = 198.51.100.19
TurnV6Address = 2001:DB8:1000:2000::19
AltStunAddress = 198.51.100.20
# your domain goes here, it must match the value used
# to hash your passwords if they are already hashed
# using the HA1 algorithm:
AuthenticationRealm = myrealm

UserDatabaseFile = /etc/reTurn/users.txt
UserDatabaseHashedPasswords = true</programlisting>
				 <para>
					Restart layanan.
				</para>

			</section>
			 <section id="sect.turn-server-management">
				<title>Mengelola pengguna TURN</title>
				 <para>
					Gunakan utilitas htdigest untuk mengelola daftar pengguna server TURN.
				</para>
				
<screen><computeroutput># </computeroutput><userinput>htdigest /etc/reTurn/users.txt myrealm joe</userinput></screen>
				 <para>
					Gunakan sinyal HUP untuk membuat server memuat ulang berkas <filename>/etc/reTurn/users.txt</filename> setelah mengubahnya atau aktifkan fitur muat ulang otomatis di <filename>/etc/reTurn/reTurnServer.config</filename>.
				</para>

			</section>

		</section>
		 <section id="sect.sip-server">
			<title>Server Proksi SIP</title>
			 <para>
				Server proksi SIP mengelola koneksi SIP masuk dan keluar antara organisasi, penyedia trunking SIP, PBX SIP seperti Asterisk, telepon SIP, softphones berbasis SIP, dan aplikasi WebRTC.
			</para>
			 <indexterm>
				<primary>SIP</primary>
				<secondary>server</secondary>
			</indexterm>
			 <indexterm>
				<primary>SIP</primary>
				 <secondary>proksi</secondary>
			</indexterm>
			 <indexterm>
				<primary>SIP</primary>
				<secondary>PBX</secondary>
			</indexterm>
			 <indexterm>
				<primary>SIP</primary>
				<secondary>trunk</secondary>
			</indexterm>
			 <para>
				Sangat dianjurkan untuk memasang dan mengkonfigurasi proksi SIP sebelum mencoba konfigurasi PBX SIP. Proksi SIP menormalkan banyak lalu lintas yang mencapai PBX dan menyediakan konektivitas dan ketahanan yang lebih besar.
			</para>
			 <section id="sect.sip-server-install">
				<title>Memasang proksi SIP</title>
				 <para>
					Instal paket <emphasis role="pkg">repro</emphasis>. Menggunakan paket dari <emphasis role="distribution">jessie-backport</emphasis> sangat dianjurkan, karena memiliki perbaikan terbaru untuk memaksimalkan konektivitas dan ketahanan.
				</para>
				 <indexterm>
					<primary>repro</primary>
				</indexterm>
				 <para>
					Sunting berkas konfigurasi <filename>/etc/repro/repro.config</filename>. Yang paling penting untuk dilakukan adalah memasukkan alamat IP server. Contoh di bawah menunjukkan bagaimana menyiapkan SIP reguler dan WebSockets/WebRTC, menggunakan TLS, IPv4, dan IPv6:
				</para>
				 
<programlisting>
# Transport1 untuk SIP di atas koneks TLS
# We use port 5061 here but if you have clients connecting from
# locations with firewalls you could change this to listen on port 443
Transport1Interface = 198.51.100.19:5061
Transport1Type = TLS
Transport1TlsDomain = falcot.com
Transport1TlsClientVerification = Optional
Transport1RecordRouteUri = sip:falcot.com;transport=TLS
Transport1TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport1TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport2 is the IPv6 version of Transport1
Transport2Interface = 2001:DB8:1000:2000::19:5061
Transport2Type = TLS
Transport2TlsDomain = falcot.com
Transport2TlsClientVerification = Optional
Transport2RecordRouteUri = sip:falcot.com;transport=TLS
Transport2TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport2TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport3 will be for SIP over WebSocket (WebRTC) connections
# We use port 8443 here but you could use 443 instead
Transport3Interface = 198.51.100.19:8443
Transport3Type = WSS
Transport3TlsDomain = falcot.com
# This would require the browser to send a certificate, but browsers
# don't currently appear to be able to, so leave it as None:
Transport3TlsClientVerification = None
Transport3RecordRouteUri = sip:falcot.com;transport=WSS
Transport3TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport3TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport4 is the IPv6 version of Transport3
Transport4Interface = 2001:DB8:1000:2000::19:8443
Transport4Type = WSS
Transport4TlsDomain = falcot.com
Transport4TlsClientVerification = None
Transport4RecordRouteUri = sip:falcot.com;transport=WSS
Transport4TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport4TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport5: this could be for TCP connections to an Asterisk server
# in your internal network.  Don't allow port 5060 through the external
# firewall.
Transport5Interface = 198.51.100.19:5060
Transport5Type = TCP
Transport5RecordRouteUri = sip:198.51.100.19:5060;transport=TCP

HttpBindAddress = 198.51.100.19, 2001:DB8:1000:2000::19
HttpAdminUserFile = /etc/repro/users.txt

RecordRouteUri = sip:falcot.com;transport=tls
ForceRecordRouting = true
EnumSuffixes = e164.arpa, sip5060.net, e164.org
DisableOutbound = false
EnableFlowTokens = true
EnableCertificateAuthenticator = True</programlisting>
				 <para>
					Gunakan utilitas <command>htdigest</command> untuk mengelola kata sandi admin untuk antarmuka web. Nama pengguna harus <emphasis>admin</emphasis> dan nama realm harus sesuai nilai yang ditentukan dalam <filename>repro.config</filename>.
				</para>
				 
<screen><computeroutput># </computeroutput><userinput>htdigest /etc/repro/users.txt repro admin</userinput></screen>
				 <para>
					Jalankan ulang layanan menggunakan konfigurasi baru.
				</para>

			</section>
			 <section id="sect.sip-server-management">
				<title>Mengelola proksi SIP</title>
				 <para>
					Pergi ke antarmuka web di <literal>http://sip-proxy.falcot.com:5080</literal> untuk menyelesaikan konfigurasi dengan menambahkan domain, pengguna lokal, dan rute statik.
				</para>
				 <para>
					Langkah pertama adalah untuk menambahkan domain lokal. Proses harus dimulai ulang setelah menambahkan atau menghapus domain dari daftar.
				</para>
				 <para>
					Proksi tahu bagaimana untuk mengarahkan panggilan antara pengguna lokal dan alamat SIP yang lengkap, konfigurasi routing hanya diperlukan untuk mengganti perilaku default, misalnya, untuk mengenali nomor telepon, tambahkan awalan, dan rute mereka ke penyedia SIP.
				</para>

			</section>

		</section>
		 <section id="sect.xmpp-server">
			<title>Server XMPP</title>
			 <para>
				Suatu server XMPP mengelola konektivitas antara pengguna XMPP lokal dan XMPP pengguna di domain lainnya di Internet.
			</para>
			 <indexterm>
				<primary>XMPP</primary>
				<secondary>server</secondary>
			</indexterm>
			 <sidebar> <title><emphasis>KOSAKATA</emphasis> XMPP atau Jabber?</title>
			 <indexterm>
				<primary>Jabber</primary>
			</indexterm>
			 <para>
				XMPP kadang-kadang disebut sebagai Jabber. Pada kenyataannya, Jabber adalah merek dagang dan XMPP adalah nama resmi standar.
			</para>
			 <indexterm>
				<primary>Jabber</primary>
			</indexterm>
			 </sidebar> <para>
				Prosody adalah server XMPP populer yang beroperasi secara andal pada server Debian.
			</para>
			 <indexterm>
				<primary>Prosody</primary>
			</indexterm>
			 <section id="sect.xmpp-server-install">
				<title>Pasang server XMPP</title>
				 <para>
					Instal paket <emphasis role="pkg">prosody</emphasis>. Menggunakan paket dari <emphasis role="distribution">jessie-backport</emphasis> sangat dianjurkan, karena memiliki perbaikan terbaru untuk memaksimalkan konektivitas dan ketahanan.
				</para>
				 <indexterm>
					<primary>Prosody</primary>
				</indexterm>
				 <para>
					Tinjau berkas konfigurasi <filename>/etc/prosody/prosody.cfg.lua</filename>. Yang paling penting untuk dilakukan adalah memasukkan JID pengguna yang diizinkan untuk mengelola server.
				</para>
				 
<programlisting>
admins = { "joe@falcot.com" }</programlisting>
				 <para>
					Berkas konfigurasi individu juga diperlukan untuk setiap domain. Salin contoh dari <filename>/etc/prosody/conf.avail/example.com.cfg.lua</filename> dan gunakan sebagai titik awal. Berikut adalah <literal>falcot.com.cfg.lua</literal>:
				</para>
				 
<programlisting>
VirtualHost "falcot.com"
        enabled = true
        ssl = {
                key = "/etc/ssl/private/falcot.com-key.pem";
                certificate = "/etc/ssl/public/falcot.com.pem";
                }</programlisting>
				 <para>
					Untuk mengaktifkan domain, harus ada symlink dari <filename>/etc/prosody/conf.d/</filename>. Buat dengan cara:
				</para>
				 
<screen><computeroutput># </computeroutput><userinput>ln -s /etc/prosody/conf.avail/falcot.com.cfg.lua /etc/prosody/conf.d/</userinput></screen>
				 <para>
					Jalankan ulang layanan menggunakan konfigurasi baru.
				</para>

			</section>
			 <section id="sect.xmpp-server-management">
				<title>Mengelola server XMPP</title>
				 <para>
					Beberapa operasi manajemen dapat dilakukan dengan menggunakan utilitas baris perintah <literal>prosodyctl</literal>. Misalnya, untuk menambahkan akun administrator yang ditentukan dalam <filename>/etc/prosody/prosody.cfg.lua</filename>:
				</para>
				
<programlisting>
# prosodyctl adduser joe@falcot.com</programlisting>
				 <para>
					Lihat <ulink url="http://prosody.im/doc/configure"> dokumentasi daring Prosody</ulink> untuk informasi lebih lanjut tentang cara menyesuaikan konfigurasi.
				</para>

			</section>

		</section>
		 <section id="sect.rtc-port-443">
			<title>Menjalankan layanan pada port 443</title>
			 <para>
				Beberapa administrator lebih suka untuk menjalankan semua layanan RTC mereka pada port 443. Ini membantu pengguna untuk menyambung dari lokasi terpencil seperti Hotel dan Bandara dimana port lain dapat diblokir atau lalu lintas Internet disalurkan melalui server proksi HTTP.
			</para>
			 <para>
				Untuk menggunakan strategi ini, setiap layanan (SIP, XMPP, dan TURN) membutuhkan alamat-alamat IP yang berbeda. Semua layanan masih bisa diwadahi pada host yang sama karena Linux mendukung beberapa alamat IP pada satu host. Nomor port, 443, harus ditentukan di berkas konfigurasi untuk setiap proses dan juga di record SRV DNS.
			</para>

		</section>
		 <section id="sect.rtc-webrtc">
			<title>Menambahkan WebRTC</title>
			 <para>
				Falcot ingin membiarkan pelanggan membuat panggilan telepon secara langsung dari situs web. Para administrator Falcot juga ingin menggunakan WebRTC sebagai bagian dari rencana pemulihan bencana, sehingga staf dapat menggunakan peramban web di rumah untuk log masuk ke sistem telepon perusahaan dan bekerja secara normal dalam keadaan darurat.
			</para>
			 <indexterm>
				<primary>WebRTC</primary>
			</indexterm>
			 <indexterm>
				<primary>SIP</primary>
				<secondary>WebSockets</secondary>
			</indexterm>
			 <sidebar> <title><emphasis>DALAM PRAKTEK</emphasis> Mencoba WebRTC</title>
			 <indexterm>
				<primary>Demonstrasi</primary>
				<secondary>WebRTC</secondary>
			</indexterm>
			 <para>
				Jika Anda belum pernah mencoba WebRTC, ada berbagai situs yang memberikan demontrasi daring dan fasilitas pengujian. <ulink type="block" url="http://www.sip5060.net/test-calls" />
			</para>
			 </sidebar> <para>
				WebRTC adalah sebuah teknologi yang berkembang pesat dan sangat penting untuk menggunakan paket dari distribusi <emphasis role="distribution">jessie-backport</emphasis> atau <emphasis role="distribution">Testing</emphasis>.
			</para>
			 <para>
				JSCommunicator adalah telepon WebRTC generik, tanpa merek, yang tidak memerlukan script sisi server apapun seperti PHP. Hal ini dibangun secara eksklusif dengan HTML, CSS, dan JavaScript. Ini adalah dasar bagi banyak layanan WebRTC lainnya dan modul untuk penerbitan framework web yang lebih lanjut. <ulink type="block" url="http://jscommunicator.org" />
			</para>
			 <indexterm>
				<primary>JSCommunicator</primary>
			</indexterm>
			 <para>
				Paket <emphasis role="pkg">jscommunicator-web-telepon</emphasis> adalah cara tercepat untuk menginstal telepon WebRTC ke sebuah situs web. Hal ini membutuhkan proksi SIP dengan transport WebSocket. Petunjuk di <xref linkend="sect.sip-server-install" /> memuat rincian yang diperlukan untuk mengaktifkan transport WebSocket di proksi SIP <emphasis role="pkg">repro</emphasis>.
			</para>
			 <para>
				Setelah menginstal <emphasis role="pkg">jscommunicator-web-phone</emphasis>, ada berbagai cara untuk menggunakannya. Strategi yang sederhana adalah untuk menyertakan atau menyalin konfigurasi dari <filename>/etc/jscommunicator-web-phone/apache.conf</filename> ke konfigurasi virtual host Apache.
			</para>
			 <para>
				Setelah berkas-berkas web-phone tersedia di server web, sesuaikan <filename>/etc/jscommunicator-web-phone/config.js</filename> untuk menunjuk pada server TURN dan proksi SIP. Sebagai contoh:
			</para>
			 
<programlisting>
JSCommSettings = {

  // Web server environment
  webserver: {
    url_prefix: null            // If set, prefix used to construct sound/ URLs
  },

  // STUN/TURN media relays
  stun_servers: [],
  turn_servers: [
    { server:"turn:turn-server.falcot.com?transport=udp", username:"joe", password:"j0Ep455d" }
  ],

  // WebSocket connection
  websocket: {
      // Notice we use the falcot.com domain certificate and port 8443
      // This matches the Transport3 and Transport4 example in
      // the falcot.com repro.config file
    servers: 'wss://falcot.com:8443',
    connection_recovery_min_interval: 2,
    connection_recovery_max_interval: 30
  },

  ...</programlisting>
			 <para>
				Situs-situs web klik-untuk-memanggil yang lebih lanjut biasanya menggunakan script sisi server untuk menghasilkan berkas <literal>config.js</literal> secara dinamis. Kode sumber <ulink url="http://drucall.org">DruCall</ulink> menunjukkan bagaimana melakukan ini dengan PHP.
			</para>
			 <indexterm>
				<primary>DruCall</primary>
			</indexterm>
			 <para>
				Bab ini mencuplik hanya sebagian kecil dari perangkat lunak server yang tersedia; namun, sebagian besar layanan jaringan umum telah digambarkan. Sekarang saatnya untuk bab yang bahkan lebih teknis: kita akan pergi ke detail yang lebih untuk beberapa konsep, menggambarkan penyebaran besar-besaran, dan virtualisasi.
			</para>

		</section>

	</section>
</chapter>

