<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.2. aptitude, apt-get en apt Commando's</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nl-NL-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Het Debian Beheerders Handboek" /><link
        rel="up"
        href="apt.html"
        title="Hoofdstuk 6. Onderhoud en Updates: De APT Gereedschappen" /><link
        rel="prev"
        href="apt.html"
        title="Hoofdstuk 6. Onderhoud en Updates: De APT Gereedschappen" /><link
        rel="next"
        href="sect.apt-cache.html"
        title="6.3. Het apt-cache Commando" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nl-NL/stable/sect.apt-get.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Terug</strong></a></li><li
          class="home">Het Debian Beheerders Handboek</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Volgende</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.apt-get"></a>6.2. <code
                  class="command">aptitude</code>, <code
                  class="command">apt-get</code> en <code
                  class="command">apt</code> Commando's</h2></div></div></div><a
          id="id-1.9.11.2"
          class="indexterm"></a><a
          id="id-1.9.11.3"
          class="indexterm"></a><a
          id="id-1.9.11.4"
          class="indexterm"></a><div
          class="para">
			APT is een enorm project, wiens originele plannen een grafische interface bevatte. Het is gebaseerd op een bibliotheek welke het kern programma bevat en <code
            class="command">apt-get</code> is de eerste front-end — gebaseerd op de commando-regel — welke was ontwikkeld binnen het project. <code
            class="command">apt</code> is een tweede commando-regel front-end aangeboden door APT welke sommige ontwerp fouten van <code
            class="command">apt-get</code> overwint.
		</div><div
          class="para">
			Talloze andere grafische interfaces verschenen toen als externe projecten: <code
            class="command">synaptic</code>, <code
            class="command">aptitude</code> (welke zowel een tekst interface als een grafische bevat — zelfs indien nog niet kompleet), <code
            class="command">wajig</code>, etc. De meest aanbevolen interface, <code
            class="command">apt</code>, is diegene die we zullen gebruiken in de gegeven voorbeelden in deze sectie. Merk op op dat <code
            class="command">apt-get</code> en <code
            class="command">aptitude</code> een zeer gelijkaardige commando-regel syntaxis hebben. Wanneer er grote verschillen zijn tussen <code
            class="command">apt</code>, <code
            class="command">apt-get</code> en <code
            class="command">aptitude</code> worden deze verschillen gedetailleerd.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.7"></a>6.2.1. Initialisatie</h3></div></div></div><div
            class="para">
				Voor ieder werk met APT moet de lijst met beschikbare pakketten ge-updatet worden; dit kan dan simpelweg gedaan worden door <code
              class="command">apt update</code>. Afhankelijk van de snelheid van de verbinding, de bewerking kan een tijdje duren omdat het bestaat uit het downloaden van een aantal <code
              class="filename">Packages</code>/<code
              class="filename">Sources</code>/<code
              class="filename">Translation-<em
                class="replaceable">language-code</em></code> bestanden, welke geleidelijk groter en groter worden terwijl Debian ontwikkeld wordt (ten minste 10MB gegevens voor de <code
              class="literal">main</code> sectie). Natuurlijk vereist het installeren vanaf een CD-Rom set geen downloads — in dit geval is de bewerking heel snel.
			</div><a
            id="id-1.9.11.7.3"
            class="indexterm"></a><a
            id="id-1.9.11.7.4"
            class="indexterm"></a><a
            id="id-1.9.11.7.5"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.8"></a>6.2.2. Installeren en Verwijderen</h3></div></div></div><a
            id="id-1.9.11.8.2"
            class="indexterm"></a><a
            id="id-1.9.11.8.3"
            class="indexterm"></a><a
            id="id-1.9.11.8.4"
            class="indexterm"></a><a
            id="id-1.9.11.8.5"
            class="indexterm"></a><div
            class="para">
				Met APT kunnen pakketten aan het systeem toegevoegd of verwijderd worden, respectievelijk met <code
              class="command">apt install <em
                class="replaceable">pakket</em></code> en <code
              class="command">apt remove <em
                class="replaceable">pakket</em></code>.In beide gevallen zal APT automatisch de nodige afhankelijkheden welke afhangen van het pakket dat geïnstalleerd of verwijderd wordt, installeren of verwijderen. Het <code
              class="command">apt purge <em
                class="replaceable">pakket</em></code> commando impliceert een volledige verwijdering — de configuratiebestanden worden ook gewist.
			</div><a
            id="id-1.9.11.8.7"
            class="indexterm"></a><a
            id="id-1.9.11.8.8"
            class="indexterm"></a><a
            id="id-1.9.11.8.9"
            class="indexterm"></a><a
            id="id-1.9.11.8.10"
            class="indexterm"></a><a
            id="id-1.9.11.8.11"
            class="indexterm"></a><a
            id="id-1.9.11.8.12"
            class="indexterm"></a><a
            id="id-1.9.11.8.13"
            class="indexterm"></a><a
            id="id-1.9.11.8.14"
            class="indexterm"></a><a
            id="id-1.9.11.8.15"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> De zelfde selectie van pakketten meerdere keren installeren</strong></p></div></div></div><div
              class="para">
				Het kan handig zijn om dezelfde lijst van pakketten systematisch op meerdere computers te installeren. Dit kan vrij gemakkelijk gedaan worden.
			</div><div
              class="para">
				Te eerste, haal een lijst op met alle pakketten die geïnstalleerd zijn op de computer die als “model” ter kopie zal dienen.
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --get-selections &gt;pkg-list</code></strong></pre><div
              class="para">
				Het <code
                class="filename">pkg-list</code> bestand bevat dan de lijst van geïnstalleerde pakketten. vervolgens, verplaats het <code
                class="filename">pkg-list</code> bestand naar de computer die je wilt updaten en gebruik het volgende commando:
			</div><pre
              class="screen">## Update dpkg's database of known packages
# <strong
                class="userinput"><code>avail=`mktemp`</code></strong>
# <strong
                class="userinput"><code>apt-cache dumpavail &gt; "$avail"</code></strong>
# <strong
                class="userinput"><code>dpkg --merge-avail "$avail"</code></strong>
# <strong
                class="userinput"><code>rm -f "$avail"</code></strong>
## Update dpkg's selections
# <strong
                class="userinput"><code>dpkg --set-selections &lt; pkg-list</code></strong>
## Ask apt-get to install the selected packages
# <strong
                class="userinput"><code>apt-get dselect-upgrade</code></strong></pre><div
              class="para">
				Het eerste commando slaat de lijst van beschikbare pakketten in de dpkg databank op, dan zal <code
                class="command">dpkg --set-selections</code> de selectie van de pakketten die je wilt installeren herstellen en de aanroep van <code
                class="command">apt-get</code> zal de vereiste bewerkingen uitvoeren! <code
                class="command">aptitude</code> heeft dit commando niet.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Verwijderen en installeren op hetzelfde moment</strong></p></div></div></div><div
              class="para">
				Het is mogelijk om <code
                class="command">apt</code> (of <code
                class="command">apt-get</code> of <code
                class="command">aptitude</code>) te vragen om bepaalde pakketten te installeren en andere te verwijderen op dezelfde commando-regel door het toevoegen van een achtervoegsel. Met een <code
                class="command">apt install</code> commando, voeg “<code
                class="literal">-</code>” toe aan de namen van de pakketten die je wenst te verwijderen. Met een <code
                class="command">apt remove</code> commando, voeg “<code
                class="literal">+</code>” toe aan de namen van de pakketten die je wenst te installeren.
			</div><div
              class="para">
				De volgende voorbeelden tonen twee verschillende manieren om <em
                class="replaceable">package1</em> te installeren en om <em
                class="replaceable">package2</em> te verwijderen.
			</div><pre
              class="screen"># <strong
                class="userinput"><code>apt install <em
                    class="replaceable">package1</em> <em
                    class="replaceable">package2-</em></code></strong>
[...]
# <strong
                class="userinput"><code>apt remove <em
                    class="replaceable">package1+</em> <em
                    class="replaceable">package2</em></code></strong>
[...]</pre><div
              class="para">
				Dit kan ook gebruikt worden om pakketten die anders geïnstalleerd zouden worden uit te sluiten, bij voorbeeld als gevolg van een <code
                class="literal">Recommends</code>. In het algemeen zal de afhankelijkheids-oplosser deze informatie gebruiken als een hint om naar een andere oplossing te zoeken.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt --reinstall</code> en <code
                        class="command">aptitude reinstall</code></strong></p></div></div></div><a
              id="id-1.9.11.8.18.2"
              class="indexterm"></a><div
              class="para">
				Het systeem kan soms beschadigd worden na de verwijdering of aanpassing van bestanden in een pakket. De gemakkelijkste manier om deze bestanden terug te halen is om het aangetaste pakket te her-installeren. Helaas zal het pakkettensysteem merken dat het betreffende pakket al geïnstalleerd is en zal vriendelijk weigeren om het te her-installeren; om dit te voorkomen, gebruik de <code
                class="literal">--reinstall</code> optie van de <code
                class="command">apt</code> en <code
                class="command">apt-get</code> commando's. Het volgende commando her-installeert <span
                class="pkg pkg">postfix</span> zelfs als het al aanwezig is:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt --reinstall install postfix</code></strong></pre><div
              class="para">
				Het <code
                class="command">aptitude</code> commando regel is lichtjes anders, maar bereikt hetzelfde resultaat met <code
                class="command">aptitude reinstall postfix</code>.
			</div><div
              class="para">
				Het probleem valt niet voor met <code
                class="command">dpkg</code>, maar de beheerders gebruiken dit zelden rechtstreeks.
			</div><div
              class="para">
				Wees voorzichtig! <code
                class="command">apt --reinstall</code> gebruiken om pakketten aangetast door en aanval te herstellen zal het systeem zeker niet herstellen naar hoe het was. <a
                class="xref"
                href="sect.dealing-with-compromised-machine.html">Paragraaf 14.7, “Dealing with a Compromised Machine”</a> geeft de nodig stappen om uit te voeren op een gecompromitteerd systeem.
			</div></div><div
            class="para">
				Als het <code
              class="filename">sources.list</code> bestand verschillende distributies vermeld, is het mogelijk om de versie van het te installeren pakket te geven. Een specifiek versie nummer kan gevraagd worden met <code
              class="command">apt install <em
                class="replaceable">pakket</em>=<em
                class="replaceable">versie</em></code>, maar de distributie van oorsprong aangeven (<span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span> of <span
              class="distribution distribution">Unstable</span>) — met <code
              class="command">apt install <em
                class="replaceable">pakket</em>/<em
                class="replaceable">distributie</em></code> — heeft meestal de voorkeur. Met dit commando is het mogelijk om terug te gaan naar een oudere versie van een pakket (als je bijvoorbeeld weet dat het goed werkt), onder voorwaarde dat het nog steeds beschikbaar is op een van de bronnen gerefereerd door het <code
              class="filename">sources.list</code> bestand. Anders kan het <code
              class="literal">snapshot.debian.org</code> archief een uitkomst bieden (zie marge <a
              class="xref"
              href="apt.html#sidebar.snapshot.debian.org"><span
                class="emphasis"><em>VERDER GAAN</em></span> Oude pakket versies: <code
                class="literal">snapshot.debian.org</code></a>).
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.9.11.8.20"></a><p
              class="title"><strong>Voorbeeld 6.3. Installatie van de <span
                  class="distribution distribution">Onstabiele</span> versie van <span
                  class="pkg pkg">spamassassin</span></strong></p><div
              class="example-contents"><pre
                class="screen"><code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>apt install spamassassin/unstable</code></strong></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>VERDER GAAN</em></span> De cache van <code
                        class="filename">.deb</code> bestanden</strong></p></div></div></div><div
              class="para">
				APT bewaart een lopie van ieder gedownload <code
                class="filename">.deb</code> bestand in de directory <code
                class="filename">/var/cache/apt/archives/</code>. In het geval van frequente updates, kan deze directory snel veel schijfruimte innemen met verschillende versies van ieder pakket; je zou ze regelmatig moeten sorteren. Twee commando's kunnen gebruikt worden: <code
                class="command">apt-get clean</code> maakt de directory volledig leeg; <code
                class="command">apt-get autoclean</code> verwijdert enkel pakketten die niet langen gedownload kunnen worden (omdat ze verdwenen zijn van de Debian spiegel) en zijn daardoor volledig nutteloos (de configuratie parameter <code
                class="literal">APT::Clean-Installed</code> kan het verwijderen van <code
                class="filename">.deb</code> bestanden die momenteel geïnstalleerd zijn voorkomen). Merk op dat <code
                class="command">apt</code> deze commando's niet ondersteund.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-upgrade"></a>6.2.3. Systeem Opwaarderen</h3></div></div></div><a
            id="id-1.9.11.9.2"
            class="indexterm"></a><a
            id="id-1.9.11.9.3"
            class="indexterm"></a><a
            id="id-1.9.11.9.4"
            class="indexterm"></a><a
            id="id-1.9.11.9.5"
            class="indexterm"></a><div
            class="para">
				Regelmatig opwaarderen is aanbevolen, omdat ze de laatste beveiligings-updates bevatten. Om te opwaarderen, gebruikt je <code
              class="command">apt upgrade</code>, <code
              class="command">apt-get upgrade</code> of <code
              class="command">aptitude safe-upgrade</code> (natuurlijk na <code
              class="command">apt update</code>). Dit commando zoekt naar geïnstalleerde pakketten die opgewaardeerd kunnen worden zonder enig pakket te verwijderen. Met andere woorden, het doel is om de minst ingrijpende opwaardering te verzekeren. <code
              class="command">apt-get</code> is iets minder veeleisend dan <code
              class="command">aptitude</code> of <code
              class="command">apt</code> omdat het zal weigeren om pakketten te installeren die niet op voorhand geïnstalleerd waren.
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-pdiff"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Incrementele opwaardering</strong></p></div></div></div><div
              class="para">
				Zoals we eerder hebben uitgelegd, is het doel van het <code
                class="command">apt update</code> commando het downloaden van de corresponderende <code
                class="filename">Packages</code> (of <code
                class="filename">Sources</code>) bestanden voor ieder pakket. Hoewel, zelf na een <code
                class="command">bzip2</code> compressie, kunnen deze bestanden redelijk groot zijn (het <code
                class="filename">Packages.xz</code> voor de <span
                class="foreignphrase"><em
                  class="foreignphrase">main</em></span> sectie van <span
                class="distribution distribution">Jessie</span> neemt meer dan 6 MB in beslag). Als je regelmatig wenst op te waarderen, kunnen deze downloads veel tijd kosten.
			</div><div
              class="para">
				Om het proces te versnellen kan APT “diff” bestanden die de veranderingen sinds de vorige update bevatten downloaden, in tegenstelling tot het volledige bestand. Om dit te bereiken, distribueren officiële Debian spiegels verschillende bestanden welke de verschillen tussen een versie van het <code
                class="filename">Packages</code> bestand en de volgende versie bevatten. Ze worden gegenereerd bij iedere opwaardering van de archieven en een geschiedenis van één week is behouden. Ieder van deze “diff” bestanden neemt enkel een tiental kilobytes in beslag voor <span
                class="distribution distribution">Onstabiel</span>, waardoor de hoeveelheid gegevens gedownload bij een wekelijkse <code
                class="command">apt update</code> vaak gedeeld is door 10. Voor distributies zoals <span
                class="distribution distribution">Stabiel</span> en <span
                class="distribution distribution">Testen</span>, welke minder veranderen, is de winst zelf nog merkbaarder.
			</div><div
              class="para">
				Hoewel het soms interessant kan zijn om het downloaden van een volledig <code
                class="filename">Packages</code> bestand af te dwingen, vooral wanneer de laatste opwaardering heel oud is en wanneer het mechanisme van incrementele verschillen niet veel zal bijdragen. Dit kan ook interessant zijn wanneer netwerk toegang is zeer snel is maar de processor van de machine te opwaarderen vrij traag is, omdat de tijd uitgespaard met het downloaden meer is dan deze verloren wanneer de computer de nieuwe versies in deze bestanden berekent (beginnende met de oudere versies en de gedownloade verschillen toepassend). Om dat te doen, kun je de configuratie parameter <code
                class="literal">Acquire::Pdiffs</code> gebruiken en het op <code
                class="literal">false</code> zetten.
			</div></div><div
            class="para">
				<code
              class="command">apt</code> zal in het algemeen de meest recente versie nummer selecteren (behalve voor pakketten van <span
              class="distribution distribution">Experimenteel</span> en <span
              class="distribution distribution">stable-backports</span>, welke standaard genegeerd worden ongeacht hun versie nummer). Als je <span
              class="distribution distribution">Testing</span> of <span
              class="distribution distribution">Unstable</span> in jou <code
              class="filename">sources.list</code> gespecificeerd hebt zal <code
              class="command">apt upgrade</code> de meeste van jouw <span
              class="distribution distribution">Stabiele</span> systeem naar <span
              class="distribution distribution">Testen</span> of <span
              class="distribution distribution">Onstabiel</span> omschakelen, wat je misschien niet bedoeld zou hebben.
			</div><div
            class="para">
				Om <code
              class="command">apt</code> te vertellen om een specifieke distributie te gebruiken tijdens het zoeken naar opgewaardeerde pakketten, moet je de <code
              class="literal">-t</code> of <code
              class="literal">--targer-release</code> optie gebruiken, gevolgd door de naam van de distributie die je wilt (bijvoorbeeld: <code
              class="command">apt -t stable upgrade</code>. Om te voorkomen dat je deze optie ieder keer moet specificeren wanneer je <code
              class="command">apt</code> gebruikt, kun je <code
              class="literal">APT::Default-Release "stable";</code> toevoegen aan het <code
              class="filename">/etc/apt/apt.conf.d/local</code> bestand.
			</div><a
            id="id-1.9.11.9.10"
            class="indexterm"></a><a
            id="id-1.9.11.9.11"
            class="indexterm"></a><a
            id="id-1.9.11.9.12"
            class="indexterm"></a><a
            id="id-1.9.11.9.13"
            class="indexterm"></a><a
            id="id-1.9.11.9.14"
            class="indexterm"></a><div
            class="para">
				Voor belangrijkere opwaarderingen, zoals de verandering van een grote Debian versie naar de volgende, moet je het commando <code
              class="command">apt full-upgrade</code> gebruiken. Met deze instructie, zal <code
              class="command">apt</code> de opwaardering volledig uitvoeren ook als het bepaalde verouwderde pakketten moet verwijderen of nieuwe afhankelijkheden moet installeren. Dit is ook het commando gebruikt door gebruikers die dagelijks werken met Debian <span
              class="distribution distribution">Onstabiel</span> vrijgave en haar evolutie dag-na-dag volgen. Het is zo gemakkelijk dat het amper uitleg nodig heeft: de reputatie van APT is grotendeels gebaseerd op deze functionaliteit.
			</div><div
            class="para">
				In tegenstelling tot <code
              class="command">apt</code> en <code
              class="command">aptitude</code>, kent <code
              class="command">apt-get</code> het commando <code
              class="command">full-upgrade</code> niet. Je zouw in de plaats <code
              class="command">apt-get dist-upgrade</code> (”distribution upgrade”) moeten gebruiken. Het historische en goed-gekende commando dat <code
              class="command">apt</code> en <code
              class="command">aptitude</code> ook accepteren voor het gemak van de gebruikers die dit gewoon zijn.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-config"></a>6.2.4. Configuratie Opties</h3></div></div></div><a
            id="id-1.9.11.10.2"
            class="indexterm"></a><a
            id="id-1.9.11.10.3"
            class="indexterm"></a><a
            id="id-1.9.11.10.4"
            class="indexterm"></a><div
            class="para">
				Naast de reeds genoemde configuratie elementen, is het mogelijk om bepaalde aspecten van APT te configureren door richtlijnen toe te voegen in een bestand van de <code
              class="filename">/etc/apt.conf/d/</code> directory. Onthoud bijvoorbeeld dat het mogelijk is voor APT om <code
              class="command">dpkg</code> te vertellen om bestands-conflicten te negeren door <code
              class="literal">DPkg::options {"--force-overwrite"; }</code> te specificeren.
			</div><div
            class="para">
				Als het web enkel bereikt kan worden door een proxy, voeg een regel als <code
              class="literal">Acquire::http::proxy "http://<em
                class="replaceable">yourproxy</em>:3128"</code> toe. Voor een FTP Proxy schrijf <code
              class="literal">Acquire::ftp::proxy "ftp://<em
                class="replaceable">yourproxy</em>"</code>. Om meer configuratie opties te ontdekken lees de <span
              class="citerefentry"><span
                class="refentrytitle">apt.conf</span>(5)</span> manual pagina met het <code
              class="command">man apt.conf</code> commando (voor details over manual pagina's, zie <a
              class="xref"
              href="solving-problems.html#sect.manual-pages">Paragraaf 7.1.1, “Manual Pages”</a>).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.directory.d"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TERUG NAAR DE BASIS</em></span> Directory's die eindigen op <code
                        class="filename">.d</code></strong></p></div></div></div><a
              id="id-1.9.11.10.7.2"
              class="indexterm"></a><div
              class="para">
				Directory's met een <code
                class="filename">.d</code> achtervoegsel worden steeds vaker gebruikt. Iedere directory vertegenwoordigt een configuratiebestand dat is opgesplitst in verschillende bestanden. In deze zin zijn alle bestanden in <code
                class="filename">/etc/apt/apt.conf.d/</code> instructies voor de configuratie van APT. APT voegt ze in alfabetische volgorde toe, zodat de laatste een configuratie element gedefinieerd in een van de eerste kan aanpassen.
			</div><div
              class="para">
				Deze structuur brengt wat flexibiliteit mee voor de machine beheerders en de pakket onderhouders. De beheerder kan de inderdaad de configuratie van de software gemakkelijk aanpassen door een kant-en-klaar bestand in de directory in kwestie toe te voegen, zonder enig bestaande bestand aan te passen. Pakket onderhouders gebruiken dezelfde methode wanneer ze een configuratie van andere software moeten aanpassen om te verzekeren dat het perfect bestaat langs dat van hun. Het Debian beleid verbied expliciet het aanpassen van configuratiebestanden van andere pakketten — Enkel gebruikers zijn toegestaan om dit te doen. Onthoud dat tijdens een pakket opwaardering, de gebruiker de keuze krijgt welk versie van het configuratie bestand bewaart moet blijven, wanneer een aanpassing is gedetecteerd. Iedere externe aanpassing van het bestand zou deze vraag in gang gezet moeten worden, welke de beheerder moet storen, welke niet zeker is dat hij iets heeft aangepast.
			</div><div
              class="para">
				Zonder een <code
                class="filename">.d</code> directory is het onmogelijk voor een extern pakket om instellingen van een programma aan te passen, zonder haar configuratiebestand aan te passen. In plaats daarvan moet het de gebruiker uitnodigen om dit zelf te doen en de aanpassingen die moeten gedaan worden opsommen in het bestand <code
                class="filename">/usr/share/doc/<em
                  class="replaceable">pakket</em>/README.Debian</code>.
			</div><div
              class="para">
				Afhankelijk van het programma wordt de <code
                class="filename">.d</code> directory rechtstreeks gebruikt of beheert door een extern script na iedere verandering in die directory, zo dat de meest recente aanpassingen in rekening worden genomen. Op dezelfde manier is het belangrijk om niet rechtstreeks te werken in de automatisch gegenereerde configuratiebestanden, omdat alles verloren zou zijn bij de volgende uitvoering van het script. De gekozen methode (<code
                class="filename">.d</code> directory rechtstreeks gebruikt of een bestand in die directory) is meestal gedicteerd door de implementatie beperkingen, maar in beide gevallen is het voordeel in de zin van configuratie flexibiliteit, maar de gewonnen flexibiliteit maar deze kleine complicaties dat dit met zich meebrengt, meer dan goed. De Exim 4 Email server is een voorbeeld van de gegenereerde-bestand methode: het kan geconfigureerd worden door verschillende bestanden (<code
                class="filename">/etc/exim4/conf.d/*</code>) welke aaneengeschakeld worden in <code
                class="filename">/var/lib/exim4/config.autogenerated</code> door het <code
                class="command">update-exim4</code> commando.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt.priorities"></a>6.2.5. Pakket Prioriteiten Beheren</h3></div></div></div><div
            class="para">
				Een van de belangrijkste aspecten in de configuratie van APT is het beheren van de prioriteiten verbonden aan iedere pakket bron. Bijvoorbeeld, je wilt een distributie uitbreiden met een of twee nieuwere pakken van <span
              class="distribution distribution">Testen</span>, <span
              class="distribution distribution">Onstabiel</span> of <span
              class="distribution distribution">Experimenteel</span>. Het is mogelijk om een prioriteit te verbinden aan ieder beschikbaar pakket (hetzelfde pakket kan meerdere prioriteiten hebben, afhankelijk van de versie van de distributie in welke het wordt aangeboden). Deze prioriteiten zullen het gedrag van APT beïnvloeden: het zal, voor ieder pakket, de versie nemen met de hoogste prioriteit (behalve als deze versie ouder is dan de geïnstalleerde versie en als de prioriteit minder is dan 1000).
			</div><a
            id="id-1.9.11.11.3"
            class="indexterm"></a><a
            id="id-1.9.11.11.4"
            class="indexterm"></a><a
            id="id-1.9.11.11.5"
            class="indexterm"></a><a
            id="id-1.9.11.11.6"
            class="indexterm"></a><a
            id="id-1.9.11.11.7"
            class="indexterm"></a><a
            id="id-1.9.11.11.8"
            class="indexterm"></a><a
            id="id-1.9.11.11.9"
            class="indexterm"></a><div
            class="para">
				APT definieert een aantal standaard prioriteiten. Ieder geïnstalleerde pakket versie heeft een prioriteit van 100. Een niet geïnstalleerde versie heeft een standaard prioriteit van  500, maar het kan springen naar 900 als het deel uitmaakt van de doel vrijgave (gedefinieerd met de <code
              class="literal">-t</code> commando-regel optie of de <code
              class="literal">APT::Default-Release</code> configuratie richtlijn).
			</div><div
            class="para">
				Je kunt de prioriteiten aanpassen door ingaven toe te voegen in het <code
              class="filename">/etc/apt/peferences</code> bestand met de namen van de betreffende pakketten, hun versie, hun origine en hin nieuwe prioriteit.
			</div><div
            class="para">
				APT zal nooit een oudere versie van een pakket installeren (d.w.z. een pakket wiens versie nummer lager is dan deze van het huidig geïnstalleerde pakket) behalve als de prioriteit hoger is dan 1000. APT zal altijd het programma met de hoogste prioriteit, welke deze beperking volgt, installeren). Als twee pakketten dezelfde prioriteit hebben maar verschillen in hun inhoudt, zal APT de versie installeren die niet geïnstalleerd is (deze regel is gemaakt voor het geval van een pakket update zonder het oplopen van het versie nummer, wat meestal verijst is).
			</div><div
            class="para">
				In meer concrete zin zal, een pakket met prioriteit lager dan 0 nooit geïnstalleerd worden. Een pakket met prioriteit tussen 0 en 100 zal enkel geïnstalleerd worden als er geen andere versie van het pakket al geïnstalleerd is. Met een prioriteit tussen 100 en 500 zal het pakket enkel geïnstalleerd worden als er geen nieuwere versie geïnstalleerd is, of beschikbaar in een andere distributie. Een pakket met prioriteit tussen 501 en 990 zal enkel geïnstalleerd worden als er geen nieuwere versie geïnstalleerd is of beschikbaar in de doel distributie. Met een prioriteit tussen 990 en 1000 zal het pakket geïnstalleerd worden, behalve als de geïnstalleerde versie nieuwer is. Een prioriteit groter dan 1000 zal altijd leiden tot een installatie van het pakket, zelfs als het APT dwingt om terug te gaan naar een oudere versie.
			</div><div
            class="para">
				Wanneer APT <code
              class="filename">/etc/apt/preferences</code> controleert, zal het eerst rekening houden met de meest specifieke ingaven (vaak deze die bepaald pakket specificeren), dan de meest algemene (bijvoobeeld inclusief all de pakketten van een distributie). Als er meerdere algemene bronnen bestaan, wordt de eerste match gebruikt. De beschikbare selectie criteria bestaan uit, de naam van het pakket en de naam van de bron die het levert -. Iedere pakket-bron wordt geïdentificeerd door de informatie in een <code
              class="filename">Release</code> bestand dat APT samen met de <code
              class="filename">Packages&gt;</code> bestanden gedownload. Het specificeert de oorsprong (meestal “Debian” voor de pakketten van officiële spiegels, maar het kan ook de naam van er persoon of organisatie zijn, voor bewaarplaatsen van derden-. Het geeft ook de naam van de distributie aan (meestal <span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span> of <span
              class="distribution distribution">Experimental</span> voor de standaard distributies aangeboden door Debian) Samen met haar versie (bijvoorbeeld 8 voor Debian <span
              class="distribution distribution">Jessie</span>).Laten we eens kijken naar de syntaxis door een realistischer casusonderzoek van dit mechanisme.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SPECIFIEKE CASUS</em></span> Prioriteit van <span
                        class="distribution distribution">experimenteel</span></strong></p></div></div></div><a
              id="id-1.9.11.11.15.2"
              class="indexterm"></a><div
              class="para">
				Als je <span
                class="distribution distribution">Experimenteel</span> in jouw <code
                class="filename">sources.list</code> zou zetten, worden de corresponderende pakketten bijna nooit geïnstalleerd omdat hun standaard APT prioriteit 1 is. Dit is natuurlijk een speciaal geval, ingebouwd om te voorkomen dat pakketten uit <span
                class="distribution distribution">Experimenteel</span> per ongeluk geïnstalleerd worden. De pakketten kunnen enkel geïnstalleerd worden door <code
                class="command">aptitude install <em
                  class="replaceable">pakket</em>experimental</code> in te typen — gebuikers die dit commando typen kunnen zich enkel bewust zijn van de risico's die ze nemen. Het is nog steeds mogelijk (maar <span
                class="emphasis"><em>niet</em></span> aanbevolen) om pakketten van <span
                class="distribution distribution">Experimenteel</span> net zoals andere distributies te installeren door ze een prioriteit van 500 te geven. Dit wordt gedaan met een specifieke ingave in <code
                class="filename">/etc/apt/preferences</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">Package: *
Pin: release a=experimental
Pin-Priority: 500</pre></div></div><div
            class="para">
				Laten we ervan uit gaan dat je enkel pakketten van de stabiele vrijgave van Debian wilt gebruiken. Deze aangeboden in andere versies zouden niet geïnstalleerd moeten worden, tenzij specifiek gevraagd. Je zou de volgende ingave in het <code
              class="filename">/etc/apt/preferences</code> bestand kunnen zetten:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: *
Pin: release a=stable
Pin-Priority: 900

Package: *
Pin: release o=Debian
Pin-Priority: -10</pre></div><div
            class="para">
				<code
              class="literal">a=stable</code> definieert de naam van de geselecteerde distributie. <code
              class="literal">o=Debian</code> limiteert het bereik tot pakketten waarvan de oorsprong “Debian” is.
			</div><div
            class="para">
				Laten we er nu vanuit gaan dat je een server hebt met enkele lokale programma's die afhangen van versie 5.14 van Perl en dat je wilt verzekeren dat upgrades geen andere versie ervan zullen installeren. Je kan deze ingave gebruiken:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: perl
Pin: version 5.14*
Pin-Priority: 1001</pre></div><div
            class="para">
				De referentie documentatie voor deze configuratie is beschikbaar in de manual page <span
              class="citerefentry"><span
                class="refentrytitle">apt_preferences</span>(5)</span>, welke je kunt weergeven met <code
              class="command">man apt_preferences</code>.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Opmerkingen in <code
                        class="filename">/etc/apt/preferences</code></strong></p></div></div></div><a
              id="id-1.9.11.11.22.2"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.3"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.4"
              class="indexterm"></a><div
              class="para">
				Er is geen officiële syntaxis om opmerkingen in het <code
                class="filename">/etc/apt/preferences</code> bestand te zetten, maar sommige tekstuele omschrijvingen kunnen geboden worden door één of meer “<code
                class="literal">Explanation</code>” velden in het begin van iedere ingave te zetten:
			</div><div
              class="informalexample"><pre
                class="programlisting">Explanation: Het pakket xserver-xorg-video-intel aangeboden
Explanation: in experimental kan veilig gebruikt worden
Package: xserver-xorg-video-intel
Pin: release a=experimental
Pin-Priority: 500</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-mix-distros"></a>6.2.6. Werken met Verschillende Distributies</h3></div></div></div><div
            class="para">
				<code
              class="command">apt</code> is zo'n geweldig gereedschap, het is verleidelijk om pakketten te kiezen die van andere distributies komen. Bijvoorbeeld, na een <span
              class="distribution distribution">Stabiel</span> systeem geïnstalleerd te gebben, wil je misschien een software pakket uit <span
              class="distribution distribution">Testen</span> probren of <span
              class="distribution distribution">Onstabiel</span> zonder ver van de originele staat af te wijken.
			</div><div
            class="para">
				Zelfs als je occasioneel problemen tegenkomt tijdens het mixen van pakketten van verschillende distributies, beheert <code
              class="command">apt</code> dergelijk gelijktijdig bestaande pakketten zeer goed en beperkt de risico's zeer effectief. De beste manier om verder te gaan is al de gebruikte distributies invoeren in <code
              class="filename">/etc/apt/sources.list</code> (sommige mensen plaatsen er altijd alle drie de distributies, maar onthoudt dat <span
              class="distribution distribution">Onstabiel</span> gereserveerd is voor ervaren gebruikers) en jouw referentie distributie definiëren met de <code
              class="literal">APT::Default-Release</code> parameter (zie <a
              class="xref"
              href="sect.apt-get.html#sect.apt-upgrade">Paragraaf 6.2.3, “Systeem Opwaarderen”</a>).
			</div><div
            class="para">
				Laten we ervan uit gaan dat <span
              class="distribution distribution">Stable</span> jouw referentie distributie is maar dat <span
              class="distribution distribution">Testing</span> en <span
              class="distribution distribution">Unstable</span> ook in jouw <code
              class="filename">sources.list</code> bestand staan. In dat geval kun je <code
              class="command">apt install <em
                class="replaceable">pakket</em>/testing</code> gebruiken om een pakket van <span
              class="distribution distribution">Testen</span> te installeren. Als de installatie faalt door een onvoldane afhankelijkheid, lossen we deze afhankelijkheid op binnen <span
              class="distribution distribution">Testen</span> door de <code
              class="literal">-t testing</code> parameter toe te voegen. Het zelfde geldt natuurlijk voor <span
              class="distribution distribution">Onstabiel</span>.
			</div><div
            class="para">
				In deze situatie worden upgrades (<code
              class="command">upgrade</code> en <code
              class="command">full-upgrade</code>) gedaan vinnen <span
              class="distribution distribution">Stabiel</span> behalve voor pakketten die reeds ge-upgrade zijn naar een andere distributie: Deze zullen de updates beschikbaar in de andere distributie volgen. We zullen dit gedrag, met de hulp van de standaard prioriteit ingesteld door APT, hieronder uitleggen. Twijfel niet om <code
              class="command">apt-cache policy</code> te gebruiken (zie marge <a
              class="xref"
              href="sect.apt-get.html#sidebar.apt-cache-policy"><span
                class="emphasis"><em>TIP</em></span> <code
                class="command">apt-cache policy</code></a>) om de gegeven prioriteiten te controleren.
			</div><div
            class="para">
				Alles draait om het feit dat APT enkel pakketten van hogere of gelijke versie dan de geïnstalleerde versie overweegt (ervan uit gaande dat <code
              class="filename">/etc/apt/preferences</code> niet gebruikt wordt om priotiteiten hoger dan 1000 voor bepaalde pakketten te forceren).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-cache-policy"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt-cache policy</code></strong></p></div></div></div><div
              class="para">
				Om een beter begrip te krijgen van het mechanisme van prioriteiten, aarzel niet om <code
                class="command">apt-cache policy</code> uit te voeren om de standaard prioriteiten geassocieerd met iedere pakket bron weer te geven. Je kunt <code
                class="command">apt-cache policy<em
                  class="replaceable"> </em>pakket</code> ook gebruiken om de prioriteit van alle beschikbare versies van een bepaald pakket weer te geven.
			</div></div><div
            class="para">
				Laten we aannemen dat je versie 1 van een eerste pakket van <span
              class="distribution distribution">Stabiel</span> geïnstalleerd hebt en dat versie 2 en 3 respectievelijk in <span
              class="distribution distribution">Testen</span> en <span
              class="distribution distribution">Onstabiel</span> beschikbaar zijn. De geïnstalleerde versie heeft een prioriteit van 100 maar de beschikbare versie in <span
              class="distribution distribution">Stabiel</span> (hetzelfde) heeft een prioriteit van 990 (omdat het onderdeel is van de doel vrijgave). Pakketten in <span
              class="distribution distribution">Testen</span> en <span
              class="distribution distribution">Onstabiel</span> hebben een prioriteit van 500 (de standaard prioriteit van een niet-geïnstalleerde versie). De winnaar is dus versie 1 met een prioriteit van 900. Het pakket “blijft in <span
              class="distribution distribution">Stabiel</span>”.
			</div><div
            class="para">
				Laten we het voorbeeld nemen van een ander pakket wiens versie 2 geïnstalleerd is van <span
              class="distribution distribution">Testen</span>. Versie 1 is beschikbaar in <span
              class="distribution distribution">Stabiel</span> en versie 3 in <span
              class="distribution distribution">Onstabiel</span>. Versie 1 (met prioriteit 900 — dus lager dan 1000) wordt genegeerd omdat het van een lagere versie is dan de geïnstalleerde versie. Dit laat enkel versie 2 en 3 over, beiden met prioriteit 500. geconfronteerd met dit alternatief, selecteert APT de nieuweste versie, diegene van <span
              class="distribution distribution">Onstabiel</span>.Als je niet wilt dat een pakket van <span
              class="distribution distribution">Testen</span> migreert naar <span
              class="distribution distribution">Onstabiel</span>, moet je een prioriteit lager dan 500 (490 bijvoorbeeld) toewijzen aan pakketten komende van <span
              class="distribution distribution">Onstabiel</span>. Je kunt <code
              class="filename">/etc/apt/preferences</code> hiervoor aanpassen :
			</div><pre
            class="programlisting">Package: *
Pin: release a=unstable
Pin-Priority: 490</pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.automatic-tracking"></a>6.2.7. Volgen van Automatisch Geïnstalleerde Pakketten</h3></div></div></div><div
            class="para">
				Een van de essentiële functionaliteiten van <code
              class="command">apt</code> is het volgen van pakketten geïnstalleerd enkel door afhankelijkheden. Deze pakketten worden “automatisch” genoemd, en omvatten vaak bibliotheken.
			</div><div
            class="para">
				Met deze informatie kan de pakket beheerder, wanneer pakketen verwijderd worden, een lijst van automatische pakketten die niet langer nodig zijn berekenen (omdat er geen “handmatig geïnstalleerde” pakken van afhangen). <code
              class="command">apt-get autoremove</code> zal deze pakketten verwijderen. <code
              class="command">aptitude</code> en <code
              class="command">apt</code> hebben dit commando niet: de eerste omdat het ze automatische verwijderd zodra ze geïdentificeerd zijn, en de laatste waarschijnlijk omdat de gebruiker zo'n commando niet manueel zou moeten uitvoeren. In ieder geval, geven de gereedschappen een duidelijk bericht weer met een lijst van de betrokken pakketten.
			</div><a
            id="id-1.9.11.13.4"
            class="indexterm"></a><a
            id="id-1.9.11.13.5"
            class="indexterm"></a><a
            id="id-1.9.11.13.6"
            class="indexterm"></a><a
            id="id-1.9.11.13.7"
            class="indexterm"></a><div
            class="para">
				Het is een goede gewoonte om ieder pakket dat je niet rechtstreeks nodig hebt te markeren als automatisch zodat ze automatisch verwijderd worden als ze niet meer nodig zijn. <code
              class="command">apt-mark auto <em
                class="replaceable">pakket</em></code> zal het gegeven pakket markeren als automatisch, waar <code
              class="command">apt-mark manual <em
                class="replaceable">pakket</em></code> het tegenovergestelde doet. <code
              class="command">aptitude markauto</code> en <code
              class="command">aptitude unmarkauto</code> werken op dezelfde manier, hoewel ze meer functies bieden voor het gelijktijdig markeren van meerdere pakketten (zie <a
              class="xref"
              href="sect.apt-frontends.html#sect.aptitude">Paragraaf 6.4.1, “<code
                class="command">aptitude</code>”</a>). De console-gebaseerde interactieve interface van <code
              class="command">aptitude</code> maakt het ook gemakkelijk om de “automatisch vlag” van meerdere pakketten te bekijken.
			</div><a
            id="id-1.9.11.13.9"
            class="indexterm"></a><div
            class="para">
				Men kan zich afvragen waarom een automatisch geïnstalleerd pakket aanwezig is op het systeem. Om deze informatie te krijgen vanaf de commando regel, kun je <code
              class="command">aptitude why <em
                class="replaceable">pakket</em></code> (<code
              class="command">apt</code> en <code
              class="command">apt-get</code> hebben geen gelijkaardig commando) gebruiken:
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>aptitude why python-debian
</code></strong><code
              class="computeroutput">i   aptitude         Recommends apt-xapian-index         
i A apt-xapian-index Vereist    python-debian (&gt;= 0.1.15)
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIEF</em></span> <code
                        class="command">deborphan</code> en <code
                        class="command">debfoster</code></strong></p></div></div></div><a
              id="id-1.9.11.13.12.2"
              class="indexterm"></a><a
              id="id-1.9.11.13.12.3"
              class="indexterm"></a><div
              class="para">
				In de tijd dat <code
                class="command">apt</code>, <code
                class="command">apt-get</code> en <code
                class="command">aptitude</code> niet in staat waren om pakketten automatisch te volgen, waren er twee programma's die lijsten van onnodige pakketten produceerde: <code
                class="command">deborphan</code> en <code
                class="command">debfoster</code>.
			</div><div
              class="para">
				<code
                class="command">deborphan</code> is het meer rudimentaire van de twee, het scant simpelweg de <code
                class="literal">libs</code> en <code
                class="literal">oldlibs</code> secties (in de afwezigheid van aanvullende instructies) kijkend naar de pakketten die momenteel geïnstalleerd zijn en waar geen ander pakket van afhangt. Het resultaat is een lijst die dienst kan doen als een basis voor het verwijderen van onnodige pakketten.
			</div><div
              class="para">
				<code
                class="command">debfoster</code> heeft een meer uitgebreide aanpak, zeer gelijkaardig met die van APT: het onderhoud een lijst van pakketten die expliciet geïnstalleerd zijn en onthoud welke pakketten echt nodig zijn tijden iedere aanroep. Als er nieuwe pakketten verschijnen op het systeem en als <code
                class="command">debfoster</code> ze niet kent als nodige pakketten, zullen ze op het scherm weergegeven worden met een lijst van hun afhankelijkheden. Het programma biedt dan een keuze: verwijder het pakket (mogelijk samen met deze die erop rekenen), markeer het expliciet als nodig or negeer het tijdelijk.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Terug</strong>Hoofdstuk 6. Onderhoud en Updates: De APT Gereeds...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Omhoog</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Begin</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Volgende</strong>6.3. Het apt-cache Commando</a></li></ul></body></html>
