<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="installation">
  <chapterinfo>
    <mediaobject condition="pdf">
      <imageobject>
        <imagedata fileref="images/chap-installation.png" scalefit="1" />
      </imageobject>
    </mediaobject>
    <keywordset>
      <keyword>Installatie</keyword>
      <keyword>Schijfindeling</keyword>
      <keyword>Formatteren</keyword>
      <keyword>Bestandssysteem</keyword>
      <keyword>Opstart Sector</keyword>
      <keyword>Hardware Detectie</keyword>
    </keywordset>
  </chapterinfo>
  <title>Installatie</title>
  <highlights>
    <para>Om Debian te gebruiken moet je het installeren op een computer; deze taak wordt verzorgd door het <emphasis>debian-installer</emphasis> programma. Een goede installatie vraagt vele handelingen. Dit hoofdstuk bespreekt ze in hun chronologische volgorde.</para>
  </highlights>
  <indexterm><primary>Installatie</primary><secondary>van het systeem</secondary></indexterm>

  <sidebar>
    <title><emphasis>TERUG NAAR DE BASIS</emphasis> Een inhaal cursus in de bijlagen</title>

    <para>Een computer installeren is altijd gemakkelijker wanneer je bekent bent met hoe het werkt. Ben je dat niet, maak dan een snelle omleiding naar <xref linkend="short-remedial-course" /> voor dit hoofdstuk te lezen.</para>
  </sidebar>

  <para>Het installatieprogramma voor <emphasis role="distribution">Jessie</emphasis> is gebaseerd op <command>debian-installer</command>. Het modulaire ontwerp stelt het in staat om in verschillende scenario's te werken en om te evolueren en zich aan te passen aan veranderingen. Ondanks de impliciete belemmeringen door de nood om een groot aantal architecturen te ondersteunen, is dit installatieprogramma zeer toegankelijk voor beginners, omdat het de gebruiker in ieder stadium van het process ondersteund. Automatische hardware detectie, begeleide schijfindeling en de grafische gebruiks-interface hebben veel van de problemen waar nieuwelingen in de begin jaren van Debian mee werden geconfronteerd opgelost.</para>
  <indexterm><primary>installatieprogramma</primary></indexterm>
  <indexterm><primary><command>debian-installer</command></primary></indexterm>

  <para>De installatie heeft 80 MB RAM (Random Access Memory) nodig en ten minste 700 MB ruimte op de harde-schijf. Alle Falcot computers voldoen aan deze criteria. Nota, hoewel deze aantallen toepassing hebben op de installatie van een zeer gelimiteerd systeem zonder een grafisch bureaublad. Een minimum van 512 MB RAM en 5 GB ruimte op de harde-schijf zijn echt aanbevolen voor een basis kantoor werkstation.</para>

  <sidebar>
    <title><emphasis>LET OP</emphasis> Upgraden van Wheezy</title>

    <para>Als je Debian Wheezy al geïnstalleerd hebt op jouw computer is dit hoofdstuk niet voor jou! In tegenstelling tot andere distributies staat Debian het toe om een systeem van een versie naar de volgende te upgraden zonder het systeem te moeten herinstalleren. Herinstalleren kan naast onnodig ook riskant zijn omdat het al de reeds geïnstalleerde programma's kan verwijderen.</para>

    <para>Het upgraden wordt beschreven in <xref linkend="sect.dist-upgrade" />.</para>
  </sidebar>
  <section id="sect.installation-methods">
    <title>Installatie Methoden</title>

    <para>Een Debian systeem van geïnstalleerd worden vanaf verschillende soorten media, zolang de BIOS van de machine dit toestaat. Je kan bij voorbeeld opstarten vanaf een CD-ROM, een USB stick of zelf via een netwerk.</para>

    <sidebar>
      <title><emphasis>TERUG NAAR DE BASIS</emphasis> BIOS, de hardware/software interface</title>
      <indexterm><primary>BIOS</primary></indexterm>
      <indexterm><primary>Basic Input/Output System</primary></indexterm>

      <para>BIOS (wat Basic Input/Output System betekend) is software dat is inbegrepen in het moederbord (het electronische bord dat alle apparatuur verbindt) en wordt uitgevoerd wanneer de computer opstart, om het besturingssysteem in de laden (via een aangepaste opstartlader). Het blijft in de achtergrond om een interface te bieden tussen de hardware en de software (in ons geval, de Linux kernel).</para>
    </sidebar>
    <section id="sect.install-cd">
      <title>Installeren vanaf een CD-ROM/DVD-ROM</title>

      <para>De meest gebruikte methode van installatie is van een CD-ROM (of DVD-ROM, welke zich precies hetzelfde gedraagt): de computer wordt opgestart van die medium en het installatieprogramma neemt het over.</para>

      
      <para>Verscheidene CD-ROM families hebben verschillende doelen: <emphasis>netinst</emphasis> (netwerk installatie) bevat het installatieprogramma en het basis Debian systeem; alle andere programma's worden dan gedownload. zijn “beeld” dat een ISO-9660 bestandssysteem met de exacte inhoud van de schijf bevat, is slechts 150 tot 200 MB (afhankelijk van de architectuur), aan de andere kant.</para>

      <para>Er is nog een laatste type van beeld, gekend als <filename>mini.iso</filename>, welke enkel beschikbaar is als een bij-product van het installatieprogramma. Het beeld bevat enkel de minimum die nodig is om het netwerk te configureren en al het andere wordt gedownload (zelfs inclusief delen van het installatieprogramma zelf, dit is waarom dit soort beeld de neiging heeft kapot te gaan wanneer een nieuwe versie van het installatieprogramma is vrijgegeven). Deze beelden kunnen gevonden worden op de normale Debian spiegels onder de <filename>dist/<replaceable>vrijgave</replaceable>/main/installer-<replaceable>arch</replaceable>/current/images/netboot/</filename> directory.</para>
      <indexterm><primary><filename>mini.iso</filename></primary></indexterm>

      <sidebar>
        <title><emphasis>TIP</emphasis> Multi-Architectuur discs</title>

	<para>De meeste installatie CD- en DVD-Rom's werken enkel met een specifieke hardware architectuur. Als je de volledige beelden wil downloaden, met je ervoor zorgen dat je deze kiest welke werken op de hardware van de computer waarop je hen wil installeren.</para>

	<para>Sommige CD/DVD-Rom beelden kunnen werken op verschillende architecturen. We hebben dus een CD-ROM beeld dat het <emphasis>netinst</emphasis> beeld van de <emphasis>i386</emphasis> en <emphasis>amd64</emphasis> architecturen combineert. Er is ook een DVD-Rom beeld dat het installatieprogramma en een selectie van binaire pakketten voor <emphasis>i386</emphasis> en <emphasis>amd64</emphasis> bevat, alsook de corresponderende bron pakketten.</para>
      </sidebar>
      <indexterm><primary>CD-ROM</primary><secondary>Installatie CD-ROM</secondary></indexterm>
      <indexterm><primary>CD-ROM</primary><secondary><emphasis>netinst CD-ROM</emphasis></secondary></indexterm>
      <indexterm><primary>DVD-ROM</primary><secondary>Installatie DVD-ROM</secondary></indexterm>
      <indexterm><primary>DVD-ROM</primary><secondary><emphasis>netinst DVD-ROM</emphasis></secondary></indexterm>

      <para>Om Debian CD-ROM beelden te bekomen met je ze natuurlijk downloaden en ze dan naar een disc branden. Je kan ze ook kopen, en dus het project van wat financiële steun voorzien. Controleer de website om een lijst van CD-ROM verkopers en beeld download sites. <ulink type="block" url="http://www.debian.org/CD/index.html" /></para>
    </section>
    <section id="sect.install-usb">
      <title>Opstarten vanaf een USB stick</title>
      <indexterm><primary>USB stick</primary></indexterm>

      <para>Omdat de meeste computers kunnen opstarten van USB apparaten kun je Debian ook installeren vanaf een USB stick (dit is niets meer dan een kleine flash-geheugen disc).</para>

      <para>De installatie handleiding legt uit hoe een USB stick te maken die de <command>debian-installer</command> bevat. De procedure is heel simpel omdat ISO beelden voor i386 en amd64 hybride beelden zijn die kunnen opstarten vanag een CD-ROM en van een USB stick.</para>

      <para>Je moet eerst de apparaat naam ven de USB stick identificeren (bijv. <literal>/dev/sdb</literal>); de simpelste manier om dit te doen is de berichten gegeven door de kernel te controleren met het <command>dmesg</command> commando. Dan moet je het eerder gedownloade ISO beeld kopiëren (bij voorbeeld debian-8.0.0-amd64-i386-netinst.iso) met het commando <command>cat debian-8.0.0-amd64-i386-netinst.iso &gt;/dev/sdb; sync</command>. Dit commando verijst beheerders rechten, aangezien het de USB stick direct beschrijft en blindelings zijn inhoud verwijdert.</para>

      <para>Een gedetailleerdere uitleg is beschikbaar in de installatie handleiding. Het beschrijft, onder andere, een alternatieve complexere methode om een USB voor te bereiden, maar dat laat toe om de standaard opties van het installatieprogramma aan te passen (deze ingegeven in de kernel commando regel). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s03.html" /></para>
    </section>
    <section id="sect.install-net">
      <title>Installeren d.m.v. Netwerk Opstarten</title>
      <indexterm><primary>installatie</primary><secondary><emphasis>netboot installatie</emphasis></secondary></indexterm>
      <indexterm><primary>installatie</primary><secondary><emphasis>PXE installatie</emphasis></secondary></indexterm>
      <indexterm><primary>installatie</primary><secondary><emphasis>TFTP installatie</emphasis></secondary></indexterm>

      <para>Veel BIOS-en staan het opstarten rechtstreeks van een netwerk toe, door de kernel en een minimal bestandssysteem beeld te downloaden. Deze methode (Welke verschillende namen heeft zoals <acronym>PXE</acronym> of <acronym>TFTP</acronym> boot) kan een godsgeschenk zijn als de computer geen CD-ROM lezer heeft of als de BIOS niet van de zulke media kan opstarten.</para>

      <para>Deze installatie methode werkt in twee stappen. Eerst, terwijl de computer opstart, stuurt de BIOS (of de netwerk kaart) een BOOTP/DHCP verzoek om automatisch een IP adres te krijgen. Wanneer een BOOTP of DHCP server een antwoord geeft, bevat het een bestandsnaam en netwerk instellingen. Na het netwerk geconfigureerd te hebben stuurt doe cliënt computer een TFTP (Trivial File Transfer Protocol) verzoek voor een bestand wiens naam eerder was aangegeven. Eenmaal dit bestand beschikbaar is, wordt het uitgevoerd als ware het een opstartlader. Deze start dan het Debian installatieprogramma, welke wordt uitgevoerd alsof het draaide vanaf de harde-schijf, een CD-ROM of een USB stick.</para>

      <para>Alle details van deze methode zijn beschikbaar in de installatie gids ("Preparing files for TFTP Net Bootin" sectie). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch05s01.html#boot-tftp" /> <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s05.html" /></para>
    </section>
    <section id="sect.install-auto">
      <title>Andere Installatie Methoden</title>

      <para>Wanneer we aangepaste installaties moeten opzetten voor een groot aantal computers, kiezen we in het algemeen voor een geautomatiseerde methode in tegenstelling tot een manuele installatie. Afhankelijk van de situatie en de complexiteit van de te maken installaties kunnen we FAI (Fully Automatic Installer, beschreven in <xref linkend="sect.fai" />) gebruiken of zelfs een aangepaste installatie CD met preseeding (zie <xref linkend="sect.d-i-preseeding" />).</para>
    </section>
  </section>
  <section id="sect.installation-steps">
    <title>Installeren, Stap voor Stap</title>
    <section id="sect.install-boot">
      <title>Opstarten en het Installatieprogramma Starten</title>

      <para>Eenmaal de BIOS is begonnen met het opstarten vanaf de CD- of DVD-ROM verschijnt het Isolinux opstartlader menu. Op dit punt is de Linux kernel nog niet geladen; dit menu staat je toe de op te starten kernel te kiezen en mogelijke parameters er naartoe te zenden.</para>

      <para>Voor een standaard installatie moet je enkel “Install” of “Graphical install” kiezen (met de pijltjes toetsen) en dan op de <keycap>Enter</keycap> toets drukken om de rest van het installatieproces the initialiseren. Als de DVD-Rom een “Multi-arch” disc is en de machine heeft een Intel of AMD 64 bit processor, kun je met de menu opties “64 bit install” en “64 bit graphical install” de 64 bit variant (<emphasis>amd64</emphasis>) installeren in plaats van de standaard 32 bit variant (<emphasis>i386</emphasis>). In de praktijk kan de 64 bit versie bijna altijd gebruikt worden: de meeste recente processoren zijn 64 bit processoren en de 64 bit versie hanteert de hoge hoeveelheid RAM die nieuwe computers neigen te hebben beter.</para>

      <sidebar>
        <title><emphasis>VERDER GAAN</emphasis> 32 of 64 bit?</title>
        <indexterm><primary>PAE</primary></indexterm>
        <indexterm><primary>Physical Address Extension</primary></indexterm>
        <indexterm><primary>32/64 bit, keuze</primary></indexterm>

	<para>Het fundamentele verschil tussen 32 en 64 bit sysemen is de grote van geheugen adressen. In theorie kan een 32 bit systeem niet werken met meer dan 4 GB RAP (2<superscript>32</superscript> bytes). In de praktijk is het mogelijk om rond deze limiet te werken door gebruik te maken van de <literal>686-pae</literal> kernel variant, zolang de processor met de PAE (Physical Address Extension) functionaliteit kan werken. Hoewel dit meestal een merkbare invloed op de prestaties van het systeem heeft, is het nuttig om de 64 bit modus te gebruiken op aan server met een grote hoeveelheid RAM.</para>

	<para>Voor een kantoor computer (maar een klein percentage verschil in prestaties te verwaarlozen is), met je er aan denken dat bepaalde gepatenteerde programma's niet beschikbaar zijn in een 64 bit versie (zoals Skype bij voorbeeld). Het is technisch mogelijk om ze te laten werken op 64 bit systemen, maar je moet de 32 bit versies van al de nodige bibliotheken installeren (zie <xref linkend="sect.multi-arch" />), en soms <command>setarch</command> of <command>linux32</command> gebruiken (in het <emphasis role="pkg">util-linux</emphasis> pakket) Om het programma te misleiden over aard van het systeem. <indexterm><primary><command>setarch</command></primary></indexterm> <indexterm><primary><command>linux32</command></primary></indexterm></para>
      </sidebar>

      <sidebar>
        <title><emphasis>IN DE PRAKTIJK</emphasis> Installatie langs een bestaand Windows syseem</title>
        <indexterm><primary>dual boot</primary></indexterm>

	<para>Als de computer al Windows draait, is het niet nodig om het systeem te wissen om Debian te installeren. Je kunt beide systemen tegelijkertijd, ieder op een aparte schijf of partitie, geïnstalleerd hebben en bij het opstarten kiezen welke opgestart moet worden met de computer. Deze configuratie wordt vaak “dual boot” genoemd, en het Debian installatie systeem van dit instellen. Dit gebeurd tijdens het schijfindelings-process van de installatie en terwijl de opstartlader wordt ingesteld (zie marge <xref linkend="sidebar.shrinking-partition" /> en <xref linkend="sidebar.bootloader-dual-boot" />).</para>

	<para>Als je al een werkend Windows systeem hebt, kun je zelf voorkomen om een CD-ROM te gebruiken, Debian biedt een Windows programma aan dat een licht Debian installatieprogramma en stelt het in op de harde-schijf. Je moet de computer dan enkel opnieuw opstarten en kiezen tussen normale Windows opstart of opstarten van het installatie programma. Je kunt het ook vinden om een toegewijde website met een vrij expliciete naam… <ulink type="block" url="http://ftp.debian.org/debian/tools/win32-loader/stable/" /> <ulink type="block" url="http://www.goodbye-microsoft.com/" /></para>
      </sidebar>

      <sidebar>
        <title><emphasis>TERUG NAAR DE BASIS</emphasis> Opstartlader</title>
        <indexterm><primary>lader</primary><secondary>opstartlader</secondary></indexterm>
        <indexterm><primary>opstartlader</primary></indexterm>
        <indexterm><primary>opstart</primary><secondary>lader</secondary></indexterm>

	<para>De opstartlader is een laag-niveau programma dat verantwoordelijk is voor het opstarten van de Linux kernel, net nadat de BIOS de controle heeft doorgegeven. Om deze taak te behandelen moet het de kernel kunnen vinden om de schijf te starten. Op een i386 en amd64 architectuur zijn de twee meest gebruikte programma's hiervoor LILO, de oude van de twee, en GRUB zijn moderne vervanger. Isolinux en Syslinux zijn alternatieven vaak gebruikt om op te starten vanaf verwijderbare media.</para>
      </sidebar>

      <para>Ieder menu verbergt een specifieke opstart commando regel, welke indien nodig geconfigureerd kan worden door op de <keycap>TAB</keycap> toets de drukken voor de ingaven te valideren en op te starten. De “Help” menu optie toont de oude commando regel interface, waar de <keycap>F1</keycap> tot <keycap>F10</keycap> toetsen verschillende help schermen weergeven met gedetailleerde informatie over de verschillende opties beschikbaar op de prompt. Je zal deze opties zelden nodig hebben behalve in zeer specifieke gevallen.</para>

      <para>De “expert” modus (beschikbaar in het “Advanced options” menu) geeft details over alle mogelijke opties in het installatie proces en laat toe om te navigeren tussen de verschillende stappen zonder dat ze automatisch in volgorde worden uitgevoerd. Wees voorzichtig, deze heel uitgebreide modus kan verwarrend zijn door de hoeveelheid van configuratie keuzes die het biedt.</para>

      <figure>
        <title>Opstartscherm</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-boot.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Eenmaal opstart geleid het installatieprogramma je stap voor stap door het proces. Dit onderdeel toont iedere stap in detail. Hier volgen we het proces van een installatie vanaf een Multi-Arch DVD-ROM (specifieker, de beta4 versie van het installatie programma voor Jessie); <emphasis>netinst</emphasis> installaties, alsook de uiteindelijke vrijgave van het installatieprogramma kan er anders uitzien. We zullen ook installatie in de grafische modus bespreken, maar het verschillen met de “klassieke” (tekst-modus) installatie is in de visuele weergave.</para>
    </section>
    <section id="sect.install-lang">
      <title>De taal selecteren</title>
      <indexterm><primary>keuze</primary><secondary>van de taal</secondary></indexterm>

      <para>Het installatieprogramma begint in het Engels, maar de eerste stap laat de gebruiker toe om de taal die in de rest van het proces gebruikt zal worden te kiezen. Nederlands kiezen, bij voorbeeld, zal all installatie ingaven vertalen naar het Nederlands (en een systeem geconfigureerd in het Nederlands is het resultaat). Deze keuze wordt ook gebruikt om de meer relevante standaard keuzes in de volgende stadia te definiëren (met name de lay-out van het toetsenbord).</para>

      <sidebar>
        <title><emphasis>TERUG NAAR DE BASIS</emphasis> Navigatie met het toetsenbord</title>

	<para>Sommige stappen in het installatieproces vereisen het ingeven van informatie. Deze schermen hebben verschillende gebieden die de “focus” kunnen hebben (tekst ingaven gebieden, aantik-vakjes, keuzelijsten, OK en Cancel knoppen), en de <keycap>TAB</keycap> toets laat je toe om van de ene naar de andere te gaan.</para>

	<para>In de grafische modus, kun je de muis gebruiken zoals je normaal zou doen in een geïnstalleerde grafisch desktop.</para>
      </sidebar>

      <figure role="flow.inline">
        <title>De taal selecteren</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-country">
      <title>Het land kiezen</title>
      <indexterm><primary>keuze</primary><secondary>van het land</secondary></indexterm>

      <para>De tweede stap bestaat uit de keuze van jouw land. Gecombineerd met de taal, laat deze informatie het programma toe om de meest passende lay-out van het toetsenbord aan te bieden. Dit zal ook invloed hebben op de configuratie van de tijds-zone. In de Verenigde Staten, wordt een standaard QWERTY toetsenbord voorgesteld (In belgië is dit AZERTY en in nederland gebruikt men ook het Amerikaanse QWERTY) en een keuze van geschikte tijds-zones wordt aangeboden.</para>

      <figure role="flow.inline">
        <title>Het land kiezen</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-keyboard">
      <title>De toetsenbord lay-out kiezen</title>
      <indexterm><primary>toetsenbord lay-out</primary></indexterm>
      <indexterm><primary>lay-out, toetsenbord</primary></indexterm>

      <para>Het voorgestelde “Belgisch” toetsenbord komt overeen met het gebruikelijke AZERTY lay-out.</para>

      <figure role="flow.inline">
        <title>Keuze van het toetsenbord</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-detect-hardware">
      <title>Hardware Detecteren</title>

      <para>Deze stap is volledig automatisch in de grote meerderheid van de gevallen. Het installatieprogramma detecteert jouw hardware en probeert de CD-ROM station die gebruikt wordt te identificeren om toegang te krijgen tot zijn inhoud. Het laad de modules die corresponderen met de verschillende hardware onderdelen die gedetecteerd worden, en “koppelt” de CD-Rom dan aan om hem te kunnen lezen. De voorgaande stappen zaten volledig omvat in het opstart beeld inbegrepen op de CD, een bestand met een beperkte grote en in het geheugen geladen door de BIOS tijdens het opstarten van de CD.</para>

      <para>Het installatie programma werkt met de grote meerderheid van stations, vooral standaard ATAPI apparaten (soms IDE en EIDE genoemd). hoeel, indien de detectie van de CD-ROM lezer mislukt, biedt het installatieprogramma de keuze om een kernel module (bij voorbeeld vanaf een USB stick) voor het CD-ROM station te laden.</para>
    </section>
    <section id="sect.install-load-components">
      <title>Onderdelen Laden</title>

      <para>Nu de inhoudt van de CD nu beschikbaar is, laad het installatieprogramma alle bestanden die nodig zijn om zijn werk verder te zetten. Inclusief aanvullende stuurprogramma's voor de rest van de hardware (vooral de netwerk kaart) en al de componenten van het installatieprogramma.</para>
    </section>
    <section id="sect.install-detect-network">
      <title>Netwerk Hardware Detecteren</title>

      <para>Deze automatische stap probeert de netwerk kaart te identificeren en laad de corresponderende modules. Als automatische detectie faalt kun je manueel de te laden module selecteren. Als geen enkele module werkt is het mogelijk om een specifieke module van een verwijderbaar apparaat te laden. Deze laatste oplossing is meestal enkel nodig als de geschikte driver niet standaard in de kernel is voorzien, maar elders beschikbaar is, zoals de website van de fabrikant.</para>

      <para>Deze stap moet absoluut succesvol zijn voor een <emphasis>netinst</emphasis> installatie, omdat de Debian pakketten via het netwerk geladen moeten worden.</para>
    </section>
    <section id="sect.install-network-config">
      <title>Het Netwerk Configureren</title>
      <indexterm><primary>configuratie</primary><secondary>netwerk</secondary><tertiary>statisch</tertiary></indexterm>
      <indexterm><primary>configuratie</primary><secondary>netwerk</secondary><tertiary>DHCP</tertiary></indexterm>

      <para>Om het proces zo veel mogelijk te automatiseren probeert het installatieprogramma een automatische netwerk configuratie door DHCP (voor IPv4) en door IPv6 network discovery. Als dit faalt, biedt het meer keuzes: probeer nogmaals met een standaard DHCP configuratie, probeer DHCP configuratie door de naam van de machine te declareren or een statische netwerk configuratie opstellen.</para>

      <para>Deze laatste optie verijst een IP adres, een subnet masker, een IP adres voor een eventuele gateway, een machine naam en een domein naam.</para>

      <sidebar>
        <title><emphasis>TIP</emphasis> Configuratie zonder DHCP</title>

	<para>Als het lokale netwerk is uitgerust met een DHCP server die je niet wenst te gebruiken omdat je een statisch IP adres wenst te gebruiken voor de installatie van de machine, kun je de optie <userinput>netcfg/use_dhcp=false</userinput> ingeven bij het opstarten van de CD-ROM. Je moet enkel naar de gewenste menu ingang gaan door op de <keycap>TAB</keycap> toets te drukken en dan de gewenste opties in te geven voor op de <keycap>Enter</keycap> toets te drukken.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>LET UP</emphasis> Niet improvisren</title>

	<para>Vele local area netwerken zijn gebaseerd op de impliciete veronderstelling dat alle machines vertrouwd kunnen worden en onvoldoende configuratie van een enkele computer zal vaak het netwerk verstoren. Als een resultaat sluit jouw machine nooit aan op een netwerk zonder voorgaande toestemming van de beheerder over de geschikte instellingen (bij voorbeeld, het IP adres, netwerk master en broadcast adres).</para>
      </sidebar>
    </section>
    <section>
      <title>Beheerders Wachtwoord</title>
      <indexterm><primary>account</primary><secondary>beheerders account</secondary></indexterm>

      <para>De super-gebruiker root account, gereserveerd voor de beheerder van de machine, wordt automatisch gecreëerd tijden de installatie; dit is waarom een wachtwoord nodig is. Het installatieprogramma vraagt ook om met wachtwoord te bevestigen om enige typefout die later voor problemen kan zorgen te voorkomen.</para>

      <figure>
        <title>Beheerders Wachtwoord</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-rootpw.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <sidebar>
        <title><emphasis>BEVEILIGING</emphasis> Beheerders wachtwoord</title>

	<para>Het wachtwoord voor de root gebruiker zou lang moeten zijn (8 tekens of meer) en onmogelijk te raden. Inderdaad, iedere computer (en een groot aantal servers) verbonden met het internet wordt regelmatig het doelwit van verbindingspogingen met overduidelijke wachtwoorden. Soms kan het zelfs slachtoffer worden van een woordenboek aanval, in welke veel combinaties van woorden en nummers getest worden als wachtwoord. vermijd namen van kinderen of ouders, geboortedata, enz.: veel van je collega's kunnen ze weten en je wilt ze zelden vrije toegang geven tot de computers in kwestie.</para>

	<para>Deze opmerkingen zijn evenzeer toepasbaar voor ieder ander gebruikerswachtwoord maar de consequenties van een gecompromitteerde account zijn minder dramatisch voor gebruikers zonder beheerders rechten.</para>

	<para>Als je geen inspiratie hebt, twijfel dat niet om een wachtwoord generator zoals <command>pwgen</command> (in het pakket met dezelfde naam) te gebruiken.</para>
      </sidebar>
    </section>
    <section>
      <title>De Eerste Gebruiker Creëren</title>

      <para>Debian legt ook de creatie van een standaard gebruikers account op zodat de beheerder niet de slechte gewoonte krijgt om te werken als root. Het voorzichtigheids-principe betekend in essentie dat ieder taak wordt uitgevoerd met het minimum aan vereiste rechten, om de schade aangericht door menselijke fouten te beperken. Dit is waarom het installatieprogramma vraagt naar een volledig naam van de eerste gebruiker, hun gebruikersnaam en hun wachtwoord (tweemaal, om foute ingaven te voorkomen).</para>

      <figure>
        <title>Naam van de eerste gebruiker</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-username.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-clock-config">
      <title>Configuratie van de Klok</title>

      <para>Als het netwerk beschikbaar is zal de interne klok van het systeem ge-update worden (in een één-schot manier) vanaf een NTP server. Daarom is de tijds-stempel op de logbestanden correct vanaf het voor de eerste keer opstarten. Om gedurende de tijd consistent te blijven moet er na de installatie een NTP daemon ingesteld worden (zie <xref linkend="sect.time-synchronization" />).</para>
    </section>
    <section id="sect.install-detect-disks">
      <title>Schijven en Andere Apparaten Detecteren</title>

      <para>Deze stap detecteerd automatisch de harde-schijven waarop Debian kan geïnstalleerd worden. Ze zullen in de volgende stap: schijfindeling worden weergegeven.</para>
    </section>
    <section id="sect.install-partman">
      <title>Het Schijfindelings Gereedschap Starten</title>
      <indexterm><primary>schijfindeling</primary></indexterm>

      <sidebar>
        <title><emphasis>CULTUUR</emphasis> Gebruiken van schijfindelingen</title>

	<para>Schijfindelen, een onmisbare stap in de installatie, bestaat uit het indelen van de beschikbare ruimte op de harde-schijf (iedere onderverdeling ervan wordt een “partitie” genoemd) naargelang de gegeven die er op worden opgeslagen en het gebruik waarvoor de computer is bedoeld. Deze stap bevat ook de keuze van het te gebruiken bestandssysteem. Al deze beslissingen hebben een invloed op de prestaties, gegevens beveiliging en het beheren van het systeem.</para>
      </sidebar>

      <para>Het schijfindelen is traditioneel het moeilijkste voor nieuwe gebruikers. Het is nodig de verschillende delen (of “partities”) van de schijven te definiëren waarop het Linux bestandssysteem en virtueel geheugen (swap) opgeslagen zal worden. Deze taak ik gecompliceerd als er een ander besturingssysteem geïnstalleerd is dat je wilt behouden. Inderdaad, dan moet je er voor zorgen dat je zijn partities niet verandert (of dat je ze van grootte verandert zonder schade aan te richten).</para>

      <para>Gelukkig heeft de schijfindelings-software een “begeleide” modus welke de gebruiker aanraad welke partities aan te maken — in de meeste gevallen kun je simpelweg de suggesties van de software valideren.</para>

      <figure>
        <title>Keuze van schijfindelings-modus</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Het eerste scherm van de schijfindelings-software biedt de keuze om de volledige harde-schijf te gebruiken om meerdere partities te maken. Voor een (nieuwe) computer elke enkel Linux zal gebruiken is deze optie het duidelijkst en het simpelst en kun je kiezen voor de optie “begeleid - benut gehele schijf”. Als de computer 2 harde-schijven heeft voor twee besturingssystemen, is het instellen van een schijf per besturingssysteem ook een oplossing die het schijfindelen kan vergemakkelijken. In beide gevallen biedt het volgende scherm de keuze om de schijf te selecteren waarop je Linux wint installeren door de overeenkomstige optie (bij voorbeeld, “SCSI3 (0,0,0) (sda) - 21.5 GB VMware Virtual S”). te kiezen. Je start dan de begeleide schijfindeling.</para>

      <figure>
        <title>Schijf te gebruiken voor begeleide schijfindeling</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman-disk.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Begeleide schijfindeling kan ook ingesteld worden op LVM logische volumes in plaats van op partities (zie hieronder). Omdat de rest van de handelingen hetzelfde is zullen we de optie “Begeleid - benut gehele schijf en gebruik LVM” (encryptie of niet) niet bespreken.</para>

      <para>In andere gevallen, wanneer Linux naast een reeds bestaande partitie moet werken, moet je de manuele schijfindeling kiezen.</para>
      <section id="sect.install-autopartman-mode">
        <title>Begeleide schijfindeling</title>
        <indexterm><primary>schijfindeling</primary><secondary>begeleide schijfindeling</secondary></indexterm>

	<para>Het begeleide schijfindelings-software biedt drie indelings-methodes, welke overeenkomen met verschillende gebruiken.</para>

        <figure>
          <title>Begeleide schijfindeling</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-autopartman-mode.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>

	<para>De eerste methode heet “Alle bestanden in één partitie”. De volledige Linux systeem boom wordt opgeslagen in een enkel bestandssysteem, overeenkomstig met de root <filename>/</filename> directory. Deze simpele een robuste indeling past perfect voor mensen open enkele-gebruiker systemen. In feite zullen er twee partities gemaakt worden: de eerste zal het volledige systeem herbergen, de tweede het virtuele geheugen (swap).</para>

	<para>De tweede methode, “Gescheide <filename>/home/</filename> partitie”, is gelijkaardig, maar splits de bestands-hiërarchie in twee delen. één partitie bevat het Linux systeem (<filename>/</filename>, en het tweede bevat de “home directories” (dit betekend gebruikers gegevens, in bestanden en subdirectory's beschikbaar onder <filename>/home/</filename>).</para>

	<para>The last partitioning method, called “Separate
	<filename>/home</filename>, 
	<filename>/var</filename>, and <filename>/tmp</filename>
	partitions”, is appropriate for servers and multi-user systems.
	It divides the file tree into many partitions: in addition to the
	root (<filename>/</filename>) and user accounts
	(<filename>/home/</filename>) partitions, it also has partitions
	for server software data (<filename>/var/</filename>), and temporary files
	(<filename>/tmp/</filename>). These divisions have several
	advantages. Users can not lock up the server by consuming all
	available hard drive space (they can only fill up
	<filename>/tmp/</filename> and <filename>/home/</filename>). The
	daemon data (especially logs) can no longer clog up the rest of the
	system.</para>

        <sidebar>
          <title><emphasis>BACK TO BASICS</emphasis> Choosing a filesystem</title>
          <indexterm><primary>system</primary><secondary>filesystem</secondary></indexterm>
          <indexterm><primary>file</primary><secondary>system</secondary></indexterm>

	  <para>A filesystem defines the way in which data is
	  organized on the hard drive. Each existing filesystem has
	  its merits and limitations. Some are more robust, others
	  more effective: if you know your needs well, choosing the
	  most appropriate filesystem is possible. Various comparisons
	  have already been made; it seems that ReiserFS is
	  particularly efficient for reading many small files;
	  <emphasis>XFS</emphasis>, in turn, works faster with large
	  files. <emphasis>Ext4</emphasis>, the default filesystem for
	  Debian, is a good compromise, based on the three previous
	  versions of filesystems historically used in Linux
	  (<emphasis>ext</emphasis>, <emphasis>ext2</emphasis> and
	  <emphasis>ext3</emphasis>). <emphasis>Ext4</emphasis>
	  overcomes certain limitations of <emphasis>ext3</emphasis>
	  and is particularly appropriate for very large capacity hard
	  drives.  Another option would be to experiment with the very
	  promising <emphasis>btrfs</emphasis>, which includes
	  numerous features that require, to this day, the use of LVM
	  and/or RAID.</para>

	  <para>A journalized filesystem (such as
	  <emphasis>ext3</emphasis>, <emphasis>ext4</emphasis>,
	  <emphasis>btrfs</emphasis>, <emphasis>reiserfs</emphasis>, or
	  <emphasis>xfs</emphasis>) takes special measures to make it
	  possible to return to a prior consistent state after an abrupt
	  interruption without completely analyzing the entire disk (as was
	  the case with the <emphasis>ext2</emphasis> system). This
	  functionality is carried out by filling in a journal that
	  describes the operations to conduct prior to actually executing
	  them. If an operation is interrupted, it will be possible to
	  “replay” it from the journal. Conversely, if an interruption
	  occurs during an update of the journal, the last requested change
	  is simply ignored; the data being written could be lost, but
	  since the data on the disk has not changed, they have remained
	  coherent. This is nothing more nor less than a transactional
	  mechanism applied to the filesystem.</para>
        </sidebar>

	<para>After choosing the type of partition, the software calculates
	a suggestion, and describes it on the screen; the user can then
	modify it if needed. You can, in particular, choose another
	filesystem if the standard choice (<emphasis>ext4</emphasis>) isn't
	appropriate. In most cases, however, the proposed partitioning is
	reasonable and it can be accepted by selecting the “Finish
	partitioning and write changes to disk” entry.</para>

        <figure>
          <title>Validating partitioning</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-partman-validation.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>
      </section>
      <section id="sect.manual-partitioning">
        <title>Manual Partitioning</title>
        <indexterm><primary>partitioning</primary><secondary>manual partitioning</secondary></indexterm>

	<para>Manual partitioning allows greater flexibility, allowing the
	user to choose the purpose and size of each partition. Furthermore,
	this mode is unavoidable if you wish to use software RAID.</para>

        <sidebar id="sidebar.shrinking-partition">
          <title><emphasis>IN PRACTICE</emphasis> Shrinking a Windows partition</title>
          <indexterm><primary>resize a partition</primary></indexterm>
          <indexterm><primary>shrink a partition</primary></indexterm>

	  <para>To install Debian alongside an existing operating system
	  (Windows or other), you must have some available hard drive space
	  that is not being used by the other system in order to be able to
	  create the partitions dedicated to Debian. In most cases, this
	  means shrinking a Windows partition and reusing the freed
	  space.</para>

	  <para>The Debian installer allows this operation when using the
	  manual mode for partitioning. You only need to choose the Windows
	  partition and enter its new size (this works the same with both
	  FAT and NTFS partitions).</para>
        </sidebar>

	<para>The first screen displays the available disks, their
	partitions, and any possible free space that has not yet been
	partitioned. You can select each displayed element; pressing the
	<keycap>Enter</keycap> key then gives a list of possible
	actions.</para>

	<para>You can erase all partitions on a disk by selecting
	it.</para>

	<para>When selecting free space on a disk, you can manually create
	a new partition. You can also do this with guided partitioning,
	which is an interesting solution for a disk that already contains
	another operating system, but which you may wish to partition for
        Linux in a standard manner. See <xref linkend="sect.install-autopartman-mode" /> for more details on
        guided partitioning.</para>

        <sidebar>
          <title><emphasis>BACK TO BASICS</emphasis> Mount point</title>
          <indexterm><primary>mount point</primary></indexterm>
          <indexterm><primary>point, mount point</primary></indexterm>

	  <para>The mount point is the directory tree that will house the
	  contents of the filesystem on the selected partition. Thus, a
	  partition mounted at <filename>/home/</filename> is traditionally
	  intended to contain user data.</para>

	  <para>When this directory is named “<filename>/</filename>”,
	  it is known as the <emphasis>root</emphasis> of the file tree,
	  and therefore the root of the partition that will actually host
	  the Debian system.</para>
        </sidebar>

        <sidebar>
          <title><emphasis>BACK TO BASICS</emphasis> Virtual memory, swap</title>
          <indexterm><primary>virtual memory</primary></indexterm>
          <indexterm><primary>swap</primary></indexterm>
          <indexterm><primary>partition</primary><secondary>swap partition</secondary></indexterm>
          <indexterm><primary>swap partition</primary></indexterm>

	  <para>Virtual memory allows the Linux kernel, when lacking
	  sufficient memory (RAM), to free a bit of storage by storing the
	  parts of the RAM that have been inactive for some time on the
	  swap partition of the hard disk.</para>

	  <para>To simulate the additional memory, Windows uses a swap file
	  that is directly contained in a filesystem. Conversely, Linux
	  uses a partition dedicated to this purpose, hence the term
	  “swap partition”.</para>
        </sidebar>

	<para>When choosing a partition, you can indicate the manner in
	which you are going to use it:</para>
        <itemizedlist>
          <listitem>
	    <para>format it and include it in the file tree by choosing a
	    mount point;</para>
          </listitem>
          <listitem>
	    <para>use it as a swap partition;</para>
          </listitem>
          <listitem>
	    <para>make it into a “physical volume for encryption” (to
	    protect the confidentiality of data on certain partitions, see
	    below);</para>
          </listitem>
          <listitem>
	    <para>make it a “physical volume for LVM” (this concept is
	    discussed in greater detail later in this chapter);</para>
          </listitem>
          <listitem>
	    <para>use it as a RAID device (see later in this
	    chapter);</para>
          </listitem>
          <listitem>
	    <para>you can also choose not to use it, and therefore
	    leave it unchanged.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section id="sect.install-software-raid">
        <title>Configuring Multidisk Devices (Software RAID)</title>
        <indexterm><primary>RAID</primary><secondary>Software RAID</secondary></indexterm>
        <indexterm><primary>Software RAID</primary></indexterm>
        <indexterm><primary>device</primary><secondary>multi-disk device</secondary></indexterm>

	<para>Some types of RAID allow the duplication of information
	stored on hard drives to prevent data loss in the event of a
	hardware problem affecting one of them. Level 1 RAID keeps a
	simple, identical copy (mirror) of a hard drive on another drive,
	while level 5 RAID splits redundant data over several disks, thus
	allowing the complete reconstruction of a failing drive.</para>

	<para>We will only describe level 1 RAID, which is the simplest to
	implement. The first step involves creating two partitions of
	identical size located on two different hard drives, and to label
	them “physical volume for RAID”.</para>

	<para>You must then choose “Configure software RAID” in the
	partitioning tool to combine these two partitions into a new
	virtual disk and select “Create MD device” in the configuration
	screen. You then need to answer a series of questions about this
	new device. The first question asks about the RAID level to use,
	which in our case will be “RAID1”. The second question asks
	about the number of active devices — two in our case, which is
	the number of partitions that need to be included in this MD
	device. The third question is about the number of spare devices —
	0; we have not planned any additional disk to take over for a
	possible defective disk. The last question requires you to choose
	the partitions for the RAID device — these would be the two
	that we have set aside for this purpose (make sure you only select
	the partitions that explicitly mention “raid”).</para>

	<para>Back to the main menu, a new virtual “RAID” disk appears.
	This disk is presented with a single partition which can not be
	deleted, but whose use we can choose (just like for any other
	partition).</para>

	<para>For further details on RAID functions, please refer to <xref linkend="sect.raid-soft" />.</para>
      </section>
      <section id="sect.install-lvm">
        <title>Configuring the Logical Volume Manager (LVM)</title>
        <indexterm><primary>LVM</primary><secondary>during installation</secondary></indexterm>
        <indexterm><primary>Logical Volume Manager</primary><secondary>during installation</secondary></indexterm>

	<para>LVM allows you to create “virtual” partitions that span
	over several disks. The benefits are twofold: the size of the
	partitions are no longer limited by individual disks but by
	their cumulative volume, and you can resize existing
	partitions at any time, possibly after adding an additional
	disk when needed.</para>

	<para>LVM uses a particular terminology: a virtual partition is a
	“logical volume”, which is part of a “volume group”, or an
	association of several “physical volumes”. Each of these terms
	in fact corresponds to a “real” partition (or a software RAID
	device).</para>
        <indexterm><primary>volume</primary><secondary>logical volume</secondary></indexterm>
        <indexterm><primary>volume</primary><secondary>physical volume</secondary></indexterm>
        <indexterm><primary>group</primary><secondary>of volumes</secondary></indexterm>
        <indexterm><primary>volume</primary><secondary>group</secondary></indexterm>

	<para>This technique works in a very simple way: each volume,
	whether physical or logical, is split into blocks of the same size,
	which are made to correspond by LVM. The addition of a new disk
	will cause the creation of a new physical volume, and these new
	blocks can be associated to any volume group. All of the partitions
	in the volume group that is thus expanded will have additional
	space into which they can extend.</para>

	<para>The partitioning tool configures LVM in several
	steps. First you must create on the existing disks the
	partitions that will be “physical volumes for LVM”. To
	activate LVM, you need to choose “Configure the Logical Volume
	Manager (LVM)”, then on the same configuration screen “Create
	a volume group”, to which you will associate the existing
	physical volumes. Finally, you can create logical volumes
	within this volume group. Note that the automatic partitioning
	system can perform all these steps automatically.</para>

	<para>In the partitioning menu, each physical volume will appear as
	a disk with a single partition which can not be deleted, but that
	you can use as desired.</para>

	<para>The usage of LVM is described in further detail in <xref linkend="sect.lvm" />.</para>
      </section>
      <section>
        <title>Setting Up Encrypted Partitions</title>
        <indexterm><primary>LUKS</primary></indexterm>
        <indexterm><primary>dm-crypt</primary></indexterm>
        <indexterm><primary>partition</primary><secondary>encrypted</secondary></indexterm>
        <indexterm><primary>partition encryption</primary></indexterm>
        <indexterm><primary>confidentiality</primary><secondary>files</secondary></indexterm>
        <indexterm><primary>file</primary><secondary>confidentiality</secondary></indexterm>

	<para>To guarantee the confidentiality of your data, for instance
	in the event of the loss or theft of your computer or a hard drive,
	it is possible to encrypt the data on some partitions. This feature
	can be added underneath any filesystem, since, as for LVM, Linux
	(and more particularly the dm-crypt driver) uses the Device Mapper
	to create a virtual partition (whose content is protected) based on
	an underlying partition that will store the data in an encrypted
	form (thanks to LUKS, Linux Unified Key Setup, a standard format
	that enables the storage of encrypted data as well as
	meta-information that indicates the encryption algorithms
	used).</para>

        <sidebar id="sidebar.encrypted-swap-partition">
          <title><emphasis>SECURITY</emphasis> Encrypted swap partition</title>

	  <para>When an encrypted partition is used, the encryption key is
	  stored in memory (RAM). Since retrieving this key allows the
	  decryption of the data, it is of utmost importance to avoid
	  leaving a copy of this key that would be accessible to the
	  possible thief of the computer or hard drive, or to a maintenance
	  technician. This is however something that can easily occur with
	  a laptop, since when hibernating the contents of RAM is stored on
	  the swap partition. If this partition isn't encrypted, the thief
	  may access the key and use it to decrypt the data from the
	  encrypted partitions. This is why, when you use encrypted
	  partitions, it is imperative to also encrypt the swap
	  partition!</para>

	  <para>The Debian installer will warn the user if they try to make
	  an encrypted partition while the swap partition isn't
	  encrypted.</para>
        </sidebar>

	<para>To create an encrypted partition, you must first assign an
	available partition for this purpose. To do so, select a partition
	and indicate that it is to be used as a “physical volume for
	encryption”. After partitioning the disk containing the physical
	volume to be made, choose “Configure encrypted volumes”. The
	software will then propose to initialize the physical volume with
	random data (making the localization of the real data more
	difficult), and will ask you to enter an “encryption
	passphrase”, which you will have to enter every time you boot
	your computer in order to access the content of the encrypted
	partition. Once this step has been completed, and you have returned
	to the partitioning tool menu, a new partition will be available in
	an “encrypted volume”, which you can then configure just like
	any other partition. In most cases, this partition is used as a
	physical volume for LVM so as to protect several partitions (LVM
	logical volumes) with the same encryption key, including the swap
	partition (see sidebar <xref linkend="sidebar.encrypted-swap-partition" />).</para>
      </section>
    </section>
    <section>
      <title>Installing the Base System</title>
      <indexterm><primary>system</primary><secondary>base</secondary></indexterm>

      <para>This step, which doesn't require any user interaction, installs
      the Debian “base system” packages. This includes the
      <command>dpkg</command> and <command>apt</command> tools, which
      manage Debian packages, as well as the utilities necessary to boot
      the system and start using it.</para>

      <figure>
        <title>Installation of the base system</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-basesystem.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section>
      <title>Configuring the Package Manager (<command>apt</command>)</title>
      <indexterm><primary>configuration</primary><secondary>initial configuration of APT</secondary></indexterm>
      <indexterm><primary>APT</primary><secondary>initial configuration</secondary></indexterm>

      <para>In order to be able to install additional software, APT needs
      to be configured and told where to find Debian packages. This step is
      as automated as possible. It starts with a question asking if it must
      use a network source for packages, or if it should only look for
      packages on the CD-ROM.</para>

      <sidebar>
        <title><emphasis>NOTE</emphasis> Debian CD-ROM in the drive</title>

	<para>If the installer detects a Debian installation disk in the
	CD/DVD reader, it is not necessary to configure APT to go looking
	for packages on the network: APT is automatically configured to
	read packages from a removable media drive. If the disk is part of
	a set, the software will offer to “explore” other disks in
	order to reference all of the packages stored on them.</para>
      </sidebar>

      <para>If getting packages from the network is requested, the next two
      questions allow to choose a server from which to download these
      packages, by choosing first a country, then a mirror available
      in that country (a mirror is a public server hosting copies of all
      the files of the Debian master archive).</para>

      <figure>
        <title>Selecting a Debian mirror</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-mirror.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Finally, the program proposes to use an HTTP proxy. If there is
      no proxy, Internet access will be direct. If you type
      <literal>http://proxy.falcot.com:3128</literal>, APT will use the
      Falcot <foreignphrase>proxy/cache</foreignphrase>, a “Squid”
      program. You can find these settings by checking the configurations
      of a web browser on another machine connected to the same
      network.</para>

      <para>The files <filename>Packages.gz</filename> and
      <filename>Sources.gz</filename> are then automatically downloaded to
      update the list of packages recognized by APT.</para>

      <sidebar>
        <title><emphasis>BACK TO BASICS</emphasis> HTTP proxy</title>
        <indexterm><primary>proxy</primary></indexterm>
        <indexterm><primary>proxy cache</primary></indexterm>
        <indexterm><primary>cache, proxy</primary></indexterm>
        <indexterm><primary>Squid</primary></indexterm>

	<para>An HTTP proxy is a server that forwards an HTTP request for
	network users. It sometimes helps to speed up downloads by keeping
	a copy of files that have been transferred through it (we then
	speak of proxy/cache). In some cases, it is the only means of
	accessing an external web server; in such cases it is essential to
	answer the corresponding question during installation for the
	program to be able to download the Debian packages through
	it.</para>

	<para>Squid is the name of the server software used by Falcot Corp
	to offer this service.</para>
      </sidebar>
    </section>
    <section>
      <title>Debian Package Popularity Contest</title>

      <para>The Debian system contains a package called <emphasis role="pkg">popularity-contest</emphasis>, whose purpose is to compile
      package usage statistics. Each week, this program collects
      information on the packages installed and those used recently, and
      anonymously sends this information to the Debian project servers. The
      project can then use this information to determine the relative
      importance of each package, which influences the priority that will
      be granted to them. In particular, the most “popular” packages
      will be included in the installation CD-ROM, which will facilitate
      their access for users who do not wish to download them or to
      purchase a complete set.</para>

      <para>This package is only activated on demand, out of respect for
      the confidentiality of users' usage.</para>
    </section>
    <section>
      <title>Selecting Packages for Installation</title>

      <para>The following step allows you to choose the purpose of the
      machine in very broad terms; the ten suggested tasks correspond to
      lists of packages to be installed. The list of the packages that will
      actually be installed will be fine-tuned and completed later on, but
      this provides a good starting point in a simple manner.</para>

      <para>Some packages are also automatically installed according to the
      hardware detected (thanks to the program
      <command>discover-pkginstall</command> from the <emphasis role="pkg">discover</emphasis> package). For instance, if a
      VirtualBox virtual machine is detected, the program will install the
      <emphasis role="pkg">virtualbox-guest-dkms</emphasis> package,
      allowing for better integration of the virtual machine with the host
      system.</para>

      <figure>
        <title>Task choices</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-tasksel.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.installing-grub">
      <title>Installing the GRUB Bootloader</title>
      <indexterm><primary>lader</primary><secondary>opstartlader</secondary></indexterm>
      <indexterm><primary>opstartlader</primary></indexterm>
      <indexterm><primary>GRUB</primary></indexterm>

      <para>The bootloader is the first program started by the BIOS. This
      program loads the Linux kernel into memory and then executes it. It
      often offers a menu that allows the user to choose the kernel to load
      and/or the operating system to boot.</para>

      <sidebar id="sidebar.bootloader-dual-boot">
        <title><emphasis>BEWARE</emphasis> Bootloader and dual boot</title>
        <indexterm><primary>dual boot</primary></indexterm>

	<para>This phase in the Debian installation process detects the
	operating systems that are already installed on the computer, and
	automatically adds corresponding entries in the boot menu, but not
	all installation programs do this.</para>

	<para>In particular, if you install (or reinstall) Windows
	thereafter, the bootloader will be erased. Debian will still be on
	the hard drive, but will no longer be accessible from the boot
	menu. You would then have to boot the Debian installation system in
	<userinput>rescue</userinput> mode to set up a less exclusive
	bootloader. This operation is described in detail in the
        installation manual.
        <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch08s07.html" />
        </para>
      </sidebar>

      <para>By default, the menu proposed by GRUB contains all the
      installed Linux kernels, as well as any other operating systems
      that were detected. This is why you should accept the offer to
      install it in the Master Boot Record. Since keeping older kernel
      versions preserves the ability to boot the same system if the
      most recently installed kernel is defective or poorly adapted to
      the hardware, it often makes sense to keep a few older kernel
      versions installed.</para>

      <para>GRUB is the default bootloader installed by Debian thanks to
      its technical superiority: it works with most filesystems and
      therefore doesn't require an update after each installation of a new
      kernel, since it reads its configuration during boot and finds the
      exact position of the new kernel. Version 1 of GRUB (now known as
      “Grub Legacy”) couldn't handle all combinations of LVM and
      software RAID; version 2, installed by default, is more complete.
      There may still be situations where it is more recommendable to
      install LILO (another bootloader); the installer will suggest it
      automatically.</para>

      <para>For more information on configuring GRUB, please refer to <xref linkend="sect.config-grub" />.</para>

      <sidebar>
        <title><emphasis>BEWARE</emphasis> Bootloaders and architectures</title>

	<para>LILO and GRUB, which are mentioned in this chapter, are
	bootloaders for <emphasis>i386</emphasis> and
	<emphasis>amd64</emphasis> architectures. If you install Debian on
	another architecture, you will need to use another bootloader.
	Among others, we can cite <command>yaboot</command> or
	<command>quik</command> for <emphasis>powerpc</emphasis>,
	<command>silo</command> for <emphasis>sparc</emphasis>,
	<command>aboot</command> for <emphasis>alpha</emphasis>,
	<command>arcboot</command> for <emphasis>mips</emphasis>.
	</para>
      </sidebar>
    </section>
    <section>
      <title>Finishing the Installation and Rebooting</title>

      <para>The installation is now complete, the program invites you to
      remove the CD-ROM from the reader and to restart the computer.</para>
    </section>
  </section>
  <section id="sect.after-first-boot">
    <title>After the First Boot</title>

    <para>If you activated the task “Debian desktop environment” without any
    explicit desktop choice (or with the “GNOME” choice), the computer
    will display the <command>gdm3</command> login manager.</para>

    <figure>
      <title>First boot</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/inst-gdm.png" scalefit="1" width="65%" />
        </imageobject>
      </mediaobject>
    </figure>

    <para>The user that has already been created can then log in and begin
    working immediately.</para>
    <section>
      <title>Installing Additional Software</title>

      <para>The installed packages correspond to the profiles selected
      during installation, but not necessarily to the use that will
      actually be made of the machine. As such, you might want to use
      a package management tool to refine the selection of installed
      packages. The two most frequently used tools (which are
      installed if the “Debian desktop environment” profile was
      chosen) are <command>apt</command> (accessible from the command
      line) and <command>synaptic</command> (“Synaptic Package Manager” in
      the menus).</para>

      <para>To facilitate the installation of coherent groups of programs,
      Debian creates “tasks” that are dedicated to specific uses (mail
      server, file server, etc.). You already had the opportunity to select
      them during installation, and you can access them again thanks to
      package management tools such as <command>aptitude</command> (the
      tasks are listed in a distinct section) and
      <command>synaptic</command> (through the menu <menuchoice>
      <guimenu>Edit</guimenu> <guimenuitem>Mark Packages by
      Task…</guimenuitem> </menuchoice>).</para>

      <para>Aptitude is an interface to APT in full-screen text mode. It
      allows the user to browse the list of available packages according to
      various categories (installed or not-installed packages, by task, by
      section, etc.), and to view all of the information available on each
      of them (dependencies, conflicts, description, etc.). Each package
      can be marked “install” (to be installed, <keycap>+</keycap> key)
      or “remove” (to be removed, <keycap>-</keycap> key). All of these
      operations will be conducted simultaneously once you've confirmed
      them by pressing the <keycap>g</keycap> key (“g” for “go!”).
      If you have forgotten some programs, no worries; you will be able to
      run <command>aptitude</command> again once the initial installation
      has been completed.</para>
      <indexterm><primary>aptitude</primary></indexterm>

      <sidebar>
        <title><emphasis>TIP</emphasis> Debian thinks of speakers of non-English languages</title>

	<para>Several tasks are dedicated to the localization of the system
	in other languages beyond English. They include translated
	documentation, dictionaries, and various other packages useful for
	speakers of different languages. The appropriate task is
	automatically selected if a non-English language was chosen during
	installation.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>CULTURE</emphasis> <command>dselect</command>, the old interface to install packages</title>

	<para>Before <command>aptitude</command>, the standard program to
	select packages to be installed was <command>dselect</command>, the
	old graphical interface associated with <command>dpkg</command>. Being a
	difficult program for beginners to use, it is not
	recommended.</para>
        <indexterm><primary><command>dselect</command></primary></indexterm>
      </sidebar>

      <para>Of course, it is possible not to select any task to be
      installed. In this case, you can manually install the desired
      software with the <command>apt-get</command> or
      <command>aptitude</command> command (which are both accessible from
      the command line).</para>

      <sidebar>
        <title><emphasis>VOCABULARY</emphasis> Package dependencies, conflicts</title>

	<para>In the Debian packaging lingo, a “dependency” is another
	package necessary for the proper functioning of the package in
	question. Conversely, a “conflict” is a package that can not be
	installed side-by-side with another.</para>

	<para>These concepts are discussed in greater detail in <xref linkend="packaging-system" />.</para>
      </sidebar>
    </section>
    <section>
      <title>Upgrading the System</title>
      <indexterm><primary>safe-upgrade</primary></indexterm>

      <para>A first <command>aptitude safe-upgrade</command> (a command
      used to automatically update installed programs) is generally
      required, especially for possible security updates issued since the
      release of the latest Debian stable version. These updates may
      involve some additional questions through <command>debconf</command>,
      the standard Debian configuration tool. For further information on
      these updates conducted by <command>aptitude</command>, please refer
      to <xref linkend="sect.apt-upgrade" />.</para>
    </section>
  </section>
</chapter>
