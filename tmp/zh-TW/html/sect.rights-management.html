<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.3. 管理權限</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-TW-1.0-1" /><meta
        name="keywords"
        content="系統啟動, Initscripts, SSH, Telnet, Rights, 權限, 監督, Inetd, Cron, 備份, 熱插拔, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="unix-services.html"
        title="章 9. Unix 服務" /><link
        rel="prev"
        href="sect.remote-login.html"
        title="9.2. 遠端登入" /><link
        rel="next"
        href="sect.administration-interfaces.html"
        title="9.4. Administration Interfaces" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/zh-TW/stable/sect.rights-management.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>前一頁</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一頁</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.rights-management"></a>9.3. 管理權限</h2></div></div></div><div
          class="para">
			Linux 是多使用者系統，必須以授權系統控制對檔案與資料夾的合法操作，包括所有的系統資源與設備 (在 Unix 系統裡，任何設備都以檔案或資料夾表示)。此原則適用於所有的 Unix 系統，不過多提醒一次總是好的，尤其碰到有趣相關的不明使用情況。
		</div><a
          id="id-1.12.6.3"
          class="indexterm"></a><a
          id="id-1.12.6.4"
          class="indexterm"></a><a
          id="id-1.12.6.5"
          class="indexterm"></a><a
          id="id-1.12.6.6"
          class="indexterm"></a><a
          id="id-1.12.6.7"
          class="indexterm"></a><a
          id="id-1.12.6.8"
          class="indexterm"></a><div
          class="para">
			每個檔案與資料夾都有三組不同權限的使用者：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					擁有者 (符號為 <code
                  class="literal">u</code> 取自使用者的英文字 “user”)；
				</div></li><li
              class="listitem"><div
                class="para">
					群組擁有者 (符號為 <code
                  class="literal">g</code> 取自群組的英文字 “group”)，代表群組內所有的使用者；
				</div></li><li
              class="listitem"><div
                class="para">
					其他 (符號為 <code
                  class="literal">o</code> 取自其他的英文字 “other”)。
				</div></li></ul></div><div
          class="para">
			三種權利可以組合成：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					讀取 (符號為 <code
                  class="literal">r</code> 取自讀取的英文字 “read”)；
				</div></li><li
              class="listitem"><div
                class="para">
					寫入 (或修改，符號為 <code
                  class="literal">w</code> 取自寫入的英文字 “write”)；
				</div></li><li
              class="listitem"><div
                class="para">
					執行 (符號為 <code
                  class="literal">x</code> 取自執行的英文字 “eXecute”)。
				</div></li></ul></div><a
          id="id-1.12.6.13"
          class="indexterm"></a><a
          id="id-1.12.6.14"
          class="indexterm"></a><a
          id="id-1.12.6.15"
          class="indexterm"></a><a
          id="id-1.12.6.16"
          class="indexterm"></a><div
          class="para">
			以檔案來說，其權利較容易理解：讀取就是允許讀取其內容 (包括複製)、寫入就是允許改變它、而執行就是跑它 (檔案本身必須是程式)。
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setuid</code> 與 <code
                      class="literal">setgid</code> 可執行</strong></p></div></div></div><div
            class="para">
			有兩個權利與可執行檔有關：<code
              class="literal">setuid</code> 和 <code
              class="literal">setgid</code> (符號都是字母 “s”)。我們通常都稱 “位元”，因為布林邏輯可以用 0 或 1 代表。這兩個權利允許使用者以擁有者或群組的權限分別執行該程式。此機制把近用權給予需要較高權限的階層。
		</div><a
            id="id-1.12.6.18.3"
            class="indexterm"></a><a
            id="id-1.12.6.18.4"
            class="indexterm"></a><div
            class="para">
			因為 <code
              class="literal">setuid</code> 根程式係在超級使用者的認證下執行，必須確保它的安全與可靠。的確，使用者可能呼叫一個程式，監禁根使用者，並擁有系統的全部權限，並藉此癱瘓整個系統。
		</div></div><div
          class="para">
			資料夾的處理方式略有不同。讀取其款目 (檔案及資料夾)、寫入包括新增與刪除檔案、而執行則是進入它 (尤其是使用 <code
            class="command">cd</code> 命令)。進入資料夾而不必有讀取權限，執行已知的檔名，若不知其正確的名稱，則無法執行。
		</div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.setgid-dir"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>安全</em></span> <code
                      class="literal">setgid</code> 資料夾和 <span
                      class="emphasis"><em>sticky bit</em></span></strong></p></div></div></div><a
            id="id-1.12.6.20.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="literal">setgid</code> 位元也適用於資料夾。在該資料夾新增的項目自動賦予上層資料夾的群組擁有者權限，而不是繼承新增者的主要群組權限。與同組其他使用者共享檔案樹時，這種設定避免使用者改變其主要群組 (以 <code
              class="command">newgrp</code> 命令)。
		</div><a
            id="id-1.12.6.20.4"
            class="indexterm"></a><div
            class="para">
			“sticky” bit (符號為字母 “t”) 是一種祗適用於資料夾的授權。特別用在大家都能寫入的暫時性的資料夾 (如 <code
              class="filename">/tmp/</code>)：但祗限檔案的擁有者 (或上層資料夾的) 才能刪除其檔案。少了這層授權，每個人都能刪除其他人在 <code
              class="filename">/tmp/</code> 裡的檔案。
		</div></div><div
          class="para">
			三個命令控制檔案的授權：
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chown <em
                    class="replaceable">user</em> <em
                    class="replaceable">file</em></code> 改變檔案的擁有者；
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chgrp <em
                    class="replaceable">group</em> <em
                    class="replaceable">file</em></code> 改變群組的擁有者；
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chmod <em
                    class="replaceable">rights</em> <em
                    class="replaceable">file</em></code> 改變檔案的權限。
				</div></li></ul></div><div
          class="para">
			There are two ways of presenting rights. Among them, the symbolic representation is probably the easiest to understand and remember. It involves the letter symbols mentioned above. You can define rights for each category of users (<code
            class="literal">u</code>/<code
            class="literal">g</code>/<code
            class="literal">o</code>), by setting them explicitly (with <code
            class="literal">=</code>), by adding (<code
            class="literal">+</code>), or subtracting (<code
            class="literal">-</code>). Thus the <code
            class="literal">u=rwx,g+rw,o-r</code> formula gives the owner read, write, and execute rights, adds read and write rights for the owner group, and removes read rights for other users. Rights not altered by the addition or subtraction in such a command remain unmodified. The letter <code
            class="literal">a</code>, for “all”, covers all three categories of users, so that <code
            class="literal">a=rx</code> grants all three categories the same rights (read and execute, but not write).
		</div><a
          id="id-1.12.6.24"
          class="indexterm"></a><a
          id="id-1.12.6.25"
          class="indexterm"></a><a
          id="id-1.12.6.26"
          class="indexterm"></a><a
          id="id-1.12.6.27"
          class="indexterm"></a><a
          id="id-1.12.6.28"
          class="indexterm"></a><div
          class="para">
			The (octal) numeric representation associates each right with a value: 4 for read, 2 for write, and 1 for execute. We associate each combination of rights with the sum of the figures. Each value is then assigned to different categories of users by putting them end to end in the usual order (owner, group, others).
		</div><div
          class="para">
			For instance, the <code
            class="command">chmod 754 <em
              class="replaceable">file</em></code> command will set the following rights: read, write and execute for the owner (since 7 = 4 + 2 + 1); read and execute for the group (since 5 = 4 + 1); read-only for others. The <code
            class="literal">0</code> means no rights; thus <code
            class="command">chmod 600 <em
              class="replaceable">file</em></code> allows for read/write rights for the owner, and no rights for anyone else. The most frequent right combinations are <code
            class="literal">755</code> for executable files and directories, and <code
            class="literal">644</code> for data files.
		</div><div
          class="para">
			To represent special rights, you can prefix a fourth digit to this number according to the same principle, where the <code
            class="literal">setuid</code>, <code
            class="literal">setgid</code> and <code
            class="literal">sticky</code> bits are 4, 2 and 1, respectively. <code
            class="command">chmod 4754</code> will associate the <code
            class="literal">setuid</code> bit with the previously described rights.
		</div><div
          class="para">
			Note that the use of octal notation only allows to set all the rights at once on a file; you cannot use it to simply add a new right, such as read access for the group owner, since you must take into account the existing rights and compute the new corresponding numerical value.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>TIP</em></span> Recursive operation</strong></p></div></div></div><div
            class="para">
			Sometimes we have to change rights for an entire file tree. All the commands above have a <code
              class="literal">-R</code> option to operate recursively in sub-directories.
		</div><div
            class="para">
			The distinction between directories and files sometimes causes problems with recursive operations. That is why the “X” letter has been introduced in the symbolic representation of rights. It represents a right to execute which applies only to directories (and not to files lacking this right). Thus, <code
              class="command">chmod -R a+X <em
                class="replaceable">directory</em></code> will only add execute rights for all categories of users (<code
              class="literal">a</code>) for all of the sub-directories and files for which at least one category of user (even if their sole owner) already has execute rights.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>TIP</em></span> Changing the user and group</strong></p></div></div></div><div
            class="para">
			Frequently you want to change the group of a file at the same time that you change the owner. The <code
              class="command">chown</code> command has a special syntax for that: <code
              class="command">chown <em
                class="replaceable">user</em>:<em
                class="replaceable">group</em> <em
                class="replaceable">file</em></code>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>GOING FURTHER</em></span> <code
                      class="command">umask</code></strong></p></div></div></div><div
            class="para">
			When an application creates a file, it assigns indicative permissions, knowing that the system automatically removes certain rights, given by the command <code
              class="command">umask</code>. Enter <code
              class="command">umask</code> in a shell; you will see a mask such as <code
              class="computeroutput">0022</code>. This is simply an octal representation of the rights to be systematically removed (in this case, the write right for the group and other users).
		</div><a
            id="id-1.12.6.35.3"
            class="indexterm"></a><a
            id="id-1.12.6.35.4"
            class="indexterm"></a><a
            id="id-1.12.6.35.5"
            class="indexterm"></a><div
            class="para">
			If you give it a new octal value, the <code
              class="command">umask</code> command modifies the mask. Used in a shell initialization file (for example, <code
              class="filename">~/.bash_profile</code>), it will effectively change the default mask for your work sessions.
		</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>前一頁</strong>9.2. 遠端登入</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一層</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始頁</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>下一頁</strong>9.4. Administration Interfaces</a></li></ul></body></html>
