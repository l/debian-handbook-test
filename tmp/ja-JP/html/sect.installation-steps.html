<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">4.2. インストール作業の各段階</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ja-JP-1.0-1" /><meta
        name="keywords"
        content="インストール, パーティショニング, フォーマット, ファイルシステム, ブートセクタ, ハードウェア検出" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="installation.html"
        title="第 4 章 インストール" /><link
        rel="prev"
        href="installation.html"
        title="第 4 章 インストール" /><link
        rel="next"
        href="sect.after-first-boot.html"
        title="4.3. 初回起動の後" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ja-JP/stable/sect.installation-steps.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="installation.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.after-first-boot.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.installation-steps"></a>4.2. インストール作業の各段階</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-boot"></a>4.2.1. 起動とインストーラの開始</h3></div></div></div><div
            class="para">
				BIOS が CD-ROM や DVD-ROM からの起動を開始したら、Isolinux ブートローダメニューが表示されます。この段階では Linux カーネルはまだ読み込まれていません。従ってこのメニューでは、起動させるカーネルを選択し、起動処理中にカーネルに渡すことが可能なパラメータを入力できます。
			</div><div
            class="para">
				標準的なインストールを実行したい場合、矢印キーで「Install」もしくは「Graphical install」を選び、<span
              class="keycap"><strong>Enter</strong></span> を押して残りのインストール作業を開始します。DVD-ROM が「マルチアーキテクチャ」ディスクであり、マシンが Intel または AMD の 64 ビットプロセッサを搭載している場合、「64 bit install」および「64 bit graphical install」というメニューオプションを使って 64 ビット版 (<span
              class="emphasis"><em>amd64</em></span>) をインストールすることも可能です。これ以外の場合、デフォルトの 32 ビット版 (<span
              class="emphasis"><em>i386</em></span>) がインストールされます。現実的には 64 ビット版をインストールする場合が多いでしょう。なぜなら最新のマシンは 64 ビットプロセッサを搭載しており、64 ビット版では新しいコンピュータに備えられていることの多い大容量 RAM をうまく取り扱うことが可能だからです。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> 32 ビットか 64 ビットか?</strong></p></div></div></div><a
              id="id-1.7.12.2.4.2"
              class="indexterm"></a><a
              id="id-1.7.12.2.4.3"
              class="indexterm"></a><a
              id="id-1.7.12.2.4.4"
              class="indexterm"></a><div
              class="para">
				32 ビットシステムと 64 ビットシステムの本質的な差異はメモリアドレスのサイズにあります。理論的には、32 ビットシステムでは 4 GB (2<sup>32</sup> バイト) 以上の RAM を取り扱うことができません。現実的には、PAE (物理アドレス拡張) 機能を扱えるプロセッサを備えたマシンで <code
                class="literal">686-pae</code> カーネル版を使うことでこの制限を回避することが可能です。しかし、PAE を使うとシステムの性能に深刻な影響をおよぼします。そのため、大容量の RAM を載せたサーバでは 64 ビットモードを使うほうが有益です。
			</div><div
              class="para">
				オフィスコンピュータ (数パーセントの性能の違いを無視しても構わない場合) について言えば、一部のプロプライエタリプログラム (たとえば Skype) は 64 ビット版を提供していない場合があることを覚えておいてください。技術的に言えば、これらのプログラムを 64 ビットシステムで動かすことは可能です。しかし、すべての必要なライブラリの 32 ビット版をインストールしなければいけませんし (<a
                class="xref"
                href="sect.manipulating-packages-with-dpkg.html#sect.multi-arch">第 5.4.5 節「マルチアーキテクチャサポート」</a>を参照してください)、<code
                class="command">setarch</code> または <code
                class="command">linux32</code> コマンド (<span
                class="pkg pkg">util-linux</span> パッケージに含まれます) を使ってシステム環境に関してアプリケーションを騙さなければいけない場合があります。<a
                id="id-1.7.12.2.4.6.5"
                class="indexterm"></a><a
                id="id-1.7.12.2.4.6.6"
                class="indexterm"></a>
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IN PRACTICE</em></span> Debian を既存の Windows システムと共存させる</strong></p></div></div></div><a
              id="id-1.7.12.2.5.2"
              class="indexterm"></a><div
              class="para">
				コンピュータで既に Windows が動いている場合、Debian をインストールするのに Windows システムを削除する必要はありません。Windows と Debian を別のディスクまたはパーティションにインストールすれば、Windows と Debian のシステムを同時に備えることが可能で、コンピュータの起動時に起動するシステムを選択することが可能です。この構成は「デュアルブート」と呼ばれており、Debian のインストールシステムは「デュアルブート」構成を設定できます。設定はインストール中のハードドライブのパーティショニング段階およびブートローダの設定段階で行います (補注<a
                class="xref"
                href="sect.installation-steps.html#sidebar.shrinking-partition">「<span
                  class="emphasis"><em>IN PRACTICE</em></span> Windows パーティションの縮小」</a>および<a
                class="xref"
                href="sect.installation-steps.html#sidebar.bootloader-dual-boot">「<span
                  class="emphasis"><em>BEWARE</em></span> ブートローダとデュアルブート」</a>を参照してください)。
			</div><div
              class="para">
				既に稼働中の Windows システムがある場合、CD-ROM を使わずとも Debian をインストールできます。Debian は軽量の Debian インストーラをダウンロードして、ハードディスクに Debian をセットアップするための Windows プログラムを提供しています。コンピュータを再起動し、Windows を通常起動するかインストールプログラムを起動するかを選択するだけです。また、このプログラムはかなり露骨な名前の専用ウェブサイトで配布されています…。<div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://ftp.debian.org/debian/tools/win32-loader/stable/">http://ftp.debian.org/debian/tools/win32-loader/stable/</a></div><div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.goodbye-microsoft.com/">http://www.goodbye-microsoft.com/</a></div>
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> ブートローダ</strong></p></div></div></div><a
              id="id-1.7.12.2.6.2"
              class="indexterm"></a><a
              id="id-1.7.12.2.6.3"
              class="indexterm"></a><a
              id="id-1.7.12.2.6.4"
              class="indexterm"></a><div
              class="para">
				ブートローダとは BIOS から操作を受け取った直後に Linux カーネルを起動させる低レベルプログラムです。この作業を行うために、ブートローダは起動したい Linux カーネルの格納場所を探すことができなければいけません。i386 と amd64 アーキテクチャでブートローダとして最も利用されているプログラムは比較的古参の LILO とその現代的な代替である GRUB です。Isolinux と Syslinux はリムーバブルメディアから起動する際によく使われる代替プログラムです。
			</div></div><div
            class="para">
				各メニューエントリはそれを選択して <span
              class="keycap"><strong>Enter</strong></span> を押した後に実行されるコマンドに対応しています。必要に応じて実行されるコマンドを編集するには、エントリを選択した後 <span
              class="keycap"><strong>Enter</strong></span> を押す前に <span
              class="keycap"><strong>TAB</strong></span> キーを押します。「Help」メニューエントリは古いコマンドラインインターフェースを表示します。このインターフェースでは、<span
              class="keycap"><strong>F1</strong></span> から <span
              class="keycap"><strong>F10</strong></span> までのキーを使って、プロンプトから利用できるさまざまなオプションについての詳細が書かれた別のヘルプ画面が表示されます。極めて特殊な場合を除いて、「Help」メニューエントリを参照する必要はないでしょう。
			</div><div
            class="para">
				「expert」モード (「Advanced options」メニューの中にあります) を使うことで、インストール中に利用できるすべてのオプションを詳細に設定したり、各インストールステップを自動的に次々と進むのではなく毎回ナビゲーションを表示するようにできます。「expert」モードはとても詳細なモードで、設定できる選択肢が数多く表示されすぎてわかりにくいかもしれませんので、ご注意ください。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.2.9"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-boot.png"
                  alt="起動画面" /></div></div><p
              class="title"><strong>図 4.1 起動画面</strong></p></div><div
            class="para">
				ひとたび起動すれば、インストールプログラムがインストールの最初から最後まですべての手順を誘導します。この節ではそれぞれの手順を詳細に解説しています。ここではマルチアーキテクチャ DVD-ROM (より詳しく言えば Jessie インストーラのベータ 4) を使ったインストールを順に見ていきます。<span
              class="emphasis"><em>netinst</em></span> を使ったインストールおよびインストーラの完成版では、少し様子が違うかもしれません。グラフィカルモードのインストールの様子も載せていますが、「クラッシック」(テキストモード) インストールとの違いは見た目だけです。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-lang"></a>4.2.2. 言語の選択</h3></div></div></div><a
            id="id-1.7.12.3.2"
            class="indexterm"></a><div
            class="para">
				起動直後のインストールプログラムでは英語が使われていますが、最初にこれ以降のインストール作業の表示言語として使われる言語を選択します。たとえば、日本語を選択したらインストール中の表示言語はすべて日本語になります (そしてシステムも日本語に設定されます)。さらに、以降のインストール作業のデフォルト選択肢 (特にキーボードレイアウトのデフォルト選択肢) がより適切なものになります。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> キーボード操作</strong></p></div></div></div><div
              class="para">
				インストール作業のいくつかの段階では情報の入力が求められます。それらの画面にはさまざまな入力場所 (テキストエリア、チェックボックス、選択リスト、OK ボタンやキャンセルボタン) があり、入力場所は「フォーカスされている」かもしれません。それぞれの入力場所からフォーカスを移動させるには、<span
                class="keycap"><strong>TAB</strong></span> キーを使ってください。
			</div><div
              class="para">
				グラフィカルモードでは、いつもグラフィカルデスクトップでやっているのと同じやり方でマウスを使ってください。
			</div></div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.3.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-lang.png"
                  alt="言語の選択" /></div><div
                class="mediaobject"><img
                  src="images/inst-lang-txt.png"
                  alt="言語の選択" /></div></div><p
              class="title"><strong>図 4.2 言語の選択</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-country"></a>4.2.3. 国の選択</h3></div></div></div><a
            id="id-1.7.12.4.2"
            class="indexterm"></a><div
            class="para">
				2 段階目に国を選択します。インストーラは、先に選択した言語と国の情報を組み合わせて、最も適切と思われるキーボードレイアウトを提案します。さらに、国情報はタイムゾーンの設定にも影響をおよぼします。ここで日本を選択した場合、日本で標準的な QWERTY キーボードが提案され、適切なタイムゾーンが提供されます。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.4.4"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-country.png"
                  alt="国の選択" /></div><div
                class="mediaobject"><img
                  src="images/inst-country-txt.png"
                  alt="国の選択" /></div></div><p
              class="title"><strong>図 4.3 国の選択</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-keyboard"></a>4.2.4. キーボードレイアウトの選択</h3></div></div></div><a
            id="id-1.7.12.5.2"
            class="indexterm"></a><a
            id="id-1.7.12.5.3"
            class="indexterm"></a><div
            class="para">
				ここで提案された「日本語」キーボードは日本で主流の QWERTY レイアウトです。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-keyboard.png"
                  alt="キーボードの選択" /></div><div
                class="mediaobject"><img
                  src="images/inst-keyboard-txt.png"
                  alt="キーボードの選択" /></div></div><p
              class="title"><strong>図 4.4 キーボードの選択</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-detect-hardware"></a>4.2.5. ハードウェアの検出</h3></div></div></div><div
            class="para">
				ほとんどの場合、ハードウェア検出は完全に自動的に行われます。インストーラがハードウェアを検出し、CD の内容を読み出すために CD-ROM ドライブを特定しようと試みます。インストーラは検出されたさまざまなハードウェアに対応するモジュールを読み込み、その後 CD-ROM を「マウント」して内容を読みます。ここまでの段階を CD に含まれる起動イメージ (サイズが制限されており、CD からの起動時に BIOS がメモリ内に読み込んだファイル) が担当しています。
			</div><div
            class="para">
				インストーラはほぼすべてのドライブ、特に標準的な ATAPI 周辺機器 (IDE や EIDE と呼ばれることもあります)、を取り扱うことが可能です。しかし、CD-ROM ドライブの検出に失敗する場合、インストーラは CD-ROM ドライバに相当するカーネルモジュールを (たとえば USB メモリから) 読み込むための画面を表示します。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-load-components"></a>4.2.6. コンポーネントの読み込み</h3></div></div></div><div
            class="para">
				CD の内容が利用できるようになったら、インストーラは以降の作業に必要なすべてのファイルを読み込みます。これには、残りのハードウェア (特にネットワークカード) 用の追加ドライバおよびインストールプログラムの構成要素が含まれます。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-detect-network"></a>4.2.7. ネットワークハードウェアの検出</h3></div></div></div><div
            class="para">
				この段階でインストーラは、ネットワークカードを自動的に特定し、関連するモジュールを自動的に読み込もうとします。自動検出に失敗した場合でも、手作業で読み込むモジュールを選択できます。どのモジュールでも動かなければ、リムーバブルデバイスから個々のモジュールをロードすることが可能です。最後に挙げた解決策は、適切なドライバが標準的な Linux カーネルには含まれていないけれども、メーカーのウェブサイトなど別のどこかから入手できる、という場合のみ必要です。
			</div><div
            class="para">
				<span
              class="emphasis"><em>netinst</em></span> を使ってインストールする場合、Debian パッケージはネットワークから読み込まれるため、この段階は間違いなく成功するでしょう。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-network-config"></a>4.2.8. ネットワークの設定</h3></div></div></div><a
            id="id-1.7.12.9.2"
            class="indexterm"></a><a
            id="id-1.7.12.9.3"
            class="indexterm"></a><div
            class="para">
				可能な限り各段階を自動化するために、インストーラは DHCP (IPv4 の場合) と IPv6 のネットワーク発見機能を使って自動的にネットワークを設定しようとします。設定に失敗した場合、多くの選択肢が提案されます。ここで提案される選択肢には、通常の DHCP 設定で再挑戦、マシンの名前を宣言して DHCP を設定、静的なネットワークを設定、があります。
			</div><div
            class="para">
				ここで挙げた最後の選択肢を選んだ場合、IP アドレス、サブネットマスク、ゲートウェイの IP アドレス、マシン名、ドメイン名、の情報が必要です。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> DHCP を使わない設定</strong></p></div></div></div><div
              class="para">
				インストール中にマシンに静的 IP アドレスを定義したいのでローカルネットワーク内で動いている DHCP サーバを使わせたくない場合、CD-ROM から起動する際に <strong
                class="userinput"><code>netcfg/use_dhcp=false</code></strong> オプションを追加してください。起動したいメニューエントリにカーソルを合わせた状態で <span
                class="keycap"><strong>TAB</strong></span> キーを押して、<span
                class="keycap"><strong>Enter</strong></span> キーを押す前に必要なオプションを追加してください。
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BEWARE</em></span> 場当たり的な設定の禁止</strong></p></div></div></div><div
              class="para">
				多くのローカルエリアネットワークはすべてのマシンが信頼できるという暗黙の了解の下に成り立っており、1 台でも不適切な設定のコンピュータがあるとネットワーク全体が混乱します。つまり、あなたのマシンを勝手にローカルエリアネットワークへ接続する前に、ネットワーク管理者から適切な設定 (たとえば、IP アドレス、ネットマスク、ブロードキャストアドレス) を教わってください。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.10"></a>4.2.9. 管理者パスワード</h3></div></div></div><a
            id="id-1.7.12.10.2"
            class="indexterm"></a><div
            class="para">
				マシンの管理者用に確保されているスーパーユーザ root アカウントはインストール中に自動的に作成されます。このため、パスワードが要求されます。インストーラは確認用にもう一度パスワードを尋ねます。これは後から修正することが難しい入力ミスを避けるためです。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.10.4"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-rootpw.png"
                  alt="管理者パスワード" /></div></div><p
              class="title"><strong>図 4.5 管理者パスワード</strong></p></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SECURITY</em></span> 管理者パスワード</strong></p></div></div></div><div
              class="para">
				root ユーザのパスワードは長くて (8 文字以上で) 推測できないものであるべきです。実際、インターネットに接続されたコンピュータ (さらにサーバ) はその種類を問わず、定期的に頻繁に使われるパスワードを用いた自動接続攻撃の標的にされます。時には、単語と数字の組み合わせをパスワードとして試す、辞書攻撃にさらされるかもしれません。子供や両親の名前、誕生日などをパスワードとして使わないでください。なぜなら、多くの同僚がそれを知っているかもしれないからです。さらに、そのような人にここでセットアップされている種類のコンピュータを自由に使わせてはいけません。
			</div><div
              class="para">
				他のユーザのパスワードに対しても同じことが言えますが、管理権限を持たないユーザのアカウントが乗っ取られたとしても、その影響はそれほど大きくありません。
			</div><div
              class="para">
				もし名案が浮かばなければ、遠慮せずに <code
                class="command">pwgen</code> (同名のパッケージに含まれます) などのパスワード生成ソフトウェアを使ってください。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.11"></a>4.2.10. 1 人目のユーザの作成</h3></div></div></div><div
            class="para">
				Debian は管理者に root で作業するという悪習を身に付けさせないために、強制的に標準的なユーザアカウントを作成します。この予防原則は本質的に、人的ミスによる損害を抑えるためには必要最低限の権限だけで作業する必要がある、ということを意味しています。このため、インストーラは 1 人目のユーザの完全な名前、ユーザ名、パスワード (入力ミスの危険を防ぐために 2 回) を尋ねるでしょう。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.11.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-username.png"
                  alt="1 人目のユーザの名前" /></div></div><p
              class="title"><strong>図 4.6 1 人目のユーザの名前</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-clock-config"></a>4.2.11. 時刻の設定</h3></div></div></div><div
            class="para">
				ネットワークを利用できる場合、システムの内部時計は NTP サーバを使って (1 度だけ) 更新されます。こうすることで、初回起動時以降のログのタイムスタンプが修正されます。常に正確な時刻に合わせるためには、最初のインストール後に NTP デーモンのセットアップが必要です (<a
              class="xref"
              href="sect.config-misc.html#sect.time-synchronization">第 8.9.2 節「時刻同期」</a>を参照してください)。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-detect-disks"></a>4.2.12. ディスクや他のデバイスの検出</h3></div></div></div><div
            class="para">
				この段階で Debian がインストールされるであろうハードドライブが自動的に検出されます。検出されたハードドライブは次の段階、パーティショニング、で表示されます。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.install-partman"></a>4.2.13. パーティショニングツールの開始</h3></div></div></div><a
            id="id-1.7.12.14.2"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> パーティショニング法</strong></p></div></div></div><div
              class="para">
				パーティショニングはインストール時に必ず必要な作業で、ハードドライブ上の利用できる領域をハードドライブ上に保存されるであろうデータとコンピュータで予定されている用途に従って分割する作業です (分割されたそれぞれの区画を「パーティション」と呼びます)。パーティショニングの段階で、使用するファイルシステムを選択します。これらすべてが、性能、データのセキュリティ、サーバの管理、に影響をおよぼします。
			</div></div><div
            class="para">
				その昔、パーティショニングは新規ユーザにとって難しい作業でした。パーティショニングには、Linux ファイルシステムと仮想メモリ (スワップ) が保存されるディスクの一区画 (「パーティション」) を定義する必要があります。この作業は、残しておきたい既存の他のオペレーティングシステムがマシン上にある場合に、複雑になります。実際には、既存のシステムのパーティションを変更しない (または、損害を与えずにパーティションのサイズを変更する) ように注意しなければいけません。
			</div><div
            class="para">
				幸いなことに、インストーラに含まれるパーティショニングソフトウェアは「ガイド付き」モードを備えています。このモードを使う場合、ユーザにパーティショニング方法の候補が提示されます。多くの場合、ソフトウェアの提案を確認するだけで事足ります。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.14.6"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-partman.png"
                  alt="パーティショニング方法の選択" /></div></div><p
              class="title"><strong>図 4.7 パーティショニング方法の選択</strong></p></div><div
            class="para">
				パーティショニングツールの最初の画面では、ハードドライブ全体を使ってパーティションを作成する選択肢が表示されます。(新しい) コンピュータに Linux だけをインストールする場合、このパーティショニング方法が明らかに最も単純です。この場合「ガイド - ディスク全体を使う」を選んでください。コンピュータに 2 種類のオペレーティングシステム用の 2 台のハードドライブが装備されている場合、ドライブごとにオペレーティングシステムを分けるのも解決策の 1 つです。こうすることでパーティショニングが楽になります。どちらの場合も、次の画面では、関連するエントリから Linux をインストールするディスク (たとえば「SCSI1 (0,0,0) (sda) - 12.9 GB ATA VBOX HARDDISK」) を選択します。その後、ガイド付きのパーティショニングが始まります。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.14.8"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-partman-disk.png"
                  alt="ガイド付きパーティショニングを適用するディスク" /></div></div><p
              class="title"><strong>図 4.8 ガイド付きパーティショニングを適用するディスク</strong></p></div><div
            class="para">
				ガイド付きパーティショニングでは、パーティションの代わりに LVM 論理ボリュームを作成することも可能です (LVM については後から説明します)。残りの操作は同じですから、「ガイド - ディスク全体を使い LVM をセットアップする」の選択肢 (暗号化の有無に関わらず) については説明しません。
			</div><div
            class="para">
				他の事例、たとえば Linux を既存のパーティションと共存させたい場合、手作業でパーティショニングを実行しなければいけません。
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.install-autopartman-mode"></a>4.2.13.1. ガイド付きパーティショニング</h4></div></div></div><a
              id="id-1.7.12.14.11.2"
              class="indexterm"></a><div
              class="para">
					ガイド付きパーティショニングツールでは、それぞれ別の用途に適した 3 種類のパーティショニング機構を選択できます。
				</div><div
              class="figure"><a
                xmlns=""
                id="id-1.7.12.14.11.4"></a><div
                class="figure-contents"><div
                  class="mediaobject"><img
                    src="images/inst-autopartman-mode.png"
                    alt="ガイド付きパーティショニング" /></div></div><p
                class="title"><strong>図 4.9 ガイド付きパーティショニング</strong></p></div><div
              class="para">
					1 番目のパーティショニング機構は「すべてのファイルを 1 つのパーティションに」です。これは、Linux システムツリー全体 (ルート <code
                class="filename">/</code> ディレクトリ以下すべて) を単一のファイルシステムに保存します。このパーティショニングは単純かつ頑強であり、個人および単一ユーザシステム用途にぴったりです。実際には、2 つのパーティションが作られます。具体的に言えば、システム全体用と仮想メモリ (swap) 用のパーティションが作られます。
				</div><div
              class="para">
					2 番目のパーティショニング機構は「<code
                class="filename">/home</code> パーティションの分割」です。これは、1 番目のパーティショニング機構とよく似ていますが、ファイル階層を 2 つに分離します。具体的に言えば、片方には Linux システム (<code
                class="filename">/</code>) を、もう片方には「ホームディレクトリ」(ユーザデータ、ファイルとサブディレクトリは <code
                class="filename">/home/</code> 以下に配置されます) を収めます。
				</div><div
              class="para">
					最後のパーティショニング機構は「<code
                class="filename">/home</code>, <code
                class="filename">/var</code>, <code
                class="filename">/tmp</code> パーティションを分割」です。これはサーバや複数のユーザが利用するシステムに適しています。これはファイルツリーを多くのパーティションに分離します。具体的に言えば、ルート (<code
                class="filename">/</code>) とユーザアカウント (<code
                class="filename">/home/</code>) パーティションの分離に加え、サーバソフトウェアのデータ (<code
                class="filename">/var/</code>) と一時ファイル (<code
                class="filename">/tmp/</code>) 用パーティションも分離します。ファイルツリーが格納されるパーティションをこのように分離するとさまざまな利点を得ることが可能です。ユーザが利用できるハードドライブ領域を使い切ってしまうことでサーバが動かなくなることがなくなります (ユーザが満杯にできるハードドライブ領域を <code
                class="filename">/tmp/</code> と <code
                class="filename">/home/</code> だけに制限できます)。さらにデーモンのデータ (特にログ) がシステムの他の領域を圧迫することがなくなります。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>BACK TO BASICS</em></span> ファイルシステムの選択</strong></p></div></div></div><a
                id="id-1.7.12.14.11.8.2"
                class="indexterm"></a><a
                id="id-1.7.12.14.11.8.3"
                class="indexterm"></a><div
                class="para">
					ファイルシステムはハードドライブにデータを格納する方法を定義しています。既存のファイルシステムにはそれぞれ長所と制限があります。頑強なものもあれば、効率のよいものもあります。すなわち、自分の必要としていることをよく理解している人は最も適切なファイルシステムを選択することが可能です。既にさまざまなファイルシステムに対する長所や制限が比較検討されています。たとえば ReiserFS ファイルシステムは、多くの小さなファイルを読む場合は特に効率が良いとされています。また、<span
                  class="emphasis"><em>XFS</em></span> は巨大なファイルを高速に取り扱えます。Debian のデフォルトファイルシステムである <span
                  class="emphasis"><em>ext4</em></span> は良い妥協点で、昔から Linux で使われてきた 3 つの古いファイルシステム (<span
                  class="emphasis"><em>ext</em></span>、<span
                  class="emphasis"><em>ext2</em></span>、<span
                  class="emphasis"><em>ext3</em></span>) を基に開発されました。<span
                  class="emphasis"><em>ext4</em></span> は <span
                  class="emphasis"><em>ext3</em></span> にあったいくつかの制限を克服しており、とりわけ大容量のハードドライブに適しています。将来が期待されている <span
                  class="emphasis"><em>btrfs</em></span> を試すという選択肢もあります。<span
                  class="emphasis"><em>btrfs</em></span> は最近の LVM または RAID を使用する際に要求される非常に多くの機能を備えています。
				</div><div
                class="para">
					ジャーナル化されたファイルシステム (<span
                  class="emphasis"><em>ext3</em></span>、<span
                  class="emphasis"><em>ext4</em></span>、<span
                  class="emphasis"><em>btrfs</em></span>、<span
                  class="emphasis"><em>reiserfs</em></span>、<span
                  class="emphasis"><em>xfs</em></span> など) では、突発的な障害が起きた際にディスク全体を完全に解析することなく (<span
                  class="emphasis"><em>ext2</em></span> システムでは完全に解析することが必要でした) ファイルシステムを以前の整合性の取れた状態に戻せるようにするために、特別な対策が取られています。実際に作業を実行する前に、その作業の内容をジャーナルに書き込むことにより、この対策機能は実現されています。作業が中断された場合、ジャーナルを使って作業を「再実行」することが可能です。逆に言うと、ジャーナルの更新中に障害が発生した場合、最後の作業は単純に無視されます。その結果、ジャーナルに書き込まれたデータは失われるかもしれませんが、ディスク上のデータは変更されていないので、整合性が保たれます。これはまさにファイルシステムに対するトランザクション処理と言えます。
				</div></div><div
              class="para">
					パーティションの種類を選択した後、ガイド付きパーティショニングツールはパーティショニング案を算出し、画面に提示します。必要であれば、ユーザはパーティショニング案を変更することも可能です。特に、標準的なファイルシステム (<span
                class="emphasis"><em>ext4</em></span>) が不適切な場合は、別のファイルシステムを選択することが可能です。しかしながら多くの場合、インストーラの提示したパーティショニング案は妥当です。承諾するには「パーティショニングの終了とディスクへの変更の書き込み」エントリを選択してください。
				</div><div
              class="figure"><a
                xmlns=""
                id="id-1.7.12.14.11.10"></a><div
                class="figure-contents"><div
                  class="mediaobject"><img
                    src="images/inst-partman-validation.png"
                    alt="パーティショニングの確認" /></div></div><p
                class="title"><strong>図 4.10 パーティショニングの確認</strong></p></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.manual-partitioning"></a>4.2.13.2. 手作業のパーティショニング</h4></div></div></div><a
              id="id-1.7.12.14.12.2"
              class="indexterm"></a><div
              class="para">
					手作業でパーティショニングを実行すればより柔軟にパーティションを設定できます (各パーティションの目的とサイズを選ぶことが可能です)。また、ソフトウェア RAID を希望する場合、手作業でパーティショニングを実行しなければいけません。
				</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.shrinking-partition"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>IN PRACTICE</em></span> Windows パーティションの縮小</strong></p></div></div></div><a
                id="id-1.7.12.14.12.4.2"
                class="indexterm"></a><a
                id="id-1.7.12.14.12.4.3"
                class="indexterm"></a><div
                class="para">
					Debian を他のオペレーティングシステム (Windows など) と共存させてインストールする場合、Debian 専用のパーティションを作成するためには、他のシステムから使われていないハードドライブ領域を必要とします。多くの場合、これは Windows パーティションを縮小し、できた空き領域を再利用することを意味しています。
				</div><div
                class="para">
					Debian インストーラでは、手作業でパーティショニングを実行すれば、パーティションの縮小作業を実行できます。パーティションを縮小するには Windows パーティションを選択し、新しいサイズを入力するだけです (Debian インストーラは FAT と NTFS の両方のパーティションの縮小に対応しています)。
				</div></div><div
              class="para">
					最初の画面では、利用できるディスク、パーティション、パーティションを割り当てられていない空き領域が表示されます。表示されたそれぞれの要素を選択できます。さらに <span
                class="keycap"><strong>Enter</strong></span> キーを押せば、実行できる操作のリストが表示されます。
				</div><div
              class="para">
					ディスクを選択すれば、そのディスク上のすべてのパーティションを削除できます。
				</div><div
              class="para">
					ディスクの空き領域を選択すれば、新しいパーティションを作成できます。ガイド付きパーティショニングを空き領域に適用することも可能です。この方法は、ディスクには別のオペレーティングシステムがインストールされているけれども、標準的なやり方で Linux のパーティショニングを実行したいという場合に興味深い解決策です。ガイド付きパーティショニングに関する詳しい情報は<a
                class="xref"
                href="sect.installation-steps.html#sect.install-autopartman-mode">第 4.2.13.1 節「ガイド付きパーティショニング」</a>をご覧ください。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>BACK TO BASICS</em></span> マウントポイント</strong></p></div></div></div><a
                id="id-1.7.12.14.12.8.2"
                class="indexterm"></a><a
                id="id-1.7.12.14.12.8.3"
                class="indexterm"></a><div
                class="para">
					マウントポイントとは、パーティションに保存されたファイルシステムの内容を格納するディレクトリツリーです。つまり <code
                  class="filename">/home/</code> にマウントされたパーティションにはユーザデータが格納されます。
				</div><div
                class="para">
					マウントポイントが「<code
                  class="filename">/</code>」の場合、ファイルツリーの<span
                  class="emphasis"><em>ルート</em></span>を意味し、このパーティションのルートには Debian システムが格納されます。
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>BACK TO BASICS</em></span> 仮想メモリ、スワップ</strong></p></div></div></div><a
                id="id-1.7.12.14.12.9.2"
                class="indexterm"></a><a
                id="id-1.7.12.14.12.9.3"
                class="indexterm"></a><a
                id="id-1.7.12.14.12.9.4"
                class="indexterm"></a><a
                id="id-1.7.12.14.12.9.5"
                class="indexterm"></a><div
                class="para">
					Linux カーネルは、仮想メモリのおかげでメモリ (RAM) の空き領域が不足した際にしばらくの間使われていない RAM の内容をハードディスクのスワップパーティションに保存して、少しの RAM 空き領域を確保することが可能です。
				</div><div
                class="para">
					仮想メモリのような付加的メモリを装うために、Windows ではファイルシステムに直接格納されるスワップファイルが利用されています。逆に、Linux ではこの目的専用のパーティション「スワップパーティション」が利用されています。
				</div></div><div
              class="para">
					以下は、パーティションを選んだ後に指定できる、選択したパーティションの取り扱い方のリストです。
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							選択したパーティションをフォーマットし、マウントポイントを指定してパーティションをファイルツリーに含めます。
						</div></li><li
                  class="listitem"><div
                    class="para">
							選択したパーティションをスワップパーティションとして使います。
						</div></li><li
                  class="listitem"><div
                    class="para">
							選択したパーティションを「暗号化物理ボリューム」にします (パーティションに含まれる秘密のデータを守るには、以下を参照してください)。
						</div></li><li
                  class="listitem"><div
                    class="para">
							選択したパーティションを「LVM 用物理ボリューム」にします (LVM の概念は、この章の後で詳しく議論します)。
						</div></li><li
                  class="listitem"><div
                    class="para">
							選択したパーティションを RAID デバイスとして利用します (この章の後半を参照してください)。
						</div></li><li
                  class="listitem"><div
                    class="para">
							選択したパーティションを使わないことにして、そのままにしておくことも可能です。
						</div></li></ul></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.install-software-raid"></a>4.2.13.3. マルチディスクデバイスの設定 (ソフトウェア RAID)</h4></div></div></div><a
              id="id-1.7.12.14.13.2"
              class="indexterm"></a><a
              id="id-1.7.12.14.13.3"
              class="indexterm"></a><a
              id="id-1.7.12.14.13.4"
              class="indexterm"></a><div
              class="para">
					一部の RAID レベルでは複数のハードドライブに保存された情報を複製することで、RAID を構成する 1 台のハードドライブがデータに影響をおよぼすハードウェア障害を起こした際にデータが消失することを防いでいます。レベル 1 RAID は単純で、2 台のハードドライブに全く同じデータの複製を作ります。これに対して、レベル 5 RAID は冗長データを複数のディスクに分散します。このため、障害の起きたドライブに含まれたデータを完全に復元することが可能です。
				</div><div
              class="para">
					ここでは最も簡単に設定できるレベル 1 RAID だけを説明します。最初に、全く同じサイズのパーティションを 2 つ別々のドライブに作成し、「RAID の物理ボリューム」とラベル付けします。
				</div><div
              class="para">
					2 つのパーティションを 1 つの仮想ディスクにまとめるためにはパーティショニングツールで「ソフトウェア RAID の設定」を選び、設定画面で「MD デバイスの作成」を選んでください。その後、新しいデバイスに関する一連の質問に答える必要があります。最初の質問では、使用する RAID レベルを尋ねられます。今回の場合「RAID1」です。2 番目の質問では、アクティブデバイスの数を尋ねられます。アクティブデバイスの数とは MD デバイスに含めるパーティションの数で、今回の場合 2 台です。3 番目の質問では、予備デバイスの数を尋ねられます。今回の場合 0 台です。つまり、ディスク障害が起きた際に機能を代替させるためのディスクを追加する計画はないということです。最後の質問では、RAID デバイス用のパーティションを尋ねられます。これは事前に用意した 2 つのパーティションです (「raid」と明示されているパーティション以外は選ばないでください)。
				</div><div
              class="para">
					メインメニューに戻ると、新しい仮想「RAID」ディスクが表示されます。このディスクは削除できない単一のパーティションとして表示されますが、選択すればこれを使用できます (他のパーティションと同じ方法で選択してください)。
				</div><div
              class="para">
					RAID 機能に関するより詳しい情報は<a
                class="xref"
                href="advanced-administration.html#sect.raid-soft">第 12.1.1 節「ソフトウェア RAID」</a>を参照してください。
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.install-lvm"></a>4.2.13.4. 論理ボリュームマネージャ (LVM) の設定</h4></div></div></div><a
              id="id-1.7.12.14.14.2"
              class="indexterm"></a><a
              id="id-1.7.12.14.14.3"
              class="indexterm"></a><div
              class="para">
					LVM を使うことで、複数のディスクにまたがる「仮想」パーティションを作成できます。LVM を使うことの利点は 2 つあります。具体的に言えば、パーティションのサイズは、もはや個々のディスクによって制限を受けるのではなく、累積ボリュームによって制限を受けます。さらにパーティションのサイズはいつでも (ディスクを追加した後などに) 変更できます。
				</div><div
              class="para">
					LVM では特有の専門用語を使います。たとえば仮想パーティションは「論理ボリューム」と呼ばれます。「論理ボリューム」は「ボリュームグループ」の一部分を表し、「論理ボリューム」は複数の「物理ボリューム」群から構成されます。実際のところ、これらの専門用語は「実」パーティション (またはソフトウェア RAID デバイス) から作られるものです。
				</div><a
              id="id-1.7.12.14.14.6"
              class="indexterm"></a><a
              id="id-1.7.12.14.14.7"
              class="indexterm"></a><a
              id="id-1.7.12.14.14.8"
              class="indexterm"></a><a
              id="id-1.7.12.14.14.9"
              class="indexterm"></a><div
              class="para">
					LVM はとても単純な方法で実現されています。すなわち、それぞれのボリュームは物理であるか論理であるかに関わらず同じサイズのブロックに分割され、ブロックは LVM に対応付けられます。新しいディスクを追加した場合は新しい物理ボリュームの作成が必要で、新しいブロックは任意のボリュームグループに関連付けることが可能です。拡張されたボリュームグループ内のすべてのパーティションは、ディスク領域の許す限り拡張することが可能です。
				</div><div
              class="para">
					パーティショニングツールは数段階で LVM を設定します。最初に、存在するディスク上に「LVM の物理ボリューム」となるパーティションを作成しなければいけません。LVM を稼働させるには、「論理ボリュームマネージャの設定」を選び、同じ設定画面で「ボリュームグループの作成」から、存在する物理ボリュームを作成するボリュームグループに関連付けてください。最後に、このボリュームグループ内に論理ボリュームを作成してください。自動パーティショニングシステムを使えばこれらの全段階を自動的に実行できる点に注意してください。
				</div><div
              class="para">
					パーティショニングメニューでは、各物理ボリュームは削除できない単一のパーティションを持つディスクとして表示されますが、LVM 用として望み通り使うことが可能です。
				</div><div
              class="para">
					LVM の使い方については<a
                class="xref"
                href="advanced-administration.html#sect.lvm">第 12.1.2 節「LVM」</a>で詳しく説明されています。
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.7.12.14.15"></a>4.2.13.5. 暗号化されたパーティションの設定</h4></div></div></div><a
              id="id-1.7.12.14.15.2"
              class="indexterm"></a><a
              id="id-1.7.12.14.15.3"
              class="indexterm"></a><a
              id="id-1.7.12.14.15.4"
              class="indexterm"></a><a
              id="id-1.7.12.14.15.5"
              class="indexterm"></a><a
              id="id-1.7.12.14.15.6"
              class="indexterm"></a><a
              id="id-1.7.12.14.15.7"
              class="indexterm"></a><div
              class="para">
					データの機密性を保証するには、たとえばコンピュータやハードドライブを紛失したり盗難された時に備えて、一部のパーティションのデータを暗号化しておく必要があります。暗号化の可否はファイルシステムの種類に依存しません。なぜなら、Linux (より具体的に言えば dm-crypt ドライバ) は LVM と同様にデバイスマッパを使い、暗号化されたデータが保存されるパーティション上に仮想パーティション (この内容が保護されます) を作成するからです (LUKS、Linux Unified Key Setup、のおかげで標準的なフォーマットが定められ、暗号化されたデータおよび使われている暗号化アルゴリズムを表すメタ情報の保存が可能になりました)。
				</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.encrypted-swap-partition"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SECURITY</em></span> 暗号化されたスワップパーティション</strong></p></div></div></div><div
                class="para">
					暗号化されたパーティションを使う場合、暗号化鍵はメモリ (RAM) の中に保存されています。暗号化鍵が入手できればデータの復号化が可能になりますから、コンピュータやハードドライブの泥棒もしくはメンテナンス技術者に暗号化鍵の複製を入手されないようにするには、暗号化鍵の複製を RAM に残さないようにすることが最も重要です。しかしながらラップトップでは RAM の中に暗号化鍵の複製を残すという状況が簡単に起こります。なぜなら、ハイバネーションの際に RAM の内容はスワップパーティションに保存されるからです。スワップパーティションが暗号化されていない場合、泥棒は暗号化鍵を入手して、暗号化されたパーティションのデータを復号化するかもしれません。このため、暗号化されたパーティションを使うなら、スワップパーティションの暗号化も欠かせません!
				</div><div
                class="para">
					Debian インストーラはスワップパーティションが暗号化されていないにも関わらず暗号化されたパーティションを作ろうとしたらユーザに警告します。
				</div></div><div
              class="para">
					暗号化されたパーティションを作成するには、最初にあるパーティションを暗号化用に割り当てなければいけません。割り当てを行うには、パーティションを選択し「暗号化の物理ボリューム」として使うように設定してください。物理ボリュームを含むディスクのパーティショニングの後、「暗号化されたボリュームの設定」を選んでください。パーティショニングツールは (真のデータの位置をより分かりにくくするために) 物理ボリュームをでたらめなデータで初期化することを提案し、「暗号化パスフレーズ」の入力を要求します。暗号化されたパーティションの内容にアクセスする場合、パスフレーズはコンピュータの起動時に毎回入力しなければいけません。この段階が完了しパーティショニングツールメニューまで戻ったら、「暗号化ボリューム」から新しいパーティションを利用できるはずです。「暗号化ボリューム」は他のパーティションと同様に設定できます。多くの場合、「暗号化ボリューム」は LVM の物理ボリュームとして利用されます。そうすれば、複数のパーティション (LVM 論理ボリューム) をスワップパーティションも含めて同じ暗号化鍵で保護することが可能になります (補注<a
                class="xref"
                href="sect.installation-steps.html#sidebar.encrypted-swap-partition">「<span
                  class="emphasis"><em>SECURITY</em></span> 暗号化されたスワップパーティション」</a>を参照してください)。
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.15"></a>4.2.14. 基本システムのインストール</h3></div></div></div><a
            id="id-1.7.12.15.2"
            class="indexterm"></a><div
            class="para">
				この段階ではユーザの入力は不要で、Debian の「基本システム」パッケージがインストールされます。基本システムには Debian パッケージを管理する <code
              class="command">dpkg</code> と <code
              class="command">apt</code> ツールだけでなく、システムを起動させてシステムを使うのに必要なユーティリティが含まれています。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.15.4"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-basesystem.png"
                  alt="基本システムのインストール" /></div></div><p
              class="title"><strong>図 4.11 基本システムのインストール</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.16"></a>4.2.15. パッケージマネージャ (<code
                    class="command">apt</code>) の設定</h3></div></div></div><a
            id="id-1.7.12.16.2"
            class="indexterm"></a><a
            id="id-1.7.12.16.3"
            class="indexterm"></a><div
            class="para">
				追加ソフトウェアをインストールできるようにするためには、APT を設定し、Debian パッケージを探す場所を決めなければいけません。この段階は可能な限り自動化されています。パッケージマネージャの設定はパッケージを探す場所をネットワークソースにするか CD-ROM だけにするかを尋ねる質問から始まります。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> ドライブ中の Debian CD-ROM</strong></p></div></div></div><div
              class="para">
				インストーラが CD/DVD ドライブに Debian のインストールディスクを検出した場合、ネットワーク上のパッケージを探しに行くように APT を設定する必要はありません。なぜなら APT はリムーバブルメディアドライブからパッケージを読むように自動的に設定されているからです。このディスクがインストールディスクセットの一部だった場合、インストーラは他のディスクに収められているすべてパッケージを参照するために他のディスクを「探索」することを提案するでしょう。
			</div></div><div
            class="para">
				ネットワークからパッケージを取得することを選んだ場合、次の 2 つの質問で国とその国で利用できる Debian アーカイブミラーを選択し、パッケージをダウンロードするサーバを選びます (Debian アーカイブミラーとは Debian マスターアーカイブにあるファイルのコピーをホストしている公開サーバです)。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.16.7"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-mirror.png"
                  alt="Debian アーカイブミラーの選択" /></div></div><p
              class="title"><strong>図 4.12 Debian アーカイブミラーの選択</strong></p></div><div
            class="para">
				最後にインストーラは HTTP プロキシを使うことを提案します。プロキシを入力しなかった場合、インターネットに直接アクセスします。ここで <code
              class="literal">http://proxy.falcot.com:3128</code> と入力した場合、APT は Falcot の<span
              class="foreignphrase"><em
                class="foreignphrase">プロキシ/キャッシュ</em></span>である「Squid」プログラムを使うでしょう。プロキシの設定を見つけ出すには、同じネットワークに接続された別のマシンでウェブブラウザの設定を確認してみてください。
			</div><div
            class="para">
				APT は <code
              class="filename">Packages.gz</code> と <code
              class="filename">Sources.gz</code> ファイルを自動的にダウンロードし、認識するパッケージのリストを更新します。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BACK TO BASICS</em></span> HTTP プロキシ</strong></p></div></div></div><a
              id="id-1.7.12.16.10.2"
              class="indexterm"></a><a
              id="id-1.7.12.16.10.3"
              class="indexterm"></a><a
              id="id-1.7.12.16.10.4"
              class="indexterm"></a><a
              id="id-1.7.12.16.10.5"
              class="indexterm"></a><div
              class="para">
				HTTP プロキシはネットワークユーザの HTTP 要求を転送するサーバです。プロキシは転送したファイルのコピーを保存することでダウンロードの高速化に寄与する場合があります (そのためこれはプロキシ/キャッシュと呼ばれます)。時として、プロキシは外部のウェブサーバにアクセスする唯一の手段である場合があります。そしてこのような場合、必ずインストール中のプロキシ関連の質問に答えてください。そうすれば、プログラムはプロキシを通じて Debian パッケージをダウンロードできるようになります。
			</div><div
              class="para">
				Squid は Falcot Corp がプロキシサービスを提供するために使っているサーバソフトウェアの名前です。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.17"></a>4.2.16. Debian パッケージ人気コンテスト</h3></div></div></div><div
            class="para">
				Debian システムには <span
              class="pkg pkg">popularity-contest</span> と呼ばれるパッケージが含まれています。<span
              class="pkg pkg">popularity-contest</span> はパッケージの使用統計を収集するためのパッケージです。毎週、このプログラムはインストール済みパッケージと最近利用されたパッケージの情報を収集し、この情報を匿名で Debian プロジェクトのサーバに送信します。Debian プロジェクトはこの情報を基に各パッケージの相対的重要度を決定します。パッケージの相対的重要度はパッケージの優先度に影響をおよぼします。特に、インストールメディアの完全なセットをダウンロードまたは購入したくないというユーザの利便性を考慮して、インストール CD-ROM に収録されるパッケージは最も「人気」のパッケージだけに限られています。
			</div><div
            class="para">
				<span
              class="pkg pkg">popularity-contest</span> は、ユーザの利用法の機密性を配慮して、要求されない限りインストールされません。
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.18"></a>4.2.17. インストールするパッケージの選択</h3></div></div></div><div
            class="para">
				以降の段階では、マシンの大ざっぱな用途を選択します。ここで提案されている 10 種類のタスクはインストールされるパッケージのリストに対応しています。後からインストール済みパッケージのリストを微調整したり仕上げる必要があるという点は変わりませんが、ここでタスクを選択して必要と思われるパッケージをインストールしておくことは後の作業の良い足掛かりとなります。
			</div><div
            class="para">
				一部のパッケージは、検出されたハードウェアに基づき、自動的にインストールされます (<span
              class="pkg pkg">discover</span> パッケージの <code
              class="command">discover-pkginstall</code> プログラムがこれを担当します)。たとえば、VirtualBox 仮想マシンが検出されたら、プログラムは <span
              class="pkg pkg">virtualbox-guest-dkms</span> パッケージをインストールします。<span
              class="pkg pkg">virtualbox-guest-dkms</span> は仮想マシンをホストシステムとうまく統合するためのものです。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.7.12.18.4"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/inst-tasksel.png"
                  alt="タスクの選択" /></div></div><p
              class="title"><strong>図 4.13 タスクの選択</strong></p></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.installing-grub"></a>4.2.18. GRUB ブートローダのインストール</h3></div></div></div><a
            id="id-1.7.12.19.2"
            class="indexterm"></a><a
            id="id-1.7.12.19.3"
            class="indexterm"></a><a
            id="id-1.7.12.19.4"
            class="indexterm"></a><div
            class="para">
				ブートローダは BIOS が起動する最初のプログラムです。ブートローダは Linux カーネルをメモリに読み込み、実行します。通常ブートローダはユーザに対して、読み込むカーネルまたは起動したいオペレーティングシステムを選択できるメニューを表示します。
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.bootloader-dual-boot"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BEWARE</em></span> ブートローダとデュアルブート</strong></p></div></div></div><a
              id="id-1.7.12.19.6.2"
              class="indexterm"></a><div
              class="para">
				Debian インストール作業では、この段階でコンピュータに既にインストールされたオペレーティングシステムを検出し、関連するエントリをブートメニューに自動的に追加します。しかし、中にはこのような作業を行わないインストールプログラムもあります。
			</div><div
              class="para">
				特に、Debian のインストール後に Windows をインストール (または再インストール) する場合、Debian がインストールしたブートローダは消去されます。Debian はまだハードドライブに残っていますが、もはやブートメニューに表示されません。排他的でないブートローダをセットアップするには、Debian インストールシステムを <strong
                class="userinput"><code>rescue</code></strong> モードで起動してください。この操作はインストールマニュアルに詳しく書かれています。<div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.debian.org/releases/stable/amd64/ch08s07.html">http://www.debian.org/releases/stable/amd64/ch08s07.html</a></div>
			</div></div><div
            class="para">
				デフォルトでは、GRUB が表示したメニューにはすべてのインストールされたカーネルおよび検出された他のオペレーティングシステムが含まれています。このため、GRUB はマスターブートレコード内にインストールされるべきです。古いカーネルバージョンを残しておけば、最近インストールされたカーネルが欠陥品かハードウェアと相性が悪い場合にも同じシステムを起動できる状態が保存されます。このため、インストール済みの古いカーネルバージョンを保持しておくことは合理的な方法です。
			</div><div
            class="para">
				GRUB はその技術的優位性のおかげで Debian がインストールするデフォルトのブートローダに採用されています。そして GRUB は多くのファイルシステムをサポートしているため、新しいカーネルのインストールの後に GRUB を毎回更新する必要がありません。なぜなら、GRUB は起動中に設定を読んで、新しいカーネルの正確な位置を見つけ出すからです。GRUB の バージョン 1 (現在は「Grub Legacy」として知られています) は LVM とソフトウェア RAID の組み合わせを取り扱うことができませんでした。しかし、デフォルトでインストールされるバージョン 2 はより完成度の高いものです。また、LILO (別のブートローダ) のインストールが推奨される状況もまだあるかもしれません。そのような場合、インストーラは自動的に LILO を提案します。
			</div><div
            class="para">
				GRUB の設定に関する詳しい情報は<a
              class="xref"
              href="sect.config-bootloader.html#sect.config-grub">第 8.8.3 節「GRUB 2 の設定」</a>を参照してください。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>BEWARE</em></span> ブートローダとアーキテクチャ</strong></p></div></div></div><div
              class="para">
				この章で紹介した LILO と GRUB は <span
                class="emphasis"><em>i386</em></span> と <span
                class="emphasis"><em>amd64</em></span> アーキテクチャ用のブートローダです。もし別のアーキテクチャに Debian をインストールするなら、別のブートローダが必要です。とりわけ、<span
                class="emphasis"><em>powerpc</em></span> 用には <code
                class="command">yaboot</code> または <code
                class="command">quik</code>、<span
                class="emphasis"><em>sparc</em></span> 用には <code
                class="command">silo</code>、<span
                class="emphasis"><em>alpha</em></span> 用には <code
                class="command">aboot</code>、<span
                class="emphasis"><em>mips</em></span> 用には <code
                class="command">arcboot</code> が用意されています。
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.7.12.20"></a>4.2.19. インストールの完了と再起動</h3></div></div></div><div
            class="para">
				これでインストールが完了しました。インストーラは、ドライブから CD-ROM を取り出し、コンピュータを再起動するよう促します。
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="installation.html"><strong>戻る</strong>第 4 章 インストール</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.after-first-boot.html"><strong>次へ</strong>4.3. 初回起動の後</a></li></ul></body></html>
