<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.4. フロントエンド、aptitude、synaptic</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ja-JP-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理者ハンドブック" /><link
        rel="up"
        href="apt.html"
        title="第 6 章 メンテナンスと更新、APT ツール" /><link
        rel="prev"
        href="sect.apt-cache.html"
        title="6.3. apt-cache コマンド" /><link
        rel="next"
        href="sect.package-authentication.html"
        title="6.5. パッケージ信頼性の確認" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ja-JP/stable/sect.apt-frontends.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.apt-cache.html"><strong>戻る</strong></a></li><li
          class="home">Debian 管理者ハンドブック</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-authentication.html"><strong>次へ</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.apt-frontends"></a>6.4. フロントエンド、<code
                  class="command">aptitude</code>、<code
                  class="command">synaptic</code></h2></div></div></div><a
          id="id-1.9.13.2"
          class="indexterm"></a><a
          id="id-1.9.13.3"
          class="indexterm"></a><a
          id="id-1.9.13.4"
          class="indexterm"></a><div
          class="para">
			APT は C++ プログラムで、<code
            class="command">libapt-pkg</code> 共有ライブラリがその機能の多くを担っています。共有ライブラリを使うとユーザインターフェース (フロントエンド) の作成が楽になります。なぜなら、ライブラリに含まれるコードは簡単に再利用できるからです。歴史的に言って、<code
            class="command">apt-get</code> は <code
            class="command">libapt-pkg</code> のテスト用フロントエンドとして設計されましたが、成功を収めたためにその事実は曖昧にされがちです。
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.aptitude"></a>6.4.1. <code
                    class="command">aptitude</code></h3></div></div></div><div
            class="para">
				<code
              class="command">aptitude</code> は対話型プログラムで、コンソールの準グラフィカルモードを備えています。<code
              class="command">aptitude</code> を使うと、インストール済みや利用できるパッケージのリストを閲覧したり、すべての利用できる情報を調べたり、インストールや削除するパッケージを選択できます。<code
              class="command">aptitude</code> は特に管理者が使うように設計されました。そのため、<code
              class="command">aptitude</code> のデフォルトの挙動は <code
              class="command">apt-get</code> よりもずっと合理的で、インターフェースはより理解されやすいものになっています。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.9.13.6.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/aptitude.png"
                  alt="aptitude パッケージマネージャ" /></div></div><p
              class="title"><strong>図 6.1 <code
                  class="command">aptitude</code> パッケージマネージャ</strong></p></div><div
            class="para">
				<code
              class="command">aptitude</code> は起動すると、状態ごとに分類したパッケージのリストを表示します (インストール済み、未インストール、インストール済みだがミラーから利用不可、タスク、仮想パッケージ、最近ミラーに登場した新しいパッケージなどの状態ごとに分類されます)。さらに、パッケージリストをテーマ別に簡便に閲覧できるビューも用意されています。すべての場合について、<code
              class="command">aptitude</code> はカテゴリとパッケージを併せたリストを画面に表示します。カテゴリは木構造を使って系統付けられ、木構造の枝は <span
              class="keycap"><strong>Enter</strong></span>、<span
              class="keycap"><strong>[</strong></span>、<span
              class="keycap"><strong>]</strong></span> キーで開いたり閉じたりできます。<span
              class="keycap"><strong>+</strong></span> はインストールマーク、<span
              class="keycap"><strong>-</strong></span> は削除マーク、<span
              class="keycap"><strong>_</strong></span> は完全削除マークをパッケージに対して付け加えるのに使われます (マーク操作はカテゴリに対しても適用できる点に注意してください。この場合、カテゴリ内のすべてのパッケージに対して対応するマーク操作を行います)。<span
              class="keycap"><strong>u</strong></span> は利用できるパッケージのリストを更新、<span
              class="keycap"><strong>Shift</strong></span>+<span
              class="keycap"><strong>u</strong></span> はシステム全体のアップグレードを準備します。<span
              class="keycap"><strong>g</strong></span> は要求された変更操作の要約ビューに切り替えます (もう一度 <span
              class="keycap"><strong>g</strong></span> を打てば変更を適用します)。<span
              class="keycap"><strong>q</strong></span> は現在のビューを閉じます (ビューが一つしか残っていない場合 <code
              class="command">aptitude</code> を閉じます)。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOCUMENTATION</em></span> <code
                        class="command">aptitude</code></strong></p></div></div></div><div
              class="para">
				この節では <code
                class="command">aptitude</code> の詳細な使い方を述べるのではなく、<code
                class="command">aptitude</code> を活用して生き残るための知恵を与えることに注力します。<code
                class="command">aptitude</code> の文書は比較的詳しく書かれており、<span
                class="pkg pkg">aptitude-doc-ja</span> パッケージから利用できるプログラムの完全なマニュアルを使うことをお勧めします (<code
                class="filename">/usr/share/doc/aptitude/html/ja/index.html</code> をご覧ください)。
			</div></div><div
            class="para">
				<code
              class="command">aptitude</code> でパッケージを検索するには、<span
              class="keycap"><strong>/</strong></span> を押して、検索パターンを入力してください。この検索パターンはパッケージの名前に対して検索を行いますが、説明文 (<code
              class="literal">~d</code> を先頭に付けた場合)、セクション (<code
              class="literal">~s</code>)、その他の属性の内容に対してを検索を行うことも可能です。詳しくは文書を参照してください。同じ検索パターンを使って、表示されるパッケージを選別することも可能です。これを行うには、<span
              class="keycap"><strong>l</strong></span> キー (<span
              class="foreignphrase"><em
                class="foreignphrase">limit</em></span> の意味) を押して検索パターンを入力してください。
			</div><div
            class="para">
				<code
              class="command">aptitude</code> を使えば簡単に Debian パッケージの「自動フラグ」を管理できます (<a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">第 6.2.7 節「自動的にインストールされたパッケージの追跡」</a>を参照してください)。<code
              class="command">aptitude</code> を使えば、インストール済みパッケージのリストを閲覧したり、<span
              class="keycap"><strong>Shift</strong></span>+<span
              class="keycap"><strong>m</strong></span> キーでパッケージに自動マークを付けたり、<span
              class="keycap"><strong>m</strong></span> キーでそのマークを消したりすることが可能です。「自動的にインストールされたパッケージ」はパッケージリスト上で「A」を付けて表示されています。「自動フラグ」管理機能により、マシンで利用されている全パッケージから、全く関心のないライブラリと依存関係を除外したパッケージのリストを簡単に表示できます。これを行うには <span
              class="keycap"><strong>l</strong></span> (フィルタモードを有効化する) を押して検索パターン <code
              class="literal">~i!~M</code> を入力します。これはインストール済みパッケージ (<code
              class="literal">~i</code>) から自動パッケージとしてマークされたパッケージを除外 (<code
              class="literal">!~M</code>) して表示することを意味しています。
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TOOL</em></span> コマンドラインインターフェースで <code
                        class="command">aptitude</code> を使う</strong></p></div></div></div><div
              class="para">
				<code
                class="command">aptitude</code> の機能のほとんどは対話型インターフェースだけでなくコマンドラインインターフェースからも利用できます。コマンドラインは <code
                class="command">apt-get</code> と <code
                class="command">apt-cache</code> を日常的に使っているユーザにとって身近なものでしょう。
			</div><div
              class="para">
				<code
                class="command">aptitude</code> の先進的な機能はコマンドラインからも使えます。パッケージ検索パターンは対話型インターフェースの場合と同じです。たとえば、「手作業でインストールされた」パッケージのリストを整理整頓したい場合、インストール済みでパッケージ管理下にないプログラムが特定のライブラリと Perl モジュールに依存していないと知っていれば、たった 1 つのコマンドで関連するパッケージを自動パッケージとしてマークすることが可能です。
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>aptitude markauto '~slibs|~sperl'</code></strong></pre><div
              class="para">
				この検索パターンは、<code
                class="literal">libs</code> と <code
                class="literal">perl</code> セクションに含まれる全パッケージを簡単に選択するものであり、<code
                class="command">aptitude</code> で使える検索パターンシステムの力を明確に表しています。
			</div><div
              class="para">
				<code
                class="command">aptitude</code> は、自動パッケージとしてマークされているパッケージが他のパッケージから依存関係に指定されていない場合、その自動パッケージをすぐに (削除要求を確認した後に) 削除します。この点に気を付けてください。
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.9.13.6.9"></a>6.4.1.1. 推奨パッケージ、提案パッケージ、タスクの管理</h4></div></div></div><div
              class="para">
					<code
                class="command">aptitude</code> が提供するもう 1 つの興味深い特徴は、パッケージ間の推奨関係を尊重する点です。とは言うものの、個々の場合に応じて、推奨パッケージをインストールしないようにすることも可能です。たとえば、<span
                class="pkg pkg">gnome</span> パッケージは (数ある中でも特に) <span
                class="pkg pkg">gdebi</span> のインストールを推奨しています。<span
                class="pkg pkg">gnome</span> をインストールするよう選んだ場合、同時に <span
                class="pkg pkg">gdebi</span> も選ばれます (既にシステムにインストール済みでない限り、自動パッケージとしてマークされます)。保留中の操作を確認するには、<span
                class="keycap"><strong>g</strong></span> と入力してください。そうすると、依存関係を満足させる目的で自動的にインストールされたパッケージがまとめられているリスト中に <span
                class="pkg pkg">gdebi</span> が表示されます。しかしながら、操作の承認前にインストールマークを外すことで、パッケージをインストールしないようにできます。
				</div><div
              class="para">
					<code
                class="command">aptitude</code> を使ってパッケージのアップグレードを行う場合、上で述べた推奨関係を追跡してインストールパッケージを自動選択する機能が作動しない点に注意してください。たとえば、<span
                class="pkg pkg">gnome</span> の新バージョンが、以前推奨していなかったパッケージを推奨している場合、推奨されているパッケージは選択されません。しかしながら、管理者がインストールの可否を選択できるように、新しい推奨パッケージはアップグレード画面に表示されます。
				</div><div
              class="para">
					さらに、<code
                class="command">aptitude</code> はパッケージ間の提案関係を考慮しますが、そのやり方はパッケージを特定の表示状態にするだけです。たとえば、<span
                class="pkg pkg">gnome</span> は <span
                class="pkg pkg">dia-gnome</span> を提案しているので、<span
                class="pkg pkg">dia-gnome</span> は保留中の操作の要約画面 (他のパッケージによって提案されたパッケージのセクションの中) に表示されるでしょう。このように、提案されたパッケージは一覧に表示され、管理者はこの提案に従ってインストールするか否かを決めます。パッケージ間の提案関係とは依存関係でも推奨関係でもないので、提案されたパッケージは自動的にインストールマークを付けられません。つまり、ユーザがインストールするか否かを手作業で選択します (このため、提案されたパッケージは自動パッケージとしてマークされません)。
				</div><div
              class="para">
					同様の観点から <code
                class="command">aptitude</code> はタスクの概念をうまく取り扱うことにも触れておきます。タスクはパッケージリストの画面内にカテゴリとして表示されるため、ユーザはタスクのインストールおよび削除を、タスク全体に対して適用するか、タスクのパッケージの一部を選択してそれらに適用するかを選ぶことが可能です。
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.9.13.6.10"></a>6.4.1.2. より良い解決アルゴリズム</h4></div></div></div><div
              class="para">
					この節を締め括るにあたり、<code
                class="command">aptitude</code> は <code
                class="command">apt-get</code> に比べてより複雑なアルゴリズム使って難しい状況を解決するという点に触れておきます。一連の操作のすべての操作を適用するとシステムの整合性が失われる場合、<code
                class="command">aptitude</code> はいくつかの解決策を検討し、適用後の整合性が高い順に解決策を提示します。しかしながら、このアルゴリズムは単なるケアレスミスの予防策ではありません。幸いなことに、ユーザは常に手作業で適用する操作を選択できます。現在選択された操作によってシステムの整合性が失われる場合、画面の上の方に「壊れた」パッケージの数が表示されます (手作業で「壊れた」パッケージに移動するには <span
                class="keycap"><strong>b</strong></span> を押してください)。そして、見つかった問題を手作業で解決することも可能です。具体的に言うと、<span
                class="keycap"><strong>Enter</strong></span> でパッケージを選択すれば、利用できる複数のバージョンを確認できます。複数のバージョンから 1 つ選ぶだけで問題が解決されるなら、迷わずこの機能を使うべきです。壊れたパッケージの数がゼロになったら、操作適用前の最終確認のために、保留中の操作の要約画面に問題なく移動できるはずです。
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NOTE</em></span> <code
                          class="command">aptitude</code> のログ</strong></p></div></div></div><div
                class="para">
					<code
                  class="command">dpkg</code> と同様に、<code
                  class="command">aptitude</code> は実行した操作をログファイル (<code
                  class="filename">/var/log/aptitude</code>) に記録します。しかしながら、<code
                  class="command">dpkg</code> と <code
                  class="command">aptitude</code> は全く異なる階層で動いているので、それぞれのログファイルには異なる情報が含まれます。<code
                  class="command">dpkg</code> が各パッケージに対して行ったすべての操作を 1 つずつ記録するのに対し、<code
                  class="command">aptitude</code> はシステム全体のアップグレードなどの高レベル操作に対するより全体的な情報を記録します。
				</div><div
                class="para">
					<code
                  class="filename">/var/log/aptitude</code> には、<code
                  class="command">aptitude</code> が実行した操作の要約だけが含まれる点に注意してください。途中で他のフロントエンド (または <code
                  class="command">dpkg</code> 自身) が使われた場合、<code
                  class="command">aptitude</code> のログには、操作全体の一部分しか記録されません。このため、信頼できるシステムの履歴を確認したい場合に、<code
                  class="filename">/var/log/aptitude</code> は頼りになりません。
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.13.7"></a>6.4.2. <code
                    class="command">synaptic</code></h3></div></div></div><div
            class="para">
				<code
              class="command">synaptic</code> は Debian 用のグラフィカルパッケージマネージャで、GTK+/GNOME を使った簡便で効率的なグラフィカルインターフェースです。数多くのすぐに使えるフィルタのおかげで、新しく利用できるようになったパッケージ、インストール済みパッケージ、アップグレードできるパッケージ、時代遅れのパッケージなどを素早く確認できます。これらのリストを通じてパッケージを閲覧しているならば、閲覧中のパッケージに対して実行する操作 (インストール、アップグレード、削除、完全削除) を選択できます。さらに、これらの操作はすぐに実行されるのではなく、まずは操作リストに追加されます。ボタンを一度クリックするだけで、操作の正当性が検証され、操作は一度に実行されます。
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.9.13.7.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/synaptic.png"
                  alt="synaptic パッケージマネージャ" /></div></div><p
              class="title"><strong>図 6.2 <code
                  class="command">synaptic</code> パッケージマネージャ</strong></p></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.apt-cache.html"><strong>戻る</strong>6.3. apt-cache コマンド</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上に戻る</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>ホーム</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-authentication.html"><strong>次へ</strong>6.5. パッケージ信頼性の確認</a></li></ul></body></html>
