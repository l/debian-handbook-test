<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.3. Attribution et résolution de noms</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Configuration, Francisation, Locales, Réseau, Résolution de noms, Utilisateurs, Groupes, Création de compte, Interpréteur de commandes, Shell, Impression, Chargeur de démarrage, Compilation de noyau" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Chapitre 8. Configuration de base : réseau, comptes, impression..." /><link
        rel="prev"
        href="sect.network-config.html"
        title="8.2. Configuration du réseau" /><link
        rel="next"
        href="sect.user-group-databases.html"
        title="8.4. Base de données des utilisateurs et des groupes" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.hostname-name-service.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.hostname-name-service"></a>8.3. Attribution et résolution de noms</h2></div></div></div><a
          id="id-1.11.7.2"
          class="indexterm"></a><a
          id="id-1.11.7.3"
          class="indexterm"></a><div
          class="para">
			Affubler de noms les numéros IP vise à en faciliter la mémorisation par l'humain. En réalité, une adresse IP identifie une interface réseau — un périphérique associé à une carte réseau ou assimilé ; chaque machine peut donc en compter plusieurs et, par conséquent, recevoir plusieurs noms dans le système responsable de leur attribution : le DNS.
		</div><div
          class="para">
			Chaque machine est cependant identifiée par un nom principal (ou « canonique »), stocké dans le fichier <code
            class="filename">/etc/hostname</code> et communiqué au noyau Linux par les scripts d'initialisation à travers la commande <code
            class="command">hostname</code>. On peut en prendre connaissance dans le fichier virtuel <code
            class="filename">/proc/sys/kernel/hostname</code>.
		</div><a
          id="id-1.11.7.6"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>B.A.-BA</em></span> <code
                      class="filename">/proc/</code> et <code
                      class="filename">/sys/</code>, systèmes de fichiers virtuels</strong></p></div></div></div><a
            id="id-1.11.7.7.2"
            class="indexterm"></a><a
            id="id-1.11.7.7.3"
            class="indexterm"></a><a
            id="id-1.11.7.7.4"
            class="indexterm"></a><a
            id="id-1.11.7.7.5"
            class="indexterm"></a><div
            class="para">
			Les arborescences <code
              class="filename">/proc/</code> et <code
              class="filename">/sys/</code> sont gérées par des systèmes de fichiers « virtuels ». Il s'agit en fait d'un moyen pratique de récupérer des informations depuis le noyau (en lisant des fichiers virtuels) et de lui en communiquer (en écrivant dans des fichiers virtuels).
		</div><div
            class="para">
			<code
              class="filename">/sys/</code> est tout particulièrement prévu pour donner accès à des objets internes du noyau, en particulier ceux qui représentent les différents périphériques du système. Le noyau peut ainsi partager de nombreuses informations : l'état de chaque périphérique (par exemple, s'il est en mode d'économie d'énergie), s'agit-il d'un périphérique amovible, etc. Signalons que <code
              class="filename">/sys/</code> n'existe que depuis les noyaux 2.6.
		</div></div><div
          class="para">
			Étonnamment, le nom de domaine n'est pas géré de la même manière, mais provient du nom complet de la machine, obtenu par une résolution de noms. On pourra le modifier dans le fichier <code
            class="filename">/etc/hosts</code> ; il suffit d'y placer un nom complet de machine au début de la liste des noms associés à l'adresse de la machine comme dans l'exemple ci-dessous :
		</div><div
          class="informalexample"><pre
            class="programlisting">
127.0.0.1     localhost
192.168.0.1   arrakis.falcot.com arrakis</pre></div><a
          id="id-1.11.7.10"
          class="indexterm"></a><a
          id="id-1.11.7.11"
          class="indexterm"></a><a
          id="id-1.11.7.12"
          class="indexterm"></a><a
          id="id-1.11.7.13"
          class="indexterm"></a><a
          id="id-1.11.7.14"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.name-resolution"></a>8.3.1. Résolution de noms</h3></div></div></div><a
            id="id-1.11.7.15.2"
            class="indexterm"></a><a
            id="id-1.11.7.15.3"
            class="indexterm"></a><div
            class="para">
				Le mécanisme de résolution de noms de Linux, modulaire, peut s'appuyer sur différentes sources d'informations déclarées dans le fichier <code
              class="filename">/etc/nsswitch.conf</code>. L'entrée qui concerne la résolution des noms d'hôtes est <code
              class="literal">hosts</code>. Par défaut, elle contient <code
              class="literal">files dns</code>, ce qui signifie que le système consulte en priorité le fichier <code
              class="filename">/etc/hosts</code> puis interroge les serveurs DNS. Des serveurs NIS/NIS+ ou LDAP forment d'autres sources possibles.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> NSS et DNS</strong></p></div></div></div><div
              class="para">
				Attention, les commandes destinées spécifiquement à interroger le DNS (notamment <code
                class="command">host</code>) ne consultent pas le mécanisme standard de résolution de noms (NSS). Elles ne tiennent donc pas compte de <code
                class="filename">/etc/nsswitch.conf</code>, ni a fortiori de <code
                class="filename">/etc/hosts</code>.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.dns-server-configuration"></a>8.3.1.1. Configuration des serveurs DNS</h4></div></div></div><a
              id="id-1.11.7.15.6.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.3"
              class="indexterm"></a><div
              class="para">
					Le DNS (<span
                class="foreignphrase"><em
                  class="foreignphrase">Domain Name Service</em></span>, ou service de noms) est un service distribué et hiérarchique associant des noms à des adresses IP et vice versa. Concrètement, il permet de savoir que <code
                class="literal">www.eyrolles.com</code> est en réalité l'adresse IP <code
                class="literal">213.244.11.247</code>.
				</div><div
              class="para">
					Pour accéder aux informations du DNS, il faut disposer d'un serveur DNS relayant les requêtes. Falcot SA a les siens, mais un particulier fait normalement appel aux serveurs DNS de son fournisseur d'accès à Internet.
				</div><a
              id="id-1.11.7.15.6.6"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.7"
              class="indexterm"></a><div
              class="para">
					Les serveurs DNS à employer sont donnés dans le fichier <code
                class="filename">/etc/resolv.conf</code> à raison d'un par ligne, le terme <code
                class="literal">nameserver</code> y précédant l'adresse IP, comme dans l'exemple suivant :
				</div><pre
              class="programlisting">
nameserver 212.27.32.176
nameserver 212.27.32.177
nameserver 8.8.8.8</pre><div
              class="para">
					Signalons que le fichier <code
                class="filename">/etc/resolv.conf</code> est modifié automatiquement (et souvent écrasé) lorsque le réseau est géré par NetworkManager ou configuré par DHCP.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.etc-hosts"></a>8.3.1.2. Fichier <code
                      class="filename">/etc/hosts</code></h4></div></div></div><a
              id="id-1.11.7.15.7.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.7.3"
              class="indexterm"></a><div
              class="para">
					En l'absence d'un serveur de noms sur le réseau local, il est tout de même possible d'établir une petite table de correspondance entre adresses IP et noms de machines dans le fichier <code
                class="filename">/etc/hosts</code>, habituellement réservée aux postes du réseau local. La syntaxe de ce fichier est très simple : chaque ligne significative précise une adresse IP suivie de la liste de tous les noms qui y sont associés (le premier étant « complètement qualifié », c'est-à-dire incluant le nom de domaine).
				</div><div
              class="para">
					Ce fichier est disponible même en cas de panne réseau ou quand les serveurs DNS sont injoignables, mais ne sera vraiment utile que dupliqué sur toutes les machines du réseau. Au moindre changement dans les correspondances, il faudra donc le mettre à jour partout. C'est pourquoi <code
                class="filename">/etc/hosts</code> ne renferme généralement que les entrées les plus importantes (et notamment celle de sa propre machine).
				</div><div
              class="para">
					Pour un petit réseau non connecté à Internet, ce fichier suffira, mais à partir de cinq machines il est recommandé d'installer un serveur DNS en bonne et due forme.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ASTUCE</em></span> Court-circuiter le DNS</strong></p></div></div></div><div
                class="para">
					Étant donné que les applications consultent le fichier <code
                  class="filename">/etc/hosts</code> avant d'interroger le DNS, il est possible d'y mettre des informations différentes de celles habituellement renvoyées par celui-ci, et donc de le court-circuiter.
				</div><div
                class="para">
					Cela permet, en cas de changements DNS pas encore propagés, de tester l'accès à un site web avec le nom prévu même si celui-ci n'est pas encore associé à la bonne adresse IP.
				</div><div
                class="para">
					Autre emploi original, il est possible de rediriger le trafic destiné à un hôte donné vers la machine locale afin qu'aucune communication avec cet hôte ne soit possible. Les noms de serveurs dédiés à l'envoi de bannières publicitaires pourraient faire l'objet d'une telle mesure, ce qui rendrait la navigation plus fluide et moins distrayante puisque leurs annonces ne pourraient plus être chargées.
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>Précédent</strong>8.2. Configuration du réseau</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>Suivant</strong>8.4. Base de données des utilisateurs et des grou...</a></li></ul></body></html>
