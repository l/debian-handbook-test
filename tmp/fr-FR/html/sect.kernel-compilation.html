<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.10. Compilation d'un noyau</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Configuration, Francisation, Locales, Réseau, Résolution de noms, Utilisateurs, Groupes, Création de compte, Interpréteur de commandes, Shell, Impression, Chargeur de démarrage, Compilation de noyau" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Chapitre 8. Configuration de base : réseau, comptes, impression..." /><link
        rel="prev"
        href="sect.config-misc.html"
        title="8.9. Autres configurations : synchronisation, logs, partages…" /><link
        rel="next"
        href="sect.kernel-installation.html"
        title="8.11. Installation d'un noyau" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.kernel-compilation.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.kernel-compilation"></a>8.10. Compilation d'un noyau</h2></div></div></div><a
          id="id-1.11.14.2"
          class="indexterm"></a><a
          id="id-1.11.14.3"
          class="indexterm"></a><div
          class="para">
			Les noyaux fournis par Debian intègrent le plus grand nombre possible de fonctionnalités ainsi qu'un maximum de pilotes, afin de couvrir le plus grand spectre de configurations matérielles existantes. C'est pourquoi certains utilisateurs préfèrent recompiler le noyau pour n'y inclure que le strict nécessaire. Il existe deux raisons à ce choix. Premièrement, cela peut être pour optimiser la consommation de mémoire, puisque le code du noyau, même s'il n'est jamais utilisé, occupe de la mémoire pour rien (et ne « descend » jamais sur l'espace d'échange, donc c'est de vraie mémoire vive qu'il s'agit), ce qui peut diminuer les performances globales du système. Il peut également s'agir de limiter le risque de failles de sécurité (le code compilé portant alors sur une fraction plus faible du code existant).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ATTENTION</em></span> Mises à jour de sécurité</strong></p></div></div></div><div
            class="para">
			Si l'on choisit de compiler son propre noyau, il faut en accepter les conséquences : Debian n'assurera pas les mises à jour de sécurité de ce noyau. En restant avec un noyau fourni par Debian, on bénéficie des mises à jour préparées par l'équipe sécurité du projet.
		</div></div><div
          class="para">
			La recompilation du noyau est aussi nécessaire si l'on souhaite employer certaines fonctionnalités non intégrées dans sa version standard mais disponibles sous forme de correctifs, ou patches.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>POUR ALLER PLUS LOIN</em></span> Le Manuel du noyau Debian</strong></p></div></div></div><a
            id="id-1.11.14.7.2"
            class="indexterm"></a><div
            class="para">
			The Debian kernel teams maintains the “Debian Kernel Handbook” (also available in the <span
              class="pkg pkg">debian-kernel-handbook</span> package) with comprehensive documentation about most kernel related tasks and about how official Debian kernel packages are handled. This is the first place you should look into if you need more information than what is provided in this section. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://kernel-team.pages.debian.net/kernel-handbook/">https://kernel-team.pages.debian.net/kernel-handbook/</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-compilation-prerequisites"></a>8.10.1. Introduction et prérequis</h3></div></div></div><div
            class="para">
				Comme on peut s'y attendre, Debian gère le noyau sous forme de paquet, ce qui n'est pas la manière traditionnelle de le compiler et de l'installer. Les noyaux restant sous le contrôle du système de paquetage, ils peuvent être rapidement supprimés ou déployés sur plusieurs machines. De plus, les scripts associés à ces paquets permettent également une meilleure interaction avec le chargeur de démarrage et le générateur d'images de démarrage <span
              class="foreignphrase"><em
                class="foreignphrase">(initrd)</em></span>.
			</div><div
            class="para">
				Les sources amont du noyau Linux contiennent tout ce qui est requis pour construire un paquet Debian du noyau. Vous aurez simplement besoin d'installer le paquet <span
              class="pkg pkg">build-essential</span>, qui contient les outils de compilation standards pour générer un paquet Debian. Par ailleurs, la configuration du noyau nécessitera le paquet <span
              class="emphasis"><em>libncurses5-dev</em></span>. Enfin, le paquet <span
              class="emphasis"><em>fakeroot</em></span> permettra de créer le paquet Debian sans utiliser les droits de l'administrateur.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> Le bon vieux temps de <span
                        class="pkg pkg">kernel-package</span></strong></p></div></div></div><a
              id="id-1.11.14.8.4.2"
              class="indexterm"></a><div
              class="para">
				À l'époque où le système de compilation du noyau Linux ne permettait pas encore de créer directement des paquets Debian, la manière recommandée de créer ces paquets était d'utiliser l'outil <code
                class="command">make-kpkg</code> fourni par le paquet <span
                class="pkg pkg">kernel-package</span>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-sources"></a>8.10.2. Récupérer les sources</h3></div></div></div><a
            id="id-1.11.14.9.2"
            class="indexterm"></a><a
            id="id-1.11.14.9.3"
            class="indexterm"></a><a
            id="id-1.11.14.9.4"
            class="indexterm"></a><div
            class="para">
				Like anything that can be useful on a Debian system, the Linux kernel sources are available in a package. To retrieve them, just install the <span
              class="pkg pkg">linux-source-<em
                class="replaceable">version</em></span> package. The <code
              class="command">apt search ^linux-source</code> command lists the various kernel versions packaged by Debian. The latest version is available in the <span
              class="distribution distribution">Unstable</span> distribution: you can retrieve them without much risk (especially if your APT is configured according to the instructions of <a
              class="xref"
              href="sect.apt-get.html#sect.apt-mix-distros">Section 6.2.6, « Travailler avec plusieurs distributions »</a>). Note that the source code contained in these packages does not correspond precisely with that published by Linus Torvalds and the kernel developers; like all distributions, Debian applies a number of patches, which might (or might not) find their way into the upstream version of Linux. These modifications include backports of fixes/features/drivers from newer kernel versions, new features not yet (entirely) merged in the upstream Linux tree, and sometimes even Debian specific changes.
			</div><div
            class="para">
				The remainder of this section focuses on the 4.9 version of the Linux kernel, but the examples can, of course, be adapted to the particular version of the kernel that you want.
			</div><div
            class="para">
				We assume the <span
              class="pkg pkg">linux-source-4.9</span> package has been installed. It contains <code
              class="filename">/usr/src/linux-source-4.9.tar.xz</code>, a compressed archive of the kernel sources. You must extract these files in a new directory (not directly under <code
              class="filename">/usr/src/</code>, since there is no need for special permissions to compile a Linux kernel): <code
              class="filename">~/kernel/</code> is appropriate.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>mkdir ~/kernel; cd ~/kernel</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>tar -xaf /usr/src/linux-source-4.9.tar.xz</code></strong></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> Emplacement des sources du noyau</strong></p></div></div></div><div
              class="para">
				Traditionnellement, les sources du noyau Linux ont toujours été placées sous <code
                class="filename">/usr/src/linux/</code>, nécessitant donc les droits root pour la compilation. Comme vous le savez, il faut pourtant éviter de travailler inutilement avec les droits de l'administrateur. Il existe bien un groupe <code
                class="literal">src</code> qui permet à ses membres de travailler dans ce répertoire, mais on évitera malgré tout de recourir à <code
                class="filename">/usr/src/</code>. En conservant les sources du noyau dans un répertoire personnel, vous optez pour la sécurité à tout point de vue : pas de fichiers inconnus du système de paquetage dans <code
                class="filename">/usr/</code>, ni de risque d'induire en erreur les programmes qui scrutent <code
                class="filename">/usr/src/linux/</code> pour obtenir des informations sur le noyau employé.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-kernel"></a>8.10.3. Configuration du noyau</h3></div></div></div><a
            id="id-1.11.14.10.2"
            class="indexterm"></a><a
            id="id-1.11.14.10.3"
            class="indexterm"></a><a
            id="id-1.11.14.10.4"
            class="indexterm"></a><div
            class="para">
				La prochaine étape consiste à configurer le noyau conformément à ses besoins. Le mode opératoire dépend des objectifs.
			</div><div
            class="para">
				Si l'on recompile une version plus récente du noyau (éventuellement dotée d'un patch supplémentaire), le plus probable est qu'on veuille rester aussi près que possible de la configuration standard proposée par Debian. Dans ce cas, et au lieu de tout reconfigurer depuis zéro, il est bon de copier le fichier <code
              class="filename">/boot/config-<em
                class="replaceable">version</em></code> (la version est celle du noyau employé actuellement — <code
              class="command">uname -r</code> vous la révélera au besoin) en <code
              class="filename">.config</code> dans le répertoire des sources du noyau .
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cp /boot/config-4.9.0-3-amd64 ~/kernel/linux-source-4.9/.config</code></strong></pre><div
            class="para">
				Si vous ne souhaitez pas changer la configuration, vous pouvez en rester là et sauter directement à la <a
              class="xref"
              href="sect.kernel-compilation.html#sect.kernel-build">Section 8.10.4, « Compilation et génération du paquet »</a>. Dans le cas contraire, ou si vous avez décidé de tout reconfigurer depuis zéro, il faudra prendre le temps de configurer votre noyau. Pour cela, il propose différentes interfaces, qu'on invoque depuis le répertoire des sources par la commande <code
              class="command">make</code> suivie d'un argument.
			</div><div
            class="para">
				<code
              class="command">make menuconfig</code> compile et exécute une interface évoluée en mode texte (c'est ici que le paquet <span
              class="pkg pkg">libncurses5-dev</span> est requis) qui propose de naviguer dans une structure hiérarchique présentant les options proposées. Une pression sur la touche <span
              class="keycap"><strong>Espace</strong></span> change la valeur de l'option sélectionnée et <span
              class="keycap"><strong>Entrée</strong></span> valide le bouton sélectionné en bas de l'écran : <span
              class="guibutton"><strong>Select</strong></span> permet de rentrer dans le sous-menu sélectionné, <span
              class="guibutton"><strong>Exit</strong></span> remonte d'un cran dans la hiérarchie, et <span
              class="guibutton"><strong>Help</strong></span> produit des informations plus détaillées sur le rôle de l'option sélectionnée. Les flèches permettent de se positionner dans la liste des options et des boutons. Pour quitter le configurateur, il faut sélectionner <span
              class="guibutton"><strong>Exit</strong></span> depuis le menu principal. Le programme propose alors de sauvegarder les changements : acceptez si vous êtes satisfaits de vos choix.
			</div><div
            class="para">
				Les autres interfaces ont un fonctionnement similaire, mais inscrit dans des interfaces graphiques plus modernes : <code
              class="command">make xconfig</code> emploie la boîte à outils Qt et <code
              class="command">make gconfig</code> recourt à GTK+. La première a besoin de <span
              class="pkg pkg">libqt4-dev</span> tandis que la seconde requiert <span
              class="pkg pkg">libglade2-dev</span> et <span
              class="pkg pkg">libgtk2.0-dev</span>.
			</div><div
            class="para">
				Lorsque l'on utilise une de ces interfaces de configuration, il est généralement conseillé de partir d'une configuration par défaut raisonnable. Le noyau fournit de telles configurations dans <code
              class="filename">arch/<em
                class="replaceable">architecture</em>/configs/*_defconfig</code> et il est possible de les mettre en place avec une commande telle que <code
              class="command">make x86_64_defconfig</code> (pour un PC 64 bits) ou <code
              class="command">make i386_defconfig</code> (pour un PC 32 bits).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ASTUCE</em></span> Que faire d'un <code
                        class="filename">.config</code> obsolète ?</strong></p></div></div></div><div
              class="para">
				Lorsque l'on fournit un fichier <code
                class="filename">.config</code> qui provient d'une autre version du noyau (généralement plus ancienne), ce fichier doit être mis à jour. Cela se fait avec <code
                class="command">make oldconfig</code>, qui va poser interactivement les questions portant sur les nouvelles options de configuration. Pour utiliser les réponses par défaut à toutes ces questions, on préfèrera <code
                class="command">make olddefconfig</code>. Pour finir, la commande <code
                class="command">make oldnoconfig</code> répondra par la négative à toutes ces nouvelles questions.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-build"></a>8.10.4. Compilation et génération du paquet</h3></div></div></div><a
            id="id-1.11.14.11.2"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ATTENTION</em></span> Nettoyer avant de recommencer</strong></p></div></div></div><div
              class="para">
				Si vous avez déjà construit un noyau dans le répertoire et si vous voulez tout reconstruire depuis zéro (par exemple après avoir changé la configuration du noyau de manière substantielle), il faudra lancer <code
                class="command">make clean</code>, qui supprimera les fichiers compilés. <code
                class="command">make distclean</code> fait un ménage encore plus poussé et supprime tous les fichiers générés, y compris votre <code
                class="filename">.config</code> ; faites-en une sauvegarde au préalable .
			</div></div><div
            class="para">
				Une fois que la configuration du noyau est prête, la commande <code
              class="command">make deb-pkg</code> va créer jusqu'à 5 paquets Debian : <span
              class="pkg pkg">linux-image-<em
                class="replaceable">version</em></span>, qui contient le noyau lui-même et les modules associés ; <span
              class="pkg pkg">linux-headers-<em
                class="replaceable">version</em></span>, qui contient les fichiers d'en-tête nécessaires pour construire des modules externes ; <span
              class="pkg pkg">linux-firmware-image-<em
                class="replaceable">version</em></span>, qui contient des fichiers de microcode requis par certains pilotes de périphériques (ce paquet peut être absent lorsque vous compilez le noyau depuis les sources fournies par Debian) ; <span
              class="pkg pkg">linux-image-<em
                class="replaceable">version</em>-dbg</span>, qui contient les symboles de débogage pour l'image du noyau et ses modules ; <span
              class="pkg pkg">linux-libc-dev</span>, qui contient les fichiers d'en-têtes requis pour certaines bibliothèques de code en espace utilisateur, telles que la bibliothèque C standard de GNU (glibc).
			</div><div
            class="para">
				La <em
              class="replaceable">version</em> est construite à partir de la version amont (définie par les variables <code
              class="literal">VERSION</code>, <code
              class="literal">PATCHLEVEL</code>, <code
              class="literal">SUBLEVEL</code> et <code
              class="literal">EXTRAVERSION</code> dans le fichier <code
              class="filename">Makefile</code>), du paramètre de configuration <code
              class="literal">LOCALVERSION</code> et de la variable d'environnement <code
              class="literal">LOCALVERSION</code>. La version du paquet réutilise la même chaîne de version, avec une révision qui est régulièrement incrémentée (et stockée dans le fichier <code
              class="filename">.version</code>), sauf si elle est explicitement surchargée par la variable d'environnement <code
              class="literal">KDEB_PKGVERSION</code>.
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make deb-pkg LOCALVERSION=-falcot KDEB_PKGVERSION=$(make kernelversion)-1
</code></strong><code
              class="computeroutput">[...]
$ </code><strong
              class="userinput"><code>ls ../*.deb
</code></strong><code
              class="computeroutput">../linux-headers-4.9.30-ckt4-falcot_4.9.30-1_amd64.deb
../linux-image-4.9.30-ckt4-falcot_4.9.30-1_amd64.deb
../linux-image-4.9.30-ckt4-falcot-dbg_4.9.30-1_amd64.deb
../linux-libc-dev_4.9.30-1_amd64.deb
</code></pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.modules-build"></a>8.10.5. Compilation de modules externes</h3></div></div></div><a
            id="id-1.11.14.12.2"
            class="indexterm"></a><a
            id="id-1.11.14.12.3"
            class="indexterm"></a><a
            id="id-1.11.14.12.4"
            class="indexterm"></a><div
            class="para">
				Certains modules sont gérés en dehors du noyau Linux officiel. Pour les employer, il faut les compiler de concert avec le noyau correspondant. Debian fournit les sources d'un certain nombre de modules externes, tels que <span
              class="pkg pkg">xtables-addons-source</span> (modules supplémentaires pour iptables) ou <span
              class="pkg pkg">oss4-source</span> (qui contient un ensemble alternatif de pilotes de cartes audio).
			</div><div
            class="para">
				Il est difficile de dresser la liste des modules externes disponibles sous forme de sources dans Debian, mais la commande <code
              class="command">apt-cache search source$</code> permet de restreindre le champ de la recherche. De toute façon, cette liste n'apporte rien puisqu'il n'y a pas de raison particulière de compiler des modules externes sauf quand on sait qu'on en a besoin — auquel cas la documentation du périphérique vous renseignera.
			</div><div
            class="para">
				Examinons par exemple le paquet <span
              class="pkg pkg">xtables-addons-source</span> : après installation, un fichier <code
              class="filename">.tar.bz2</code> des sources du module est stocké dans <code
              class="filename">/usr/src/</code>. Nous pourrions extraire cette archive et construire le module à la main, mais en pratique il est d'usage d'automatiser tout cela avec DKMS. La plupart des modules proposent l'intégration avec DKMS dans un paquet dont le nom finit par <code
              class="literal">-dkms</code>. Dans notre cas, il suffit d'installer le paquet <span
              class="pkg pkg">xtables-addons-dkms</span> pour que le module soit compilé pour le noyau courant, à condition que le paquet <span
              class="pkg pkg">linux-headers-*</span> correspondant au noyau courant soit aussi installé. Par exemple, si l'on utilise <span
              class="pkg pkg">linux-image-amd64</span>, il faut également installer <span
              class="pkg pkg">linux-headers-amd64</span>.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>sudo apt install xtables-addons-dkms</code></strong>
<code
              class="computeroutput">
[...]
Setting up xtables-addons-dkms (2.12-0.1) ...
Loading new xtables-addons-2.12 DKMS files...
Building for 4.9.0-3-amd64
Building initial module for 4.9.0-3-amd64
Done.

xt_ACCOUNT:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/4.9.0-3-amd64/updates/dkms/
[...]
DKMS: install completed.
$ </code><strong
              class="userinput"><code>sudo dkms status</code></strong>
<code
              class="computeroutput">xtables-addons, 2.12, 4.9.0-3-amd64, x86_64: installed
$ </code><strong
              class="userinput"><code>sudo modinfo xt_ACCOUNT</code></strong>
<code
              class="computeroutput">filename:       /lib/modules/4.9.0-3-amd64/updates/dkms/xt_ACCOUNT.ko
license:        GPL
alias:          ipt_ACCOUNT
author:         Intra2net AG &lt;opensource@intra2net.com&gt;
description:    Xtables: per-IP accounting for large prefixes
[...]
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVE</em></span> module-assistant</strong></p></div></div></div><a
              id="id-1.11.14.12.9.2"
              class="indexterm"></a><div
              class="para">
				Avant l'apparition de DKMS, la solution la plus simple pour construire et déployer des modules du noyau était <span
                class="pkg pkg">module-assistant</span>. Cette solution est toujours disponible, en particulier pour les paquets qui ne proposent pas (encore) une intégration avec DKMS : avec une simple commande telle que <code
                class="command">module-assistant auto-install xtables-addons</code> (ou même sa version raccourcie, <code
                class="command">m-a a-i xtables-addons</code>), les modules sont construits pour le noyau courant, puis empaquetés dans un nouveau paquet Debian, qui est lui-même installé à la volée.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-patch"></a>8.10.6. Emploi d'un patch sur le noyau</h3></div></div></div><a
            id="id-1.11.14.13.2"
            class="indexterm"></a><a
            id="id-1.11.14.13.3"
            class="indexterm"></a><div
            class="para">
				Certaines fonctionnalités ne sont pas intégrées au noyau standard faute de stabilité ou d'accord des mainteneurs du noyau. Dans ce cas, il arrive qu'elles soient diffusées sous la forme de correctif (ou patch), que chacun est alors libre d'appliquer sur les sources du noyau.
			</div><div
            class="para">
				Debian sometimes provides some of these patches in <span
              class="pkg pkg">linux-patch-*</span> packages but they often don't make it into stable releases (sometimes for the very same reasons that they are not merged into the official upstream kernel). These packages install files in the <code
              class="filename">/usr/src/kernel-patches/</code> directory.
			</div><div
            class="para">
				Pour appliquer un ou plusieurs des patches installés, il faudra utiliser la commande <code
              class="command">patch</code> sur le répertoire de sources, puis lancer la compilation du noyau comme précédemment.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd ~/kernel/linux-source-4.9</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make clean</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>zcat /usr/src/kernel-patches/diffs/grsecurity2/grsecurity-3.1-4.9.11-201702181444.patch.gz | patch -p1</code></strong></pre><div
            class="para">
				Attention, un patch ne fonctionnant pas forcément avec toutes les versions des noyaux, il est possible que <code
              class="command">patch</code> échoue à l'appliquer sur les sources du noyau. Un message vous en informera alors : dans ce cas, référez-vous à la documentation disponible dans le paquet Debian du patch (dans le répertoire <code
              class="filename">/usr/share/doc/linux-patch-*/</code>). Il est probable que le mainteneur indique pour quelles versions du noyau il a été prévu.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>Précédent</strong>8.9. Autres configurations : synchronisation, log...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>Suivant</strong>8.11. Installation d'un noyau</a></li></ul></body></html>
