<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.2. Configuration du réseau</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Configuration, Francisation, Locales, Réseau, Résolution de noms, Utilisateurs, Groupes, Création de compte, Interpréteur de commandes, Shell, Impression, Chargeur de démarrage, Compilation de noyau" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Chapitre 8. Configuration de base : réseau, comptes, impression..." /><link
        rel="prev"
        href="basic-configuration.html"
        title="Chapitre 8. Configuration de base : réseau, comptes, impression..." /><link
        rel="next"
        href="sect.hostname-name-service.html"
        title="8.3. Attribution et résolution de noms" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.network-config.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.network-config"></a>8.2. Configuration du réseau</h2></div></div></div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.networking-basics"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>B.A.-BA</em></span> Rappels réseau essentiels (Ethernet, adresse IP, sous-réseau, broadcast...)</strong></p></div></div></div><a
            id="id-1.11.6.2.2"
            class="indexterm"></a><a
            id="id-1.11.6.2.3"
            class="indexterm"></a><a
            id="id-1.11.6.2.4"
            class="indexterm"></a><a
            id="id-1.11.6.2.5"
            class="indexterm"></a><a
            id="id-1.11.6.2.6"
            class="indexterm"></a><a
            id="id-1.11.6.2.7"
            class="indexterm"></a><a
            id="id-1.11.6.2.8"
            class="indexterm"></a><div
            class="para">
			La majorité des réseaux locaux actuels sont des réseaux Ethernet qui fonctionnent par trames, c'est-à-dire que les données y circulent de manière non continue, par petits blocs. Le débit varie de 10 Mbit/s pour les cartes Ethernet les plus anciennes, à 10 Gbit/s pour la génération la plus récente (100 Mbit/s étant le débit le plus fréquent à l'heure actuelle). Les câbles correspondants les plus courants sont, selon les débits qu'ils permettent d'acheminer, connus sous les nom de 10BASE-T, 100BASE-T, 1000BASE-T ou 10GBASE-T, dits en « paire torsadée » <span
              class="foreignphrase"><em
                class="foreignphrase">(twisted pair)</em></span>, dont chaque extrémité est munie d'un connecteur RJ45 — mais il existe d'autres types de câbles, qui sont surtout utilisés pour les débits à partir du Gbit/s.
		</div><a
            id="id-1.11.6.2.10"
            class="indexterm"></a><a
            id="id-1.11.6.2.11"
            class="indexterm"></a><div
            class="para">
			Une adresse IP est un numéro employé pour identifier une interface réseau d'un ordinateur sur le réseau local ou sur Internet. Dans la version d'IP actuellement la plus répandue (IPv4), ce numéro se code sur 32 bits et se représente habituellement comme 4 nombres séparés par des points (ex : <code
              class="literal">192.168.0.1</code>), chaque nombre pouvant varier de 0 à 255 (représentant ainsi 8 bits de données). La version suivante du protocole, IPv6, étend cet espace d'adressage à 128 bits, une adresse étant représentée sous forme de nombres hexadécimaux séparés par des deux-points (ex : 2002:58bf:13bb:0002:0000:0000:0020, que l'on peut abréger en 2002:58bf:13bb:2::20).
		</div><a
            id="id-1.11.6.2.13"
            class="indexterm"></a><a
            id="id-1.11.6.2.14"
            class="indexterm"></a><a
            id="id-1.11.6.2.15"
            class="indexterm"></a><div
            class="para">
			Un masque de sous-réseau <span
              class="foreignphrase"><em
                class="foreignphrase">(netmask)</em></span> définit par son codage en binaire quelle portion d'une adresse IP correspond au réseau — le reste y spécifiant l'identifiant de la machine. Dans l'exemple de configuration statique IPv4 donné ici, le masque de sous-réseau <code
              class="literal">255.255.255.0</code> (24 « 1 » suivis de 8 « 0 » en représentation binaire) indique que les 24 premiers bits de l'adresse IP correspondent à l'adresse réseau, les 8 derniers relevant alors du numéro de machine. En IPv6, pour des raisons de lisibilité, on note uniquement le nombre de « 1 ». Un <span
              class="foreignphrase"><em
                class="foreignphrase">netmask</em></span> IPv6 peut donc être <code
              class="literal">64</code>.
		</div><div
            class="para">
			L'adresse de réseau est une adresse IP dont la partie décrivant le numéro de machine est à zéro. On décrit souvent la plage d'adresses IPv4 d'un réseau complet par la syntaxe <span
              class="emphasis"><em>a.b.c.d/e</em></span> où <span
              class="emphasis"><em>a.b.c.d</em></span> est l'adresse réseau et <span
              class="emphasis"><em>e</em></span> le nombre de bits affectés à la partie réseau dans une adresse IP. Le réseau de l'exemple s'écrirait ainsi : <code
              class="literal">192.168.0.0/24</code>. La syntaxe est similaire en IPv6 : <code
              class="literal">2001:db8:13bb:2::/64</code>.
		</div><a
            id="id-1.11.6.2.18"
            class="indexterm"></a><a
            id="id-1.11.6.2.19"
            class="indexterm"></a><div
            class="para">
			Un routeur est une machine reliant plusieurs réseaux entre eux. Tout le trafic y parvenant est réorienté sur le bon réseau. Pour cela, le routeur analyse les paquets entrants et les redirige en fonction des adresses IP de leurs destinataires. Le routeur est souvent qualifié de passerelle ; il s'agit alors habituellement d'une machine qui permet de sortir d'un réseau local (vers un réseau étendu comme Internet).
		</div><a
            id="id-1.11.6.2.21"
            class="indexterm"></a><div
            class="para">
			L'adresse de <span
              class="foreignphrase"><em
                class="foreignphrase">broadcast</em></span> (diffusion), spéciale, permet de joindre tous les postes du réseau. Presque jamais « routée », elle ne fonctionne donc que sur le réseau considéré. Concrètement, cela signifie qu'un paquet de données adressé au <span
              class="foreignphrase"><em
                class="foreignphrase">broadcast</em></span> ne franchit jamais un routeur.
		</div><div
            class="para">
			Notez que nous nous restreignons dans ce chapitre aux adresses IPv4, les plus couramment utilisées à l'heure actuelle. Les détails du protocole IPv6 seront abordés dans la <a
              class="xref"
              href="sect.ipv6.html">Section 10.5, « IPv6 »</a>, mais les concepts resteront les mêmes.
		</div></div><div
          class="para">
			The network is automatically configured during the initial installation. If Network Manager gets installed (which is generally the case for full desktop installations), then it might be that no configuration is actually required (for example, if you rely on DHCP on a wired connection and have no specific requirements). If a configuration is required (for example for a WiFi interface), then it will create the appropriate file in <code
            class="filename">/etc/NetworkManager/system-connections/</code>.
		</div><div
          class="para">
			If Network Manager is not installed, then the installer will configure <span
            class="pkg pkg">ifupdown</span> by creating the <code
            class="filename">/etc/network/interfaces</code> file. A line starting with <code
            class="literal">auto</code> gives a list of interfaces to be automatically configured on boot by the <code
            class="literal">networking</code> service.
		</div><div
          class="para">
			In a server context, <span
            class="pkg pkg">ifupdown</span> is thus the network configuration tool that you usually get. That is why we will cover it in the next sections.
		</div><a
          id="id-1.11.6.6"
          class="indexterm"></a><a
          id="id-1.11.6.7"
          class="indexterm"></a><a
          id="id-1.11.6.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>ALTERNATIVE</em></span> NetworkManager</strong></p></div></div></div><a
            id="id-1.11.6.9.2"
            class="indexterm"></a><div
            class="para">
			If Network Manager is particularly recommended in roaming setups (see <a
              class="xref"
              href="sect.network-config.html#sect.roaming-network-config">Section 8.2.5, « Configuration réseau itinérante »</a>), it is also perfectly usable as the default network management tool. You can create “System connections” that are used as soon as the computer boots either manually with a <code
              class="filename">.ini</code>-like file in <code
              class="filename">/etc/NetworkManager/system-connections/</code> or through a graphical tool (<code
              class="command">nm-connection-editor</code>). Just remember to deactivate all entries in <code
              class="filename">/etc/network/interfaces</code> if you want Network Manager to handle them. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings</a></div> <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://developer.gnome.org/NetworkManager/1.6/ref-settings.html">https://developer.gnome.org/NetworkManager/1.6/ref-settings.html</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.interface-ethernet"></a>8.2.1. Interface Ethernet</h3></div></div></div><div
            class="para">
				Si l'ordinateur dispose d'une carte réseau Ethernet, il faut configurer le réseau qui y est associé en optant pour l'une de deux méthodes. La configuration dynamique par DHCP, la plus simple, nécessite la présence d'un serveur DHCP sur le réseau local. Elle peut indiquer un nom d'hôte souhaité, ce qui correspond au paramètre facultatif <code
              class="literal">hostname</code> dans l'exemple qui suit. Le serveur DHCP renvoie alors les paramètres de configuration du réseau qui conviennent.
			</div><a
            id="id-1.11.6.10.3"
            class="indexterm"></a><a
            id="id-1.11.6.10.4"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.config-dhcp"></a><p
              class="title"><strong>Exemple 8.1. Configuration par DHCP</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet dhcp
  hostname arrakis
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IN PRACTICE</em></span> Names of network interfaces</strong></p></div></div></div><a
              id="id-1.11.6.10.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.3"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.4"
              class="indexterm"></a><a
              id="id-1.11.6.10.6.5"
              class="indexterm"></a><div
              class="para">
				By default, the kernel attributes generic names such a <code
                class="literal">eth0</code> (for wired Ethernet) or <code
                class="literal">wlan0</code> (for WiFi) to the network interfaces. The number in those names is a simple incremental counter representing the order in which they have been detected. With modern hardware, that order might change for each reboot and thus the default names are not reliable.
			</div><div
              class="para">
				Fortunately, systemd and udev are able to rename the interfaces as soon as they appear. The default name policy is defined by <code
                class="filename">/lib/systemd/network/99-default.link</code> (see <span
                class="citerefentry"><span
                  class="refentrytitle">systemd.link</span>(5)</span> for an explanation of the <code
                class="literal">NamePolicy</code> entry in that file). In practice, the names are often based on the device's physical location (as guessed by where they are connected) and you will see names starting with <code
                class="literal">en</code> for wired ethernet and <code
                class="literal">wl</code> for WiFi. In the example above, the rest of the name indicates, in abbreviated form, a PCI (<code
                class="literal">p</code>) bus number (<code
                class="literal">0</code>), a slot number (<code
                class="literal">s31</code>), a function number (<code
                class="literal">f6</code>).
			</div><div
              class="para">
				Obviously, you are free to override this policy and/or to complement it to customize the names of some specific interfaces. You can find out the names of the network interfaces in the output of <code
                class="command">ip addr</code> (or as filenames in <code
                class="filename">/sys/class/net/</code>).
			</div></div><div
            class="para">
				Une configuration « statique » doit mentionner de manière fixe les paramètres du réseau. Cela inclut au minimum l'adresse IP et le masque de sous-réseau, parfois les adresses de réseau et de <span
              class="foreignphrase"><em
                class="foreignphrase">broadcast</em></span>. Un éventuel routeur vers l'extérieur sera précisé en tant que passerelle <span
              class="foreignphrase"><em
                class="foreignphrase">(gateway)</em></span>.
			</div><div
            class="example"><a
              xmlns=""
              id="example.static-network"></a><p
              class="title"><strong>Exemple 8.2. Configuration statique</strong></p><div
              class="example-contents"><pre
                class="programlisting">
auto enp0s31f6
iface enp0s31f6 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> Adresses multiples</strong></p></div></div></div><div
              class="para">
				Il est en effet possible non seulement d'associer plusieurs interfaces à une seule carte réseau physique, mais aussi plusieurs adresses IP à une seule interface. Rappelons également qu'à une adresse IP peuvent correspondre un nombre quelconque de noms par le truchement du DNS, et qu'un nom peut aussi correspondre à un nombre quelconque d'adresses IP numériques.
			</div><div
              class="para">
				On l'aura compris, les configurations peuvent être très complexes, mais ces possibilités ne sont utilisées que dans des cas très particuliers. Les exemples cités ici n'exposent donc que les configurations usuelles.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.interface-wireless"></a>8.2.2. Wireless Interface</h3></div></div></div><a
            id="id-1.11.6.11.2"
            class="indexterm"></a><div
            class="para">
				Getting wireless network cards to work can be a bit more challenging. First of all, they often require the installation of proprietary firmwares which are not installed by default in Debian. Then wireless networks rely on cryptography to restrict access to authorized users only, this implies storing some secret key in the network configuration. Let's tackle those topics one by one.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.11.6.11.4"></a>8.2.2.1. Installing the required firmwares</h4></div></div></div><a
              id="id-1.11.6.11.4.2"
              class="indexterm"></a><a
              id="id-1.11.6.11.4.3"
              class="indexterm"></a><div
              class="para">
					First you have to enable the non-free repository in APT's sources.list file: see <a
                class="xref"
                href="apt.html#sect.apt-sources.list">Section 6.1, « Renseigner le fichier <code
                  class="filename">sources.list</code> »</a> for details about this file. Many firmware are proprietary and are thus located in this repository. You can try to skip this step if you want, but if the next step doesn't find the required firmware, retry after having enabled the non-free section.
				</div><div
              class="para">
					Then you have to install the appropriate <code
                class="literal">firmware-*</code> packages. If you don't know which package you need, you can install the <span
                class="pkg pkg">isenkram</span> package and run its <code
                class="command">isenkram-autoinstall-firmware</code> command. The packages are often named after the hardware manufacturer or the corresponding kernel module: <span
                class="pkg pkg">firmware-iwlwifi</span> for Intel wireless cards, <span
                class="pkg pkg">firmware-atheros</span> for Qualcomm Atheros, <span
                class="pkg pkg">firmware-ralink</span> for Ralink, etc. A reboot is then recommended because the kernel driver usually looks for the firmware files when it is first loaded and no longer afterwards.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.11.6.11.5"></a>8.2.2.2. Wireless specific entries in <code
                      class="filename">/etc/network/interfaces</code></h4></div></div></div><a
              id="id-1.11.6.11.5.2"
              class="indexterm"></a><div
              class="para">
					<span
                class="emphasis"><em>ifupdown</em></span> is able to manage wireless interfaces but it needs the help of the <span
                class="pkg pkg">wpasupplicant</span> package which provides the required integration between <span
                class="emphasis"><em>ifupdown</em></span> and the <code
                class="command">wpa_supplicant</code> command used to configure the wireless interfaces (when using WPA/WPA2 encryption). The usual entry in <code
                class="filename">/etc/network/interfaces</code> needs to be extended with two supplementary parameters to specify the name of the wireless network (aka its SSID) and the <span
                class="emphasis"><em>Pre-Shared Key</em></span> (PSK).
				</div><div
              class="example"><a
                xmlns=""
                id="example.config-wireless"></a><p
                class="title"><strong>Exemple 8.3. DHCP configuration for a wireless interface</strong></p><div
                class="example-contents"><pre
                  class="programlisting">
auto wlp4s0
iface wlp4s0 inet dhcp
  wpa-ssid Falcot
  wpa-psk ccb290fd4fe6b22935cbae31449e050edd02ad44627b16ce0151668f5f53c01b
</pre></div></div><div
              class="para">
					The <code
                class="literal">wpa-psk</code> parameter can contain either the plain text passphrase or its hashed version generated with <code
                class="command">wpa_passphrase <em
                  class="replaceable">SSID</em> <em
                  class="replaceable">passphrase</em></code>. If you use an unencrypted wireless connection, then you should put a <code
                class="literal">wpa-key-mgmt NONE</code> and no <code
                class="literal">wpa-psk</code> entry. For more information about the possible configuration options, have a look at <code
                class="filename">/usr/share/doc/wpasupplicant/README.Debian.gz</code>.
				</div><div
              class="para">
					At this point, you should consider restricting the read permissions on <code
                class="filename">/etc/network/interfaces</code> to the root user only since the file contains a private key that not all users should have access to.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>HISTORY</em></span> WEP encryption</strong></p></div></div></div><a
                id="id-1.11.6.11.5.7.2"
                class="indexterm"></a><div
                class="para">
					Usage of the deprecated WEP encryption protocol is possible with the <span
                  class="pkg pkg">wireless-tools</span> package. See <code
                  class="filename">/usr/share/doc/wireless-tools/README.Debian</code> for instructions.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ppp-rtc"></a>8.2.3. Connexion PPP par modem téléphonique</h3></div></div></div><a
            id="id-1.11.6.12.2"
            class="indexterm"></a><a
            id="id-1.11.6.12.3"
            class="indexterm"></a><a
            id="id-1.11.6.12.4"
            class="indexterm"></a><a
            id="id-1.11.6.12.5"
            class="indexterm"></a><div
            class="para">
				Une connexion point à point (PPP) établit une connexion intermittente ; c'est donc la solution la plus souvent employée pour les connexions par modem téléphonique (sur le réseau téléphonique commuté RTC).
			</div><div
            class="para">
				Une connexion par modem téléphonique requiert un compte chez un fournisseur d'accès, comprenant numéro de téléphone, identifiant, mot de passe et, parfois, protocole d'authentification employé. On la configurera à l'aide de l'utilitaire <code
              class="command">pppconfig</code> du paquet Debian éponyme. Par défaut, il utilise la connexion <span
              class="foreignphrase"><em
                class="foreignphrase">provider</em></span> (fournisseur d'accès). En cas de doute sur le protocole d'authentification, choisissez <span
              class="emphasis"><em>PAP</em></span> : il est proposé par la majorité des fournisseurs d'accès.
			</div><a
            id="id-1.11.6.12.8"
            class="indexterm"></a><a
            id="id-1.11.6.12.9"
            class="indexterm"></a><div
            class="para">
				Après configuration, il est possible de se connecter par la commande <code
              class="command">pon</code> (à laquelle on fournira le nom de la connexion si la valeur par défaut — <span
              class="foreignphrase"><em
                class="foreignphrase">provider</em></span> — ne convient pas). On coupera la connexion par la commande <code
              class="command">poff</code>. Ces deux commandes peuvent être exécutées par l'utilisateur root ou par un autre utilisateur, à condition qu'il fasse partie du groupe <code
              class="literal">dip</code>.
			</div><a
            id="id-1.11.6.12.11"
            class="indexterm"></a><a
            id="id-1.11.6.12.12"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.adsl"></a>8.2.4. Connexion par modem ADSL</h3></div></div></div><a
            id="id-1.11.6.13.2"
            class="indexterm"></a><a
            id="id-1.11.6.13.3"
            class="indexterm"></a><a
            id="id-1.11.6.13.4"
            class="indexterm"></a><div
            class="para">
				Le terme générique de « modem ADSL » recouvre des périphériques aux fonctionnements très différents. Les modems les plus simples à employer avec Linux sont ceux qui disposent d'une interface Ethernet. Ceux-ci ont tendance à se répandre, les fournisseurs d'accès à Internet par ADSL prêtant (ou louant) de plus en plus souvent une « box » disposant d'interfaces Ethernet en plus (ou en remplacement) des interfaces USB. Selon le type de modem, la configuration nécessaire peut fortement varier.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pppoe"></a>8.2.4.1. Modem fonctionnant avec PPPOE</h4></div></div></div><a
              id="id-1.11.6.13.6.2"
              class="indexterm"></a><a
              id="id-1.11.6.13.6.3"
              class="indexterm"></a><div
              class="para">
					Certains modems Ethernet fonctionnent avec le protocole PPPOE (<span
                class="foreignphrase"><em
                  class="foreignphrase">Point-to-Point Protocol Over Ethernet</em></span>, ou protocole point à point sur Ethernet). L'utilitaire <code
                class="command">pppoeconf</code> (du paquet éponyme) configurera la connexion. Pour cela, il modifiera le fichier <code
                class="filename">/etc/ppp/peers/dsl-provider</code> avec les paramètres fournis et enregistrera les informations d'authentification dans les fichiers <code
                class="filename">/etc/ppp/pap-secrets</code> et <code
                class="filename">/etc/ppp/chap-secrets</code>. Il est recommandé d'accepter toutes les modifications qu'il propose.
				</div><div
              class="para">
					Cette configuration mise en place, on pourra démarrer la connexion ADSL par la commande <code
                class="command">pon dsl-provider</code> et la stopper avec <code
                class="command">poff dsl-provider</code>.
				</div><a
              id="id-1.11.6.13.6.6"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ASTUCE</em></span> Exécuter <code
                          class="command">ppp</code> au démarrage de l'ordinateur</strong></p></div></div></div><a
                id="id-1.11.6.13.6.7.2"
                class="indexterm"></a><a
                id="id-1.11.6.13.6.7.3"
                class="indexterm"></a><div
                class="para">
					Les connexions PPP par ADSL sont par définition intermittentes. Comme elles ne sont pas facturées à la durée, la tentation est grande de les garder toujours ouvertes ; un moyen simple est de les faire démarrer par le processus <code
                  class="command">init</code>.
				</div><div
                class="para">
					With systemd, adding an automatically restarting task for the ADSL connection is a simple matter of creating a “unit file” such as <code
                  class="filename">/etc/systemd/system/adsl-connection.service</code>, with contents such as the following:
				</div><pre
                class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div
                class="para">
					Une fois ce nouveau service défini, il doit être activé avec <code
                  class="command">systemctl enable adsl-connection</code> puis démarré avec <code
                  class="command">systemctl start adsl-connection</code>. Ainsi, en plus de se relancer après chaque interruption, il s'activera également à chaque démarrage.
				</div><div
                class="para">
					Pour les systèmes qui n'utilisent pas <code
                  class="command">systemd</code> (y compris ceux exploitant <span
                  class="distribution distribution">Wheezy</span> et les versions antérieures de Debian), le système d'initialisation SystemV fonctionne différemment. Sur ces systèmes, il suffit d'ajouter la ligne ci-dessous au fichier <code
                  class="filename">/etc/inittab</code> ; toute interruption provoquera alors immédiatement l'invocation d'une nouvelle connexion par <code
                  class="command">init</code>.
				</div><pre
                class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider</pre><div
                class="para">
					Pour les connexions ADSL qui subissent une déconnexion quotidienne, cette méthode permet de réduire la durée de la coupure.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-pptp"></a>8.2.4.2. Modem fonctionnant avec PPTP</h4></div></div></div><a
              id="id-1.11.6.13.7.2"
              class="indexterm"></a><div
              class="para">
					Le protocole PPTP (<span
                class="foreignphrase"><em
                  class="foreignphrase">Point-to-Point Tunneling Protocol</em></span>, ou protocole point à point par tunnel) est une invention de Microsoft. Déployé aux débuts de l'ADSL, il a rapidement été remplacé par PPPOE. Si ce protocole vous est imposé, voyez la <a
                class="xref"
                href="sect.virtual-private-network.html#sect.pptp">Section 10.2.4, « PPTP »</a>.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.adsl-dhcp"></a>8.2.4.3. Modem fonctionnant avec DHCP</h4></div></div></div><div
              class="para">
					Lorsque le modem est connecté à l'ordinateur par un câble Ethernet (croisé), il fait le plus souvent office de serveur DHCP (c'est parfois une option de configuration à activer sur le modem). Il suffit alors à l'ordinateur de configurer une connexion réseau par DHCP ; le modem s'inscrit automatiquement comme passerelle par défaut et prend en charge le travail de routage (c'est-à-dire qu'il gère le trafic réseau entre l'ordinateur et Internet).
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>B.A.-BA</em></span> Câble croisé pour une connexion Ethernet directe</strong></p></div></div></div><a
                id="id-1.11.6.13.8.3.2"
                class="indexterm"></a><div
                class="para">
					Les cartes réseau des ordinateurs s'attendent à recevoir les données sur un brin particulier du câble et les envoyer sur un autre. Lorsqu'on relie un ordinateur à un réseau local, on branche habituellement un câble (droit ou décroisé) entre la carte réseau et un répétiteur ou un commutateur, qui est prévu pour. Cependant, si l'on souhaite relier deux ordinateurs directement (c'est-à-dire sans répétiteur/commutateur intermédiaire), il faut acheminer le signal émis par une carte vers le brin de réception de l'autre carte et réciproquement ; c'est là l'objet (et la nécessité) d'un câble croisé.
				</div><div
                class="para">
					Il est à noter que cette distinction n'est plus très utile ; les cartes réseau modernes sont capables de détecter automatiquement le type de câble présent et de s'adapter en conséquence, et il n'est pas rare que les deux types de câbles fonctionnent à l'identique dans un environnement donné.
				</div></div><div
              class="para">
					La plupart des « routeurs ADSL » du marché fonctionnent de cette manière, de même que la plupart des modems ADSL mis à disposition par les fournisseurs d'accès à Internet.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.roaming-network-config"></a>8.2.5. Configuration réseau itinérante</h3></div></div></div><a
            id="id-1.11.6.14.2"
            class="indexterm"></a><a
            id="id-1.11.6.14.3"
            class="indexterm"></a><div
            class="para">
				De nombreux ingénieurs de Falcot disposent d'un ordinateur portable professionnel qu'ils emploient aussi bien chez eux qu'au travail. Bien entendu, la configuration réseau à employer n'est pas la même selon l'endroit. À la maison, c'est un réseau Wi-Fi (protégé par une clé WPA) et au travail, c'est un réseau filaire offrant plus de sécurité et plus de débit.
			</div><div
            class="para">
				Pour éviter de devoir manuellement activer ou désactiver les interfaces réseau correspondantes, les administrateurs ont installé le paquet <span
              class="pkg pkg">network-manager</span> sur ces portables. Ce logiciel permet à l'utilisateur de basculer facilement d'un réseau à un autre grâce à une petite icône affichée dans la zone de notification des bureaux graphiques. Un clic sur l'icône affiche une liste des réseaux disponibles (filaires et Wi-Fi), il ne reste plus qu'à choisir le réseau de son choix. Le logiciel garde en mémoire les réseaux sur lesquels l'utilisateur s'est déjà connecté et bascule automatiquement sur le meilleur réseau disponible lorsque la connexion actuelle vient à disparaître.
			</div><div
            class="para">
				Pour réaliser cela, le logiciel est structuré en deux parties : un démon tournant en root effectue les opérations d'activation et de configuration des interfaces réseau, et une interface utilisateur pilote ce démon. La gestion des droits d'accès est confiée à PolicyKit ; la configuration proposée par Debian spécifie que seuls les membres du groupe <code
              class="literal">netdev</code> ont le droit de créer ou modifier les connexions de Network Manager.
			</div><div
            class="para">
				Network Manager sait désormais gérer des connexions de divers types (DHCP, configuration manuelle, réseau local seulement), mais seulement si la configuration se fait par son biais. C'est pourquoi il ignorera systématiquement toutes les interfaces réseau dont la configuration dans <code
              class="filename">/etc/network/interfaces</code> ne lui convient pas. Le plus simple est encore d'enlever toute configuration pour chaque interface qui doit être gérée par Network Manager. En effet, le logiciel n'indiquera pas pourquoi il n'affiche aucune connexion réseau disponible.
			</div><div
            class="para">
				Il est intéressant de noter que ce logiciel est installé par défaut lorsque la tâche « Environnement bureautique » est sélectionnée au cours de l'installation initiale.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="basic-configuration.html"><strong>Précédent</strong>Chapitre 8. Configuration de base : réseau, compt...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.hostname-name-service.html"><strong>Suivant</strong>8.3. Attribution et résolution de noms</a></li></ul></body></html>
