<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.7. DHCP</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="Réseau, Passerelle, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="network-infrastructure.html"
        title="Chapitre 10. Infrastructure réseau" /><link
        rel="prev"
        href="sect.domain-name-servers.html"
        title="10.6. Serveur de noms (DNS)" /><link
        rel="next"
        href="sect.network-diagnosis-tools.html"
        title="10.8. Outils de diagnostic réseau" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/sect.dhcp.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.domain-name-servers.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.network-diagnosis-tools.html"><strong>Suivant</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.dhcp"></a>10.7. DHCP</h2></div></div></div><div
          class="para">
			DHCP (<span
            class="foreignphrase"><em
              class="foreignphrase">Dynamic Host Configuration Protocol</em></span>, ou protocole de configuration dynamique des hôtes) est un moyen de rapatrier automatiquement sa configuration pour une machine qui vient de démarrer et souhaite configurer son interface réseau. De cette manière, on peut centraliser la gestion des configurations réseau et toutes les machines bureautiques pourront recevoir des réglages identiques.
		</div><a
          id="id-1.13.10.3"
          class="indexterm"></a><a
          id="id-1.13.10.4"
          class="indexterm"></a><a
          id="id-1.13.10.5"
          class="indexterm"></a><div
          class="para">
			Un serveur DHCP fournit de nombreux paramètres réseau et notamment une adresse IP et le réseau d'appartenance de la machine. Mais il peut aussi indiquer d'autres informations, telles que les serveurs DNS, WINS et NTP.
		</div><div
          class="para">
			L'<span
            class="foreignphrase"><em
              class="foreignphrase">Internet Software Consortium</em></span>, qui développe <code
            class="command">bind</code>, s'occupe également du serveur DHCP. Le paquet Debian correspondant est <span
            class="pkg pkg">isc-dhcp-server</span>.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dhcp-config"></a>10.7.1. Configuration</h3></div></div></div><div
            class="para">
				Les premiers éléments à modifier dans le fichier de configuration du serveur DHCP, <code
              class="filename">/etc/dhcp/dhcpd.conf</code>, sont le nom de domaine et les serveurs DNS. Il faut aussi activer (en la décommentant) l'option <code
              class="literal">authoritative</code> si ce serveur est le seul sur le réseau local (tel que défini par la limite de propagation du <span
              class="foreignphrase"><em
                class="foreignphrase">broadcast</em></span>, mécanisme employé pour joindre le serveur DHCP). On créera aussi une section <code
              class="literal">subnet</code> décrivant le réseau local et les informations de configuration diffusées. L'exemple ci-dessous convient pour le réseau local <code
              class="literal">192.168.0.0/24</code>, qui dispose d'un routeur (<code
              class="literal">192.168.0.1</code>) faisant office de passerelle externe. Les adresses IP disponibles sont comprises entre <code
              class="literal">192.168.0.128</code> et <code
              class="literal">192.168.0.254</code>.
			</div><div
            class="example"><a
              xmlns=""
              id="example.dhcp-dhcpd.conf"></a><p
              class="title"><strong>Exemple 10.15. Extrait du fichier <code
                  class="filename">/etc/dhcp/dhcpd.conf</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
#
# Sample configuration file for ISC dhcpd for Debian
#

# The ddns-updates-style parameter controls whether or not the server will
# attempt to do a DNS update when a lease is confirmed. We default to the
# behavior of the version 2 packages ('none', since DHCP v2 didn't
# have support for DDNS.)
ddns-update-style interim;

# option definitions common to all supported networks...
option domain-name "interne.falcot.com";
option domain-name-servers ns.interne.falcot.com;

default-lease-time 600;
max-lease-time 7200;

# If this DHCP server is the official DHCP server for the local
# network, the authoritative directive should be uncommented.
authoritative;

# Use this to send dhcp log messages to a different log file (you also
# have to hack syslog.conf to complete the redirection).
log-facility local7;

# My subnet
subnet 192.168.0.0 netmask 255.255.255.0 {
    option routers 192.168.0.1;
    option broadcast-address 192.168.0.255;
    range 192.168.0.128 192.168.0.254;
    ddns-domainname "interne.falcot.com";
}
</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dhcp-dns"></a>10.7.2. DHCP et DNS</h3></div></div></div><a
            id="id-1.13.10.9.2"
            class="indexterm"></a><div
            class="para">
				Une fonctionnalité appréciée est l'enregistrement automatique des clients DHCP dans la zone DNS de sorte que chaque machine ait un nom significatif (et pas automatique comme <code
              class="literal">machine-192-168-0-131.interne.falcot.com</code>). Pour exploiter cette possibilité, il faut autoriser le serveur DHCP à mettre à jour la zone DNS <code
              class="literal">interne.falcot.com</code> et configurer celui-ci pour qu'il s'en charge.
			</div><div
            class="para">
				Dans le cas de <code
              class="command">bind</code>, on ajoutera la directive <code
              class="literal">allow-update</code> aux deux zones que le serveur DHCP devra modifier (celle du domaine <code
              class="literal">interne.falcot.com</code> et celle de la résolution inverse). Cette directive donne la liste des adresses autorisées à effectuer la mise à jour ; on y consignera donc les adresses possibles du serveur DHCP (adresses IP locales et publiques le cas échéant).
			</div><pre
            class="programlisting">
allow-update { 127.0.0.1 192.168.0.1 212.94.201.10 !any };
</pre><div
            class="para">
				Attention ! Une zone modifiable sera changée par <code
              class="command">bind</code>, qui va donc réécrire régulièrement ses fichiers de configuration. Cette procédure automatique produisant des fichiers moins lisibles que les productions manuelles, les administrateurs de Falcot gèrent le sous-domaine <code
              class="literal">interne.falcot.com</code> à l'aide d'un serveur DNS délégué. Le fichier de la zone <code
              class="literal">falcot.com</code> reste ainsi entièrement sous leur contrôle.
			</div><div
            class="para">
				L'exemple de fichier de configuration de serveur DHCP de la section précédente comporte déjà les directives nécessaires à l'activation de la mise à jour du DNS : il s'agit des lignes <code
              class="literal">ddns-update-style interim ;</code> et <code
              class="literal">ddns-domain-name "interne.falcot.com";</code> dans le bloc décrivant le réseau.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.domain-name-servers.html"><strong>Précédent</strong>10.6. Serveur de noms (DNS)</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.network-diagnosis-tools.html"><strong>Suivant</strong>10.8. Outils de diagnostic réseau</a></li></ul></body></html>
