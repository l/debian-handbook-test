<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">Chapitre 6. Maintenance et mise à jour : les outils APT</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fr-FR-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="up"
        href="index.html"
        title="Le cahier de l'administrateur Debian" /><link
        rel="prev"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. Cohabitation avec d'autres systèmes de paquetages" /><link
        rel="next"
        href="sect.apt-get.html"
        title="6.2. Commandes aptitude, apt-get et apt" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fr-FR/stable/apt.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Précédent</strong></a></li><li
          class="home">Le cahier de l'administrateur Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>Suivant</strong></a></li></ul><div
        xml:lang="fr-FR"
        class="chapter"
        lang="fr-FR"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  xmlns=""
                  id="apt"></a>Chapitre 6. Maintenance et mise à jour : les outils APT</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="apt.html#sect.apt-sources.list">6.1. Renseigner le fichier <code
                    class="filename">sources.list</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.6">6.1.1. Syntaxe</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.7">6.1.2. Dépôts pour les utilisateurs de <span
                        class="distribution distribution">Stable</span></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.8">6.1.3. Dépôts pour les utilisateurs de <span
                        class="distribution distribution">Testing</span>/<span
                        class="distribution distribution">Unstable</span></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.9">6.1.4. Ressources non officielles : <code
                        class="literal">mentors.debian.net</code></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.10">6.1.5. Mandataire avec cache (<span
                        class="foreignphrase"><em
                          class="foreignphrase">proxy-cache</em></span>) pour paquets Debian</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-get.html">6.2. Commandes <code
                    class="command">aptitude</code>, <code
                    class="command">apt-get</code> et <code
                    class="command">apt</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.7">6.2.1. Initialisation</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.8">6.2.2. Installation et suppression</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-upgrade">6.2.3. Mise à jour</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-config">6.2.4. Options de configuration</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt.priorities">6.2.5. Gérer les priorités associées aux paquets</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-mix-distros">6.2.6. Travailler avec plusieurs distributions</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.automatic-tracking">6.2.7. Suivi des paquets installés automatiquement</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-cache.html">6.3. Commande <code
                    class="command">apt-cache</code></a></span></dt><dt><span
                class="section"><a
                  href="sect.apt-frontends.html">6.4. Frontaux : <code
                    class="command">aptitude</code>, <code
                    class="command">synaptic</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#sect.aptitude">6.4.1. <code
                        class="command">aptitude</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#id-1.9.13.7">6.4.2. <code
                        class="command">synaptic</code></a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.package-authentication.html">6.5. Vérification d'authenticité des paquets</a></span></dt><dt><span
                class="section"><a
                  href="sect.dist-upgrade.html">6.6. Mise à jour d'une distribution à la suivante</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.3">6.6.1. Démarche à suivre</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.4">6.6.2. Gérer les problèmes consécutifs à une mise à jour</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.regular-upgrades.html">6.7. Maintenir un système à jour</a></span></dt><dt><span
                class="section"><a
                  href="sect.automatic-upgrades.html">6.8. Mise à jour automatique</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.5">6.8.1. Configuration de <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.6">6.8.2. Configuration d'APT</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.7">6.8.3. Configuration de <code
                        class="command">debconf</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.8">6.8.4. Gestion des interactions en ligne de commande</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.9">6.8.5. La combinaison miracle</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.searching-packages.html">6.9. Recherche de paquets</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Ce qui rend Debian si populaire auprès des administrateurs, c'est la facilité avec laquelle il est possible d'y installer des logiciels et de mettre à jour le système complet. Cet avantage unique est dû en grande partie au programme <span
              class="emphasis"><em>APT</em></span>, outil dont les administrateurs de Falcot SA se sont empressés d'étudier les possibilités.
	</div></div><div
          class="para">
		<a
            id="id-1.9.4.1"
            class="indexterm"></a> <a
            id="id-1.9.4.2"
            class="indexterm"></a> <span
            class="emphasis"><em>APT</em></span> est l'abréviation de <span
            class="foreignphrase"><em
              class="foreignphrase">Advanced Package Tool</em></span> (outil avancé pour les paquets). Ce que ce programme a d'« avancé », c'est la manière d'aborder la problématique des paquets. Il ne se contente pas de les évaluer un par un, mais les considère dans leur ensemble et réalise la meilleure combinaison possible de paquets en fonction de tout ce qui est disponible et compatible (au sens des dépendances).
	</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>VOCABULAIRE</em></span> Source de paquets et paquet source</strong></p></div></div></div><div
            class="para">
		Le terme <span
              class="emphasis"><em>source</em></span> peut porter à confusion. Il ne faut pas confondre un paquet source — paquet contenant le code source d'un programme — et une source de paquets — emplacement (site web, serveur FTP, CD-Rom, répertoire local, etc.) contenant des paquets.
	</div></div><div
          class="para">
		APT a besoin qu'on lui fournisse une « liste de sources de paquets » : c'est le fichier <code
            class="filename">/etc/apt/sources.list</code> qui décrira les différents emplacements (ou « sources ») publiant des paquets Debian. APT devra ensuite rapatrier la liste des paquets publiés par chacune de ces sources, ainsi que leurs en-têtes. Il réalise cette opération en téléchargeant les fichiers <code
            class="filename">Packages.{gz,bz2,xz}</code> (cas d'une source de paquets binaires) et <code
            class="filename">Sources.{gz,bz2,xz}</code> (cas d'une source de paquets sources) et en analysant leur contenu. Lorsque l'on dispose déjà d'une copie ancienne de ces fichiers, APT est capable de les mettre à jour en ne téléchargeant que les différences (voir encadré <a
            class="xref"
            href="sect.apt-get.html#sidebar.apt-pdiff"><span
              class="emphasis"><em>ASTUCE</em></span> Mise à jour incrémentale</a>).
	</div><a
          id="id-1.9.7"
          class="indexterm"></a><a
          id="id-1.9.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>B.A.-BA</em></span> Compression <code
                      class="command">gzip</code>, <code
                      class="command">bzip2</code>, <code
                      class="command">LZMA</code> et <code
                      class="command">XZ</code></strong></p></div></div></div><a
            id="id-1.9.9.2"
            class="indexterm"></a><a
            id="id-1.9.9.3"
            class="indexterm"></a><a
            id="id-1.9.9.4"
            class="indexterm"></a><a
            id="id-1.9.9.5"
            class="indexterm"></a><div
            class="para">
		Une extension <code
              class="filename">.gz</code> dénote un fichier compressé avec l'utilitaire <code
              class="command">gzip</code>, qui est l'utilitaire Unix traditionnel pour compresser les fichiers, rapide et efficace. De nouveaux outils, plus récents, obtiennent de meilleurs taux de compression mais nécessitent plus de ressources (temps de calcul et mémoire) pour comprimer ou décomprimer un fichier. Par ordre d'apparition, citons <code
              class="command">bzip2</code> (qui produit des fichiers d'extension <code
              class="filename">.bz2</code>), <code
              class="command">LZMA</code> (qui produit des <code
              class="filename">.lzma</code>) et <code
              class="command">xz</code> (qui produit des <code
              class="filename">.xz</code>).
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    xmlns=""
                    id="sect.apt-sources.list"></a>6.1. Renseigner le fichier <code
                    class="filename">sources.list</code></h2></div></div></div><a
            id="id-1.9.10.2"
            class="indexterm"></a><a
            id="id-1.9.10.3"
            class="indexterm"></a><a
            id="id-1.9.10.4"
            class="indexterm"></a><a
            id="id-1.9.10.5"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.6"></a>6.1.1. Syntaxe</h3></div></div></div><div
              class="para">
				Le fichier <code
                class="filename">/etc/apt/sources.list</code> contient sur chaque ligne active une description de source, qui se décompose en 3 parties séparées par des blancs.
			</div><div
              class="para">
				Le premier champ indique le type de la source :
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						« <code
                      class="literal">deb</code> » pour des paquets binaires ;
					</div></li><li
                  class="listitem"><div
                    class="para">
						« <code
                      class="literal">deb-src</code> » pour des paquets sources.
					</div></li></ul></div><div
              class="para">
				Le deuxième champ indique l'URL de base de la source (combinée aux noms de fichier présents dans les fichiers <code
                class="filename">Packages.gz</code>, elle doit donner une URL complète valide) : il peut s'agir d'un miroir Debian ou de toute autre archive de paquets mise en place par des tierces personnes. L'URL peut débuter par <code
                class="literal">file://</code> pour indiquer une source locale située dans l'arborescence de fichiers du système, par <code
                class="literal">http://</code> pour indiquer une source accessible depuis un serveur web, ou par <code
                class="literal">ftp://</code> pour une source disponible sur un serveur FTP. On trouvera aussi <code
                class="literal">cdrom:</code> pour les installations à partir de CD-Rom/DVD-Rom/Blu-ray, mais moins fréquemment, les méthodes d'installation par le réseau étant de plus en plus répandues.
			</div><div
              class="para">
				La syntaxe du dernier champ dépend de la structure du dépôt. Dans les cas les plus simples, il s'agit juste d'indiquer le nom du sous-répertoire (terminé par une barre oblique) contenant la source désirée (cela sera souvent <code
                class="filename">./</code> s'il n'y a pas de sous-répertoires — les paquets sont alors directement à l'URL spécifiée). Mais le cas le plus courant concerne les dépôts structurés comme les miroirs Debian officiels, avec plusieurs distributions elles-mêmes subdivisées en composants. Dans ce cas, il faut indiquer la distribution choisie (soit par son « nom de code » — voir la liste dans l'encadré <a
                class="xref"
                href="sect.foundation-documents.html#sidebar.bruce-perens"><span
                  class="emphasis"><em>COMMUNAUTÉ</em></span> Bruce Perens, un leader chahuté</a> — soit par sa « suite » — <code
                class="literal">stable</code>, <code
                class="literal">testing</code>, <code
                class="literal">unstable</code>), puis les composants ou sections à activer (sur un miroir Debian standard, ils seront à choisir parmi <code
                class="literal">main</code>, <code
                class="literal">contrib</code> et <code
                class="literal">non-free</code>).
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.sections"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>VOCABULAIRE</em></span> Les archives <code
                          class="literal">main</code>, <code
                          class="literal">contrib</code> et <code
                          class="literal">non-free</code></strong></p></div></div></div><a
                id="id-1.9.10.6.7.2"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.3"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.4"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.5"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.6"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.7"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.8"
                class="indexterm"></a><div
                class="para">
				Debian prévoit trois sections pour différencier les paquets selon les licences prévues par les auteurs des programmes respectifs. <code
                  class="literal">Main</code> (archive principale) rassemble tous les paquets répondant pleinement aux principes du logiciel libre selon Debian.
			</div><div
                class="para">
				L'archive <code
                  class="literal">non-free</code> (non libre), spéciale, contient des logiciels ne répondant pas (totalement) à ces principes mais néanmoins distribuables librement. Cette archive, qui ne fait pas officiellement partie de Debian, est un service rendu aux utilisateurs qui pourraient avoir besoin de ces logiciels — mais Debian recommande toujours d'accorder la préférence aux logiciels libres. L'existence de cette section gêne considérablement Richard M. Stallman et empêche la Free Software Foundation de recommander l'usage de Debian.
			</div><div
                class="para">
				<code
                  class="literal">Contrib</code> (contributions) est un stock de logiciels libres ne fonctionnant pas sans certains éléments non libres. Il peut s'agir de programmes dépendant de logiciels de la section <code
                  class="literal">non-free</code> ou de fichiers non libres tels que des ROM de jeux, des BIOS de consoles, etc. On y trouve encore des logiciels libres dont la compilation nécessite des éléments propriétaires. C'était au début le cas de la suite bureautique OpenOffice.org, qui avait besoin d'un environnement Java propriétaire.
			</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ASTUCE</em></span> Fichiers <code
                          class="filename">/etc/apt/sources.list.d/*.list</code></strong></p></div></div></div><div
                class="para">
				Si de nombreuses sources de paquets sont référencées, il peut être utile de les séparer en plusieurs fichiers, chaque fragment étant stocké dans un <code
                  class="filename">/etc/apt/sources.list.d/<em
                    class="replaceable">fichier</em>.list</code> (voir encadré <a
                  class="xref"
                  href="sect.apt-get.html#sidebar.directory.d"><span
                    class="emphasis"><em>B.A.-BA</em></span> Répertoire en <code
                    class="filename">.d</code></a>).
			</div></div><a
              id="id-1.9.10.6.9"
              class="indexterm"></a><div
              class="para">
				Les entrées <code
                class="literal">cdrom</code> décrivent les CD/DVD-Rom Debian dont vous disposez. Contrairement aux autres entrées, un CD-Rom n'est pas disponible en permanence puisqu'il faut l'insérer dans le lecteur et qu'un seul disque peut être lu à la fois — ces sources sont donc gérées un peu différemment. On ajoutera ces entrées à l'aide du petit programme <code
                class="command">apt-cdrom</code>, habituellement invoqué avec le paramètre <code
                class="literal">add</code>. Ce dernier demande alors d'insérer le disque dans le lecteur et parcourt son contenu à la recherche de fichiers <code
                class="filename">Packages</code>, qu'il utilisera pour mettre à jour sa base de données de paquets disponibles (opération habituellement réalisée par la commande <code
                class="command">apt update</code>). Dès lors, APT pourra vous demander d'insérer le disque en question s'il a besoin de l'un de ses paquets.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.7"></a>6.1.2. Dépôts pour les utilisateurs de <span
                      class="distribution distribution">Stable</span></h3></div></div></div><div
              class="para">
				Voici le contenu standard du fichier <code
                class="filename">sources.list</code> pour un système fonctionnant avec la version <span
                class="distribution distribution">Stable</span> de Debian :
			</div><div
              class="example"><a
                xmlns=""
                id="example.stable-sources-list"></a><p
                class="title"><strong>Exemple 6.1. Fichier <code
                    class="filename">/etc/apt/sources.list</code> pour les utilisateurs de Debian Stable</strong></p><div
                class="example-contents"><pre
                  class="programlisting"># Mises à jour de sécurité
deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free

## Miroir Debian

# Dépôt de base
deb http://ftp.debian.org/debian jessie main contrib non-free
deb-src http://ftp.debian.org/debian jessie main contrib non-free

# Mises à jour pour stable
deb http://ftp.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.debian.org/debian jessie-updates main contrib non-free

# Rétroportages vers stable
deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb-src http://ftp.debian.org/debian jessie-backports main contrib non-free</pre></div></div><div
              class="para">
				Ce fichier liste toutes les sources de paquets associées à la version <span
                class="distribution distribution">Jessie</span> de Debian (la version <span
                class="distribution distribution">Stable</span> à l'heure où ces lignes sont écrites). Nous avons pris le parti de nommer <span
                class="distribution distribution">jessie</span> explicitement plutôt que d'utiliser son alias « stable » (<code
                class="literal">stable</code>, <code
                class="literal">stable-updates</code>, <code
                class="literal">stable-backports</code>) pour éviter que le système change spontanément et hors de toute action de notre part lors de la prochaine publication d'une version stable.
			</div><div
              class="para">
				La plupart des paquets vont provenir du « dépôt de base », qui contient tous les paquets mais n'est mis à jour que rarement (environ une fois tous les deux mois pour les mises à jour de stable). Les autres dépôts sont partiels (ils ne contiennent pas tous les paquets) mais contiennent des mises à jour de paquets qu'APT est capable d'installer. Les sections suivantes détaillent les principes régissant chacun de ces dépôts.
			</div><div
              class="para">
				Il est à noter que lorsque la version souhaitée d'un paquet est disponible sur plusieurs dépôts, le paquet sera téléchargé sur le premier de ces dépôts mentionnés dans le fichier <code
                class="filename">sources.list</code>. C'est pour cette raison que l'on place généralement les sources non officielles à la fin du fichier.
			</div><div
              class="para">
				Notons au passage que la plupart de ce que cette section mentionne à propos de <span
                class="distribution distribution">Stable</span> s'applique également à <span
                class="distribution distribution">Oldstable</span>, puisque cette dernière distribution est simplement une version <span
                class="distribution distribution">Stable</span> plus ancienne qui reste maintenue en parallèle.
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.security-updates"></a>6.1.2.1. Mises à jour de sécurité</h4></div></div></div><a
                id="id-1.9.10.7.8.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.4"
                class="indexterm"></a><div
                class="para">
					Les mises à jour de sécurité ne sont pas hébergées sur le réseau de miroirs Debian habituel, mais sur <code
                  class="literal">security.debian.org</code> (qui est concentré sur un petit nombre de serveurs maintenus par l'équipe d'administrateurs systèmes de Debian). Cette archive contient des mises à jour de sécurité (préparées par l'équipe en charge de la sécurité dans Debian ou par les responsables de paquets) pour la distribution <span
                  class="distribution distribution">Stable</span>.
				</div><div
                class="para">
					Ce serveur peut aussi héberger des mises à jour de sécurité pour <span
                  class="distribution distribution">Testing</span>, mais cela arrive plus rarement ; ces mises à jour atteignent le plus souvent <span
                  class="distribution distribution">Testing</span> en suivant le cheminement régulier des paquets en provenance d'<span
                  class="distribution distribution">Unstable</span>.
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.stable-updates"></a>6.1.2.2. Mises à jour de la distribution stable</h4></div></div></div><a
                id="id-1.9.10.7.9.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.4"
                class="indexterm"></a><div
                class="para">
					Les mises à jour de la distribution stable ne sont pas nécessairement liées à des problèmes de sécurité, mais elles sont tout de même considérées comme suffisamment importantes pour être mises à disposition des utilisateurs avant la prochaine publication d'une version stable mise à jour <span
                  class="foreignphrase"><em
                    class="foreignphrase">(point release)</em></span>.
				</div><div
                class="para">
					Ce dépôt va typiquement contenir des correctifs pour des bogues critiques qui n'ont pas pu être corrigés avant la publication officielle de la version stable de Debian, ou qui ont été introduits par des mises à jour postérieures. En fonction de l'urgence ou non des différentes situations, il peut aussi contenir des mises à jour pour les paquets qui ont besoin d'évoluer au fil du temps... par exemple les règles de détection de spam de <span
                  class="pkg pkg">spamassassin</span>, la base de données de virus de <span
                  class="pkg pkg">clamav</span>, ou encore les données de changement d'heure de tous les fuseaux horaires (<span
                  class="pkg pkg">tzdata</span>).
				</div><div
                class="para">
					En pratique, il s'agit d'un sous-ensemble du dépôt <code
                  class="literal">proposed-updates</code>, sélectionné avec soin par les gestionnaires de publication de stable.
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.proposed-updates"></a>6.1.2.3. Mises à jour proposées</h4></div></div></div><a
                id="id-1.9.10.7.10.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.10.3"
                class="indexterm"></a><div
                class="para">
					Une fois publiée, la distribution <span
                  class="distribution distribution">Stable</span> n'est mise à jour que tous les 2 mois environ. Le dépôt <code
                  class="literal">proposed-updates</code> contient les mises à jour qui sont proposées à l'inclusion dans <span
                  class="distribution distribution">Stable</span>, sous la supervision des gestionnaires de publication stable.
				</div><div
                class="para">
					Les mises à jour de sécurité et les mises à jour de la distribution stable sont toujours incluses dans ce dépôt, mais pas uniquement ; les responsables de paquets ont aussi la possibilité de corriger des problèmes qui sont importants sans toutefois justifier une publication immédiate.
				</div><div
                class="para">
					Notons qu'il est possible d'activer ce dépôt si l'on veut tester ces corrections avant leur publication officielle. Nous employons ici l'alias <code
                  class="literal">jessie-proposed-updates</code> qui est à la fois plus explicite et plus cohérent puisque <code
                  class="literal">wheezy-proposed-updates</code> existe également (pour les mises à jour de <span
                  class="distribution distribution">Oldstable</span>) :
				</div><pre
                class="programlisting">deb http://ftp.debian.org/debian jessie-proposed-updates main contrib non-free
</pre></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.backports"></a>6.1.2.4. Rétroportages vers stable</h4></div></div></div><a
                id="id-1.9.10.7.11.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.4"
                class="indexterm"></a><div
                class="para">
					Le dépôt <code
                  class="literal">stable-backports</code> héberge des « rétroportages » de paquets <span
                  class="foreignphrase"><em
                    class="foreignphrase">(backports)</em></span>. Ce terme désigne un paquet d'un logiciel récent recompilé pour une distribution plus ancienne, généralement <span
                  class="distribution distribution">Stable</span>.
				</div><div
                class="para">
					Lorsque cette distribution commence à dater, de nombreux logiciels évoluent en amont et les nouvelles versions ne sont pas réintégrées dans la distribution <span
                  class="distribution distribution">Stable</span> courante (qui n'est modifiée que pour prendre en compte les problèmes les plus critiques, comme les problèmes de sécurité). Comme les distributions <span
                  class="distribution distribution">Testing</span> et <span
                  class="distribution distribution">Unstable</span> peuvent être plus risquées, des volontaires proposent parfois des recompilations des logiciels récents pour <span
                  class="distribution distribution">Stable</span>, ce qui permet de restreindre une éventuelle instabilité à un petit nombre, bien choisi, de paquets. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://backports.debian.org">http://backports.debian.org</a></div>
				</div><div
                class="para">
					Le dépôt <code
                  class="literal">stable-backports</code> est dorénavant disponible sur les miroirs Debian standards, mais les rétroportages pour <span
                  class="distribution distribution">Squeeze</span> sont toujours hébergés sur un serveur dédié (<code
                  class="literal">backports.debian.org</code>), et ont besoin de l'entrée suivante dans le fichier <code
                  class="filename">sources.list</code> :
				</div><a
                id="id-1.9.10.7.11.8"
                class="indexterm"></a><pre
                class="programlisting">deb http://backports.debian.org/debian-backports squeeze-backports main contrib non-free
</pre><div
                class="para">
					Les rétroportages de <code
                  class="literal">stable-backports</code> sont toujours issus de paquets disponibles dans <span
                  class="distribution distribution">Testing</span>, de manière à assurer que tous les rétroportages pourront être mis à jour vers la prochaine version stable lorsqu'elle sera disponible.
				</div><div
                class="para">
					Bien que ce dépôt fournisse de nouvelles versions des paquets, APT ne va les installer que sur instruction explicite (ou si un paquet concerné a déjà été mis à jour vers une version rétroportée précédente) :
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install <em
                      class="replaceable">package</em>/jessie-backports
</code></strong><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install -t jessie-backports <em
                      class="replaceable">package</em>
</code></strong></pre></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.8"></a>6.1.3. Dépôts pour les utilisateurs de <span
                      class="distribution distribution">Testing</span>/<span
                      class="distribution distribution">Unstable</span></h3></div></div></div><div
              class="para">
				Voici un fichier <code
                class="filename">sources.list</code> standard pour un système qui fonctionne avec la version <span
                class="distribution distribution">Testing</span> ou <span
                class="distribution distribution">Unstable</span> de Debian :
			</div><div
              class="example"><a
                xmlns=""
                id="example.testing-sources-list"></a><p
                class="title"><strong>Exemple 6.2. Fichier <code
                    class="filename">/etc/apt/sources.list</code> pour les utilisateurs de Debian <span
                    class="distribution distribution">Testing</span>/<span
                    class="distribution distribution">Unstable</span></strong></p><div
                class="example-contents"><pre
                  class="programlisting">
# Unstable
deb http://ftp.debian.org/debian unstable main contrib non-free
deb-src http://ftp.debian.org/debian unstable main contrib non-free

# Testing
deb http://ftp.debian.org/debian testing main contrib non-free
deb-src http://ftp.debian.org/debian testing main contrib non-free

# Stable
deb http://ftp.debian.org/debian stable main contrib non-free
deb-src http://ftp.debian.org/debian stable main contrib non-free

# Mises à jour de sécurité
deb http://security.debian.org/ stable/updates main contrib non-free
deb http://security.debian.org/ testing/updates main contrib non-free
deb-src http://security.debian.org/ stable/updates main contrib non-free
deb-src http://security.debian.org/ testing/updates main contrib non-free
</pre></div></div><div
              class="para">
				Avec ce fichier <code
                class="filename">sources.list</code>, APT installera des paquets depuis <span
                class="distribution distribution">Unstable</span>. Si cela n'est pas souhaitable, il convient d'utiliser l'option de configuration <code
                class="literal">APT::Default-Release</code> (voir <a
                class="xref"
                href="sect.apt-get.html#sect.apt-upgrade">Section 6.2.3, « Mise à jour »</a>) pour indiquer à APT de prendre les paquets dans une autre distribution (vraisemblablement <span
                class="distribution distribution">Testing</span> dans ce cas).
			</div><div
              class="para">
				Il est parfaitement raisonnable d'inclure tous ces dépôts même si un seul suffirait. Les utilisateurs de <span
                class="distribution distribution">Testing</span> apprécieront la possibilité de choisir manuellement un paquet corrigé dans <span
                class="distribution distribution">Unstable</span> lorsque sa version dans <span
                class="distribution distribution">Testing</span> est affectée par un bogue pénible. À l'opposé, les utilisateurs d'<span
                class="distribution distribution">Unstable</span> qui découvrent des régressions inattendues pourront rétrograder certains paquets vers la version présente dans <span
                class="distribution distribution">Testing</span>, qui devrait fonctionner.
			</div><div
              class="para">
				L'inclusion <span
                class="distribution distribution">Stable</span> est sujette à débat, mais elle donne souvent accès à des paquets qui ont été supprimés des versions de développement. Elle permet également de profiter des dernières mises à jour des paquets qui n'ont pas encore été modifiés depuis la publication de la dernière version stable.
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="id-1.9.10.8.7"></a>6.1.3.1. Le dépôt <span
                        class="distribution distribution">Experimental</span></h4></div></div></div><a
                id="id-1.9.10.8.7.2"
                class="indexterm"></a><div
                class="para">
					L'archive de paquets <span
                  class="distribution distribution">Experimental</span>, présente sur tous les miroirs Debian, contient des paquets qui n'ont pas encore leur place dans la version <span
                  class="distribution distribution">Unstable</span> pour cause de qualité insuffisante — ce sont fréquemment des versions de développement ou pré-versions (alpha, bêta, <span
                  class="foreignphrase"><em
                    class="foreignphrase">release candidate</em></span>...) des logiciels. Il arrive également qu'un paquet y soit envoyé après avoir subi des changements importants, potentiellement sources de problèmes. Le mainteneur cherche alors à débusquer ceux-ci avec l'aide des utilisateurs avancés capables de gérer les soucis importants. Après cette première phase, le paquet passe dans <span
                  class="distribution distribution">Unstable</span>, au public beaucoup plus vaste, et où il subira donc des tests de bien plus grande envergure.
				</div><div
                class="para">
					On réservera donc <span
                  class="distribution distribution">Experimental</span> aux utilisateurs qui n'ont pas peur de casser leur système puis de le réparer. Cette distribution peut quand même permettre de rapatrier ponctuellement un paquet que l'on tient à essayer ou utiliser. C'est d'ailleurs la logique standard que Debian lui associe, puisque son ajout dans le fichier <code
                  class="filename">sources.list</code> d'APT n'entraîne pas l'emploi systématique des paquets qui s'y trouvent. La ligne qu'il convient d'ajouter est la suivante :
				</div><div
                class="informalexample"><pre
                  class="programlisting">
deb http://ftp.fr.debian.org/debian experimental main contrib non-free
</pre></div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.9"></a>6.1.4. Ressources non officielles : <code
                      class="literal">mentors.debian.net</code></h3></div></div></div><a
              id="id-1.9.10.9.2"
              class="indexterm"></a><div
              class="para">
				Il y a de nombreuses sources non officielles de paquets Debian préparés par des utilisateurs avancés qui ont recompilé certains logiciels (Ubuntu a rendu cette pratique populaire avec leur service d'archive personnelle de paquets — <span
                class="foreignphrase"><em
                  class="foreignphrase">Personal Package Archive</em></span>), par des programmeurs qui rendent leur projet disponible pour tous, et même par des développeurs Debian qui proposent des pré-versions de leur paquet en ligne.
			</div><div
              class="para">
				Signalons également l'existence du site <code
                class="literal">mentors.debian.net</code>, qui regroupe des paquets sources réalisés par des prétendants au statut de développeur Debian officiel ou par des volontaires souhaitant créer des paquets Debian sans passer par ce processus d'intégration. Ces paquets sont donc fournis sans aucune garantie de qualité ; prenez garde à vous assurer de leur origine et intégrité, puis à bien les tester avant d'envisager de les déployer.
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>COMMUNAUTÉ</em></span> Les sites en <code
                          class="literal">debian.net</code></strong></p></div></div></div><a
                id="id-1.9.10.9.5.2"
                class="indexterm"></a><div
                class="para">
				Le domaine <span
                  class="emphasis"><em>debian.net</em></span> ne constitue pas une ressource officielle du projet Debian. Chaque développeur Debian a la possibilité d'employer ce nom de domaine pour l'usage de son choix. On y trouve des services officieux (parfois des sites personnels) hébergés sur une machine n'appartenant pas au projet et mis en place par des développeurs Debian, voire des prototypes attendant d'être migrés sur <span
                  class="emphasis"><em>debian.org</em></span>. Deux raisons peuvent expliquer que certains de ces prototypes restent en <span
                  class="emphasis"><em>debian.net</em></span> : soit personne ne souhaite faire l'effort nécessaire à sa transformation en service officiel (hébergé dans le domaine <span
                  class="emphasis"><em>debian.org</em></span> et avec une certaine garantie de maintenance), soit le service est trop controversé pour être officialisé.
			</div></div><div
              class="para">
				Installer un paquet revient à donner les droits administrateur à son concepteur, car il décide du contenu des scripts d'initialisation qui sont exécutés sous cette identité. Les paquets officiels Debian sont réalisés par des volontaires cooptés et examinés, capables de sceller leurs paquets pour en vérifier l'origine et l'intégrité.
			</div><div
              class="para">
				Mais méfiez-vous a priori d'un paquet dont l'origine est incertaine et qui n'est pas hébergé sur un des serveurs officiels du projet Debian : évaluez le degré de confiance que vous accordez au concepteur et vérifiez l'intégrité du paquet. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://mentors.debian.net/">http://mentors.debian.net/</a></div>
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.snapshot.debian.org"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>POUR ALLER PLUS LOIN</em></span> Anciennes versions des paquets : <code
                          class="literal">snapshot.debian.org</code></strong></p></div></div></div><a
                id="id-1.9.10.9.8.2"
                class="indexterm"></a><div
                class="para">
				Le service <code
                  class="literal">snapshot.debian.org</code> (officialisé en avril 2010) permet de « remonter dans le temps » et de retrouver une ancienne version d'un paquet. Il peut permettre de vérifier quelle version d'un paquet a introduit une régression, par exemple, et plus concrètement, de revenir à la version précédente en attendant que la régression soit corrigée. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://snapshot.debian.org/">http://snapshot.debian.org/</a></div>
			</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.10"></a>6.1.5. Mandataire avec cache (<span
                      class="foreignphrase"><em
                        class="foreignphrase">proxy-cache</em></span>) pour paquets Debian</h3></div></div></div><a
              id="id-1.9.10.10.2"
              class="indexterm"></a><a
              id="id-1.9.10.10.3"
              class="indexterm"></a><div
              class="para">
				Lorsqu'un réseau complet de machines est configuré pour télécharger les mêmes paquets mis à jour depuis le même serveur distant, tout administrateur sait qu'il serait utile d'utiliser un mandataire <span
                class="foreignphrase"><em
                  class="foreignphrase">(proxy)</em></span> configuré comme un cache (voir encadré <a
                class="xref"
                href="sect.apt-cache.html#sidebar.cache"><span
                  class="emphasis"><em>VOCABULAIRE</em></span> Cache</a>) pour limiter le trafic induit par les multiples téléchargements.
			</div><div
              class="para">
				APT peut être configuré pour utiliser un proxy « standard » (voir <a
                class="xref"
                href="sect.apt-get.html#sect.apt-config">Section 6.2.4, « Options de configuration »</a> pour la configuration d'APT, et <a
                class="xref"
                href="sect.http-ftp-proxy.html">Section 11.6, « Mandataire HTTP/FTP »</a> pour la configuration du proxy lui-même), mais l'écosystème Debian offre de meilleures options pour ce problème. Les logiciels présentés dans cette section sont dédiés à cette tâche et sont souvent plus efficaces qu'un proxy générique puisqu'ils peuvent tirer parti de la structure spécifique des dépôts APT (par exemple, ils peuvent savoir quand un fichier devient obsolète et ainsi ajuster la durée pendant laquelle ce fichier est conservé).
			</div><a
              id="id-1.9.10.10.6"
              class="indexterm"></a><a
              id="id-1.9.10.10.7"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">apt-cacher</span> et <span
                class="pkg pkg">apt-cacher-ng</span> fonctionnent comme des mandataires standards. Le fichier <code
                class="filename">sources.list</code> d'APT reste inchangé, mais APT est configuré pour utiliser ces logiciels comme mandataires lors des requêtes sortantes.
			</div><a
              id="id-1.9.10.10.9"
              class="indexterm"></a><div
              class="para">
				À l'opposé, <span
                class="pkg pkg">approx</span> se comporte comme un serveur HTTP qui servirait de miroir pour d'autres dépôts externes, rendus accessibles dans ses URL de plus haut niveau. La correspondance entre ces répertoires de premier niveau et les adresses distantes des dépôts est maintenue dans le fichier de configuration <code
                class="filename">/etc/approx/approx.conf</code> :
			</div><pre
              class="programlisting">
# &lt;name&gt; &lt;repository-base-url&gt;
debian   http://ftp.debian.org/debian
security http://security.debian.org
</pre><div
              class="para">
				Par défaut, <span
                class="pkg pkg">approx</span> fonctionne avec le port 9999 via inetd (voir <a
                class="xref"
                href="sect.inetd.html">Section 9.6, « Le super-serveur <code
                  class="command">inetd</code> »</a>) et nécessite que les utilisateurs ajustent leur fichier <code
                class="filename">sources.list</code> pour qu'il pointe vers le serveur <span
                class="emphasis"><em>approx</em></span> :
			</div><pre
              class="programlisting"># Fichier sources.list utilisant un serveur approx
deb http://apt.falcot.com:9999/security jessie/updates main contrib non-free
deb http://apt.falcot.com:9999/debian jessie main contrib non-free</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>Précédent</strong>5.5. Cohabitation avec d'autres systèmes de paque...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Niveau supérieur</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Sommaire</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>Suivant</strong>6.2. Commandes aptitude, apt-get et apt</a></li></ul></body></html>
