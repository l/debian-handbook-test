<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.3. Hantera behörigheter</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-sv-SE-1.0-1" /><meta
        name="keywords"
        content="System boot, Initskript, SSH, Telnet, Rättigheter, Behörigheter, Övervakning, Inetd, Cron, Säkerhetskopia, Inpluggninsbara, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="Handbok för Debianadministratören" /><link
        rel="up"
        href="unix-services.html"
        title="Kapitel 9. Unixtjänster" /><link
        rel="prev"
        href="sect.remote-login.html"
        title="9.2. Fjärrinloggning" /><link
        rel="next"
        href="sect.administration-interfaces.html"
        title="9.4. Adminstrationsgränssnitt" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/sv-SE/stable/sect.rights-management.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>Föregående</strong></a></li><li
          class="home">Handbok för Debianadministratören</li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>Nästa</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.rights-management"></a>9.3. Hantera behörigheter</h2></div></div></div><div
          class="para">
			Linux är definitivt ett fleranvändarsystem, så det är nödvändigt att tilhandahålla ett behörighetssystem för att kunna kontroller den mängd tillåtna åtgärder på filer och mappar, vilket omfattar att systemresurser och enheter (i ett Unix-system representeras en enhet av en fil eller mapp). Denna princip är vanlig för alla Unixsystem, men det är alltid nyttig med en påminnelse, speciellt då det finns några intressanta och relativt okända avancerade användarfall.
		</div><a
          id="id-1.12.6.3"
          class="indexterm"></a><a
          id="id-1.12.6.4"
          class="indexterm"></a><a
          id="id-1.12.6.5"
          class="indexterm"></a><a
          id="id-1.12.6.6"
          class="indexterm"></a><a
          id="id-1.12.6.7"
          class="indexterm"></a><a
          id="id-1.12.6.8"
          class="indexterm"></a><div
          class="para">
			Varje fil eller katalog har specifika rättigheter för de tre användarkategorierna:
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					dess ägare (symboliserad av <code
                  class="literal">u</code> som “user”);
				</div></li><li
              class="listitem"><div
                class="para">
					dess ägargrupp (symboliserad av <code
                  class="literal">g</code> som i “group”), representerade alla medlemmar i gruppen;
				</div></li><li
              class="listitem"><div
                class="para">
					övriga (symboliserad av <code
                  class="literal">o</code> som i “other”).
				</div></li></ul></div><div
          class="para">
			Tre typer av rättigheter kombineras:
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					läs (symboliserad av <code
                  class="literal">r</code> som i “read”);
				</div></li><li
              class="listitem"><div
                class="para">
					skrivning (eller ändring, symboliserat av <code
                  class="literal">w</code> som i ”write”);
				</div></li><li
              class="listitem"><div
                class="para">
					exekvera (symboliserad av <code
                  class="literal">x</code> som i ”eXecute”).
				</div></li></ul></div><a
          id="id-1.12.6.13"
          class="indexterm"></a><a
          id="id-1.12.6.14"
          class="indexterm"></a><a
          id="id-1.12.6.15"
          class="indexterm"></a><a
          id="id-1.12.6.16"
          class="indexterm"></a><div
          class="para">
			Då det gäller filer är det lätt att förstå dessa rättigheter: läsåtkomst tilåter läsning av innehållet (inklusive kopiering), skrivrättighet tillåter att ändra den, och körrättighet tillåter dig att köra den (vilket endast fungerar om det är ett program).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>SÄKERET</em></span> <code
                      class="literal">setuid</code> och <code
                      class="literal">setgid</code></strong></p></div></div></div><div
            class="para">
			Två speciella rättigheter är relevanta vad gäller exekverbara filer: <code
              class="literal">setuid</code> och <code
              class="literal">setgid</code> (symboliserad av bokstaven ”s”). Observera att v vanligen pratar om ”bit” eftersom var och en av dessa booleska värden kan representeras av 0 eller 1. Dessa två rättigheter låter alla användare exekvera programmet med samma rättigheter som ägaren eller gruppen. Denna mekanism ger åtkomst till egenskaper som kräver utökade rättigheter.
		</div><a
            id="id-1.12.6.18.3"
            class="indexterm"></a><a
            id="id-1.12.6.18.4"
            class="indexterm"></a><div
            class="para">
			Eftersom ett <code
              class="literal">setuid</code>-rootprogram systematiskt körs med superanvändarens identitet är det väldigt viktigt att försäkra sig om att det är säkert och pålitligt. En användare som skulle kunna få det att köra ett kommando av eget val skulle då kunna låtsas vara root-användare och få all rättigheter i systemet.
		</div></div><div
          class="para">
			En katalog hanteras annorlunda. Läsrättigheter ger rätt visa listan av innehåll (filer och kataloger), skrivrättighet möjligör skapandet eller borttagandet av filer, och exekveringsrättighet ger möjlighet att passera genom den (speciellt för att gå där med kommando <code
            class="command">cd</code>). Att kunna passera genom en katalog utan att kunna läsa den ger rättigheter till att komma åt poster däri som är kända till namn, men det går inte att finna dem om du inte vet om deras existens med deras exakta namn.
		</div><div
          class="sidebar"><a
            xmlns=""
            id="sidebar.setgid-dir"></a><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>SÄKERHET</em></span> <code
                      class="literal">setgid</code>-katalog och <span
                      class="emphasis"><em>sticky bit</em></span></strong></p></div></div></div><a
            id="id-1.12.6.20.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="literal">setgid</code> gäller också på kataloger. Varje nytt objekt i en sådan katalog kommer automatiskt tilldelas samma grupp som ägaren av den överordnade katalogen. Istället för att ärva skaparens huvudgrupp, som i vanliga fallet. Detta gör att användaren inte behöver ändra sin huvudgrupp (med kommandot <code
              class="command">newgrp</code>) om hen arbetar med ett filträd delat mellan flera olika användare i samma tilldelade grupp.
		</div><a
            id="id-1.12.6.20.4"
            class="indexterm"></a><div
            class="para">
			”Sticky bit” (symboliserad av bokstäven ”t”) är en rättighet som endast är användbar i kataloger. Den är speciellt använd för tillfälliga kataloger där alla har skrivrättighet (som <code
              class="filename">/tmp/</code>): det begränsar borttagning av filer så att endast deras ägare (eller ägaren av överordnad katalog) kan göra det. Utan detta skulle alla kunna ta bort andra användares filer i <code
              class="filename">/tmp/</code>.
		</div></div><div
          class="para">
			Tre kommandon kontrollerar rättigheterna associerad med en fil:
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chown <em
                    class="replaceable">användare</em> <em
                    class="replaceable">fil</em></code> ändrar filens ägare;
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chgrp <em
                    class="replaceable">grupp</em> <em
                    class="replaceable">fil</em></code> ändrar ägargrupp;
				</div></li><li
              class="listitem"><div
                class="para">
					<code
                  class="command">chmod <em
                    class="replaceable">rättigheter</em> <em
                    class="replaceable">fil</em></code> ändrar filens rättigheter.
				</div></li></ul></div><div
          class="para">
			Det finns två sätt att presentera rättigheter. Den symboliska representationen är nog den som är enklast att förstå och komma ihåg. Det innebär bokstavsymbolerna som tidigare nämnts. Du kan definiera rättigheter för varje kategori av användare (<code
            class="literal">u</code>/<code
            class="literal">g</code>/<code
            class="literal">o</code>), genom att ange dem explicit (med <code
            class="literal">=</code>), att lägga till med (<code
            class="literal">+</code>), eller dra ifrån med (<code
            class="literal">-</code>). Sålunda ger formeln <code
            class="literal">u=rwx,g+rw,o-r</code> ägaren läs-, skriv- och ekexveringsrättigheter, lägger till läs och skrivrättigheter för ägargruppen och tar bort läsrättigheter för andra användare. Rättigheter som inte ändras genom tillägg eller borttagning lämnas omodifierade. Bokstaven <code
            class="literal">a</code>, för “all” täcker alla tre katagorier av användare så att <code
            class="literal">a=rx</code> ger alla tre katogorerir samma rättigheter ( läsa och exekvera, men inte skriva).
		</div><a
          id="id-1.12.6.24"
          class="indexterm"></a><a
          id="id-1.12.6.25"
          class="indexterm"></a><a
          id="id-1.12.6.26"
          class="indexterm"></a><a
          id="id-1.12.6.27"
          class="indexterm"></a><a
          id="id-1.12.6.28"
          class="indexterm"></a><div
          class="para">
			Den oktala representationen associerar varje rättighet med ett värde: 4 för läsning, 2 för skrivning och 1 för körning. Vi associerar varje kombination av rättigheter med summan av siffrorna. Varje värde tilldelas sedan till olika kategorier av användare genom att lägga dem i ordning (ägare, grupp, övriga).
		</div><div
          class="para">
			Till exempel kommer kommandot <code
            class="command">chmod 754 <em
              class="replaceable">fil</em></code> att sätta följande rättigheter: läsa, skriva och exekvera för ägaren (eftersom 7 = 4 + 2 + 1); läsa och exekvera för gruppen ( eftersom 5 = 4 + 1); endast läsa för övriga. <code
            class="literal">0</code> betyder inga rättigheter; <code
            class="command">chmod 600 <em
              class="replaceable">fil</em></code> ger läsa/skriva för ägaren och inga rättigheter för övriga. De vanligaste rättighetskombinationerna är <code
            class="literal">755</code> för exekverbara filer och kataloger samt <code
            class="literal">644</code> för datafiler.
		</div><div
          class="para">
			För att representera speciella rättigheter kan du som sätta ett fjärde tal som prefix, där bitarna för <code
            class="literal">setuid</code>, <code
            class="literal">setgid</code> och <code
            class="literal">sticky</code> är 4, 2 and 1. <code
            class="command">chmod 4754</code> kommer att associera biten för <code
            class="literal">setuid</code>med tidigare beskrivna rättigheter.
		</div><div
          class="para">
			Observera att användningen av oktala notation endast tillåter att ange alla rättigheter samtidigt på en fil; du kan inte använda den för att lägga till en ny rättighet, som läsrättighet för gruppägaren, eftersom du måste räkna med befintliga rättigheter och räkna ut nya motsvarande numeriska värden.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>TIP</em></span> rekursiv operation</strong></p></div></div></div><div
            class="para">
			Ibland måste vi ändra rättigheter för ett helt filträd. Alla kommandon ovan har flaggan <code
              class="literal">R</code> för att rekursivt kunna gå in i underkataloger.
		</div><div
            class="para">
			Distinktionen mellan kataloger och filer kan ibland orsaka problem vid rekursiva operationer. Det är därför bokstaven ”X” har introducerats i den symboliska representationen av rättigheter. Det representerar rättighet att exekvera vad som endast gäller kataloger (och inte på filer som saknar denna rättighet). Eftersom <code
              class="command">chmod -R a+X <em
                class="replaceable">directory</em></code> endast kommer att lägga till exekveringsrättigheter för alla kategorier av användare (<code
              class="literal">a</code>) för alla underkataloger och filer för villka minst en kategori av användare (även om de är enda ägare) redan har exekveringsrättigheter.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>TIP</em></span> Ändra användare och grupp</strong></p></div></div></div><div
            class="para">
			Ganska ofta vill man ändra grupp för en fil samtidigt som ägaren. Kommandot <code
              class="command">chown</code> har en speciell syntax för det: <code
              class="command">chown <em
                class="replaceable">användare</em>:<em
                class="replaceable">grupp</em> <em
                class="replaceable">fil</em></code>
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>YTTERLIGARE</em></span> <code
                      class="command">umask</code></strong></p></div></div></div><div
            class="para">
			När ett program skapar en fil tilldelar den rättigheter, med vetskapen om om att system automatiskt tar bort vissa rättigheter, givna av kommnadot <code
              class="command">umask</code>. Skriv in <code
              class="command">umask</code> i ett skal; du kommer att se en mask som <code
              class="computeroutput">0022</code>. Det är en oktal representation av rättigheterna som systematiskt tas bort (i detta fall, skrivrättighet för grupp och andra användare).
		</div><a
            id="id-1.12.6.35.3"
            class="indexterm"></a><a
            id="id-1.12.6.35.4"
            class="indexterm"></a><a
            id="id-1.12.6.35.5"
            class="indexterm"></a><div
            class="para">
			Om du ger det ett nytt oktalt värde kommer kommando <code
              class="command">umask</code> att modifiera masken. Använd i en skalinitiieringsfil (till exempel , <code
              class="filename">~/.bash_profile</code>), kommer den att ändra standardvärdet för masken i dina lokala arbetssessioner.
		</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.remote-login.html"><strong>Föregående</strong>9.2. Fjärrinloggning</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Upp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.administration-interfaces.html"><strong>Nästa</strong>9.4. Adminstrationsgränssnitt</a></li></ul></body></html>
