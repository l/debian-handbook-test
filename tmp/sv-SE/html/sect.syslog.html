<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.5. syslog Systemhändelser</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-sv-SE-1.0-1" /><meta
        name="keywords"
        content="System boot, Initskript, SSH, Telnet, Rättigheter, Behörigheter, Övervakning, Inetd, Cron, Säkerhetskopia, Inpluggninsbara, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="Handbok för Debianadministratören" /><link
        rel="up"
        href="unix-services.html"
        title="Kapitel 9. Unixtjänster" /><link
        rel="prev"
        href="sect.administration-interfaces.html"
        title="9.4. Adminstrationsgränssnitt" /><link
        rel="next"
        href="sect.inetd.html"
        title="9.6. Superservern inetd Super-Server" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/sv-SE/stable/sect.syslog.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>Föregående</strong></a></li><li
          class="home">Handbok för Debianadministratören</li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>Nästa</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.syslog"></a>9.5. <code
                  class="command">syslog</code> Systemhändelser</h2></div></div></div><a
          id="id-1.12.8.2"
          class="indexterm"></a><a
          id="id-1.12.8.3"
          class="indexterm"></a><a
          id="id-1.12.8.4"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-principe"></a>9.5.1. Princip och mekanism</h3></div></div></div><div
            class="para">
				<code
              class="command">rsyslogd</code>-demonen är ansvarig för att samla in tjänstemeddelanden från program och kärnan, och sedan vidarebeforda dem till loggfiler (vanligen lagrad i katalogen <code
              class="filename">/var/log/</code>). Den följer konfigurationsfilen <code
              class="filename">/etc/rsyslog.conf</code>.
			</div><div
            class="para">
				Varje loggmeddelande är associerart med ett programsubsystem (kallad ”facillity” i dokumentationen):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">auth</code> och <code
                    class="literal">authpriv</code>: för autentisering;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">cron</code>: kommer från schemaläggartjänster, <code
                    class="command">cron</code> och <code
                    class="command">atd</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">daemon</code>: påverkar en demon utan speciell klassifikation ( DNS, NTP och så vidare);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">ftp</code>:gäller FTP-servern;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">kern</code>: meddelanden från kärnan;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">lpr</code>: kommer från underliggande utskriftssystem;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">mail</code>: kommer från undersystemet för e-post;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">news</code>: Meddelanden från Usenet (speciellt från NNTP — Network News Transfer Protocol — server som hanterar nyhetsgrupper);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">syslog</code>: meddelanden från själva <code
                    class="command">syslogd</code>-servern;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">user</code>: användarmeddelanden (generiska);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uucp</code>: meddelanden från UUCP-servern (Unix to Unix Copy Program, ett gammalt protokoll använt för att distribuera e-postmeddelanden);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">local0</code> till <code
                    class="literal">local7</code>: reserverad för lokal användning.
					</div></li></ul></div><div
            class="para">
				Varje meddelande är också associerad med en prioritetsnivå. Här är listan i sjunkande ordning:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">emerg</code>: “Hjälp!” Det är akut, systemet är förmodligen instabilt.
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">alert</code>: skynda på, det kan vara farligt att vänta, utför något så fort du kan;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">crit</code>: villkoren är kritiska;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">err</code>: fel;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">warn</code>: varning (potentiellt fel);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">notice</code>: allt normalt, men meddelandet är viktigt;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">info</code>: informativt meddelande;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">debug</code>: meddelande för felsökning.
					</div></li></ul></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.syslog-config"></a>9.5.2. Konfigurationsfilen</h3></div></div></div><div
            class="para">
				Syntaxen för filen <code
              class="filename">/etc/rsyslog.conf</code> finns beskriven i detalj i manualsidan för <span
              class="citerefentry"><span
                class="refentrytitle">rsyslog.conf</span>(5)</span> men det finns också HTML-dokumentation tillgänglig i paketet <span
              class="pkg pkg">rsyslog-doc</span> (<code
              class="filename">/usr/share/doc/rsyslog-doc/html/index.html</code>). Den allmänna principen är att skriva “selector” och “action”-par. Väljaren definierar alla relevanta meddelanden och åtgärderna beskriver hur de ska hanteras.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-selector-syntax"></a>9.5.2.1. Syntaxen för väljaren</h4></div></div></div><div
              class="para">
					Väljaren är en semikolonseparerad lista av <code
                class="literal"><em
                  class="replaceable">subsystem</em>.<em
                  class="replaceable">priority</em></code>-pard (exempel: <code
                class="literal">auth.notice;mail.info</code>). En asterisk kan representera att subsystem eller alla proriteter (exempel: <code
                class="literal">*.alert</code> eller <code
                class="literal">mail.*</code>). Flera subsystem kan grupperas genom att separera dem med ett komma (exempel: <code
                class="literal">auth,mail.info</code>). Indikerade prioritet täcker också meddelanden av högre eller lika prioritet; sålunda indikerar <code
                class="literal">auth.alert</code> <code
                class="literal">auth</code> subsystemmeddelanden för prioriteterna <code
                class="literal">alert</code> eller <code
                class="literal">emerg</code>. Prefixad med ett utropstecken (!) indikerare det de motsatta, lägre prioriteter; <code
                class="literal">auth.!notice</code>,indikerar exempelvis <code
                class="literal">auth</code>, med prioritet <code
                class="literal">info</code> eller <code
                class="literal">debug</code>. Prefix med lika med-tecken (=) motsvara precis indikerad prioritet (<code
                class="literal">auth.=notice</code> bryr sig bara om meddelanden från <code
                class="literal">auth</code> med prioritet <code
                class="literal">notice</code>).
				</div><div
              class="para">
					Varje element i väljarens lista åsidosätter tidigare element. Det är därför möjligt att begränsa en mängd eller att exkludera vissa element från den. Exempelvis betyder <code
                class="literal">kern.info;kern.!err</code> meddelanden från kärnan med prioritet <code
                class="literal">info</code> och <code
                class="literal">warn</code>. Prioriteten <code
                class="literal">none</code> indikerar den tomma mängden (inga prioriteter), och kan tjäna till att exkludera ett subsystem från en meddelandemängd. Sålpnda indikerar <code
                class="literal">*.crit;kern.none</code> alla meddelanden av prioritet lika eller högre än <code
                class="literal">crit</code> som inte kommer från kärnan.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.syslog-action-syntax"></a>9.5.2.2. Åtgärdssyntax</h4></div></div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>GRUNDLÄGGANDE</em></span> Namngivet rör, ett beständigt rör</strong></p></div></div></div><a
                id="id-1.12.8.6.4.2.2"
                class="indexterm"></a><a
                id="id-1.12.8.6.4.2.3"
                class="indexterm"></a><div
                class="para">
					Ett namngivet rör är en speciell typ av fil som fungerar likt ett traditionell rör( röret som du skapar med symbolen ”i” på kommandoraden), men via en fil. Denna mekanism har fördelen av att kunna koppla ihop två orelaterade processer. Det som skrivs till en namngivet rör blockerar processen som skriver till en annan process försöker att läsa datan som skrevs. Denna andra process läser datan skriven av den första, som sedan kan fortsätta exekvering.
				</div><div
                class="para">
					En sådan fil skapas med kommandot <code
                  class="command">mkfifo</code>.
				</div></div><div
              class="para">
					Möjliga åtgärder är:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							lägg till meddelandet till en fil (exempel: <code
                      class="filename">/var/log/messages</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							skicka meddelandet till en fjärrserver <code
                      class="command">syslog</code> (exempelvis: <code
                      class="literal">@log.falcot.com</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							skicka meddelandet till ett befintligt namngivet rör (exempel: <code
                      class="literal">|/dev/xconsole</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							skicka meddelandet till en eller flera användare om de är inloggade (exempel: <code
                      class="literal">root,rhertzog</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							skicka meddelandet till alla inloggade användare (exempel: <code
                      class="literal">*</code>);
						</div></li><li
                  class="listitem"><div
                    class="para">
							skriv meddelandet i en textkonsol (exempel: : <code
                      class="literal">/dev/tty8</code>).
						</div></li></ul></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SÄKERHET</em></span> Vidarebefodra loggar</strong></p></div></div></div><a
                id="id-1.12.8.6.4.5.2"
                class="indexterm"></a><div
                class="para">
					Det är en bra ide att spara de viktigaste loggarna på separata maskiner (kanske dedikerat för detta syfte) eftersom detta kommer att hindra möjliga inkräktare från att ta bort spår av intrång (om inte de också komprometerat denna andra server). Om ett sådant större problem uppstår (som att kärnan kraschar) har du loggarna tillgängliga på en annan maskin, vilket ökar dina chanser att avgöra händelsekedjan som ledde fram till kraschen.
				</div><div
                class="para">
					För att acceptera loggmeddelanden från andra maskiner måste du konfigurera om <span
                  class="emphasis"><em>rsyslog</em></span>:i praktiken räcker det med att aktivera posterna för-användning i <code
                  class="filename">/etc/rsyslog.conf</code> (<code
                  class="literal">$ModLoad imudp</code> och <code
                  class="literal">$UDPServerRun 514</code>).
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.administration-interfaces.html"><strong>Föregående</strong>9.4. Adminstrationsgränssnitt</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Upp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.inetd.html"><strong>Nästa</strong>9.6. Superservern inetd Super-Server</a></li></ul></body></html>
