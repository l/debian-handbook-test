<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">12.3. نصب خودکار</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="RAID, LVM, FAI, Preseeding, مانیتورینگ, مجازی‌سازی, Xen, LXC" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="advanced-administration.html"
        title="فصل 12. مدیریت پیشرفته" /><link
        rel="prev"
        href="sect.virtualization.html"
        title="12.2. مجازی‌سازی" /><link
        rel="next"
        href="sect.monitoring.html"
        title="12.4. مانیتورینگ" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.automated-installation.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtualization.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.monitoring.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automated-installation"></a>12.3. نصب خودکار</h2></div></div></div><a
          id="id-1.15.6.2"
          class="indexterm"></a><a
          id="id-1.15.6.3"
          class="indexterm"></a><div
          class="para">
			مدیر سیستم‌های شرکت فالکوت، مانند سایر مدیر سیستم‌های خدمات بزرگ IT، به ابزاری نیاز دارند که فرآیند نصب (یا بازنصب) ماشین‌های خود را در کمترین زمان و در صورت ممکن به صورت خودکار انجام دهند.
		</div><div
          class="para">
			این نیازمندی‌ها توسط طیف گسترده‌ای از راه حل‌ها برطرف می‌شوند. از یک طرف ابزار عمومی مانند SystemImager با ایجاد یک تصویر از ماشین نمونه، آن را روی ماشین‌های هدف گسترش می‌دهد؛ از طرف دیگر، نصب کننده دبیان این قابلیت را دارد که با استفاده از یک فایل پیکربندی خاص به پرسش‌های مطرح شده طی فرآیند نصب به صورت خودکار پاسخ دهد. به عنوان یک راه حل ترکیبی، ابزاری مانند FAI، که مخفف <span
            class="emphasis"><em>Fully Automatic Installer</em></span> است، ماشین‌ها را با استفاده از سیستم بسته‌بندی نصب، اما از زیرساخت خود به منظور فرآیندهای پیچیده‌تر مانند راه‌اندازی، پارتیشن‌بندی و پیکربندی استفاده می‌کند.
		</div><div
          class="para">
			هر یک از این راه حل‌ها نقاط ضعف و قوت خود را دارند: SystemImager مستقل از سیستم‌های بسته‌بندی کار می‌کند که این امر به مدیریت مجموعه‌ای بزرگ از ماشین‌ها با توزیع‌های مختلف لینوکس منجر می‌شود. همچنین شامل یک سیستم بروزرسانی است که نیازمند نصب مجدد نمی‌باشد، اما این سیستم تنها در صورتی قابل اعتماد خواهد بود که هیچ از یک ماشین‌های زیر مجموعه آن به تنهایی تغییر نکرده باشند؛ به عبارت دیگر، کاربر نباید نرم‌افزاری را بروزرسانی یا نصب کند. به همین شکل، بروزرسانی‌های امنیتی نباید به صورت خودکار صورت پذیرند، چرا که باید توسط یک تصویر مرجع و مرکزی از SystemImager مدیریت شوند. این راه حل نیازمند یکپارچه بودن ماشین‌های هدف از نقطه نظر معماری رایانه است، در غیر اینصورت از تصاویر بسیار گوناگونی برای مدیریت آن باید استفاده شود (یک تصویر i386 با ماشین powerpc سازگار نیست).
		</div><div
          class="para">
			از طرف دیگر، یک نصب خودکار با استفاده از debian-installer می‌تواند با توجه به نیاز هر ماشین تغییر یابد: برنامه نصب کننده کرنل و بسته‌های نرم‌افزاری مناسب را از مخازن خود دریافت، سخت‌افزار موجود را شناسایی، تمام هارد دیسک را به منظور استفاده بهینه از فضا پارتیشن‌بندی، سیستم مورد نیاز دبیان را نصب و یک راه‌انداز مناسب را تنظیم می‌کند. اگرچه، نصب‌کننده استاندارد تنها نسخه‌های استاندارد دبیان را همراه با سیستم پایه و مجموعه‌ای از “وظایف” انتخابی را نصب می‌کند؛ اینکار از نصب یک سیستم به خصوص همراه با برنامه‌های بسته‌بندی نشده جلوگیری می‌کند. برای رفع این نیازهای خاص نیاز به سفارشی‌سازی نصب کننده است... خوشبختانه، نصب کننده بسیار ماژولار بوده و ابزارهایی برای خودکارسازی این فرآیند سفارشی‌سازی وجود دارند، به خصوص simple-CDD که مخفف <span
            class="emphasis"><em>Custom Debian Derivative</em></span> است. این ابزار، با این حال تنها بخش اولیه فرآیند نصب را مدیریت می‌کند؛ این مشکل بزرگی نخواهد بود چرا که ابزار APT امکان گسترش بهینه بروزرسانی‌ها را فراهم می‌کنند.
		</div><div
          class="para">
			به منظور تمرکز روی debian-installer و simple-CDD، تنها به بررسی کوتاه FAI می‌پردازیم و ابزار SystemImager را نادیده می‌گیریم (که دیگر در دبیان وجود ندارد)، چرا که این ابزارها در محیط دبیان بسیار متداول هستند.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.fai"></a>12.3.1. نصب‌کننده تمام خودکار (FAI)</h3></div></div></div><a
            id="id-1.15.6.9.2"
            class="indexterm"></a><div
            class="para">
				<span
              class="foreignphrase"><em
                class="foreignphrase">نصب‌کننده تمام خودکار</em></span> احتمالا قدیمی‌ترین سیستم گسترش خودکار برای دبیان باشد، که جایگاه آن به عنوان یک مرجع را مشخص می‌کند؛ اما طبیعت بسیار سازگار آن به نوعی پیچیدگی‌های درونی‌اش را جبران می‌کند.
			</div><div
            class="para">
				FAI نیازمند یک سیستم سرور به منظور نگهداری از اطلاعات راه‌اندازی برای ماشین‌های است که قصد دارند از طریق شبکه به آن متصل گردند. این سرور نیازمند بسته <span
              class="pkg pkg">fai-server</span> (یا <span
              class="pkg pkg">fai-quickstart</span>، که عناصر مورد نیاز برای یک پیکربندی استاندارد را گردآوری می‌کند) است.
			</div><div
            class="para">
				FAI از یک رویکرد مشخص برای تعریف پروفایل‌های قابل نصب استفاده می‌کند. بجای رونوشت‌گیری ساده از یک مرجع قابل نصب، FAI یک نصب‌کننده تمام عیار است، که با استفاده از مجموعه فایل‌ها و اسکریپت‌های ذخیره‌شده در سرور قابل پیکربندی می‌باشد؛ مکان پیشفرض <code
              class="filename">/srv/fai/config/</code> به صورت خودکار ایجاد نمی‌شود، پس مدیر سیستم در کنار سایر فایل‌ها باید آن را ایجاد کند. در اکثر موارد، این فایل‌ها توسط نمونه‌هایی که در بسته مستندات <span
              class="pkg pkg">fai-doc</span> وجود دارد سفارشی‌سازی می‌شوند، به خصوص دایرکتوری <code
              class="filename">/usr/share/doc/fai-doc/examples/simple/</code>.
			</div><div
            class="para">
				زمانی که پروفایل‌ها تعریف شوند، دستور <code
              class="command">fai-setup</code> عناصر مورد نیاز نصب‌کننده FAI را تولید می‌کند؛ اینکار اغلب به معنی آماده‌سازی یا بروزرسانی یک سیستم حداقلی (NFS-root) در حین فرآیند نصب است. گزینه جایگرین آن ایجاد یک CD قابل اجرا با استفاده از <code
              class="command">fai-cd</code> است.
			</div><div
            class="para">
				ایجاد تمام این فایل‌های پیکربندی نیازمند درک درستی از چگونگی عملکرد FAI می‌باشد. یک فرآیند متداول نصب از گام‌های زیر تشکیل شده است:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						دریافت یک کرنل از شبکه و راه‌اندازی آن؛
					</div></li><li
                class="listitem"><div
                  class="para">
						اتصال فایل سیستم root از NFS؛
					</div></li><li
                class="listitem"><div
                  class="para">
						اجرای <code
                    class="command">/usr/sbin/fai</code>، که باقی فرآیند نصب را کنترل می‌کند (از این رو گام‌های بعدی توسط این اسکریپت فراخوانی می‌شوند)؛
					</div></li><li
                class="listitem"><div
                  class="para">
						رونوشت‌گیری فضای پیکربندی از سرور درون <code
                    class="filename">/fai/</code>؛
					</div></li><li
                class="listitem"><div
                  class="para">
						اجرای <code
                    class="command">fai-class</code>. اسکریپت‌های <code
                    class="filename">/fai/class/[0-9][0-9]*</code> به ترتیب اجرا می‌شوند و نام “کلاس‌های” منطبق با ماشین مورد نظر می‌باشند را بر می‌گردانند؛ از این اطلاعات برای ادامه فرآیند نصب استفاده می‌شود. اینکار موجب انعطاف‌پذیری در تعریف سرویس‌های مورد نیاز برای نصب و پیکربندی می‌شود.
					</div></li><li
                class="listitem"><div
                  class="para">
						دریافت تعدادی از متغیرهای پیکربندی، با توجه به کلاس‌های مربوطه؛
					</div></li><li
                class="listitem"><div
                  class="para">
						پارتیشن‌بندی دیسک‌ها و فرمت کردن پارتیشن‌ها، بر اساس اطلاعات فراهم شده در <code
                    class="filename">/fai/disk_config/<em
                      class="replaceable">class</em></code>؛
					</div></li><li
                class="listitem"><div
                  class="para">
						اتصال پارتیشن‌های مذکور؛
					</div></li><li
                class="listitem"><div
                  class="para">
						نصب سیستم پایه؛
					</div></li><li
                class="listitem"><div
                  class="para">
						گردآوری پایگاه‌داده Debconf با استفاده از <code
                    class="command">fai-debconf</code>؛
					</div></li><li
                class="listitem"><div
                  class="para">
						دریافت فهرست بروزرسانی‌های موجود برای APT؛
					</div></li><li
                class="listitem"><div
                  class="para">
						نصب بسته‌های فهرست شده در <code
                    class="filename">/fai/package_config/<em
                      class="replaceable">class</em></code>؛
					</div></li><li
                class="listitem"><div
                  class="para">
						اجرای اسکریپت‌های پس از پیکربندی، <code
                    class="filename">/fai/scripts/<em
                      class="replaceable">class</em>/[0-9][0-9]*</code>؛
					</div></li><li
                class="listitem"><div
                  class="para">
						ثبت گزارش‌های نصب، قطع اتصال پارتیشن‌ها و راه‌اندازی مجدد.
					</div></li></ul></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.d-i-preseeding"></a>12.3.2. گردآوری debian-installer</h3></div></div></div><a
            id="id-1.15.6.10.2"
            class="indexterm"></a><a
            id="id-1.15.6.10.3"
            class="indexterm"></a><div
            class="para">
				در انتها، بهترین ابزار برای نصب سیستم‌های دبیان به طور منطقی باید نصب‌کننده رسمی دبیان باشد. به همین دلیل است، که از ابتدای آن، debian-installer برای کاربرد خودکاری سازی طراحی شده است که از زیرساخت فراهم شده توسط <span
              class="pkg pkg">debconf</span> استفاده می‌کند. گزینه دوم، از یک طرف امکان کاهش تعداد پرسش‌های مطرح شده را فراهم می‌کند (پرسش‌های پنهان با پاسخ‌های پیشفرض جواب داده می‌شوند)، از طرف دیگر پاسخ‌های پیشفرض به صورت جداگانه ارائه می‌شوند، به این منظور که فرآیند نصب به صورت غیر-تعاملی انجام شود. این ویژگی آخر به نام <span
              class="emphasis"><em>preseeding</em></span> شناخته می‌شود.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>مطالعه بیشتر</em></span> Debconf همراه با یک پایگاه‌داده مرکزی</strong></p></div></div></div><a
              id="id-1.15.6.10.5.2"
              class="indexterm"></a><div
              class="para">
				Preseeding امکان فراهم کردن مجموعه‌ای از پاسخ‌ها به پرسش‌های Debconf در زمان نصب را می‌دهد، اما این پاسخ‌ها ایستا بوده و در گذر زمان تغییر نمی‌کنند. از آنجا که ماشین‌های نصب-شده نیازمند بروزرسانی هستند و ممکن است به پاسخ‌های جدید نیاز باشد، فایل پیکربندی <code
                class="filename">/etc/debconf.conf</code> می‌تواند به منظور استفاده Debconf از منابع خارجی داده (مانند یک دایرکتوری سرور LDAP یا فایلی که از طریق NFS یا Samba مورد نیاز باشد)، پیکربندی شود. منابع داده خارجی متفاوتی می‌توانند در یک زمان تعریف شوند تا یکدیگر را کامل کنند. پایگاه‌داده محلی به منظور دسترسی خواندنی-نوشتنی و پایگاه‌داده‌های راه دور به منظور دسترسی فقط-خواندنی محدود می‌شوند. صفحه راهنمای <span
                class="citerefentry"><span
                  class="refentrytitle">debconf.conf</span>(5)</span> به تشریح تمام احتمالات موجود در این زمینه می‌پردازد (به بسته <span
                class="pkg pkg">debconf-doc</span> نیاز دارید).
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.6"></a>12.3.2.1. استفاده از یک فایل Preseed</h4></div></div></div><div
              class="para">
					مکان‌های مختلفی وجود دارد که یک نصب‌کننده می‌تواند فایل preseed را دریافت کند:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							در initrd که برای راه‌اندازی ماشین استفاده شده است؛ در این مورد، عملیات preseed در ابتدای فرآیند نصب صورت می‌گیرد و تمام پرسش‌ها می‌توانند نادیده گرفته شوند. این فایل باید بنام <code
                      class="filename">preseed.cfg</code> در اولین سطح دایرکتوری initrd قرار گیرد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							در رسانه راه‌اندازی (مانند CD یا USB)؛ عملیات preseed به محض اتصال رسانه صورت می‌گیرد، یعنی درست پس از پرسش‌های مربوط به زبان و ساختار صفحه کلید. پارامتر راه‌اندازی <code
                      class="literal">preseed/file</code> می‌تواند برای شناسایی مکان فایل preseed (برای نمونه، <code
                      class="filename">/cdrom/preseed.cfg</code> در هنگام نصب از CD-ROM یا <code
                      class="filename">/hd-media/preseed.cfg</code> در هنگام نصب از USB) مورد استفاده قرار گیرد.
						</div></li><li
                  class="listitem"><div
                    class="para">
							از طریق شبکه؛ عملیات preseed پس از پیکربندی (خودکار) شبکه صورت می‌گیرد؛ پارامتر راه‌اندازی مرتبط با آن عبارت است از <code
                      class="literal">preseed/url=http://<em
                        class="replaceable">server</em>/preseed.cfg</code>.
						</div></li></ul></div><div
              class="para">
					در یک نگاه، قرار دادن فایل preseed درون initrd ممکن است جالب‌ترین گزینه به نظر آید؛ اگرچه، کمتر از این حالت استفاده می‌شود چرا که ایجاد یک initrd قابل نصب بسیار دشوار است. دو راهکار جایگزین دیگر، بیشتر متداول هستند، به خصوص که پارامترهای راه‌اندازی روشی دیگر برای آماده‌سازی پاسخ‌ها به اولین پرسش‌های فرآیند نصب را فراهم می‌کنند. روش مرسوم برای ذخیره‌سازی این پارامترهای راه‌اندازی و جلوگیری از نوشتن هر کدام در زمان نصب، قرار دادن آن‌ها در پیکربندی مرتبط با <code
                class="command">isolinux</code> (در مورد CD-ROM) یا <code
                class="command">syslinux</code> (در مورد USB) است.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.7"></a>12.3.2.2. ایجاد یک فایل Preseed</h4></div></div></div><div
              class="para">
					یک فایل preseedاز نوع متنی است که در هر خط آن پاسخ به یک پرسش از Debconf قرار دارد. هر خط به چهار فیلد که با فاصله (space یا tab) از یکدیگر جدا می‌شوند، تقسیم شده است. برای نمونه، در مورد <code
                class="literal">d-i mirror/suite string stable</code>:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							فیلد اول “مالک” پرسش به حساب می‌آید؛ “d-i” برای پرسش‌هایی استفاده می‌شود که مرتبط با فرآیند نصب هستند، اما می‌تواند در مورد نام بسته‌های موجود دبیان نیز بکار رود؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فیلد دوم یک شناسه برای پرسش به حساب می‌آید؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فیلد سوم نوع پرسش را مشخص می‌کند؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فیلد چهارم و آخرین فیلد نیز پاسخ به پرسش را شامل می‌شود. به یاد داشته باشید که از فیلد سوم توسط یک space باید جدا شود؛ اگر بیش از یک فاصله بکار رود، به عنوان بخشی از پاسخ در نظر گرفته می‌شود.
						</div></li></ul></div><div
              class="para">
					ساده‌ترین روش برای ایجاد یک فایل preseed نصب یک سیستم به صورت دستی است. سپس <code
                class="command">debconf-get-selections --installer</code> پاسخ‌های مرتبط با آن را فراهم می‌کند. پاسخ‌های مرتبط با سایر بسته‌ها نیز توسط <code
                class="command">debconf-get-selections</code> گردآوری می‌شوند. اگرچه، راهکار بهتر در این مورد نوشتن فایل preseed به صورت دستی است، که از یک فایل نمونه و مستندات مرجع می‌توان استفاده کرد: با چنین رویکردی، تنها پرسش‌هایی که پاسخ‌های پیشفرض داشته باشند می‌توانند آماده‌سازی شوند؛ استفاده از پارامتر راه‌اندازی <code
                class="literal">priority=critical</code> به Debconf دستور می‌دهد که تنها به پرسش‌های حیاتی پاسخ دهد و از پاسخ‌های پیشفرض برای سایر پرسش‌ها استفاده کند.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>مستندات</em></span> ضمیمه راهنمای نصب</strong></p></div></div></div><div
                class="para">
					راهنمای نصب، که به صورت آنلاین موجود است، شامل مستندات کامل درباره استفاده از یک فایل preseed در یک ضمیمه جداگانه است. همچنین شامل یک فایل نمونه همراه با توضیحات می‌باشد، که می‌تواند به عنوان پایه‌ای برای سفارشی‌سازی‌های محلی استفاده شود. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/amd64/apb.html">https://www.debian.org/releases/jessie/amd64/apb.html</a></div> <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/example-preseed.txt">https://www.debian.org/releases/jessie/example-preseed.txt</a></div>
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.8"></a>12.3.2.3. ایجاد یک رسانه راه‌اندازی سفارشی‌</h4></div></div></div><div
              class="para">
					دانستن اینکه یک فایل preseed در کجا ذخیره شود خوب است، اما کافی نیست: مدیر سیستم باید به شیوه‌ای رسانه‌ راه‌اندازی نصب را تغییر دهد که پارامترهای راه‌اندازی تغییر کرده و فایل preseed به آن اضافه شود.
				</div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.3"></a>12.3.2.3.1. راه‌اندازی از طریق شبکه</h5></div></div></div><div
                class="para">
						زمانی که یک رایانه از طریق شبکه راه‌اندازی می‌شود، سروری که عناصر راه‌اندازی را ارسال می‌کند همچنین شامل پارامترهای راه‌اندازی نیز می‌باشد. بنابراین، تغییرات مورد نظر باید در پیکربندی PXE سرور راه‌اندازی اعمال شوند؛ به طور خاص، در فایل پیکربندی <code
                  class="filename">/tftpboot/pxelinux.cfg/default</code>. برپایی راه‌اندازی شبکه برای اینکار یک پیشنیاز به حساب می‌آید: برای جزئیات بیشتر راهنمای نصب را مشاهده کنید. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/amd64/ch04s05.html">https://www.debian.org/releases/jessie/amd64/ch04s05.html</a></div>
					</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.4"></a>12.3.2.3.2. آماده‌سازی یک USB قابل اجرا</h5></div></div></div><div
                class="para">
						زمانی که یک حافظه قابل راه‌اندازی آماده‌سازی شد (<a
                  class="xref"
                  href="installation.html#sect.install-usb">
      قسمت 4.1.2, “راه‌اندازی از USB”
    </a> را مشاهده کنید)، برخی عملیات اضافی مورد نیاز است. فرض می‌کنیم که محتوای حافظه در <code
                  class="filename">/media/usbdisk/</code> قرار دارد:
					</div><div
                xmlns:d="http://docbook.org/ns/docbook"
                class="itemizedlist"><ul><li
                    class="listitem"><div
                      class="para">
								رونوشت گرفتن از فایل preseed در <code
                        class="filename">/media/usbdisk/preseed.cfg</code>
							</div></li><li
                    class="listitem"><div
                      class="para">
								ویرایش <code
                        class="filename">/media/usbdisk/syslinux.cfg</code> و افزودن پارامترهای راه‌اندازی مورد نیاز (مثال زیر را مشاهده کنید).
							</div></li></ul></div><div
                class="example"><a
                  xmlns=""
                  id="id-1.15.6.10.8.4.4"></a><p
                  class="title"><strong>
      مثال 12.2. فایل syslinux.cfg و پارامترهای عملیات آماده‌سازی</strong></p><div
                  class="example-contents"><pre
                    class="programlisting">default vmlinuz
append preseed/file=/hd-media/preseed.cfg locale=en_US.UTF-8 keymap=us language=us country=US vga=788 initrd=initrd.gz  --</pre></div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.5"></a>12.3.2.3.3. ایجاد یک تصویر CD-ROM</h5></div></div></div><a
                id="id-1.15.6.10.8.5.2"
                class="indexterm"></a><div
                class="para">
						یک حافظه USB از نوع رسانه‌های خواندنی-نوشتنی است، پس تغییر فایل در آن و افزودن پارامترها کار آسانی است. در مورد CD-ROM، این عملیات از پیچیدگی بیشتری برخوردار است چرا که نیازمند تولید مجدد تصویر ISO از آن می‌باشد. این وظیفه توسط <span
                  class="pkg pkg">debian-cd</span> مدیریت می‌شود، اما استفاده از این ابزار برای اینکار مطلوب نیست: نیازمند یک mirror محلی و درک از گزینه‌های موجود در <code
                  class="filename">/usr/share/debian-cd/CONF.sh</code> است؛ حتی در این صورت، <code
                  class="command">make</code> چندین بار باید فراخوانی شود. بنابراین مطالعه <code
                  class="filename">/usr/share/debian-cd/README</code> به شدت توصیه می‌گردد.
					</div><div
                class="para">
						با این تفاسیر، debian-cd به شیوه مشابهی عمل می‌کند: یک دایرکتوری “image” همراه با محتوای دقیق از CD-ROM تولید، سپس با استفاده از ابزاری مانند <code
                  class="command">genisoimage</code>، <code
                  class="command">mkisofs</code> یا <code
                  class="command">xorriso</code> به فایل ISO تبدیل می‌شود. دایرکتوری image پس از گام <code
                  class="command">make image-trees</code> در debian-cd نهایی می‌گردد. در این نقطه، فایل preseed را درون دایرکتوری متناسب آن قرار می‌دهیم (معمولا <code
                  class="filename">$TDIR/$CODENAME/CD1/</code>، که پارامترهای $TDIR و $CODENAME توسط فایل پیکربندی <code
                  class="filename">CONF.sh</code> تعریف می‌شوند). CD-ROM از <code
                  class="command">isolinux</code> به عنوان راه‌انداز خود استفاده می‌کند که فایل پیکربندی آن باید توسط آنچه که debian-cd تولید کرده است سازگار باشد، تا بتوان پارامترهای راه‌اندازی مورد نیاز را وارد کرد (فایل مشخص آن عبارت است از <code
                  class="filename">$TDIR/$CODENAME/boot1/isolinux/isolinux.cfg</code>). در انتها فرآیند “عادی” می‌تواند ادامه یابد و می‌توان تصویر ISO را با استفاده از <code
                  class="command">make image CD=1</code> (یا <code
                  class="command">make images</code> در صورت نیاز به چندین CD-ROM) ایجاد کنیم.
					</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.simple-cdd"></a>12.3.3. Simple-CDD: یک راهکار جامع</h3></div></div></div><a
            id="id-1.15.6.11.2"
            class="indexterm"></a><div
            class="para">
				استفاده از یک فایل preseed به تنهایی تمام پیشنیازهای فرآیندهای بزرگ توسعه را محقق نمی‌کند. با اینکه امکان اجرای چند اسکریپت در انتهای فرآیند نصب وجود دارد، مجموعه بسته‌هایی که باید نصب گردند به سادگی قابل دسترس نمی‌باشند (معمولا، فقط “task” می‌تواند انتخاب شود)؛ مهمتر اینکه، این روش منجر به نصب بسته‌های رسمی از دبیان می‌شود و سایر بسته‌های محلی را نادیده می‌گیرد.
			</div><div
            class="para">
				از طرف دیگر، debian-cd می‌تواند بسته‌های خارجی را یکپارچه‌سازی کند و debian-installer می‌تواند با درج گام‌های جدید در فرآیند نصب توسعه یابد. با ترکیب این قابلیت‌ها باید بتوانیم یک نصب‌کننده سفارشی را برای نیازهای خود ایجاد کنیم؛ همچنین باید قادر باشد برخی سرویس‌ها را پس از نصب بسته‌های آن‌ها پیکربندی کند. خوشبختانه، این یک حالت فرضی نیست، زیرا دقیقا کاری است که Simple-CDD (در بسته <span
              class="pkg pkg">simple-cdd</span>) انجام می‌دهد.
			</div><div
            class="para">
				هدف Simple-CDD این است که هر فردی بتواند یک توزیع مشتق شده از دبیان را با انتخاب مجموعه‌ای از بسته‌های موجود، پیکربندی آن‌ها با Debconf، افزودن نرم‌افزار خاص و اجرای اسکریپت‌های سفارشی در انتهای فرآیند نصب، ایجاد کند. این رویکرد با فلسفه “سیستم عامل جهانی” (شعار دبیان) سازگاری دارد، چرا که هر فردی می‌تواند آن را با نیاز خود سازگار سازد.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.6"></a>12.3.3.1. ایجاد پروفایل‌ها</h4></div></div></div><div
              class="para">
					Simple-CDD “پروفایل” را تعریف می‌کند که با مفهوم “کلاس” در FAI سازگار هستند و یک ماشین می‌تواند چندین پروفایل داشته باشد (که در زمان نصب مشخص می‌شوند). یک پروفایل توسط مجموعه فایل‌های <code
                class="filename">profiles/<em
                  class="replaceable">profile</em>.*</code> تعریف می‌شود:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							فایل <code
                      class="filename">.description</code> شامل توضیح یک خطی درباره پروفایل است؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فایل <code
                      class="filename">.packages</code> شامل بسته‌هایی است که در صورت انتخاب شدن پروفایل به شیوه خودکار نصب می‌گردند؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فایل <code
                      class="filename">.downloads</code> شامل بسته‌هایی است که درون رسانه نصب ذخیره‌سازی می‌شوند، اما الزامی در نصب آن‌ها وجود ندارد؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فایل <code
                      class="filename">.preseed</code> شامل اطلاعات آماده‌سازی برای پرسش‌های Debconf (برای نصب‌کننده و/یا بسته‌ها) می‌باشد؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							فایل <code
                      class="filename">.postinst</code> شامل اسکریپتی است که در انتهای فرآیند نصب اجرا می‌شود؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							در انتها، فایل <code
                      class="filename">.conf</code> امکان تغییر برخی پارامترهای Simple-CDD را بر اساس پروفایل‌های موجود در آن فراهم می‌کند.
						</div></li></ul></div><div
              class="para">
					پروفایل <code
                class="literal">default</code> نقش ویژه‌ای دارد چرا که همیشه انتخاب می‌شود؛ شامل حداقل‌های مورد نیاز توسط Simple-CDD است. تنها موردی که در این پروفایل سفارشی می‌شود پارامتر آماده‌سازی <code
                class="literal">simple-cdd/profiles</code> است: امکان رد کردن پرسش، که توسط Simple-CDD، درباره پروفایل قابل نصب را فراهم می‌کند.
				</div><div
              class="para">
					به یاد داشته باشید که دستورات باید از دایرکتوی والد <code
                class="filename">profiles</code> فراخوانی شوند.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.7"></a>12.3.3.2. پیکربندی و استفاده از <code
                      class="command">build-simple-cdd</code></h4></div></div></div><a
              id="id-1.15.6.11.7.2"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>نگاه سریع</em></span> فایل پیکربندی همراه با جزئیات</strong></p></div></div></div><div
                class="para">
					یک نمونه از فایل پیکربندی Simple-CDD، همراه با تمام پارامترهای ممکن، درون <code
                  class="filename">/usr/share/doc/simple-cdd/examples/simple-cdd.conf.detailed.gz</code> قرار دارد. از این فایل می‌توان به عنوان نقطه آغاز برای ایجاد فایل پیکربندی سفارشی استفاده کرد.
				</div></div><div
              class="para">
					Simple-CDD به پارامترهای بسیاری برای عملکرد جامع نیاز دارد. آن‌ها اغلب درون یک فایل پیکربندی قرار دارند، که <code
                class="command">build-simple-cdd</code> می‌تواند با گزینه <code
                class="literal">--conf</code> به آن اشاره کند، همچنین می‌توانند با استفاده از پارامترهای انحصاری به <code
                class="command">build-simple-cdd</code> ارجاع شوند. در اینجا به این دستور و پارامترهای مورد نیاز آن نگاهی می‌اندازیم:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							پارامتر <code
                      class="literal">profiles</code> فهرستی از پروفایل‌های قابل اجرا در CD-ROM ایجاد شده را فهرست می‌کند؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							بر اساس فهرست بسته‌های مورد نیاز، Simple-CDD فایل‌های متناسب با آن‌ها را از سرور اشاره شده در <code
                      class="literal">server</code> دانلود کرده و آن‌ها را درون یک mirror موقت قرار می‌دهد (که در ادامه به debian-cd داده می‌شود)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							بسته‌های سفارشی موجود در <code
                      class="literal">local_packages</code> نیز درون همین mirror محلی قرار می‌گیرند؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							سپس debian-cd (درون یک مکان پیشفرض که می‌تواند با متغیر <code
                      class="literal">debian_cd_dir</code> پیکربندی شود) همراه با فهرستی از بسته‌ها به منظور یکپارچه‌سازی اجرا می‌شود؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							زمانی که debian-cd دایرکتوری خود را آماده کند، Simple-CDD برخی تغییرات را در این دایرکتوری انجام می‌دهد:
						</div><div
                    class="itemizedlist"><ul><li
                        class="listitem"><div
                          class="para">
									فایل‌هایی که شامل پروفایل‌ها هستند درون یک دایرکتوری زیر مجموعه <code
                            class="filename">simple-cdd</code> (واقع در CD-ROM نهایی) قرار می‌گیرند؛
								</div></li><li
                        class="listitem"><div
                          class="para">
									سایر فایل‌های فهرست شده در پارامتر <code
                            class="literal">all_extras</code> نیز افزوده می‌شوند؛
								</div></li><li
                        class="listitem"><div
                          class="para">
									پارامترهای راه‌اندازی طوری تنظیم می‌شوند که عملیات preseed فعال گردد. در صورت ذخیره‌سازی اطلاعات لازم در متغیرهای <code
                            class="literal">language</code> و <code
                            class="literal">country</code>، پرسش‌های مربوط به زبان و کشور نادیده گرفته می‌شوند.
								</div></li></ul></div></li><li
                  class="listitem"><div
                    class="para">
							سپس debian-cd فایل نهایی ISO را تولید می‌کند.
						</div></li></ul></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.8"></a>12.3.3.3. تولید یک فایل ISO</h4></div></div></div><div
              class="para">
					زمانی که یک فایل پیکربندی ایجاد و پروفایل‌های خود را تعریف کردیم، گام باقیمانده فراخوانی <code
                class="command">build-simple-cdd --conf simple-cdd.conf</code> است. پس از چند دقیقه، فایل نهایی را در <code
                class="filename">images/debian-8.0-amd64-CD-1.iso</code> دریافت می‌کنیم.
				</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtualization.html"><strong>قبلی</strong>12.2. مجازی‌سازی</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.monitoring.html"><strong>بعدی</strong>12.4. مانیتورینگ</a></li></ul></body></html>
