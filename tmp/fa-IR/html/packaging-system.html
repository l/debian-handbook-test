<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بنیادین</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-fa-IR-1.0-1" /><meta
        name="keywords"
        content="بسته باینری, بسته سورس, dpkg, وابستگی‌ها, تداخل" /><link
        rel="home"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="up"
        href="index.html"
        title="راهنمای جامع دبیان" /><link
        rel="prev"
        href="sect.after-first-boot.html"
        title="4.3. پس از اولین راه‌اندازی سیستم" /><link
        rel="next"
        href="sect.package-meta-information.html"
        title="5.2. اطلاعات-جانبی بسته" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/packaging-system.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای جامع دبیان</li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>بعدی</strong></a></li></ul><div
        xml:lang="fa-IR"
        class="chapter"
        lang="fa-IR"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  xmlns=""
                  id="packaging-system"></a>
      فصل 5. سیستم بسته‌بندی: اصول و ابزارهای بنیادین</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="packaging-system.html#sect.binary-package-structure">5.1. ساختار یک بسته باینری</a></span></dt><dt><span
                class="section"><a
                  href="sect.package-meta-information.html">5.2. اطلاعات-جانبی بسته</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.control">5.2.1. توضیح: فایل <code
                        class="filename">control</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.configuration-scripts">5.2.2. اسکریپت‌های پیکربندی</a></span></dt><dt><span
                    class="section"><a
                      href="sect.package-meta-information.html#sect.conffiles">5.2.3. Checksums، فهرستی از فایل‌های پیکربندی</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.source-package-structure.html">5.3. ساختار یک بسته سورس</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#id-1.8.7.4">5.3.1. قالب</a></span></dt><dt><span
                    class="section"><a
                      href="sect.source-package-structure.html#id-1.8.7.5">5.3.2. کاربرد در دبیان</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.manipulating-packages-with-dpkg.html">5.4. مدیریت بسته‌ها با استفاده از <code
                    class="command">dpkg</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.5">5.4.1. نصب بسته‌ها</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.6">5.4.2. حذف بسته</a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.7">5.4.3. فراخوانی پایگاه‌داده <code
                        class="command">dpkg</code> و جستجوی فایل‌های <code
                        class="filename">.deb</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#id-1.8.8.8">5.4.4. فایل لاگ <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.manipulating-packages-with-dpkg.html#sect.multi-arch">5.4.5. پشتیبانی از چند-معماری</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.coexistence-with-other-packaging-systems.html">5.5. همزیستی با سایر سیستم‌های بسته‌بندی</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		به عنوان یک مدیر سیستم دبیان، شما به طور مداوم با بسته‌های <code
              class="filename">.deb</code> سروکار خواهید داشت، چراکه دارای کاربردهای گوناگونی هستند (برنامه‌ها، مستندات و ...) و شامل عملیات نصب و نگهداری می‌شوند. بنابراین ایده خوبی است که از چگونگی و نحوه کارکرد آن‌ها اطلاع داشته باشید.
	</div></div><div
          class="para">
		این فصل به بررسی ساختار و محتوای بسته‌های “binary” و “source” می‌پردازد. اولی شامل فایل‌های <code
            class="filename">.deb</code> است که به صورت مستقیم توسط <code
            class="command">dpkg</code> استفاده می‌شود و دومی شامل سورس کد و دستورالعمل‌هایی است که برای ساخت بسته‌های باینری لازم می‌باشند.
	</div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    xmlns=""
                    id="sect.binary-package-structure"></a>5.1. ساختار یک بسته باینری</h2></div></div></div><a
            id="id-1.8.5.2"
            class="indexterm"></a><a
            id="id-1.8.5.3"
            class="indexterm"></a><div
            class="para">
			قالب بسته‌های دبیان طوری طراحی شده است که محتوای آن روی هر سیستم یونیکس با دستورات کلاسیک <code
              class="command">ar</code>، <code
              class="command">tar</code> و <code
              class="command">gzip</code> (گاهی اوقات <code
              class="command">xz</code> یا <code
              class="command">bzip2</code>) قابل خواندن باشد. این ویژگی، برای قابلیت حمل بسته‌ها و بازیابی آن‌ها در شرایط بحرانی بسیار اهمیت دارد.
		</div><div
            class="para">
			برای نمونه، تصور کنید که به اشتباه برنامه <code
              class="command">dpkg</code> را پاک کرده‌اید و بنابراین دیگر نمی‌توانید بسته‌های دبیان را نصب کنید. <code
              class="command">dpkg</code> خود یک بسته دبیان است و اینطور بنظر می‌رسد که کار سیستم شما تمام شده باشد... خوشبختانه، شما قالب یک بسته را می‌شناسید و می‌توانید با دانلود کردن فایل <code
              class="filename">.deb</code> بسته <span
              class="pkg pkg">dpkg</span> آن را به صورت دستی نصب نمایید (قسمت <a
              class="xref"
              href="packaging-system.html#sidebar.dpkg-apt-ar"><span
                class="emphasis"><em>ابزار</em></span> <code
                class="command">dpkg</code>، <code
                class="command">APT</code> و <code
                class="command">ar</code></a> را مشاهده کنید). اگر به بخت بد، برخی از برنامه‌های <code
              class="command">ar</code> و <code
              class="command">tar</code> یا <code
              class="command">gzip</code> و <code
              class="command">bzip2</code> محو شده باشند، تنها کافی است از سیستم دیگری تنها همان برنامه را کپی کنید (چراکه این بسته‌ها هیچ وابستگی دیگری ندارند و تنها یک کپی کافی از آن‌ها کافی است). اگر شرایط بدتری از این داشتید و حتی اینکار نیز به شما کمک نمی‌کند (شاید برخی کتابخانه‌های سیستمی حذف شده باشند؟) باید نسخه ایستا از <code
              class="command">busybox</code> را امتحان کنید (که در بسته <span
              class="pkg pkg">busybox-static</span> قرار دارد) که خود شامل دستورات <code
              class="command">busybox ar</code>، <code
              class="command">busybox tar</code>، و <code
              class="command">busybox gunzip</code> است.
		</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.dpkg-apt-ar"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ابزار</em></span> <code
                        class="command">dpkg</code>، <code
                        class="command">APT</code> و <code
                        class="command">ar</code></strong></p></div></div></div><a
              id="id-1.8.5.6.2"
              class="indexterm"></a><a
              id="id-1.8.5.6.3"
              class="indexterm"></a><a
              id="id-1.8.5.6.4"
              class="indexterm"></a><div
              class="para">
			<code
                class="command">dpkg</code> برنامه‌ای است که فایل‌های <code
                class="filename">.deb</code> را مدیریت می‌کند، عملیاتی مانند خارج‌سازی از حالت فشرده، تحلیل و بررسی آن‌ها.
		</div><div
              class="para">
			<code
                class="command">APT</code> مجموعه‌ای از برنامه‌ها است که امکان تغییرات سطح بالاتری از سیستم را میسر می‌سازد. نصب یا حذف یک بسته (با رعایت وابستگی‌های آن)، بروزرسانی سیستم، فهرست‌سازی از بسته‌های موجود و ...
		</div><a
              id="id-1.8.5.6.7"
              class="indexterm"></a><div
              class="para">
			در مورد برنامه <code
                class="command">ar</code>، مدیریت فایل‌های همنام را ممکن می‌سازد: <code
                class="command">ar t <em
                  class="replaceable">archive</em></code> فهرستی از فایل‌های موجود در این آرشیو را نشان می‌دهد، <code
                class="command">ar x <em
                  class="replaceable">archive</em></code> فایل‌های موجود در آرشیو را در دایرکتوری فعلی از حالت فشرده خارج می‌سازد و <code
                class="command">ar d <em
                  class="replaceable">archive</em> <em
                  class="replaceable">file</em></code> یک فایل را از آرشیو مورد نظر حذف می‌کند. صفحه راهنمای آن (<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>) سایر قابلیت‌هایش را مستند کرده است. <code
                class="command">ar</code> ابزاری است که یک مدیر سیستم یونیکس در شرایط خاص از آن استفاده می‌کند، به همین دلیل بیشتر از <code
                class="command">tar</code> استفاده می‌گردد، یک برنامه مدیریت فایل پیشرفته‌تر. برای همین بازیابی <code
                class="command">dpkg</code> در زمان بروز بحران راحت‌تر است. در این زمان تنها کافی است بسته دبیان آن را دانلود کرده و محتویات <code
                class="filename">data.tar.gz</code> آن را در دایرکتوری ریشه (<code
                class="filename">/</code>) قرار دهید.
		</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>tar -C / -p -xzf data.tar.gz</code></strong></pre></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>بازگشت به مقدمات</em></span> صفحه راهنما و توضیحات آن</strong></p></div></div></div><div
              class="para">
			ممکن است برای تازه‌کاران دسترسی به “<span
                class="citerefentry"><span
                  class="refentrytitle">ar</span>(1)</span>” دشوار باشد. این در حقیقت شیوه‌ای برای دسترسی به قسمت ۱ صفحه راهنمای <code
                class="literal">ar</code> است.
		</div><div
              class="para">
			گاهی اوقات این شیوه علامت‌گذاری برای رفع ابهام بکار می‌رود. برای نمونه، بین دستور <code
                class="command">printf</code> که توسط <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(1)</span> مشخص می‌گردد و تابع <code
                class="function">printf</code> که توسط <span
                class="citerefentry"><span
                  class="refentrytitle">printf</span>(3)</span> مشخص می‌گردد و در زبان برنامه‌نویسی C موجود است، تفاوت وجود دارد.
		</div><div
              class="para">
			<a
                class="xref"
                href="solving-problems.html">
      فصل 7, <em>حل مشکلات و یافتن اطلاعات مرتبط</em></a> درباره صفحات راهنمای با جزییات بیشتری بحث می‌کند (قسمت <a
                class="xref"
                href="solving-problems.html#sect.manual-pages">
      قسمت 7.1.1, “صفحات راهنما”
    </a> را مشاهده کنید).
		</div></div><div
            class="para">
			بیایید نگاهی به محتوای درون فایل <code
              class="filename">.deb</code> بیندازیم:
		</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ar t dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">debian-binary
control.tar.gz
data.tar.gz
$ </code><strong
              class="userinput"><code>ar x dpkg_1.17.23_amd64.deb</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>ls</code></strong>
<code
              class="computeroutput">control.tar.gz  data.tar.gz  debian-binary  dpkg_1.17.23_amd64.deb
$ </code><strong
              class="userinput"><code>tar tzf data.tar.gz | head -n 15</code></strong>
<code
              class="computeroutput">./
./var/
./var/lib/
./var/lib/dpkg/
./var/lib/dpkg/parts/
./var/lib/dpkg/info/
./var/lib/dpkg/alternatives/
./var/lib/dpkg/updates/
./etc/
./etc/logrotate.d/
./etc/logrotate.d/dpkg
./etc/dpkg/
./etc/dpkg/dpkg.cfg.d/
./etc/dpkg/dpkg.cfg
./etc/alternatives/
$ </code><strong
              class="userinput"><code>tar tzf control.tar.gz</code></strong>
<code
              class="computeroutput">./
./conffiles
./postinst
./md5sums
./prerm
./preinst
./control
./postrm
$ </code><strong
              class="userinput"><code>cat debian-binary</code></strong>
<code
              class="computeroutput">2.0</code></pre><div
            class="para">
			همانطور که مشاهده می‌کنید، آرشیو <code
              class="command">ar</code> یک بسته دبیان از سه فایل تشکیل شده است:
		</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">debian-binary</code>. این یک فای متنی است که تنها نسخه فایل <code
                    class="filename">.deb</code> را نمایش می‌دهد.
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">control.tar.gz</code>. این فایل آرشیو شامل تمام اطلاعات جانبی مربوط به بسته است، مانند نام و نسخه آن. برخی از این اطلاعات به ابزار مدیریت بسته امکان تشخیص قابل نصب یا حذف بودن بسته را می‌دهد، برای نمونه بر اساس فهرست بسته‌های موجود در سیستم.
				</div></li><li
                class="listitem"><div
                  class="para">
					<code
                    class="filename">data.tar.gz</code>. این آرشیو شامل تمام فایل‌های قابل استخراج از بسته است؛ این جایی است که فایل‌های باینری، مستندات و موارد دیگر قرار دارند. بعضی بسته‌ها ممکن است از قالب‌های فشرده‌ساز دیگری استفاده کنند که در این مورد نام فایل متفاوت خواهد بود (<code
                    class="filename">data.tar.bz2</code> برای bzip2 و <code
                    class="filename">data.tar.xz</code> برای xz).
				</div></li></ul></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.after-first-boot.html"><strong>قبلی</strong>4.3. پس از اولین راه‌اندازی سیستم</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.package-meta-information.html"><strong>بعدی</strong>5.2. اطلاعات-جانبی بسته</a></li></ul></body></html>
