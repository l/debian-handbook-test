<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.3. کیفیت سرویس</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-fa-IR-1.0-1" /><meta
        name="keywords"
        content="شبکه, Gateway, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="راهنمای دبیان برای مدیر سیستم‌ها" /><link
        rel="up"
        href="network-infrastructure.html"
        title="فصل 10. زیرساخت شبکه" /><link
        rel="prev"
        href="sect.virtual-private-network.html"
        title="10.2. شبکه خصوصی مجازی" /><link
        rel="next"
        href="sect.dynamic-routing.html"
        title="10.4. مسیریابی پویا" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/fa-IR/stable/sect.quality-of-service.html" /></head><body
      dir="rtl"><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtual-private-network.html"><strong>قبلی</strong></a></li><li
          class="home">راهنمای دبیان برای مدیر سیستم‌ها</li><li
          class="next"><a
            accesskey="n"
            href="sect.dynamic-routing.html"><strong>بعدی</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.quality-of-service"></a>10.3. کیفیت سرویس</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.qos-principe"></a>10.3.1. اصول و مکانیزم</h3></div></div></div><div
            class="para">
				عبارت <span
              class="emphasis"><em>QoS</em></span> یا <span
              class="emphasis"><em>Quality of Service</em></span> به برخی تکنیک‌ها اشاره می‌کند که کیفیت استفاده از یک سرویس را تضمین می‌کنند. محبوب‌ترین این تکنیک‌ها شامل طبقه‌بندی ترافیک شبکه به دسته‌های مختلف و تفاوت قائل‌شدن بین مدیریت هر دسته است. کارکرد اصلی مفهوم تفاوت‌ قائل‌شدن بین سرویس‌ها در <span
              class="emphasis"><em>traffic shaping</em></span> است، که نرخ تبادل داده را برای برخی سرویس‌ها یا میزبان‌ها به منظور اشباع‌نشدن پهنای باند محدود می‌سازد. شکل‌دهی به ترافیک یک روش موثر در ترافیک TCP است، چرا که این پروتکل به صورت خودکار با پهنای باند موجود سازگار خواهد شد.
			</div><a
            id="id-1.13.6.2.3"
            class="indexterm"></a><a
            id="id-1.13.6.2.4"
            class="indexterm"></a><a
            id="id-1.13.6.2.5"
            class="indexterm"></a><a
            id="id-1.13.6.2.6"
            class="indexterm"></a><div
            class="para">
				همچنین امکان تغییر اولویت در ترافیک نیز وجود دارد، که به اولویت‌بندی بسته‌های مرتبط با سرویس‌های تعاملی (مانند <code
              class="command">ssh</code> یا <code
              class="command">telnet</code>) یا سرویس‌هایی که با تنها با حجم کوچکی از داده سر و کار دارند، می‌پردازد.
			</div><div
            class="para">
				کرنل‌های دبیان شامل قابلیت‌های مورد نیاز QoS با همراه ماژول‌های آن هستند. تعداد این ماژول‌ها زیاد است و هر یک سرویس مختلفی را ارائه می‌دهد، به خصوص به شیوه زمان‌بندی برای صف بسته‌های IP؛ بازه گسترده زمان‌بندی موجود از تمام بازه ممکن نیازمندی‌ها فراتر می‌رود.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURE</em></span> LARTC — <span
                        class="emphasis"><em>Linux Advanced Routing &amp; Traffic Control</em></span></strong></p></div></div></div><div
              class="para">
				راهنمای <span
                class="emphasis"><em>Linux Advanced Routing &amp; Traffic Control</em></span> سندی جامع برای هر آنچه در مورد کیفیت سرویس شبکه است، می‌باشد. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.lartc.org/howto/">http://www.lartc.org/howto/</a></div>
			</div><a
              id="id-1.13.6.2.9.3"
              class="indexterm"></a><a
              id="id-1.13.6.2.9.4"
              class="indexterm"></a><a
              id="id-1.13.6.2.9.5"
              class="indexterm"></a></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.qos-config"></a>10.3.2. پیکربندی و پیاده‌سازی</h3></div></div></div><div
            class="para">
				پارامترهای QoS از طریق دستور <code
              class="command">tc</code> تنظیم می‌شوند (که توسط بسته <span
              class="pkg pkg">iproute</span> فراهم شده است). از آنجا که شامل رابط به نسبت پیچیده‌ای است، استفاده از یک ابزار سطح-بالاتر توصیه می‌شود.
			</div><a
            id="id-1.13.6.3.3"
            class="indexterm"></a><a
            id="id-1.13.6.3.4"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.qos-wondershaper"></a>10.3.2.1. کاهش‌ تاخیر: <code
                      class="command">wondershaper</code></h4></div></div></div><div
              class="para">
					هدف اصلی از <code
                class="command">wondershaper</code> (در بسته‌ای مشابه همین نام) به حداقل رساندن تاخیر مستقل از بار موجود در شبکه است. اینکار با محدودکردن ترافیک کل به مقداری که کمی از مقدار اشباع شبکه کمتر باشد صورت می‌گیرد.
				</div><a
              id="id-1.13.6.3.5.3"
              class="indexterm"></a><a
              id="id-1.13.6.3.5.4"
              class="indexterm"></a><a
              id="id-1.13.6.3.5.5"
              class="indexterm"></a><div
              class="para">
					زمانی که رابط شبکه پیکربندی شده باشد، تنظیم این محدودیت ترافیک با اجرای دستور <code
                class="command">wondershaper <em
                  class="replaceable">interface</em> <em
                  class="replaceable">download_rate</em> <em
                  class="replaceable">upload_rate</em></code> صورت می‌گیرد. برای نمونه، رابط می‌تواند <code
                class="literal">eth0</code> یا <code
                class="literal">ppp0</code> باشد و هر دو نرخ تبادل داده به صورت کلیوبیت بر ثانیه بیان می‌شوند. دستور <code
                class="command">wondershaper remove <em
                  class="replaceable">interface</em></code> محدودیت ترافیک روی رابط شبکه مشخص شده را حذف می‌کند.
				</div><div
              class="para">
					برای یک ارتباط Ethernet، بهتر است این اسکریپت پس از پیکربندی آن فراخوانی شود. اینکار با استفاده از عبارت‌های <code
                class="literal">up</code> و <code
                class="literal">down</code> در فایل <code
                class="filename">/etc/network/interfaces</code> که امکان فراخوانی دستورات دیگر پس از بالا آمدن رابط و قبل از قطع شدن آن است را، فراهم می‌آورد. برای نمونه:
				</div><div
              class="example"><a
                xmlns=""
                id="example.network-interfaces"></a><p
                class="title"><strong>
      مثال 10.9. تغییرات در فایل <code
                    class="filename">/etc/network/interfaces</code></strong></p><div
                class="example-contents"><pre
                  class="programlisting">
iface eth0 inet dhcp
    up /sbin/wondershaper eth0 500 100
    down /sbin/wondershaper remove eth0</pre></div></div><div
              class="para">
					در مورد PPP، ایجاد اسکریپتی که <code
                class="command">wondershaper</code> را در فایل <code
                class="filename">/etc/ppp/ip-up.d/</code> فراخوانی کند، منجر به فعال‌سازی محدودیت ترافیک پس از برقراری ارتباط می‌گردد.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>مطالعه بیشتر</em></span> پیکربندی بهینه</strong></p></div></div></div><div
                class="para">
					فایل <code
                  class="filename">/usr/share/doc/wondershaper/README.Debian.gz</code> شیوه پیکربندی توصیه شده توسط مدیر بسته را توضیح می‌دهد. به طور خاص، پیشنهاد می‌کند که نرخ دانلود و آپلود با مقادیر حقیقی آن‌ها همخوانی داشته باشد.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.qos-config-standard"></a>10.3.2.2. پیکربندی استاندارد</h4></div></div></div><div
              class="para">
					بجز پیکربندی‌های خاص QoS، کرنل لینوکس از یک زمان‌بند صف <code
                class="literal">pfifo_fast</code> استفاده می‌کند که شامل ویژگی‌های جالبی است. اولویت هر بسته IP پردازش شده بر اساس فیلد ToS یا <span
                class="emphasis"><em>Type of Service</em></span> آن بسته مشخص می‌شود؛ تغییر این فیلد باعث می‌شود که از قابلیت‌های این زمان‌بند بتوانید به خوبی استفاده کنید. پنج مقدار ممکن برای آن وجود دارند؛
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							سرویس-عادی (۰)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							کاهش-هزینه (۲)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							افزایش-قابلیت اعتماد (۴)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							افزایش-قدرت خروجی (۸)؛
						</div></li><li
                  class="listitem"><div
                    class="para">
							کاهش-تاخیر (۱۶).
						</div></li></ul></div><a
              id="id-1.13.6.3.6.4"
              class="indexterm"></a><a
              id="id-1.13.6.3.6.5"
              class="indexterm"></a><div
              class="para">
					فیلد ToS می‌تواند توسط برنامه‌هایی که بسته‌های IP را تولید می‌کنند ایجاد گردد یا به صورت درجا توسط <span
                class="emphasis"><em>netfilter</em></span> تغییر یابد. قواعد پیش رو برای افزایش توان پاسخگویی سرویس SSH در یکی سرور کافی هستند:
				</div><pre
              class="programlisting scale">
iptables -t mangle -A PREROUTING -p tcp --sport ssh -j TOS --set-tos Minimize-Delay
iptables -t mangle -A PREROUTING -p tcp --dport ssh -j TOS --set-tos Minimize-Delay</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtual-private-network.html"><strong>قبلی</strong>10.2. شبکه خصوصی مجازی</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>بالا</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>خانه</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.dynamic-routing.html"><strong>بعدی</strong>10.4. مسیریابی پویا</a></li></ul></body></html>
