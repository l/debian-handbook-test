<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.3. 设置主机名称与配置名称服务</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-CN-1.0-1" /><meta
        name="keywords"
        content="配置, 本地化, 地区设置, 网络, 名称解析, 用户, 用户组, 账户, 命令行解释器, Shell, 打印, Bootloader, 内核编译" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="basic-configuration.html"
        title="第 8 章 基础配置：网络，账户，打印……" /><link
        rel="prev"
        href="sect.network-config.html"
        title="8.2. 配置网络" /><link
        rel="next"
        href="sect.user-group-databases.html"
        title="8.4. User and Group Databases" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/zh-CN/stable/sect.hostname-name-service.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>下一页</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.hostname-name-service"></a>8.3. 设置主机名称与配置名称服务</h2></div></div></div><a
          id="id-1.11.7.2"
          class="indexterm"></a><a
          id="id-1.11.7.3"
          class="indexterm"></a><div
          class="para">
			将 IP 数字转换为名称系方便记忆。实务上，IP 地址系用于辨识网络卡之类的网络接口设备。机器可能有多个网络卡，每个网络卡可能有多个接口，所以在网域名称系统里，一部电脑就可能有多个名称。
		</div><div
          class="para">
			然而，每部机器都有个辨识用的主要 (如 “canonical”) 名称，保存在 <code
            class="filename">/etc/hostname</code> 文件内并以初始脚本经由 <code
            class="command">hostname</code> 命令与 Linux 核心沟通。现在的值保存在虚拟文件系统，可经由 <code
            class="command">cat /proc/sys/kernel/hostname</code> 命令取得。
		</div><a
          id="id-1.11.7.6"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>基本</em></span> <code
                      class="filename">/proc/</code> 与 <code
                      class="filename">/sys/</code>，虚拟文件系统</strong></p></div></div></div><a
            id="id-1.11.7.7.2"
            class="indexterm"></a><a
            id="id-1.11.7.7.3"
            class="indexterm"></a><a
            id="id-1.11.7.7.4"
            class="indexterm"></a><a
            id="id-1.11.7.7.5"
            class="indexterm"></a><div
            class="para">
			<code
              class="filename">/proc/</code> 与 <code
              class="filename">/sys/</code> 文件树系由 “虚拟” 文件系统产生。从核心 (以列出虚拟文件方式) 取得信息并与其沟通 (写入虚拟文件) 的实务。
		</div><div
            class="para">
			<code
              class="filename">/sys/</code> 系供近用内部核心对象之用，尤其是代表系统的各种设备。核心本身可以共享资源：每个设备的状态 (如，处于省电模式)、移动状置等。<code
              class="filename">/sys/</code> 祗存于于核心版本 2.6 及更新的版本。
		</div></div><div
          class="para">
			意外的是，网域名称的管理方式不同，来自机器的完整名称，经由名称解析取得。可以在 <code
            class="filename">/etc/hosts</code> 文件内更改它；在名称清单前写入完整的名称，如下例：
		</div><div
          class="informalexample"><pre
            class="programlisting">
127.0.0.1     localhost
192.168.0.1   arrakis.falcot.com arrakis</pre></div><a
          id="id-1.11.7.10"
          class="indexterm"></a><a
          id="id-1.11.7.11"
          class="indexterm"></a><a
          id="id-1.11.7.12"
          class="indexterm"></a><a
          id="id-1.11.7.13"
          class="indexterm"></a><a
          id="id-1.11.7.14"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.name-resolution"></a>8.3.1. Name Resolution</h3></div></div></div><a
            id="id-1.11.7.15.2"
            class="indexterm"></a><a
            id="id-1.11.7.15.3"
            class="indexterm"></a><div
            class="para">
				The mechanism for name resolution in Linux is modular and can use various sources of information declared in the <code
              class="filename">/etc/nsswitch.conf</code> file. The entry that involves host name resolution is <code
              class="literal">hosts</code>. By default, it contains <code
              class="literal">files dns</code>, which means that the system consults the <code
              class="filename">/etc/hosts</code> file first, then DNS servers. NIS/NIS+ or LDAP servers are other possible sources.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTE</em></span> NSS and DNS</strong></p></div></div></div><div
              class="para">
				Be aware that the commands specifically intended to query DNS (especially <code
                class="command">host</code>) do not use the standard name resolution mechanism (NSS). As a consequence, they do not take into consideration <code
                class="filename">/etc/nsswitch.conf</code>, and thus, not <code
                class="filename">/etc/hosts</code> either.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.dns-server-configuration"></a>8.3.1.1. Configuring DNS Servers</h4></div></div></div><a
              id="id-1.11.7.15.6.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.3"
              class="indexterm"></a><div
              class="para">
					DNS (Domain Name Service) is a distributed and hierarchical service mapping names to IP addresses, and vice-versa. Specifically, it can turn a human-friendly name such as <code
                class="literal">www.eyrolles.com</code> into the actual IP address, <code
                class="literal">213.244.11.247</code>.
				</div><div
              class="para">
					To access DNS information, a DNS server must be available to relay requests. Falcot Corp has its own, but an individual user is more likely to use the DNS servers provided by their ISP.
				</div><a
              id="id-1.11.7.15.6.6"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.7"
              class="indexterm"></a><div
              class="para">
					The DNS servers to be used are indicated in the <code
                class="filename">/etc/resolv.conf</code>, one per line, with the <code
                class="literal">nameserver</code> keyword preceding an IP address, as in the following example:
				</div><pre
              class="programlisting">
nameserver 212.27.32.176
nameserver 212.27.32.177
nameserver 8.8.8.8
</pre><div
              class="para">
					Note that the <code
                class="filename">/etc/resolv.conf</code> file may be handled automatically (and overwritten) when the network is managed by NetworkManager or configured via DHCP.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.etc-hosts"></a>8.3.1.2. The <code
                      class="filename">/etc/hosts</code> file</h4></div></div></div><a
              id="id-1.11.7.15.7.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.7.3"
              class="indexterm"></a><div
              class="para">
					If there is no name server on the local network, it is still possible to establish a small table mapping IP addresses and machine hostnames in the <code
                class="filename">/etc/hosts</code> file, usually reserved for local network stations. The syntax of this file is very simple: each line indicates a specific IP address followed by the list of any associated names (the first being “completely qualified”, meaning it includes the domain name).
				</div><div
              class="para">
					This file is available even during network outages or when DNS servers are unreachable, but will only really be useful when duplicated on all the machines on the network. The slightest alteration in correspondence will require the file to be updated everywhere. This is why <code
                class="filename">/etc/hosts</code> generally only contains the most important entries.
				</div><div
              class="para">
					This file will be sufficient for a small network not connected to the Internet, but with 5 machines or more, it is recommended to install a proper DNS server.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> Bypassing DNS</strong></p></div></div></div><div
                class="para">
					Since applications check the <code
                  class="filename">/etc/hosts</code> file before querying DNS, it is possible to include information in there that is different from what the DNS would return, and therefore to bypass normal DNS-based name resolution.
				</div><div
                class="para">
					This allows, in the event of DNS changes not yet propagated, to test access to a website with the intended name even if this name is not properly mapped to the correct IP address yet.
				</div><div
                class="para">
					Another possible use is to redirect traffic intended for a specific host to the localhost, thus preventing any communication with the given host. For example, hostnames of servers dedicated to serving ads could be diverted which would bypass these ads resulting in more fluid, less distracting, navigation.
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>上一页</strong>8.2. 配置网络</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>下一页</strong>8.4. User and Group Databases</a></li></ul></body></html>
