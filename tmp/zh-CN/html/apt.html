<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">第 6 章 维护和更新：APT 工具</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-zh-CN-1.0-1" /><meta
        name="keywords"
        content="高级包管理工具(Advanced Packaging Tool), apt-get, apt-cache, aptitude 更安全的apt, 新立得包管理器, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="up"
        href="index.html"
        title="Debian 管理员手册" /><link
        rel="prev"
        href="sect.coexistence-with-other-packaging-systems.html"
        title="5.5. 与其它软件包共存" /><link
        rel="next"
        href="sect.apt-get.html"
        title="6.2. aptitude、apt-get和 apt 命令" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/zh-CN/stable/apt.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>上一页</strong></a></li><li
          class="home">Debian 管理员手册</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>下一页</strong></a></li></ul><div
        xml:lang="zh-CN"
        class="chapter"
        lang="zh-CN"><div
          class="titlepage"><div><div><h1
                class="title"><a
                  xmlns=""
                  id="apt"></a>第 6 章 维护和更新：APT 工具</h1></div></div></div><div
          class="toc"><dl
            class="toc"><dt><span
                class="section"><a
                  href="apt.html#sect.apt-sources.list">6.1. 写入<code
                    class="filename">sources.list</code>文件</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.6">6.1.1. 句法</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.7">6.1.2. 给<span
                        class="distribution distribution">Stable</span> 使用者的仓库</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.8">6.1.3. 给<span
                        class="distribution distribution">测试</span>/<span
                        class="distribution distribution">非稳定</span> 版本用户的仓库</a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.9">6.1.4. 非官方来源： <code
                        class="literal">mentors.debian.net</code></a></span></dt><dt><span
                    class="section"><a
                      href="apt.html#id-1.9.10.10">6.1.5. Debian 软件包 缓存 代理</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-get.html">6.2. <code
                    class="command">aptitude</code>、<code
                    class="command">apt-get</code>和 <code
                    class="command">apt</code> 命令</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.7">6.2.1. 开端</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#id-1.9.11.8">6.2.2. 安装和卸载</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-upgrade">6.2.3. System Upgrade</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-config">6.2.4. Configuration Options</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt.priorities">6.2.5. Managing Package Priorities</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.apt-mix-distros">6.2.6. Working with Several Distributions</a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-get.html#sect.automatic-tracking">6.2.7. Tracking Automatically Installed Packages</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.apt-cache.html">6.3. The <code
                    class="command">apt-cache</code> Command</a></span></dt><dt><span
                class="section"><a
                  href="sect.apt-frontends.html">6.4. Frontends: <code
                    class="command">aptitude</code>, <code
                    class="command">synaptic</code></a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#sect.aptitude">6.4.1. <code
                        class="command">aptitude</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.apt-frontends.html#id-1.9.13.7">6.4.2. <code
                        class="command">synaptic</code></a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.package-authentication.html">6.5. Checking Package Authenticity</a></span></dt><dt><span
                class="section"><a
                  href="sect.dist-upgrade.html">6.6. Upgrading from One Stable Distribution to the Next</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.3">6.6.1. Recommended Procedure</a></span></dt><dt><span
                    class="section"><a
                      href="sect.dist-upgrade.html#id-1.9.15.4">6.6.2. Handling Problems after an Upgrade</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.regular-upgrades.html">6.7. Keeping a System Up to Date</a></span></dt><dt><span
                class="section"><a
                  href="sect.automatic-upgrades.html">6.8. Automatic Upgrades</a></span></dt><dd><dl><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.5">6.8.1. Configuring <code
                        class="command">dpkg</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.6">6.8.2. Configuring APT</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.7">6.8.3. Configuring <code
                        class="command">debconf</code></a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.8">6.8.4. Handling Command Line Interactions</a></span></dt><dt><span
                    class="section"><a
                      href="sect.automatic-upgrades.html#id-1.9.17.9">6.8.5. The Miracle Combination</a></span></dt></dl></dd><dt><span
                class="section"><a
                  href="sect.searching-packages.html">6.9. Searching for Packages</a></span></dt></dl></div><div
          class="highlights"><div
            class="para">
		Debian 之所以如此受系统管理员欢迎，是因为项目提供的软件极易安装，整个系统的更新也极为简单。这一独特的优点主要得归功于 <span
              class="emphasis"><em>APT</em></span> 程序，其特性在 Falcot 公司得到系统管理员们热情的研究。
	</div></div><div
          class="para">
		<a
            id="id-1.9.4.1"
            class="indexterm"></a> 是高级软件包管理器 <a
            id="id-1.9.4.2"
            class="indexterm"></a> 的缩写。它的‘高级’之处在于对软件包的管理方法不同。APT并不是简单地独立评估每个包，而是将包看做一个整体系统，根据现有的和兼容的已有包找到最佳组合（包括依赖于这个软件包的其他包）。
	</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>词汇</em></span> 软件源和源代码软件包</strong></p></div></div></div><div
            class="para">
		<span
              class="emphasis"><em>源</em></span>这个词的意思会有一些模糊不清。一个源代码软件包- 是一个包含有源程序代码的包，—不要和软件源相混淆—这是指一个包所在的仓库（网站，FTP服务器，CD-ROM光驱，本地磁盘等等）。
	</div></div><div
          class="para">
		APT needs to be given a “list of package sources”: the file <code
            class="filename">/etc/apt/sources.list</code> will list the different repositories (or “sources”) that publish Debian packages. APT will then import the list of packages published by each of these sources. This operation is achieved by downloading <code
            class="filename">Packages.xz</code> or a variant using a different compression method (such as <code
            class="filename">Packages.gz</code> or <code
            class="filename">.bz2</code>) files (in case of a source of binary packages) and <code
            class="filename">Sources.xz</code> or a variant (in case of a source of source packages) and by analyzing their contents. When an old copy of these files is already present, APT can update it by only downloading the differences (see sidebar <a
            class="xref"
            href="sect.apt-get.html#sidebar.apt-pdiff"><span
              class="emphasis"><em>TIP</em></span> Incremental upgrade</a>).
	</div><a
          id="id-1.9.7"
          class="indexterm"></a><a
          id="id-1.9.8"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>回到基础</em></span> <code
                      class="command">gzip</code>, <code
                      class="command">bzip2</code>, <code
                      class="command">LZMA</code> 和<code
                      class="command">XZ</code> 压缩</strong></p></div></div></div><a
            id="id-1.9.9.2"
            class="indexterm"></a><a
            id="id-1.9.9.3"
            class="indexterm"></a><a
            id="id-1.9.9.4"
            class="indexterm"></a><a
            id="id-1.9.9.5"
            class="indexterm"></a><div
            class="para">
		A <code
              class="filename">.gz</code> extension refers to a file compressed with the <code
              class="command">gzip</code> utility. <code
              class="command">gzip</code> is the fast and efficient traditional Unix utility to compress files. Newer tools achieve better rates of compression but require more resources (computation time and memory) to compress and uncompress a file. Among them, and by order of appearance, there are <code
              class="command">bzip2</code> (generating files with a <code
              class="filename">.bz2</code> extension), <code
              class="command">lzma</code> (generating <code
              class="filename">.lzma</code> files) and <code
              class="command">xz</code> (generating <code
              class="filename">.xz</code> files).
	</div></div><div
          class="section"><div
            class="titlepage"><div><div><h2
                  class="title"><a
                    xmlns=""
                    id="sect.apt-sources.list"></a>6.1. 写入<code
                    class="filename">sources.list</code>文件</h2></div></div></div><a
            id="id-1.9.10.2"
            class="indexterm"></a><a
            id="id-1.9.10.3"
            class="indexterm"></a><a
            id="id-1.9.10.4"
            class="indexterm"></a><a
            id="id-1.9.10.5"
            class="indexterm"></a><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.6"></a>6.1.1. 句法</h3></div></div></div><div
              class="para">
				<code
                class="filename">/etc/apt/sources.list</code> 文件中每个有效的代码行包括对源的描述，由三个被空格分开的部分组成。
			</div><div
              class="para">
				第一个区域指示源的类型：
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb</code>” 表示二进制软件包，
					</div></li><li
                  class="listitem"><div
                    class="para">
						“<code
                      class="literal">deb-src</code>”表示源代码包。
					</div></li></ul></div><div
              class="para">
				第二个区域表示源的基本 URL （结合文件 <code
                class="filename">Packages.gz</code> 中给出的文件名，必须是有效URL的全称）：此区域存在于一个 Debian 镜像或其他任何由第三方所建的软件源文档中。这个 URL 可以用 <code
                class="literal">file://</code> 起始来表示系统里安装了本地仓库，或以 <code
                class="literal">http://</code> 表示仓库可通过网络服务器来获取，或用 <code
                class="literal">ftp://</code> 表示软件源在一个 FTP 服务器上。URL 还可以用 起始表示从 <code
                class="literal">cdrom:</code> 开始安装。因基于网络的安装愈来愈流行，这个方法已不那么常用了。
			</div><div
              class="para">
				最后这一区域的句法取决于仓库的结构。从最简单的例子开始，你可以很简单地描述一个软件源的子目录 （必须用到结尾处的斜线）（通常用 “<code
                class="filename">./</code>” 表示子目录不存在 - 这个软件源就位于给定的 URL上）。 不过一般来讲，仓库的结构类似于一个 Debian 的镜像， 包括很多分支，每一分支有很多组成部分。通常命名选定的分支（由 “codename” 来命名 - 参看附栏中的目录<a
                class="xref"
                href="sect.foundation-documents.html#sidebar.bruce-perens"><span
                  class="emphasis"><em>COMMUNITY</em></span> Bruce Perens, a controversial leader</a> 或是由对应的 “suites” — <code
                class="literal">stable</code>, <code
                class="literal">testing</code>, <code
                class="literal">unstable</code> ），然后命名下面的组成部分（或分区）（从<code
                class="literal">main</code>, <code
                class="literal">contrib</code> 和<code
                class="literal">non-free</code>中选择） 来激活一个典型的 Debian 镜像。
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.sections"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>关键词</em></span> <code
                          class="literal">main</code>, <code
                          class="literal">contrib</code> 和 <code
                          class="literal">non-free</code> 存档</strong></p></div></div></div><a
                id="id-1.9.10.6.7.2"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.3"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.4"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.5"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.6"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.7"
                class="indexterm"></a><a
                id="id-1.9.10.6.7.8"
                class="indexterm"></a><div
                class="para">
				Debian 根据开发者所选定的许可声明，使用这三部分来区分不同的软件包。<code
                  class="literal">Main</code> 收集了完全遵守Debian 免费软件指南的所有软件包。
			</div><div
                class="para">
				<code
                  class="literal">non-free</code> 文档有所不同，它包括没有（ 完全）遵循上述原则，未受约束但仍然被发布的软件。这种文档为使用者提供服务，但不是 Debian 的官方组成部分- 不过 Debian 从来都提倡优先使用自由软件。这类文档的存在代表了一个来自 Richard M. Stallman 的重要问题，也阻碍了自由软件基金会向用户推荐 Debian.
			</div><div
                class="para">
				<code
                  class="literal">Contrib</code> (贡献)是一类没有一些非自由元件就不能正常运作的开源软件。这类元件会是来自非自由 <code
                  class="literal">non-free</code> 部分的软件， 或非自由文件如游戏 ROMs, 控制台BIOS等。<code
                  class="literal">Contrib</code> 也包括需要专利元件来编译的自由软件。早先的例子是OpenOffice.org 办公软件套装，曾经需要带专利的 Java 环境来运行。
			</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>TIP</em></span> <code
                          class="filename">/etc/apt/sources.list.d/*.list</code> 文件</strong></p></div></div></div><div
                class="para">
				如果很多个软件包的源库在被引用，将它们分成多个文件会很实用。每一部分存在<code
                  class="filename">/etc/apt/sources.list.d/<em
                    class="replaceable">文件名</em>.list</code> （参见边栏<a
                  class="xref"
                  href="sect.apt-get.html#sidebar.directory.d"><span
                    class="emphasis"><em>BACK TO BASICS</em></span> Directories ending in <code
                    class="filename">.d</code></a>)。
			</div></div><a
              id="id-1.9.10.6.9"
              class="indexterm"></a><div
              class="para">
				The <code
                class="literal">cdrom</code> entries describe the CD/DVD-ROMs you have. Contrary to other entries, a CD-ROM is not always available since it has to be inserted into the drive and since only one disc can be read at a time. For those reasons, these sources are managed in a slightly different way, and need to be added with the <code
                class="command">apt-cdrom</code> program, usually executed with the <code
                class="literal">add</code> parameter. The latter will then request the disc to be inserted in the drive and will browse its contents looking for <code
                class="filename">Packages</code> files. It will use these files to update its database of available packages (this operation is usually done by the <code
                class="command">apt update</code> command). From then on, APT can require the disc to be inserted if it needs one of its packages.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.7"></a>6.1.2. 给<span
                      class="distribution distribution">Stable</span> 使用者的仓库</h3></div></div></div><div
              class="para">
				Here is a standard <code
                class="filename">sources.list</code> for a system running the <span
                class="distribution distribution">Stable</span> version of Debian:
			</div><div
              class="example"><a
                xmlns=""
                id="example.stable-sources-list"></a><p
                class="title"><strong>例 6.1. <code
                    class="filename">/etc/apt/sources.list</code> 给 Debian Stable 使用者的文件</strong></p><div
                class="example-contents"><pre
                  class="programlisting"># Security updates
deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free

## Debian mirror

# Base repository
deb http://ftp.debian.org/debian jessie main contrib non-free
deb-src http://ftp.debian.org/debian jessie main contrib non-free

# Stable updates
deb http://ftp.debian.org/debian jessie-updates main contrib non-free
deb-src http://ftp.debian.org/debian jessie-updates main contrib non-free

# Stable backports
deb http://ftp.debian.org/debian jessie-backports main contrib non-free
deb-src http://ftp.debian.org/debian jessie-backports main contrib non-free</pre></div></div><div
              class="para">
				此文件列出了 与Debian <span
                class="distribution distribution">Jessie</span> 版本相关软件包的所有来源（此手册写作当前<span
                class="distribution distribution">稳定</span>版本）。我们不希望当下一个稳定版本发布时，所有基于它的分支在我们控制范围外被改变，因此决定用“Jessie” 而不是用相对应的 “stable““ 稳定” 的别名（<code
                class="literal">stable</code>, <code
                class="literal">stable-updates</code>, <code
                class="literal">stable-backports</code>）来命名。
			</div><div
              class="para">
				大多数软件包来源于“基础仓库”，它拥有所有的软件包，但极少更新（大概每两个月根据“点发布”更新）。其他仓库不完全（不包括所有软件包），不过可以支持更新（软件包是较新版本）。接下来的几章将会介绍这些仓库管理的目的和规则。
			</div><div
              class="para">
				请注意，当你所需要的软件包版本存在于几个仓库中时，在文件<code
                class="filename">sources.list</code>中所列出的第一个会被使用。因此，非官方来源的包一般在此文件末尾处。
			</div><div
              class="para">
				本节提到的<span
                class="distribution distribution">稳定Stable</span> 对于<span
                class="distribution distribution">Oldstable</span> 一样适用。后者只是同时维护的较旧<span
                class="distribution distribution">Stable</span> 版本。
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.security-updates"></a>6.1.2.1. 安全更新</h4></div></div></div><a
                id="id-1.9.10.7.8.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.8.4"
                class="indexterm"></a><div
                class="para">
					安全更新一般不在 Debian 镜像通常所在的网络上，而是在<code
                  class="literal">security.debian.org</code>（位于<a
                  class="link"
                  href="sect.debian-internals.html#dsa-team"> Debian 系统管理员Debian System Administrators</a>维护的小范围网络）。其上的文档包括为那些<span
                  class="distribution distribution">稳定</span>版本准备的安全更新（由 Debian 安全团队和/或软件包维护者预备）。
				</div><div
                class="para">
					服务器上也有针对<span
                  class="distribution distribution">测试版</span>的安全更新。这类更新经常通过从<span
                  class="distribution distribution">非稳定版</span>流入<span
                  class="distribution distribution">测试版</span>，因此单独存在于服务器上的更新不常见。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.stable-updates"></a>6.1.2.2. 稳定更新</h4></div></div></div><a
                id="id-1.9.10.7.9.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.9.4"
                class="indexterm"></a><div
                class="para">
					稳定更新对安全性不敏感，在下一个稳定版本点发布前，它还是很重要，需要推送给使用者。
				</div><div
                class="para">
					This repository will typically contain fixes for critical bugs which could not be fixed before release or which have been introduced by subsequent updates. Depending on the urgency, it can also contain updates for packages that have to evolve over time… like <span
                  class="pkg pkg">spamassassin</span>'s spam detection rules, <span
                  class="pkg pkg">clamav</span>'s virus database, or the daylight-saving time rules of all timezones (<span
                  class="pkg pkg">tzdata</span>).
				</div><div
                class="para">
					实际上，这个仓库是 <code
                  class="literal">计划-更新proposed-updates</code> 的子库，是由稳定更新管理员小心选定的。
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.proposed-updates"></a>6.1.2.3. 计划更新</h4></div></div></div><a
                id="id-1.9.10.7.10.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.10.3"
                class="indexterm"></a><div
                class="para">
					一旦发布，<span
                  class="distribution distribution">稳定</span>分布只每两个月更新一次。接下来的更新在<code
                  class="literal">计划更新</code>仓库里准备（由稳定发布管理员监督）。
				</div><div
                class="para">
					这个仓库中通常有安全更新和稳定更新的文档，还有更多：软件包维护者可能在这里修复一些不需要马上发布的重要的漏洞。
				</div><div
                class="para">
					Anyone can use this repository to test those updates before their official publication. The extract below uses the <code
                  class="literal">jessie-proposed-updates</code> alias which is both more explicit and more consistent since <code
                  class="literal">wheezy-proposed-updates</code> also exists (for the <span
                  class="distribution distribution">Oldstable</span> updates):
				</div><pre
                class="programlisting">deb http://ftp.debian.org/debian jessie-proposed-updates main contrib non-free</pre></div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="sect.backports"></a>6.1.2.4. Stable Backports</h4></div></div></div><a
                id="id-1.9.10.7.11.2"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.3"
                class="indexterm"></a><a
                id="id-1.9.10.7.11.4"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">stable-backports</code> repository hosts “package backports”. The term refers to a package of some recent software which has been recompiled for an older distribution, generally for <span
                  class="distribution distribution">Stable</span>.
				</div><div
                class="para">
					When the distribution becomes a little dated, numerous software projects have released new versions that are not integrated into the current <span
                  class="distribution distribution">Stable</span> (which is only modified to address the most critical problems, such as security problems). Since the <span
                  class="distribution distribution">Testing</span> and <span
                  class="distribution distribution">Unstable</span> distributions can be more risky, package maintainers sometimes offer recompilations of recent software applications for <span
                  class="distribution distribution">Stable</span>, which has the advantage to limit potential instability to a small number of chosen packages. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://backports.debian.org">http://backports.debian.org</a></div>
				</div><div
                class="para">
					The <code
                  class="literal">stable-backports</code> repository is now available on the usual Debian mirrors. But backports for <span
                  class="distribution distribution">Squeeze</span> are still hosted on a dedicated server (<code
                  class="literal">backports.debian.org</code>), and requires the following <code
                  class="filename">sources.list</code> entry:
				</div><a
                id="id-1.9.10.7.11.8"
                class="indexterm"></a><pre
                class="programlisting">deb http://backports.debian.org/debian-backports squeeze-backports main contrib non-free</pre><div
                class="para">
					Backports from <code
                  class="literal">stable-backports</code> are always created from packages available in <span
                  class="distribution distribution">Testing</span>. This ensures that all installed backports will be upgradable to the corresponding stable version once the next stable release of Debian is available.
				</div><div
                class="para">
					Even though this repository provides newer versions of packages, APT will not install them unless you give explicit instructions to do so (or unless you have already done so with a former version of the given backport):
				</div><pre
                class="screen"><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install <em
                      class="replaceable">package</em>/jessie-backports
</code></strong><code
                  class="computeroutput">$ </code><strong
                  class="userinput"><code>sudo apt-get install -t jessie-backports <em
                      class="replaceable">package</em>
</code></strong></pre></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.8"></a>6.1.3. 给<span
                      class="distribution distribution">测试</span>/<span
                      class="distribution distribution">非稳定</span> 版本用户的仓库</h3></div></div></div><div
              class="para">
				下面是一个标准 <code
                class="filename">sources.list</code>文件，用于系统运行 Debian <span
                class="distribution distribution">测试</span>或<span
                class="distribution distribution">非稳定</span> 版本：
			</div><div
              class="example"><a
                xmlns=""
                id="example.testing-sources-list"></a><p
                class="title"><strong>例 6.2. <code
                    class="filename">/etc/apt/sources.list</code> file for users of Debian <span
                    class="distribution distribution">Testing</span>/<span
                    class="distribution distribution">Unstable</span></strong></p><div
                class="example-contents"><pre
                  class="programlisting">
↵
# Unstable↵
deb http://ftp.debian.org/debian unstable main contrib non-free↵
deb-src http://ftp.debian.org/debian unstable main contrib non-free↵
↵
# Testing↵
deb http://ftp.debian.org/debian testing main contrib non-free↵
deb-src http://ftp.debian.org/debian testing main contrib non-free↵
↵
# Stable↵
deb http://ftp.debian.org/debian stable main contrib non-free↵
deb-src http://ftp.debian.org/debian stable main contrib non-free↵
↵
# Security updates↵
deb http://security.debian.org/ stable/updates main contrib non-free↵
deb http://security.debian.org/ testing/updates main contrib non-free↵
deb-src http://security.debian.org/ stable/updates main contrib non-free↵
deb-src http://security.debian.org/ testing/updates main contrib non-free↵</pre></div></div><div
              class="para">
				APT 通过<code
                class="filename">sources.list</code> 文件来从<span
                class="distribution distribution">非稳定</span>安装软件包。如果这不是你所需要的，用<code
                class="literal">APT::Default-Release</code> 设置（参见 <a
                class="xref"
                href="sect.apt-get.html#sect.apt-upgrade">第 6.2.3 节 “System Upgrade”</a>）来指示 APT 从另一分布获取软件包（一般用 <span
                class="distribution distribution">测试</span>）。
			</div><div
              class="para">
				There are good reasons to include all those repositories, even though a single one should be enough. <span
                class="distribution distribution">Testing</span> users will appreciate the possibility to cherry-pick a fixed package from <span
                class="distribution distribution">Unstable</span> when the version in <span
                class="distribution distribution">Testing</span> is affected by an annoying bug. On the opposite, <span
                class="distribution distribution">Unstable</span> users bitten by unexpected regressions have the possibility to downgrade packages to their (supposedly working) <span
                class="distribution distribution">Testing</span> version.
			</div><div
              class="para">
				The inclusion of <span
                class="distribution distribution">Stable</span> is more debatable but it often gives access to some packages which have been removed from the development versions. It also ensures that you get the latest updates for packages which have not been modified since the last stable release.
			</div><div
              class="section"><div
                class="titlepage"><div><div><h4
                      class="title"><a
                        xmlns=""
                        id="id-1.9.10.8.7"></a>6.1.3.1. <span
                        class="distribution distribution">实验</span> 仓库</h4></div></div></div><a
                id="id-1.9.10.8.7.2"
                class="indexterm"></a><div
                class="para">
					The archive of <span
                  class="distribution distribution">Experimental</span> packages is present on all Debian mirrors, and contains packages which are not in the <span
                  class="distribution distribution">Unstable</span> version yet because of their substandard quality — they are often software development versions or pre-versions (alpha, beta, release candidate…). A package can also be sent there after undergoing subsequent changes which can generate problems. The maintainer then tries to uncover them with help from advanced users who can handle important issues. After this first stage, the package is moved into <span
                  class="distribution distribution">Unstable</span>, where it reaches a much larger audience and where it will be tested in much more detail.
				</div><div
                class="para">
					<span
                  class="distribution distribution">Experimental</span> is generally used by users who do not mind breaking their system and then repairing it. This distribution gives the possibility to import a package which a user wants to try or use as the need arises. That is exactly how Debian approaches it, since adding it in APT's <code
                  class="filename">sources.list</code> file does not lead to the systematic use of its packages. The line to be added is:
				</div><div
                class="informalexample"><pre
                  class="programlisting">deb http://ftp.debian.org/debian experimental main contrib non-free↵</pre></div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.9"></a>6.1.4. 非官方来源： <code
                      class="literal">mentors.debian.net</code></h3></div></div></div><a
              id="id-1.9.10.9.2"
              class="indexterm"></a><div
              class="para">
				There are numerous non-official sources of Debian packages set up by advanced users who have recompiled some software (Ubuntu made this popular with their Personal Package Archive service), by programmers who make their creation available to all, and even by Debian developers who offer pre-versions of their package online.
			</div><div
              class="para">
				The <code
                class="literal">mentors.debian.net</code> site is interesting (although it only provides source packages), since it gathers packages created by candidates to the status of official Debian developer or by volunteers who wish to create Debian packages without going through that process of integration. These packages are made available without any guarantee regarding their quality; make sure that you check their origin and integrity and then test them before you consider using them in production.
			</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>社区</em></span> <code
                          class="literal">debian.net</code> 站点</strong></p></div></div></div><a
                id="id-1.9.10.9.5.2"
                class="indexterm"></a><div
                class="para">
				The <span
                  class="emphasis"><em>debian.net</em></span> domain is not an official resource of the Debian project. Each Debian developer may use that domain name for their own use. These websites can contain unofficial services (sometimes personal sites) hosted on a machine which does not belong to the project and set up by Debian developers, or even prototypes about to be moved on to <span
                  class="emphasis"><em>debian.org</em></span>. Two reasons can explain why some of these prototypes remain on <span
                  class="emphasis"><em>debian.net</em></span>: either no one has made the necessary effort to transform it into an official service (hosted on the <span
                  class="emphasis"><em>debian.org</em></span> domain, and with a certain guarantee of maintenance), or the service is too controversial to be officialized.
			</div></div><div
              class="para">
				Installing a package means giving root rights to its creator, because they decide on the contents of the initialization scripts which are run under that identity. Official Debian packages are created by volunteers who have been co-opted and reviewed and who can seal their packages so that their origin and integrity can be checked.
			</div><div
              class="para">
				In general, be wary of a package whose origin you don't know and which isn't hosted on one of the official Debian servers: evaluate the degree to which you can trust the creator, and check the integrity of the package. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://mentors.debian.net/">http://mentors.debian.net/</a></div>
			</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.snapshot.debian.org"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>进阶</em></span>旧包版本： <code
                          class="literal">snapshot.debian.org</code></strong></p></div></div></div><a
                id="id-1.9.10.9.8.2"
                class="indexterm"></a><div
                class="para">
				The <code
                  class="literal">snapshot.debian.org</code> service, introduced in April 2010, can be used to “go backwards in time” and to find an old version of a package. It can be used for example to identify which version of a package introduced a regression, and more concretely, to come back to the former version while waiting for the regression fix.
			</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h3
                    class="title"><a
                      xmlns=""
                      id="id-1.9.10.10"></a>6.1.5. Debian 软件包 缓存 代理</h3></div></div></div><a
              id="id-1.9.10.10.2"
              class="indexterm"></a><a
              id="id-1.9.10.10.3"
              class="indexterm"></a><div
              class="para">
				When an entire network of machines is configured to use the same remote server to download the same updated packages, any administrator knows that it would be beneficial to have an intermediate proxy acting as a network-local cache (see sidebar <a
                class="xref"
                href="sect.apt-cache.html#sidebar.cache"><span
                  class="emphasis"><em>VOCABULARY</em></span> Cache</a>).
			</div><div
              class="para">
				You can configure APT to use a "standard" proxy (see <a
                class="xref"
                href="sect.apt-get.html#sect.apt-config">第 6.2.4 节 “Configuration Options”</a> for the APT side, and <a
                class="xref"
                href="sect.http-ftp-proxy.html">第 11.6 节 “HTTP/FTP Proxy”</a> for the proxy side), but the Debian ecosystem offers better options to solve this problem. The dedicated software presented in this section are smarter than a plain proxy cache because they can rely on the specific structure of APT repositories (for instance they know when individual files are obsolete or not, and thus adjust the time during which they are kept).
			</div><a
              id="id-1.9.10.10.6"
              class="indexterm"></a><a
              id="id-1.9.10.10.7"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">apt-cacher</span> and <span
                class="pkg pkg">apt-cacher-ng</span> work like usual proxy cache servers. APT's <code
                class="filename">sources.list</code> is left unchanged, but APT is configured to use them as proxy for outgoing requests.
			</div><a
              id="id-1.9.10.10.9"
              class="indexterm"></a><div
              class="para">
				<span
                class="pkg pkg">approx</span>, on the other hand, acts like an HTTP server that “mirrors” any number of remote repositories in its top-level URLs. The mapping between those top-level directories and the remote URLs of the repositories is stored in <code
                class="filename">/etc/approx/approx.conf</code>:
			</div><pre
              class="programlisting">
↵
# &lt;name&gt; &lt;repository-base-url&gt;↵
debian   http://ftp.debian.org/debian↵
security http://security.debian.org↵</pre><div
              class="para">
				<span
                class="pkg pkg">approx</span> 通过inetd (参见<a
                class="xref"
                href="sect.inetd.html">第 9.6 节 “The <code
                  class="command">inetd</code> Super-Server”</a>)默认在9999端口运行，并需要用户调整<code
                class="filename">sources.list</code> 文件来指向 approx 服务器：
			</div><pre
              class="programlisting"># 指向本地 approx 服务器的sources.list 范例
deb http://apt.falcot.com:9999/security jessie/updates main contrib non-free
deb http://apt.falcot.com:9999/debian jessie main contrib non-free
</pre></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.coexistence-with-other-packaging-systems.html"><strong>上一页</strong>5.5. 与其它软件包共存</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>上一级</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>起始页</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-get.html"><strong>下一页</strong>6.2. aptitude、apt-get和 apt 命令</a></li></ul></body></html>
