<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">3.2. Come migrare</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-it-IT-1.0-1" /><meta
        name="keywords"
        content="Impostazioni esistenti, Riuso, Migrazione" /><link
        rel="home"
        href="index.html"
        title="Il Manuale dell'Amministratore Debian" /><link
        rel="up"
        href="existing-setup.html"
        title="Capitolo 3. Analisi delle impostazioni esistenti e migrazione" /><link
        rel="prev"
        href="existing-setup.html"
        title="Capitolo 3. Analisi delle impostazioni esistenti e migrazione" /><link
        rel="next"
        href="installation.html"
        title="Capitolo 4. Installazione" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/it-IT/stable/sect.how-to-migrate.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Indietro</strong></a></li><li
          class="home">Il Manuale dell'Amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Avanti</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.how-to-migrate"></a>3.2. Come migrare</h2></div></div></div><a
          id="id-1.6.5.2"
          class="indexterm"></a><div
          class="para">
			Al fine di garantire la continuità dei servizi, ogni migrazione di computer deve essere pianificata ed eseguita secondo il piano. Questo principio si applica qualunque sia il sistema operativo usato.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.4"></a>3.2.1. Rilevamento e identificazione dei servizi</h3></div></div></div><div
            class="para">
				Per quanto sembri semplice, questo passo è essenziale. Un amministratore scrupoloso conosce veramente i ruoli principali di ogni server, ma tali ruoli possono cambiare e talvolta utenti esperti possono aver installato servizi non «autorizzati». Sapere che esistono permette almeno di decidere cosa farne, piuttosto che eliminarli inconsapevolmente.
			</div><div
            class="para">
				Per questo scopo, è saggio informare di questo progetto i propri utenti prima di migrare il server. Per coinvolgerli nel progetto, può essere utile installare i programmi liberi più comuni sui loro computer prima della migrazione, quelli che saranno incontrati di nuovo dopo la migrazione a Debian; Libre Office e la suite Mozilla ne sono i migliori esempi.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.6.5.4.4"></a>3.2.1.1. Rete e processi</h4></div></div></div><a
              id="id-1.6.5.4.4.2"
              class="indexterm"></a><div
              class="para">
					Lo strumento <code
                class="command">nmap</code> (nel pacchetto con lo stesso nome) identificherà velocemente i servizi Internet ospitati da una macchina connessa alla rete senza nemmeno aver bisogno di accedervi. Basta semplicemente eseguire il seguente comando su un'altra macchina connessa alla stessa rete:
				</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>nmap mirwiz</code></strong>
<code
                class="computeroutput">Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-24 11:34 CET
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.0037s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIVA</em></span> Usare <code
                          class="command">netstat</code> per trovare l'elenco dei servizi disponibili</strong></p></div></div></div><div
                class="para">
					Su una macchina Linux, il comando <code
                  class="command">netstat -tupan</code> mostrerà un elenco di sessioni TCP attive o pendenti e di porte UDP sulle quali i programmi in esecuzione sono in ascolto. Ciò facilita l'identificazione dei servizi offerti sulla rete.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>PER APPROFONDIRE</em></span> IPv6</strong></p></div></div></div><div
                class="para">
					Alcuni comandi di rete possono funzionare con IPv4 (solitamente è quello predefinito) o con IPv6. Tra questi ci sono i comandi <code
                  class="command">nmap</code> e <code
                  class="command">netstat</code>, ma anche altri, come <code
                  class="command">route</code> o <code
                  class="command">ip</code>. La convenzione è che questo comportamento è abilitato dall'opzione <em
                  class="parameter"><code>-6</code></em> sulla riga di comando.
				</div></div><div
              class="para">
					Se il server è una macchina Unix che offre account di shell agli utenti, è interessante determinare se i processi sono eseguiti sullo sfondo in assenza del loro proprietario. Il comando <code
                class="command">ps auxw</code> mostra un elenco di tutti i processi con l'identità dei loro utenti. Confrontando queste informazioni con l'output del comando <code
                class="command">who</code>, che mostra un elenco degli utenti collegati, è possibile identificare server non autorizzati o non dichiarati o programmi in esecuzione sullo sfondo. Guardare i <code
                class="filename">crontab</code> (tabelle che elencano le azioni automatiche programmate dagli utenti) fornirà spesso informazioni interessanti sulle funzioni ricoperte dal server (una spiegazione completa di <code
                class="command">cron</code> è disponibile nella <a
                class="xref"
                href="sect.task-scheduling-cron-atd.html">Sezione 9.7, «Pianificare attività con <code
                  class="command">cron</code> e <code
                  class="command">atd</code>»</a>).
				</div><div
              class="para">
					In ogni caso è essenziale fare il backup dei propri server: questo permette il recupero di informazioni a posteriori, quando gli utenti segnaleranno problemi specifici dovuti alla migrazione.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.5"></a>3.2.2. Fare il backup della configurazione</h3></div></div></div><div
            class="para">
				È saggio conservare la configurazione di ogni servizio identificato al fine di essere in grado di installare quello equivalente sul server aggiornato. Il minimo indispensabile è fare una copia di backup dei file di configurazione.
			</div><div
            class="para">
				Per le macchine Unix, i file di configurazione si trovano solitamente in <code
              class="filename">/etc/</code>, ma possono trovarsi in una sotto-directory di <code
              class="filename">/usr/local/</code>. Questo è il caso quando un programma è stato installato dai sorgenti, piuttosto che da un pacchetto. In alcuni casi si possono trovare sotto <code
              class="filename">/opt/</code>.
			</div><div
            class="para">
				Per i servizi che gestiscono dati (come i database), è fortemente consigliato di esportare i dati in un formato standard che sarà facilmente importato dal nuovo software. Un tale formato è solitamente in modalità testo e documentato; può essere, per esempio, un dump SQL per un database o un file LDIF per un server LDAP.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-2.png"
                  alt="Backup di database" /></div></div><p
              class="title"><strong>Figura 3.2. Backup di database</strong></p></div><div
            class="para">
				Il software di ogni server è differente ed è impossibile descrivere dettagliatamente tutti i casi esistenti. Confrontare la documentazione del software attuale e di quello nuovo per identificare le porzioni esportabili (perciò re-importabili) e quelle che richiedono un intervento manuale. La lettura di questo libro chiarirà la configurazione dei principali programmi per server Linux.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.6"></a>3.2.3. Prendere il controllo di un server Debian esistente</h3></div></div></div><a
            id="id-1.6.5.6.2"
            class="indexterm"></a><a
            id="id-1.6.5.6.3"
            class="indexterm"></a><a
            id="id-1.6.5.6.4"
            class="indexterm"></a><div
            class="para">
				Si può analizzare una macchina che già esegue Debian per prendere efficacemente il controllo della sua manutenzione.
			</div><div
            class="para">
				Il primo file da controllare è <code
              class="filename">/etc/debian_version</code>, che solitamente contiene il numero di versione per il sistema Debian installato (fa parte del pacchetto <span
              class="emphasis"><em>base-files</em></span>). Se indica <code
              class="literal"><em
                class="replaceable">codename</em>/sid</code>, significa che il sistema è stato aggiornato con pacchetti provenienti da una delle distribuzioni di sviluppo (testing oppure unstable).
			</div><div
            class="para">
				Il comando <code
              class="command">apt-show-versions</code> (dal pacchetto Debian con lo stesso nome) controlla l'elenco dei pacchetti installati e identifica le versioni disponibili. Anche <code
              class="command">aptitude</code> può essere usato per questi compiti, anche se in maniera meno sistematica.
			</div><div
            class="para">
				Un'occhiata al file <code
              class="filename">/etc/apt/sources.list</code> (ed alla directory <code
              class="filename">/etc/apt/sources.list.d/</code>) mostrerà da dove probabilmente provengono i pacchetti Debian installati. Se appaiono molte sorgenti sconosciute, l'amministratore può scegliere di reinstallare completamente il sistema del computer per assicurare una compatibilità ottimale con il software fornito da Debian.
			</div><div
            class="para">
				Il file <code
              class="filename">sources.list</code> è spesso un buon indicatore: la maggior parte degli amministratori mantiene, almeno nei commenti, l'elenco delle fonti APT usate precedentemente. Ma non si dimentichi che le fonti usate in passato potrebbero essere state eliminate e che dei pacchetti qualsiasi scaricati da Internet potrebbero essere stati installati (con il comando <code
              class="command">dpkg</code>). In questo caso la macchina è fuorviante nella sua apparenza di Debian «standard». Questo è il motivo per cui si dovrebbe fare attenzione a ogni indizio della presenza di pacchetti esterni (presenza di file <code
              class="filename">deb</code> in directory non usuali, numeri di versione dei pacchetti con suffissi speciali che indicano che hanno avuto origine all'esterno del progetto Debian, come <code
              class="literal">ubuntu</code> o <code
              class="literal">lmde</code>, ecc.)
			</div><div
            class="para">
				Allo stesso modo, è interessante analizzare il contenuto della directory <code
              class="filename">/usr/local/</code>, che ha lo scopo di contenere programmi compilati e installati manualmente. Elencare il software installato in questa maniera è istruttivo dal momento che solleva interrogativi sulle ragioni per cui non è stato usato il pacchetto Debian corrispondente, se un tale pacchetto esiste.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>A COLPO D'OCCHIO</em></span> <span
                        class="pkg pkg">cruft</span></strong></p></div></div></div><div
              class="para">
				Il pacchetto <span
                class="pkg pkg">cruft</span> propone l'elenco dei file disponibili che non sono posseduti da alcun pacchetto. Ha alcuni filtri (più o meno efficaci e più o meno aggiornati) per evitare di riportare file legittimi (file generati da pacchetti Debian o file di configurazione generati non gestiti da <code
                class="command">dpkg</code>, ecc.).
			</div><div
              class="para">
				Si faccia attenzione a non eliminare ciecamente tutto quello che <code
                class="command">cruft</code> potrebbe elencare!
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.7"></a>3.2.4. Installazione di Debian</h3></div></div></div><div
            class="para">
				Una volta che tutte le informazioni sul server attuale sono conosciute, possiamo spegnerlo e installarci Debian.
			</div><a
            id="id-1.6.5.7.3"
            class="indexterm"></a><div
            class="para">
				Per scegliere la versione appropriata, si deve conoscere l'architettura del computer. Se è un PC piuttosto recente, molto probabilmente è amd64 (i PC più vecchi erano solitamente i386). In altri casi si possono ridurre le scelte possibili in base al sistema usato precedentemente.
			</div><div
            class="para">
				<a
              class="xref"
              href="sect.how-to-migrate.html#tab-corresp">Tabella 3.1</a> non ha la pretesa di essere completa ma può essere utile. In ogni caso, la documentazione originale del computer è la fonte più affidabile per trovare questa informazione.
			</div><div
            class="table"><a
              xmlns=""
              id="tab-corresp"></a><p
              class="title"><strong>Tabella 3.1. Sistema operativo e architettura corrispondente</strong></p><div
              class="table-contents"><table
                xmlns:d="http://docbook.org/ns/docbook"
                class="lt-4-cols gt-7-rows"
                summary="Sistema operativo e architettura corrispondente"><colgroup><col /><col /></colgroup><thead><tr><th>Sistema operativo</th><th>Architettura</th></tr></thead><tbody><tr><td>DEC Unix (OSF/1)</td><td>alpha, mipsel</td></tr><tr><td>HP Unix</td><td>ia64, hppa</td></tr><tr><td>IBM AIX</td><td>powerpc</td></tr><tr><td>Irix</td><td>mips</td></tr><tr><td>OS X</td><td>amd64, powerpc, i386</td></tr><tr><td>z/OS, MVS</td><td>s390x, s390</td></tr><tr><td>Solaris, SunOS</td><td>sparc, i386, m68k</td></tr><tr><td>Ultrix</td><td>mips</td></tr><tr><td>VMS</td><td>alpha</td></tr><tr><td>Windows 95/98/ME</td><td>i386</td></tr><tr><td>Windows NT/2000</td><td>i386, alpha, ia64, mipsel</td></tr><tr><td>Windows XP / Windows Server 2008</td><td>i386, amd64, ia64</td></tr><tr><td>Windows Vista / Windows 7 / Windows 8</td><td>i386, amd64</td></tr></tbody></table></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>HARDWARE</em></span> PC a 64 bit e PC a 32 bit</strong></p></div></div></div><a
              id="id-1.6.5.7.7.2"
              class="indexterm"></a><a
              id="id-1.6.5.7.7.3"
              class="indexterm"></a><div
              class="para">
				La maggior parte dei computer più recenti ha processori a 64 bit, Intel o AMD, compatibili con i più vecchi processori a 32 bit; perciò il software compilato per l'architettura «i386» funziona. D'altra parte, questa modalità compatibile non sfrutta pienamente le capacità di questi nuovi processori. Questo è il motivo per cui Debian fornisce l'architettura «amd64» che funziona sia con i chip AMD recenti sia con i processori Intel «emt64» (compresa la maggior parte delle serie Core), che sono molto simili ai processori AMD64.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.8"></a>3.2.5. Installazione e configurazione dei servizi scelti</h3></div></div></div><div
            class="para">
				Una volta che Debian è installata, è necessario installare e configurare uno ad uno i servizi che questo computer deve ospitare. La nuova configurazione deve tenere in considerazione quella precedente per assicurare una transizione indolore. Tutte le informazioni raccolte nei primi due passi saranno utili per completare con successo questa parte.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.8.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-4.png"
                  alt="Installazione dei servizi scelti" /></div></div><p
              class="title"><strong>Figura 3.3. Installazione dei servizi scelti</strong></p></div><div
            class="para">
				Prima di gettarsi a capofitto, è fortemente consigliato leggere il resto di questo libro. Dopo di che si capirà meglio come configurare i servizi previsti.
			</div><div
            class="para">
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Indietro</strong>Capitolo 3. Analisi delle impostazioni esistenti ...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Avanti</strong>Capitolo 4. Installazione</a></li></ul></body></html>
