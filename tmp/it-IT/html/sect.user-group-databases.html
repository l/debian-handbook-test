<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.4. Database di utenti e gruppi</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-it-IT-1.0-1" /><meta
        name="keywords"
        content="Configurazione, Localizzazione, Localizzazioni, Rete, Risoluzione dei nomi, Utenti, Gruppi, Account, Interprete a riga di comando, Shell, Stampa, Bootloader, Compilazione del kernel" /><link
        rel="home"
        href="index.html"
        title="Il Manuale dell'Amministratore Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Capitolo 8. Configurazione di base: rete, account, stampa, ..." /><link
        rel="prev"
        href="sect.hostname-name-service.html"
        title="8.3. Impostare il nome host e configurare il servizio dei nomi" /><link
        rel="next"
        href="sect.creating-accounts.html"
        title="8.5. Creare account" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/it-IT/stable/sect.user-group-databases.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Indietro</strong></a></li><li
          class="home">Il Manuale dell'Amministratore Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Avanti</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.user-group-databases"></a>8.4. Database di utenti e gruppi</h2></div></div></div><a
          id="id-1.11.8.2"
          class="indexterm"></a><a
          id="id-1.11.8.3"
          class="indexterm"></a><a
          id="id-1.11.8.4"
          class="indexterm"></a><a
          id="id-1.11.8.5"
          class="indexterm"></a><div
          class="para">
			La lista degli utenti è generalmente conservata nel file <code
            class="filename">/etc/passwd</code>, mentre il file <code
            class="filename">/etc/shadow</code> conserva le password cifrate. Entrambi sono file di testo, in un formato relativamente semplice, che può essere letto e modificato con un editor di testo. Ogni utente è elencato su una riga con diversi campi separati dai due punti («<code
            class="literal">:</code>»).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>NOTA</em></span> Modificare i file di sistema</strong></p></div></div></div><div
            class="para">
			I file di sistema menzionati in questo capitolo sono tutti file di testo semplice, che possono essere modificati con un editor di testo. Considerata la loro importanza per le funzionalità primarie del sistema, è sempre una buona idea prendere precauzioni addizionali quando si modificano questi file di sistema. Prima di tutto, fare sempre una copia o un backup del file di sistema prima di aprirlo o alterarlo. Secondo, sui server o sulle macchine dove più di una persona può avere potenzialmente accesso allo stesso file allo stesso tempo, procedere con ulteriori precauzioni per evitare la corruzione dei file.
		</div><div
            class="para">
			Per questo proposito è sufficiente usare il comando <code
              class="command">vipw</code> per modificare il file <code
              class="filename">/etc/passwd</code>, oppure <code
              class="command">vigr</code> per modificare <code
              class="filename">/etc/group</code>. Questi comandi bloccano il file in questione prima di eseguire l'editor di testo ((<code
              class="command">vi</code> in via predefinita, a meno che la variabile d'ambiente <code
              class="varname">EDITOR</code> non sia stata modificata). L'opzione <code
              class="literal">-s</code> in questi comandi consente di modificare il file <span
              class="foreignphrase"><em
                class="foreignphrase">shadow</em></span> corrispondente.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>FONDAMENTALI</em></span> crypt, funzione a senso unico</strong></p></div></div></div><a
            id="id-1.11.8.8.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="command">crypt</code> è una funzione a senso unico che trasforma una stringa <code
              class="varname">(A)</code> in un'altra stringa <code
              class="varname">(B)</code> in modo tale che <code
              class="varname">A</code> non possa essere ricavata da <code
              class="varname">B</code>. L'unico modo per identificare <code
              class="varname">A</code> è provare tutti i possibili valori, controllando per ognuno se la trasformazione prodotta dalla funzione produce <code
              class="varname">B</code> oppure no. Utilizza fino a 8 caratteri come input (stringa <code
              class="varname">A</code>) e genera una stringa di 13 caratteri, stampabili ASCII, (stringa <code
              class="varname">B</code>).
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-passwd"></a>8.4.1. Lista utenti: <code
                    class="filename">/etc/passwd</code></h3></div></div></div><div
            class="para">
				Questa è la lista dei campi nel file <code
              class="filename">/etc/passwd</code>:
			</div><a
            id="id-1.11.8.9.3"
            class="indexterm"></a><a
            id="id-1.11.8.9.4"
            class="indexterm"></a><a
            id="id-1.11.8.9.5"
            class="indexterm"></a><a
            id="id-1.11.8.9.6"
            class="indexterm"></a><a
            id="id-1.11.8.9.7"
            class="indexterm"></a><a
            id="id-1.11.8.9.8"
            class="indexterm"></a><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						login, per esempio <code
                    class="literal">rhertzog</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						password: è una password cifrata con una funzione a senso unico (<code
                    class="command">crypt</code>), basandosi su <code
                    class="literal">DES</code>, <code
                    class="literal">MD5</code>, <code
                    class="literal">SHA-256</code> o <code
                    class="literal">SHA-512</code>. Il valore speciale "<code
                    class="literal">x</code>" indica che la password cifrata è conservata in <code
                    class="filename">/etc/shadow</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uid</code>: numero univoco che identifica ciascun utente;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: numero univoco che identifica il gruppo principale dell'utente (Debian crea in via predefinita un gruppo specifico per ogni utente);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">GECOS</code>: campo dati che normalmente contiene il nome completo dell'utente;
					</div></li><li
                class="listitem"><div
                  class="para">
						directory di login, assegnata all'utente per conservare i propri file personali (la variabile d'ambiente <code
                    class="varname">$HOME</code> punta generalmente qui);
					</div></li><li
                class="listitem"><div
                  class="para">
						programma eseguito dopo il login. Questo è generalmente un interprete dei comandi (shell), che dà all'utente carta bianca. Se viene specificato <code
                    class="command">/bin/false</code> (il quale non fa nulla e ritorna immediatamente il controllo), l'utente non può eseguire il login.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> Gruppo Unix</strong></p></div></div></div><a
              id="id-1.11.8.9.10.2"
              class="indexterm"></a><div
              class="para">
				Un gruppo Unix è un'entità che include diversi utenti così che possano condividere facilmente file utilizzando il sistema di permessi integrato (avendo esattamente gli stessi privilegi). È anche possibile restringere l'uso di certi programmi ad un gruppo specifico.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-shadow"></a>8.4.2. Il file delle password nascoste e cifrate: <code
                    class="filename">/etc/shadow</code></h3></div></div></div><a
            id="id-1.11.8.10.2"
            class="indexterm"></a><a
            id="id-1.11.8.10.3"
            class="indexterm"></a><div
            class="para">
				Il file <code
              class="filename">/etc/shadow</code> contiene i seguenti campi:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						login;
					</div></li><li
                class="listitem"><div
                  class="para">
						password cifrata;
					</div></li><li
                class="listitem"><div
                  class="para">
						diversi campi gestiscono la scadenza della password.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOCUMENTAZIONE</em></span> Formato dei file <code
                        class="filename">/etc/passwd</code>, <code
                        class="filename">/etc/shadow</code> e <code
                        class="filename">/etc/group</code></strong></p></div></div></div><div
              class="para">
				Questi formati sono documentati nelle seguenti pagine di manuale: <span
                class="citerefentry"><span
                  class="refentrytitle">passwd</span>(5)</span>, <span
                class="citerefentry"><span
                  class="refentrytitle">shadow</span>(5)</span> e <span
                class="citerefentry"><span
                  class="refentrytitle">group</span>(5)</span>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SICUREZZA</em></span> La sicurezza del file <code
                        class="filename">/etc/shadow</code></strong></p></div></div></div><div
              class="para">
				<code
                class="filename">/etc/shadow</code>, diversamente dal suo alter ego <code
                class="filename">/etc/passwd</code>, non può essere letto dai normali utenti. Qualsiasi password cifrata contenuta in <code
                class="filename">/etc/passwd</code> è leggibile da chiunque: un cracker potrebbe provare a forzare (o rivelare) una password attraverso diversi metodi a «forza bruta» i quali molto semplicemente provano le combinazioni di caratteri usate comunemente. Questo attacco, chiamato «attacco a dizionario», non è più possibile sui sistemi che utilizzano <code
                class="filename">/etc/shadow</code>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.account-modification"></a>8.4.3. Modificare un account o password esistente</h3></div></div></div><a
            id="id-1.11.8.11.2"
            class="indexterm"></a><a
            id="id-1.11.8.11.3"
            class="indexterm"></a><a
            id="id-1.11.8.11.4"
            class="indexterm"></a><a
            id="id-1.11.8.11.5"
            class="indexterm"></a><a
            id="id-1.11.8.11.6"
            class="indexterm"></a><div
            class="para">
				I seguenti comandi consentono la modifica delle informazioni conservate in campi specifici dei database utenti: <code
              class="command">passwd</code> permette ad un utente normale di modificare la propria password, cosa che comporta l'aggiornamento del file <code
              class="filename">/etc/shadow</code>. <code
              class="command">chfn</code> (CHange Full Name), riservato per il super-utente (root), modifica il campo <code
              class="literal">GECOS</code>. <code
              class="command">chsh</code> (CHange SHell) consente all'utente di cambiare la propria shell di login, tuttavia le scelte disponibili sono limitate a quelle elencate in <code
              class="filename">/etc/shells</code>: l'amministratore, d'altra parte, non è soggetto a questa restrizione e può impostare la shell a qualsiasi programma scelga.
			</div><div
            class="para">
				Infine il comando <code
              class="command">chage</code> (CHange AGE) consente all'amministratore di cambiare le impostazioni di scadenza della password (l'opzione <code
              class="literal">-l <em
                class="replaceable">utente</em></code> elenca le impostazioni attuali). È possibile inoltre forzare la scandenza di una password utilizzando il comando <code
              class="command">passwd -e <em
                class="replaceable">utente</em></code>, il quale richiede all'utente di cambiare la password al prossimo accesso.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.disabling-account"></a>8.4.4. Disabilitare un account</h3></div></div></div><a
            id="id-1.11.8.12.2"
            class="indexterm"></a><a
            id="id-1.11.8.12.3"
            class="indexterm"></a><div
            class="para">
				Può rendersi necessario «disabilitare un account» (tagliare fuori un utente) come misura disciplinare, per eseguire delle verifiche o semplicemente in caso di una prolungata o definitiva assenza dell'utente. Un account disabilitato significa che l'utente non potrà fare login o guadagnare accesso alla macchina. L'account rimane intatto nella macchina e né i file né altri dati sono cancellati: sono semplicemente inaccessibili. Questo si ottiene usando il comando <code
              class="command">passwd -l <em
                class="replaceable">utente</em></code> (l, per «lock»: blocco). Per riabilitare l'account si utilizza l'opzione <code
              class="literal">-u</code> (u, per «unlock»: sblocco).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.intro-nss"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>APPROFONDIMENTI</em></span> NSS ed i database di sistema</strong></p></div></div></div><a
              id="id-1.11.8.12.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.12.5.3"
              class="indexterm"></a><div
              class="para">
				Invece di usare i file tradizionali per gestire le liste di utenti e gruppi, è possibile utilizzare altre tipologie di database, come LDAP o <code
                class="command">db</code>, utilizzando un modulo NSS (Name Service Switch) appropriato. I moduli utilizzati sono elencati nel file <code
                class="filename">/etc/nsswitch.conf</code>, alle voci <code
                class="literal">passwd</code>, <code
                class="literal">shadow</code> e <code
                class="literal">group</code>. Si veda la <a
                class="xref"
                href="sect.ldap-directory.html#sect.config-nss">Sezione 11.7.3.1, «Configurare NSS»</a> per un esempio specifico circa l'utilizzo di un modulo NSS per LDAP.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-group"></a>8.4.5. Lista dei gruppi: <code
                    class="filename">/etc/group</code></h3></div></div></div><div
            class="para">
				I gruppi sono elencati nel file <code
              class="filename">/etc/group</code>, un semplice database testuale in un formato simile a quello del file <code
              class="filename">/etc/passwd</code>, con i seguenti campi:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						nome gruppo;
					</div></li><li
                class="listitem"><div
                  class="para">
						password (opzionale): Questa è utilizzata unicamente per aggiungersi ad un gruppo quando non si è un utente abituale (con i comandi <code
                    class="command">newgrp</code> o <code
                    class="command">sg</code>, si veda il riquadro <a
                    class="xref"
                    href="sect.user-group-databases.html#sidebar.working-with-several-groups"><span
                      class="emphasis"><em>FONDAMENTALI</em></span> Lavorare con diversi gruppi</a>);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: numero univoco di identificazione di un gruppo;
					</div></li><li
                class="listitem"><div
                  class="para">
						lista di membri: lista di nomi degli utenti che sono membri del gruppo, separati da virgole.
					</div></li></ul></div><div
            class="para">
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.working-with-several-groups"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FONDAMENTALI</em></span> Lavorare con diversi gruppi</strong></p></div></div></div><a
              id="id-1.11.8.13.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.3"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.4"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.5"
              class="indexterm"></a><div
              class="para">
				Ogni utente può essere membro di molti gruppi: uno di questi sarà il suo «gruppo principale». Il gruppo principale di un utente è creato, in via predefinita, durante la configurazione iniziale dell'utente. In via predefinita ogni file che un utente crea gli appartiene, così come viene assegnato al suo gruppo principale. Questo non è sempre desiderabile: per esempio quando l'utente lavora in una directory condivisa da un gruppo diverso dal suo gruppo principale. In questo caso l'utente deve cambiare il proprio gruppo principale usando uno dei seguenti comandi: <code
                class="command">newgrp</code> che avvia una nuova shell oppure <code
                class="command">sg</code> che semplicemente esegue comandi usando il gruppo alternativo fornito. Questi comandi consentono inoltre all'utente di unirsi ad un gruppo al quale non appartiene. Se il gruppo è protetto da password avranno bisogno di fornire la password appropriata prima che il comando sia eseguito.
			</div><div
              class="para">
				In alternativa, l'utente può impostare il bit <code
                class="literal">setgid</code> nella directory, così i file creati in questa directory saranno assegnati automaticamente al gruppo corretto. Per maggiori dettagli, si veda il riquadro <a
                class="xref"
                href="sect.rights-management.html#sidebar.setgid-dir"><span
                  class="emphasis"><em>SICUREZZA</em></span> directory <code
                  class="literal">setgid</code> e <span
                  class="emphasis"><em>sticky bit</em></span></a>.
			</div><div
              class="para">
				Il comando <code
                class="command">id</code> visualizza lo stato corrente dell'utente: l'identificativo personale (variabile <code
                class="varname">uid</code>), il gruppo principale attuale (variabile <code
                class="varname">gid</code>) e la lista dei gruppi ai quali appartiene (variabile <code
                class="varname">groups</code>).
			</div></div><a
            id="id-1.11.8.13.6"
            class="indexterm"></a><a
            id="id-1.11.8.13.7"
            class="indexterm"></a><div
            class="para">
				The <code
              class="command">addgroup</code> and <code
              class="command">delgroup</code> commands add or delete a group, respectively. The <code
              class="command">groupmod</code> command modifies a group's information (its <code
              class="literal">gid</code> or identifier). The command <code
              class="command">gpasswd <em
                class="replaceable">group</em></code> changes the password for the group, while the <code
              class="command">gpasswd -r <em
                class="replaceable">group</em></code> command deletes it.
			</div><a
            id="id-1.11.8.13.9"
            class="indexterm"></a><a
            id="id-1.11.8.13.10"
            class="indexterm"></a><a
            id="id-1.11.8.13.11"
            class="indexterm"></a><a
            id="id-1.11.8.13.12"
            class="indexterm"></a><a
            id="id-1.11.8.13.13"
            class="indexterm"></a><a
            id="id-1.11.8.13.14"
            class="indexterm"></a><a
            id="id-1.11.8.13.15"
            class="indexterm"></a><a
            id="id-1.11.8.13.16"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGGERIMENTO</em></span> <code
                        class="command">getent</code></strong></p></div></div></div><a
              id="id-1.11.8.13.17.2"
              class="indexterm"></a><div
              class="para">
				Il comando <code
                class="command">getent</code> («get entries»: ottieni le voci) controlla i database di sistema secondo le modalità standard, usando le funzioni di libreria appropriate, che richiamano i moduli NSS configurati nel file <code
                class="filename">/etc/nsswitch.conf</code>. Il comando accetta uno o due argomenti: il nome del database da controllare ed una chiave di ricerca opzionale. In questo modo il comando <code
                class="command">getent passwd rhertzog</code> fornirà informazioni dal database utenti riguardanti l'utente <code
                class="literal">rhertzog</code>.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Indietro</strong>8.3. Impostare il nome host e configurare il serv...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Risali</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Partenza</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Avanti</strong>8.5. Creare account</a></li></ul></body></html>
