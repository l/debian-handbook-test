<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="existing-setup" lang="pl-PL">
	<chapterinfo>
		 <keywordset>
			<keyword>Istniejące Ustawienie</keyword>
			 <keyword>Użyj ponownie</keyword>
			 <keyword>Migracja</keyword>

		</keywordset>

	</chapterinfo>
	 <title>Analizowanie istniejących Ustawień i Migracji</title>
	 <highlights> <para>
		Jakakolwiek reorganizacja systemu komputerowego powinna brać pod uwagę istniejący system. To pozwala na ponowne użycie dostępnych środków tak często jak to możliwe i i gwarantuje kooperację różnych elementów zawierających się w systemie. Ta koncepcja przedstawi standardową strukturę która nastąpi w jakiejś migracji infrastruktury obliczeniowej Linuxa.
	</para>
	 </highlights> <section id="sect.heterogeneous-environments">
		<title>Współistnienie heterognicznych środowisk</title>
		 <indexterm>
			<primary>środowisko</primary>
			<secondary>heterogeniczne środowisko</secondary>
		</indexterm>
		 <para>
			Debian bardzo dobrze integruje się z wieloma typami istniejących środowisk i dobrze współgra z innymi systemami operacyjnymi. Ta bliska-perfekcji harmonia pochodzi z presji rynku który wymaga od producentów oprogramowania opracowywania programów które spełniają standardy.
		</para>
		 <section>
			<title>Integracja z maszynami Windows'a</title>
			 <para>
				Protokół SMB/CIFS Samby zapewnia wsparcie znakomitej komunikacji w kontekście Windows'a. Dzieli pliki i kolejki wydruku z klientem Windows'a i zawiera oprogramowanie które pozwala Linuxowi używania dostępnych zasobów na serwerach Windows'a.
			</para>
			 <sidebar> <title><emphasis>NARZĘDZIE</emphasis> Samba</title>
			 <indexterm>
				<primary>Samba</primary>
			</indexterm>
			 <para>
				Ostatnia wersja Samby może zastąpić większość cech systemu Windows: od tych z prostego serwera Windows NT (uwierzytelnianie, pliki, kolejki wydruku, pobieranie sterowników do drukarki, DFS, itp.) do cech najbardziej zaawansowanych (kontroler domeny kompatybilny z Active Directory).
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Integracja z maszynami Mac OS X</title>
			 <indexterm>
				<primary>Zeroconf</primary>
			</indexterm>
			 <indexterm>
				<primary>Bonjour</primary>
			</indexterm>
			 <indexterm>
				<primary>Avahi</primary>
			</indexterm>
			 <para>
				Maszyny OS X dostarczają i potrafią używać serwisów sieciowych, takich jak pliki serwerowe i współdzielnie drukarki. Te usługi są opublikowane w lokalnej sieci, co pozwala innym maszynom na wykrywanie ich i używanie bez żadnej ręcznej konfiguracji za pomocą implementacji Bonjour z pakietu protokołu ZeroConf. Debian zawiera inne implementację, nazywaną Avahi, która dostarcza tej samej funkcjonalniości.
			</para>
			 <indexterm>
				<primary>AFP</primary>
			</indexterm>
			 <indexterm>
				<primary>AppleShare</primary>
			</indexterm>
			 <para>
				W drugim kierunku, daemon Netatalk może być użyty do dostarczania plików serverowych do Mac OS X przez sieć komputerową. Ten demon implementuje protokół AFP (AppleShare), jak też wymagane notyfikacje, po to aby serwer mógł być automatycznie wykrywalny przez klientów OS X.
			</para>
			 <indexterm>
				<primary>AppleTalk</primary>
			</indexterm>
			 <para>
				Older Mac OS networks (before OS X) used a different protocol called AppleTalk. For environments involving machines using this protocol, Netatalk also provides the AppleTalk protocol (in fact, it started as a reimplementation of that protocol). It ensures the operation of the file server and print queues, as well as time server (clock synchronization). Its router function allows interconnection with AppleTalk networks.
			</para>

		</section>
		 <section>
			<title>Integracja z innymi maszyn Linux / Unix</title>
			 <para>
				Wreszcie, NFS i NIS, obydwa załączone , gwarantujją interakcję z systemem Unix. NFS zapewnia funkcjonalność plików serwera, w momencie kiedy NIS tworzy katalogi użytkowników. Warstwa drukowania BSD, używana przez większość systemów unixowych, umożliwia również dzielenie się kolejek wydruku.
			</para>
			 <figure>
				<title>Coexistence of Debian with OS X, Windows and Unix systems</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-1.png" format="PNG" width="25%" />
					</imageobject>

				</mediaobject>

			</figure>

		</section>

	</section>
	 <section id="sect.how-to-migrate">
		<title>Jak migrować</title>
		 <indexterm>
			<primary>migracja</primary>
		</indexterm>
		 <para>
			W celu zapewnienia ciągłości usług, każda migracja na komputerze musi być zaplanowana i realizowana zgodnie z planem. Zasada ta ma zastosowanie bez względu na używany system operacyjny.
		</para>
		 <section>
			<title>Ankieta i identyfikacje usług</title>
			 <para>
				Tak proste, jak się wydaje, ten krok jest niezbędny. Dobry administrator zna rolę każdego serwera, ale takie role mogą się zmienić, a czasem doświadczeni użytkownicy mogą mieć zainstalowane dziwne usługi. Wiedza o ich istnienu pozwoli ci zdecydować co z nimi zrobić, a nie usunąć je przypadkowo.
			</para>
			 <para>
				W tym celu dobrze jest poinformować użytkowników o projekcie przed migracją serwera. Zaangażowanie ich w projekcie, może być przydatne w instalacji najbardziej znanych bezpłatnych programów na ich komputerach przed migracją, co natkną się ponownie po migracji do Debiana; Libre Office i Mozilla Suite są najlepszymi przykładami tutaj.
			</para>
			 <section>
				<title>Sieć i Procesy</title>
				 <indexterm>
					<primary><command>nmap</command></primary>
				</indexterm>
				 <para>
					The <command>nmap</command> tool (in the package with the same name) will quickly identify Internet services hosted by a network connected machine without even requiring to log in to it. Simply call the following command on another machine connected to the same network:
				</para>
				 
<screen>
<computeroutput>$ </computeroutput><userinput>nmap mirwiz</userinput>
<computeroutput>Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-24 11:34 CET
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.0037s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds</computeroutput></screen>
				 <sidebar> <title><emphasis>ALTERNATIVE</emphasis> Użyj <command>netstat</command> aby znależć listę dostępnych usług</title>
				 <para>
					Na komputerze z systemem Linux, <command>netstat -tupan</command> wyświetli listę aktywnych i oczekujących sesji TCP, jak i UDP, na którym uruchomione programy są słuchane. Ułatwia to identyfikację oferowanych w sieci usług.
				</para>
				 </sidebar> <sidebar> <title><emphasis>Idąc dalej </emphasis> IPv6</title>
				 <para>
					Niektóre komendy sieciowe mogą pracować zarówno z IPv4 (zazwyczaj domyślne) lub z IPv6. Należą do nich <command>nmap</command> i <command>netstat</command> polecenia, ale również inne, takie jak <command>route</command> lub <command>ip</command>.Konwencja opisuje zachowanie jest włączona przez <parameter>-6</parameter> opcja wiersza polecenia.
				</para>
				 </sidebar> <para>
					If the server is a Unix machine offering shell accounts to users, it is interesting to determine if processes are executed in the background in the absence of their owner. The command <command>ps auxw</command> displays a list of all processes with their user identity. By checking this information against the output of the <command>who</command> command, which gives a list of logged in users, it is possible to identify rogue or undeclared servers or programs running in the background. Looking at <filename>crontabs</filename> (tables listing automatic actions scheduled by users) will often provide interesting information on functions fulfilled by the server (a complete explanation of <command>cron</command> is available in <xref linkend="sect.task-scheduling-cron-atd" />).
				</para>
				 <para>
					W każdym przypadku konieczne jest tworzenie kopii zapasowych serwerów, pozwala na odzyskanie danych po fakcie, gdy użytkownicy będą zgłaszać konkretne problemy związane z migracją.
				</para>

			</section>

		</section>
		 <section>
			<title>Tworzenie kopii zapasowej konfiguracji</title>
			 <para>
				Dobrze jest, aby utrzymać konfigurację każdej określonej usługi w celu umożliwienia zainstalowania odpowiednik w zaktualizowanym serwera.Absolutnym minimum jest zrobić kopię zapasową plików konfiguracyjnych.
			</para>
			 <para>
				Dla systemów Unix, pliki konfiguracyjne są zwykle w <filename> / etc / </filename>, ale mogą one znajdować się w podkatalogu <filename> / usr / local / </filename>. Jest to przypadek, gdy program jest instalowany z innych źródeł, a nie z pakietu. W niektórych przypadkach, można również znaleźć je w <filename> / opt / </filename>.
			</para>
			 <para>
				Dla danych usług zarządzającymi danymi(takimi jak bazy danych), zaleca się, aby wyeksportować dane do standardowego formatu, który będzie łatwo importowany przez nowe oprogramowanie. Taki format zazwyczaj jest w trybie tekstowym i udokumentowanym, może to być dla przykłądu zrzut SQL dla bazy danych lub plik LDIF dla serwera LDAP.
			</para>
			 <figure>
				<title>Kopie zapasowe bazy danych</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-2.png" format="PNG" width="50%" />
					</imageobject>

				</mediaobject>

			</figure>
			 <para>
				Każdy oprogramowanie serwera jest inny, i nie jest możliwe opisanie wszystkich odmian w szczegółach. Porównaj dokumentację istniejących oraz nowych oprogramowań do identyfikowania eksportowanych ( ponownie importowanych ) części i tych, które wymagają ręcznej obsługi. Czytając tę książkę dowiesz się o konfiguracji głównych programów serwerowych Linux.
			</para>

		</section>
		 <section>
			<title>Przejmując obowiazki aktualnego servera Debiana</title>
			 <indexterm>
				<primary>recovering a Debian machine</primary>
			</indexterm>
			 <indexterm>
				<primary>exploring a Debian machine</primary>
			</indexterm>
			 <indexterm>
				<primary>taking over a Debian server</primary>
			</indexterm>
			 <para>
				Aby skutecznie go utrzymać, jeden może analizować maszynę aktualnie pracującą z Debianem.
			</para>
			 <para>
				Pierwszym plikiem do sprawdzenia jest <filename>/etc/debian_version</filename>, który zazwyczaj zawiera numer wersji dla zainstalowanego Debiana (jest to część <emphasis>base-files</emphasis> pakietu. Jeśli to wskazuje na <literal><replaceable>codename</replaceable>/sid</literal>, to oznacza, że system został zaaktualizowany z pakietem pochodzącym z jednej z dystrybucji (testowej albo niestabilnej).
			</para>
			 <para>
				Komenda <command>apt-show-versions</command> programu ( z pakietu Debiana o tej samej nazwie) sprawdza liste zainstalowanych pakietów i identyfikatorów dostepnych wersji. <command>aptitude</command> może również być użyty do tych zadań, aczkolwiek w mniej systematyczny sposób.
			</para>
			 <para>
				A glance at the <filename>/etc/apt/sources.list</filename> file (and <filename>/etc/apt/sources.list.d/</filename> directory) will show where the installed Debian packages likely came from. If many unknown sources appear, the administrator may choose to completely reinstall the computer's system to ensure optimal compatibility with the software provided by Debian.
			</para>
			 <para>
				The <filename> sources.list </filename> jest często dobrym wskaźnikiem, większość administratorów zachowuje, przynajmniej w komentarzach, listę APT źródeł, które były wcześniej używane. Ale nie należy zapominać, że źródła wykorzystane w przeszłości mogły zostać usunięty, a niektóre losowe pakiety podpatrzone w internecie mogą być zainstalowane ręcznie (z <command> dpkg </command>). W tym przypadku, urządzenie wprowadza w błąd w swoim wyglądzie "standardowym" Debiana. Dlatego należy zwrócić uwagę na wskazanie, że da się obecność opakowaniach zewnętrznych (wygląd <filename> deb </filename> pliki w nietypowych katalogach, numery wersji pakietu ze specjalną końcówką, wskazującą, że pochodzi spoza projektu Debian, takich jak <literal> ubuntu </literal> lub <literal> lmde </literal>, itp)
			</para>
			 <para>
				Podobnie, warto przeanalizować zawartość pliku <filename>/usr/local/</filename> katalogu, w którym są programy zainstalowane i skompilowane manulanie. Listowanie oprogramowania zainstalowanego w ten sposób jest pouczająca, ponieważ rodzi to pytania dotyczące powodów nie używania odpowiedniego pakietu Debiana, jżeli takie pakiety istnieją.
			</para>
			 <sidebar> <title><emphasis>QUICK LOOK</emphasis> <emphasis role="pkg">cruft</emphasis></title>
			 <para>
				The <emphasis role="pkg">cruft</emphasis> Pakietowe propozycje listy dostępnych plików ,które nie są własnością żadnego pakietu. To ma jakieś filtry (mniej lub bardziej skuteczne,w zależności od tego jak bardzo jest aktualne), aby uniknąć zgłaszania niektórych uzasadnionych plików (pliki generowane przez pakiety Debiana lub wygenerowane pliki konfiguracyjne nie są zarządzane przez <command>dpkg</command>, itp).
			</para>
			 <para>
				Uważaj aby nie usunąć wszystkiego <command>śmieci</command> może wylistować!
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Instaluje Debiana</title>
			 <para>
				Gdy wszystkie wymagane informacje na bieżącym serwerze są znane, możemy go zamknąć i rozpocząć instalację Debiana.
			</para>
			 <indexterm>
				<primary>architecture</primary>
			</indexterm>
			 <para>
				Aby wybrać odpowiednią wersję, musimy znać architekturę komputera. Jeśli jest to w miarę nowy PC, jest to bardzo prawdopodobne iż będzie to amd64 (starszymi komputery były zazwyczaj i386). W innych przypadkach, możemy zawęzić możliwości zgodnie z poprzednio używanego systemu.
			</para>
			 <para>
				<xref linkend="tab-corresp" xrefstyle="select: label nopage" /> nie jest wyczerpująca, ale może być pomocne. W każdym przypadku, oryginalna dokumentacja dla komputera jest najbardziej wiarygodnym źródłem, aby znaleźć te informacje.
			</para>
			 <table colsep="1" id="tab-corresp">
				<title>Dopasowanie systemu operacyjnego i architektury</title>
				 <tgroup cols="2">
					<thead>
						<row>
							<entry>system operacyjny</entry>
							 <entry>Architektur(a/y)</entry>

						</row>

					</thead>
					 <tbody>
						<row>
							<entry>DEC Unix (OSF/1)</entry>
							 <entry>alpha, mipsel</entry>

						</row>
						 <row>
							<entry>HP Unix</entry>
							 <entry>ia64, hppa</entry>

						</row>
						 <row>
							<entry>IBM AIX</entry>
							 <entry>zaslianie komputera</entry>

						</row>
						 <row>
							<entry>Irix</entry>
							 <entry>mips</entry>

						</row>
						 <row>
							<entry>OS X</entry>
							 <entry>amd64, powerpc, i386</entry>

						</row>
						 <row>
							<entry>z/OS, MVS</entry>
							 <entry>s390x, s390</entry>

						</row>
						 <row>
							<entry>Solaris, SunOS</entry>
							 <entry>sparc, i386, m68k</entry>

						</row>
						 <row>
							<entry>Ultrix</entry>
							 <entry>mips</entry>

						</row>
						 <row>
							<entry>VMS</entry>
							 <entry>alpha</entry>

						</row>
						 <row>
							<entry>Windows 95/98/ME</entry>
							 <entry>i386</entry>

						</row>
						 <row>
							<entry>Windows NT/2000</entry>
							 <entry>i386, alpha, ia64, mipsel</entry>

						</row>
						 <row>
							<entry>Windows XP / Windows Server 2008</entry>
							 <entry>i386, amd64, ia64</entry>

						</row>
						 <row>
							<entry>Windows Vista / Windows 7 / Windows 8</entry>
							 <entry>i386, amd64</entry>

						</row>

					</tbody>

				</tgroup>

			</table>
			 <sidebar> <title><emphasis>HARDWARE</emphasis> 64 bit PC vs 32 bit PC</title>
			 <indexterm>
				<primary>amd64</primary>
			</indexterm>
			 <indexterm>
				<primary>i386</primary>
			</indexterm>
			 <para>
				Najnowsze komputery mają 64 bitowe procesory Intel lub AMD , zgodne ze starszymi procesorami 32-bitowymi ; programy skompilowane dla architektury" i386 " także działają. Z drugiej strony kompatybilność nie jest w stanie wykorzystywać najnowszych możliwośći nowych procesorów. To dlatego Debian dostarcza architekture "amd64" , która wspołpracuje z najnowszymi czipami AMD jak i procesorami Intel "em64t" (zawierając prawie wszystkie z serri Core), które są bardzo podobne do AMD64.
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Instalowanie i konfigurowanie wybranych usług</title>
			 <para>
				Once Debian is installed, we must install and configure one by one all of the services that this computer must host. The new configuration must take into consideration the prior one in order to ensure a smooth transition. All the information collected in the first two steps will be useful to successfully complete this part.
			</para>
			 <figure>
				<title>Zainstaluj wybrane usługi</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-4.png" format="PNG" width="66%" />
					</imageobject>

				</mediaobject>

			</figure>
			 <para>
				Prior to jumping into this exercise with both feet, it is strongly recommended that you read the remainder of this book. After that you will have a more precise understanding of how to configure the expected services.
			</para>
			 <para>
			</para>

		</section>

	</section>
</chapter>

