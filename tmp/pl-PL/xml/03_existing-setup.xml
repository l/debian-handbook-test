<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="existing-setup" lang="pl-PL">
	<chapterinfo>
		 <keywordset>
			<keyword>Istniejąca konfiguracja</keyword>
			 <keyword>Ponowne użycie</keyword>
			 <keyword>Migracja</keyword>

		</keywordset>

	</chapterinfo>
	 <title>Analiza istniejącej konfiguracji i migracja</title>
	 <highlights> <para>
		Wszelkie ogólne przeglądy systemu komputerowego powinny brać pod uwagę istniejący system. Umożliwia to ponowne wykorzystanie dostępnych zasobów w jak największym stopniu i gwarantuje interoperacyjność różnych elementów wchodzących w skład systemu. To studium wprowadzi rodzajowy ramy, którymi można się kierować przy jakiejkolwiek migracji infrastruktury komputerowej do Linuksa.
	</para>
	 </highlights> <section id="sect.heterogeneous-environments">
		<title>Współistnienie w heterogenicznych środowiskach</title>
		 <indexterm>
			<primary>środowisko</primary>
			<secondary>heterogeniczne środowisko</secondary>
		</indexterm>
		 <para>
			Debian bardzo dobrze integruje się ze wszystkimi typami istniejących środowisk i dobrze współgra z innym systemem operacyjnym. Ta niemal doskonała harmonia jest spowodowana presją rynku który wymaga, aby wydawcy oprogramowania opracowywali programy zgodne ze standardami. Zgodność ze standardami pozwala administratorom na przełączanie się pomiędzy programami: klientami lub serwerami, nieodpłatnie lub odpłatnie.
		</para>
		 <section>
			<title>Integracja z maszynami Windows</title>
			 <para>
				Protokół SMB/CIFS Samby zapewnia wsparcie znakomitej komunikacji w kontekście Windowsa. Dzieli pliki i kolejki wydruku z klientem Windowsa i zawiera oprogramowanie, które pozwala maszynie linuksowej używać zasobów, które są na serwerach Windowsa.
			</para>
			 <sidebar> <title><emphasis>NARZĘDZIE</emphasis> Samba</title>
			 <indexterm>
				<primary>Samba</primary>
			</indexterm>
			 <para>
				Najnowsza wersja Samby może zastąpić większość cech systemu Windows: od tych z prostego serwera Windows NT (uwierzytelnianie, pliki, kolejki wydruku, pobieranie sterowników do drukarki, DFS, itp.), do cech najbardziej zaawansowanych (kontroler domeny kompatybilny z Active Directory).
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Integracja z maszynami OS X</title>
			 <indexterm>
				<primary>Zeroconf</primary>
			</indexterm>
			 <indexterm>
				<primary>Bonjour</primary>
			</indexterm>
			 <indexterm>
				<primary>Avahi</primary>
			</indexterm>
			 <para>
				Maszyny OS X dostarczają, i potrafią używać, usług sieciowych, takich jak serwery plików i współdzielenie drukarek. Te usługi są publikowane w lokalnej sieci komputerowej, co pozwala innym maszynom na wykrywanie ich i używanie bez żadnej ręcznej konfiguracji, za pomocą implementacji Bonjour z pakietu protokołu ZeroConf. Debian zawiera inną implementację, o nazwie Avahi, która dostarcza tej samej funkcjonalności.
			</para>
			 <indexterm>
				<primary>AFP</primary>
			</indexterm>
			 <indexterm>
				<primary>AppleShare</primary>
			</indexterm>
			 <para>
				W odwrotnym kierunku, demon Netatalk może być użyty do dostarczania plików serwerowych do maszyn OS X przez sieć komputerową. Implementuje on protokół AFP (AppleShare), jak też wymagane notyfikacje, aby serwer mógł być automatycznie wykrywalny przez klientów OS X.
			</para>
			 <indexterm>
				<primary>AppleTalk</primary>
			</indexterm>
			 <para>
				Starsze sieci komputerowe Mac (przed OS X) używały innego protokołu, o nazwie AppleTalk. Netatalk także dostarcza protokołu AppleTalk środowiskom maszyn, które używają tego protokołu (w rzeczywistości, zaczęło się to jako implementacja tego protokołu). Takie podejście zapewnia działanie serwera plików i kolejek drukowania, jak też serwera czasu (synchronizację zegara). Jego funkcja rutera pozwala na korelację z sieciami komputerowymi AppleTalk.
			</para>

		</section>
		 <section>
			<title>Integracja z innymi maszynami Linux /Unix</title>
			 <para>
				Wreszcie, protokoły NFS i NIS, obydwa załączone w istniejącej konfiguracji, gwarantują interakcję z systemami Unix. Protokół NFS zapewnia funkcjonalność serwera plików, podczas gdy protokół NIS tworzy katalogi użytkowników. Warstwa drukowania BSD, używana przez większość systemów uniksowych, umożliwia również współdzielenie kolejek wydruku.
			</para>
			 <figure>
				<title>Współistnienie Debiana z systemami OS X, Windows i Unix</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-1.png" format="PNG" width="25%" />
					</imageobject>

				</mediaobject>

			</figure>

		</section>

	</section>
	 <section id="sect.how-to-migrate">
		<title>Jak migrować</title>
		 <indexterm>
			<primary>migracja</primary>
		</indexterm>
		 <para>
			W celu zapewnienia ciągłości usług, każda migracja na komputerze musi być zaplanowana i realizowana zgodnie z planem. Zasada ta ma zastosowanie bez względu na używany system operacyjny.
		</para>
		 <section>
			<title>Ankieta i identyfikacja usług</title>
			 <para>
				Ten krok jest niezbędny i jest tak prosty, jak tylko się wydaje. Dobry administrator zna główne role każdego serwera, ale takie role mogą się zmieniać. Czasem, nawet doświadczeni użytkownicy mogą mieć zainstalowane usługi na "dziko". Wiedza o tym, że takie usługi istnieją, pozwoli administratorowi zadecydować o ich dalszym losie i zapobiegnie przypadkowemu usuwaniu usług.
			</para>
			 <para>
				W tym celu dobrze jest poinformować użytkowników o projekcie przed migracją serwera. Zaangażowanie ich w projekt przed migracją może być przydatne w instalacji najbardziej znanych, wolnych programów na ich komputerach. Po migracji do Debiana zetkną się z tymi programami ponownie: pakiet Libre Office i pakiet Mozilla są tego najlepszymi przykładami.
			</para>
			 <section>
				<title>Sieć komputerowa i procesy</title>
				 <indexterm>
					<primary><command>nmap</command></primary>
				</indexterm>
				 <para>
					Narzędzie <command>nmap</command> (w pakiecie o tej samej nazwie) szybko zidentyfikuje usługi internetowe uruchomione na maszynie podłączonej do sieci komputerowej, nawet bez potrzeby logowania sie na tej maszynie. Po prostu, wywołaj następujące polecenie na innej maszynie, podłączonej do tej samej sieci:
				</para>
				 
<screen>
<computeroutput>$ </computeroutput><userinput>nmap mirwiz</userinput>
<computeroutput>Starting Nmap 6.47 ( http://nmap.org ) at 2015-03-24 11:34 CET
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.0037s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds</computeroutput></screen>
				 <sidebar> <title><emphasis>ALTERNATYWA</emphasis> Użyj polecenia <command>netstat</command> aby znależć listę dostępnych usług</title>
				 <para>
					Na maszynie linuksowej, polecenie <command>netstat -tupan</command> wyświetli listę aktywnych i oczekujących sesji TCP, jak i portów UDP, na których są nasłuchiwane programy uruchomione. Ułatwia to identyfikację usług oferowanych w sieci komputerowej.
				</para>
				 </sidebar> <sidebar> <title><emphasis>IDĄC DALEJ</emphasis> IPv6</title>
				 <para>
					Niektóre polecenia sieciowe mogą pracować zarówno z IPv4 (zazwyczaj domyślnie) lub z IPv6. Należą do nich polecenia <command>nmap</command> i <command>netstat</command>, ale również inne, takie jak <command>route</command> lub <command>ip</command>. Konwencja polega na tym, że to zachowanie jest włączane przez opcję linii poleceń <parameter> -6</parameter>.
				</para>
				 </sidebar> <para>
					Jeśli serwer maszyny uniksowej oferuje konta powłoki użytkownikom, to interesujące jest określenie tego, czy procesy wykonywane są w tle pod nieobecność ich właściciela. Polecenie <command>ps auxw</command> wyświetla listę wszystkich procesów, razem z tożsamością ich użytkownika. Poprzez sprawdzenie informacji, uzyskanych za pomocą polecenia <command>who</command>, które daje listę zalogowanych użytkowników, możliwe jest zidentyfikowanie nieuczciwych lub niezadeklarowanych serwerów lub programów uruchomionych w tle. Rzut okiem na <filename>crontabs</filename> (tabele nasłuchujące automatycznych działań zaplanowanych przez użytkowników) często dostarczy interesujących informacji na temat funkcji spełnianych przez serwer (pełne wyjaśnienie polecenia <command>cron</command> jest dostępne w <xref linkend="sect.task-scheduling-cron-atd" />).
				</para>
				 <para>
					W każdym przypadku, konieczne jest tworzenie kopii zapasowych serwerów, co pozwala na odzyskanie danych po fakcie, gdy użytkownicy będą raportować specyficzne problemy, związane z migracją.
				</para>

			</section>

		</section>
		 <section>
			<title>Tworzenie kopii zapasowej dla konfiguracji</title>
			 <para>
				Dobrze jest, aby utrzymać konfigurację każdej zidentyfikowanej usługi, aby móc potem zainstalować jej odpowiednik na zaktualizowanym serwerze. Absolutne minimum to stworzenie kopii zapasowej plików konfiguracyjnych.
			</para>
			 <para>
				Pliki konfiguracyjne dla maszyn uniksowych znajdują się zwykle w katalogu <filename>/etc/</filename>, ale mogą też znajdować się w podkatalogu <filename>/usr/local/</filename>. Jest to przypadek, gdy program jest zainstalowany raczej ze źródeł, a nie z pakietu. W niektórych przypadkach, pliki konfiguracyjne można również znaleźć w katalogu <filename>/opt/</filename>.
			</para>
			 <para>
				Dla usług zarządzających danymi (dla takich usług, które — przykładowo — zarządzają bazami danych) usilnie zaleca się, aby wyeksportować te dane do standardowego formatu, który będzie można łatwo zaimportować za pomocą nowego oprogramowania. Taki format zazwyczaj jest w trybie tekstowym i jest udokumentowany; może to być, dla przykładu, zrzut SQL dla bazy danych lub plik LDIF dla serwera LDAP.
			</para>
			 <figure>
				<title>Kopie zapasowe bazy danych</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-2.png" format="PNG" width="50%" />
					</imageobject>

				</mediaobject>

			</figure>
			 <para>
				Każdy oprogramowanie serwera jest inny, i nie jest możliwe opisanie wszystkich odmian w szczegółach. Porównaj dokumentację istniejących oraz nowych oprogramowań do identyfikowania eksportowanych ( ponownie importowanych ) części i tych, które wymagają ręcznej obsługi. Czytając tę książkę dowiesz się o konfiguracji głównych programów serwerowych Linux.
			</para>

		</section>
		 <section>
			<title>Przejmując obowiazki aktualnego servera Debiana</title>
			 <indexterm>
				<primary>recovering a Debian machine</primary>
			</indexterm>
			 <indexterm>
				<primary>exploring a Debian machine</primary>
			</indexterm>
			 <indexterm>
				<primary>taking over a Debian server</primary>
			</indexterm>
			 <para>
				Aby skutecznie go utrzymać, jeden może analizować maszynę aktualnie pracującą z Debianem.
			</para>
			 <para>
				Pierwszym plikiem do sprawdzenia jest <filename>/etc/debian_version</filename>, który zazwyczaj zawiera numer wersji dla zainstalowanego Debiana (jest to część <emphasis>base-files</emphasis> pakietu. Jeśli to wskazuje na <literal><replaceable>codename</replaceable>/sid</literal>, to oznacza, że system został zaaktualizowany z pakietem pochodzącym z jednej z dystrybucji (testowej albo niestabilnej).
			</para>
			 <para>
				Komenda <command>apt-show-versions</command> programu ( z pakietu Debiana o tej samej nazwie) sprawdza liste zainstalowanych pakietów i identyfikatorów dostepnych wersji. <command>aptitude</command> może również być użyty do tych zadań, aczkolwiek w mniej systematyczny sposób.
			</para>
			 <para>
				A glance at the <filename>/etc/apt/sources.list</filename> file (and <filename>/etc/apt/sources.list.d/</filename> directory) will show where the installed Debian packages likely came from. If many unknown sources appear, the administrator may choose to completely reinstall the computer's system to ensure optimal compatibility with the software provided by Debian.
			</para>
			 <para>
				The <filename> sources.list </filename> jest często dobrym wskaźnikiem, większość administratorów zachowuje, przynajmniej w komentarzach, listę APT źródeł, które były wcześniej używane. Ale nie należy zapominać, że źródła wykorzystane w przeszłości mogły zostać usunięty, a niektóre losowe pakiety podpatrzone w internecie mogą być zainstalowane ręcznie (z <command> dpkg </command>). W tym przypadku, urządzenie wprowadza w błąd w swoim wyglądzie "standardowym" Debiana. Dlatego należy zwrócić uwagę na wskazanie, że da się obecność opakowaniach zewnętrznych (wygląd <filename> deb </filename> pliki w nietypowych katalogach, numery wersji pakietu ze specjalną końcówką, wskazującą, że pochodzi spoza projektu Debian, takich jak <literal> ubuntu </literal> lub <literal> lmde </literal>, itp)
			</para>
			 <para>
				Podobnie, warto przeanalizować zawartość pliku <filename>/usr/local/</filename> katalogu, w którym są programy zainstalowane i skompilowane manulanie. Listowanie oprogramowania zainstalowanego w ten sposób jest pouczająca, ponieważ rodzi to pytania dotyczące powodów nie używania odpowiedniego pakietu Debiana, jżeli takie pakiety istnieją.
			</para>
			 <sidebar> <title><emphasis>QUICK LOOK</emphasis> <emphasis role="pkg">cruft</emphasis></title>
			 <para>
				The <emphasis role="pkg">cruft</emphasis> Pakietowe propozycje listy dostępnych plików ,które nie są własnością żadnego pakietu. To ma jakieś filtry (mniej lub bardziej skuteczne,w zależności od tego jak bardzo jest aktualne), aby uniknąć zgłaszania niektórych uzasadnionych plików (pliki generowane przez pakiety Debiana lub wygenerowane pliki konfiguracyjne nie są zarządzane przez <command>dpkg</command>, itp).
			</para>
			 <para>
				Uważaj aby nie usunąć wszystkiego <command>śmieci</command> może wylistować!
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Instaluje Debiana</title>
			 <para>
				Gdy wszystkie wymagane informacje na bieżącym serwerze są znane, możemy go zamknąć i rozpocząć instalację Debiana.
			</para>
			 <indexterm>
				<primary>architektura</primary>
			</indexterm>
			 <para>
				Aby wybrać odpowiednią wersję, musimy znać architekturę komputera. Jeśli jest to w miarę nowy PC, jest to bardzo prawdopodobne iż będzie to amd64 (starszymi komputery były zazwyczaj i386). W innych przypadkach, możemy zawęzić możliwości zgodnie z poprzednio używanego systemu.
			</para>
			 <para>
				<xref linkend="tab-corresp" xrefstyle="select: label nopage" /> nie jest wyczerpująca, ale może być pomocne. W każdym przypadku, oryginalna dokumentacja dla komputera jest najbardziej wiarygodnym źródłem, aby znaleźć te informacje.
			</para>
			 <table colsep="1" id="tab-corresp">
				<title>Dopasowanie systemu operacyjnego i architektury</title>
				 <tgroup cols="2">
					<thead>
						<row>
							<entry>system operacyjny</entry>
							 <entry>Architektur(a/y)</entry>

						</row>

					</thead>
					 <tbody>
						<row>
							<entry>DEC Unix (OSF/1)</entry>
							 <entry>alpha, mipsel</entry>

						</row>
						 <row>
							<entry>HP Unix</entry>
							 <entry>ia64, hppa</entry>

						</row>
						 <row>
							<entry>IBM AIX</entry>
							 <entry>zaslianie komputera</entry>

						</row>
						 <row>
							<entry>Irix</entry>
							 <entry>mips</entry>

						</row>
						 <row>
							<entry>OS X</entry>
							 <entry>amd64, powerpc, i386</entry>

						</row>
						 <row>
							<entry>z/OS, MVS</entry>
							 <entry>s390x, s390</entry>

						</row>
						 <row>
							<entry>Solaris, SunOS</entry>
							 <entry>sparc, i386, m68k</entry>

						</row>
						 <row>
							<entry>Ultrix</entry>
							 <entry>mips</entry>

						</row>
						 <row>
							<entry>VMS</entry>
							 <entry>alpha</entry>

						</row>
						 <row>
							<entry>Windows 95/98/ME</entry>
							 <entry>i386</entry>

						</row>
						 <row>
							<entry>Windows NT/2000</entry>
							 <entry>i386, alpha, ia64, mipsel</entry>

						</row>
						 <row>
							<entry>Windows XP / Windows Server 2008</entry>
							 <entry>i386, amd64, ia64</entry>

						</row>
						 <row>
							<entry>Windows Vista / Windows 7 / Windows 8</entry>
							 <entry>i386, amd64</entry>

						</row>

					</tbody>

				</tgroup>

			</table>
			 <sidebar> <title><emphasis>HARDWARE</emphasis> 64 bit PC vs 32 bit PC</title>
			 <indexterm>
				<primary>amd64</primary>
			</indexterm>
			 <indexterm>
				<primary>i386</primary>
			</indexterm>
			 <para>
				Najnowsze komputery mają 64 bitowe procesory Intel lub AMD , zgodne ze starszymi procesorami 32-bitowymi ; programy skompilowane dla architektury" i386 " także działają. Z drugiej strony kompatybilność nie jest w stanie wykorzystywać najnowszych możliwośći nowych procesorów. To dlatego Debian dostarcza architekture "amd64" , która wspołpracuje z najnowszymi czipami AMD jak i procesorami Intel "em64t" (zawierając prawie wszystkie z serri Core), które są bardzo podobne do AMD64.
			</para>
			 </sidebar>
		</section>
		 <section>
			<title>Instalowanie i konfigurowanie wybranych usług</title>
			 <para>
				Once Debian is installed, we must install and configure one by one all of the services that this computer must host. The new configuration must take into consideration the prior one in order to ensure a smooth transition. All the information collected in the first two steps will be useful to successfully complete this part.
			</para>
			 <figure>
				<title>Zainstaluj wybrane usługi</title>
				 <mediaobject>
					<imageobject>
						<imagedata fileref="images/existing-setup-4.png" format="PNG" width="66%" />
					</imageobject>

				</mediaobject>

			</figure>
			 <para>
				Prior to jumping into this exercise with both feet, it is strongly recommended that you read the remainder of this book. After that you will have a more precise understanding of how to configure the expected services.
			</para>
			 <para>
			</para>

		</section>

	</section>
</chapter>

