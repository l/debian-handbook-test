<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">5.2. Meta-informacje pakietu</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-pl-PL-1.0-1" /><meta
        name="keywords"
        content="Pakiet binarny, Pakiet źródłowy, dpkg, zależności, konflikt" /><link
        rel="home"
        href="index.html"
        title="Podręcznik Administratora Debiana" /><link
        rel="up"
        href="packaging-system.html"
        title="Rozdział 5. System pakietowania: narzędzia oraz podstawowe zasady" /><link
        rel="prev"
        href="packaging-system.html"
        title="Rozdział 5. System pakietowania: narzędzia oraz podstawowe zasady" /><link
        rel="next"
        href="sect.source-package-structure.html"
        title="5.3. Struktura Pakietu Źródłowego" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/pl-PL/stable/sect.package-meta-information.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Poprzedni</strong></a></li><li
          class="home">Podręcznik Administratora Debiana</li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Następny</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.package-meta-information"></a>5.2. Meta-informacje pakietu</h2></div></div></div><a
          id="id-1.8.6.2"
          class="indexterm"></a><a
          id="id-1.8.6.3"
          class="indexterm"></a><div
          class="para">
			The Debian package is not only an archive of files intended for installation. It is part of a larger whole, and it describes its relationship with other Debian packages (dependencies, conflicts, suggestions). It also provides scripts that enable the execution of commands at different stages in the package's lifecycle (installation, removal, upgrades). These data are used by the package management tools but are not part of the packaged software; they are, within the package, what is called its “meta-information” (information about other information).
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.control"></a>5.2.1. Opis: plik <code
                    class="filename">control</code></h3></div></div></div><a
            id="id-1.8.6.5.2"
            class="indexterm"></a><a
            id="id-1.8.6.5.3"
            class="indexterm"></a><a
            id="id-1.8.6.5.4"
            class="indexterm"></a><div
            class="para">
				This file uses a structure similar to email headers (as defined by RFC 2822). For example, for <span
              class="pkg pkg">apt</span>, the <code
              class="filename">control</code> file looks like the following:
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>apt-cache show apt</code></strong>
<code
              class="computeroutput">Package: apt
Version: 1.0.9.6
Installed-Size: 3788
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Architecture: amd64
Replaces: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Depends: libapt-pkg4.12 (&gt;= 1.0.9.6), libc6 (&gt;= 2.15), libgcc1 (&gt;= 1:4.1.1), libstdc++6 (&gt;= 4.9), debian-archive-keyring, gnupg
Suggests: aptitude | synaptic | wajig, dpkg-dev (&gt;= 1.17.2), apt-doc, python-apt
Conflicts: python-apt (&lt;&lt; 0.7.93.2~)
Breaks: manpages-it (&lt;&lt; 2.80-4~), manpages-pl (&lt;&lt; 20060617-3~), openjdk-6-jdk (&lt;&lt; 6b24-1.11-0ubuntu1~), sun-java5-jdk (&gt;&gt; 0), sun-java6-jdk (&gt;&gt; 0)
Description-en: commandline package manager
 This package provides commandline tools for searching and
 managing as well as querying information about packages
 as a low-level access to all features of the libapt-pkg library.
 .
 These include:
  * apt-get for retrieval of packages and information about them
    from authenticated sources and for installation, upgrade and
    removal of packages together with their dependencies
  * apt-cache for querying available information about installed
    as well as installable packages
  * apt-cdrom to use removable media as a source for packages
  * apt-config as an interface to the configuration settings
  * apt-key as an interface to manage authentication keys
Description-md5: 9fb97a88cb7383934ef963352b53b4a7
Tag: admin::package-management, devel::lang:ruby, hardware::storage,
 hardware::storage:cd, implemented-in::c++, implemented-in::perl,
 implemented-in::ruby, interface::commandline, network::client,
 protocol::ftp, protocol::http, protocol::ipv6, role::program,
 role::shared-lib, scope::application, scope::utility, sound::player,
 suite::debian, use::downloading, use::organizing, use::searching,
 works-with::audio, works-with::software:package, works-with::text
Section: admin
Priority: important
Filename: pool/main/a/apt/apt_1.0.9.6_amd64.deb
Size: 1107560
MD5sum: a325ccb14e69fef2c50da54e035a4df4
SHA1: 635d09fcb600ec12810e3136d51e696bcfa636a6
SHA256: 371a559ce741394b59dbc6460470a9399be5245356a9183bbeea0f89ecaabb03</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>WRACAJĄC DO PODSTAW</em></span> RFC — internetowe standardy</strong></p></div></div></div><a
              id="id-1.8.6.5.7.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.7.3"
              class="indexterm"></a><div
              class="para">
				RFC jest skrótem od “Request For Comments” (Prośba o komentarze). RFC jest zazwyczaj technicznym dokumentem opisującym przyszły standard w Internecie. Przed ustandaryzowaniem i zamrożeniem, standardy te są przedstawione do publicznej oceny (stąd ich nazwa). IETF (Internet Engineering Task Force) decyduje o zmianie statusu tych dokumentów (proponowany standard, szkic standardu lub standard).
			</div><div
              class="para">
				RFC 2026 definiuje proces standaryzacji protokołów internetowych<div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.faqs.org/rfcs/rfc2026.html">http://www.faqs.org/rfcs/rfc2026.html</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.8"></a>5.2.1.1. Zależności: pole <code
                      class="literal">Depends</code></h4></div></div></div><a
              id="id-1.8.6.5.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.8.4"
              class="indexterm"></a><div
              class="para">
					The dependencies are defined in the <code
                class="literal">Depends</code> field in the package header. This is a list of conditions to be met for the package to work correctly — this information is used by tools such as <code
                class="command">apt</code> in order to install the required libraries, in appropriate versions fulfilling the dependencies of the package to be installed. For each dependency, it is possible to restrict the range of versions that meet that condition. In other words, it is possible to express the fact that we need the package <span
                class="pkg pkg">libc6</span> in a version equal to or greater than “2.15” (written “<code
                class="command">libc6 (&gt;= 2.15)</code>”). Version comparison operators are as follows:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;&lt;</code>: mniejsza;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&lt;=</code>: mniejsza bądź równa;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">=</code>: równa (zauważ, że “<code
                      class="literal">2.6.1</code>” nie jest równa “<code
                      class="literal">2.6.1-1</code>”);
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;=</code>: większa bądź równa;
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">&gt;&gt;</code>: większa.
						</div></li></ul></div><div
              class="para">
					In a list of conditions to be met, the comma serves as a separator. It must be interpreted as a logical “and”. In conditions, the vertical bar (“|”) expresses a logical “or” (it is an inclusive “or”, not an exclusive “either/or”). Carrying greater priority than “and”, it can be used as many times as necessary. Thus, the dependency “(A or B) and C” is written <code
                class="command">A | B, C</code>. In contrast, the expression “A or (B and C)” should be written as “(A or B) and (A or C)”, since the <code
                class="literal">Depends</code> field does not tolerate parentheses that change the order of priorities between the logical operators “or” and “and”. It would thus be written <code
                class="command">A | B, A | C</code>. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.debian.org/doc/debian-policy/ch-relationships.html">http://www.debian.org/doc/debian-policy/ch-relationships.html</a></div>
				</div><a
              id="id-1.8.6.5.8.8"
              class="indexterm"></a><div
              class="para">
					The dependencies system is a good mechanism for guaranteeing the operation of a program, but it has another use with “meta-packages”. These are empty packages that only describe dependencies. They facilitate the installation of a consistent group of programs preselected by the meta-package maintainer; as such, <code
                class="command">apt install <em
                  class="replaceable">meta-package</em></code> will automatically install all of these programs using the meta-package's dependencies. The <span
                class="pkg pkg">gnome</span>, <span
                class="pkg pkg">kde-full</span> and <span
                class="pkg pkg">linux-image-amd64</span> packages are examples of meta-packages.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DEBIAN POLICY</em></span> <code
                          class="literal">Pre-Depends</code>,bardziej wymagający <code
                          class="literal">Depends</code></strong></p></div></div></div><a
                id="id-1.8.6.5.8.10.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.10.3"
                class="indexterm"></a><div
                class="para">
					“Pre-dependencies”, which are listed in the “<code
                  class="literal">Pre-Depends</code>” field in the package headers, complete the normal dependencies; their syntax is identical. A normal dependency indicates that the package in question must be unpacked and configured before configuration of the package declaring the dependency. A pre-dependency stipulates that the package in question must be unpacked and configured before execution of the pre-installation script of the package declaring the pre-dependency, that is before its installation.
				</div><div
                class="para">
					A pre-dependency is very demanding for <code
                  class="command">apt</code>, because it adds a strict constraint on the ordering of the packages to install. As such, pre-dependencies are discouraged unless absolutely necessary. It is even recommended to consult other developers on <code
                  class="email"><a
                    class="email"
                    href="mailto:debian-devel@lists.debian.org">debian-devel@lists.debian.org</a></code> before adding a pre-dependency. It is generally possible to find another solution as a work-around.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>POLITYKA DEBIANA</em></span> Pola <code
                          class="literal">Recommends</code>, <code
                          class="literal">Suggests</code> i <code
                          class="literal">Enhances</code></strong></p></div></div></div><a
                id="id-1.8.6.5.8.11.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.8.11.3"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Recommends</code> and <code
                  class="literal">Suggests</code> fields describe dependencies that are not compulsory. The “recommended” dependencies, the most important, considerably improve the functionality offered by the package but are not indispensable to its operation. The “suggested” dependencies, of secondary importance, indicate that certain packages may complement and increase their respective utility, but it is perfectly reasonable to install one without the others.
				</div><div
                class="para">
					Powinieneś zawsze instalować pakiety "rekomendowane", chyba że dokładnie wiesz, dlaczego ich nie potrzebujesz. Przeciwnie, nie jest wymagane instalowanie "sugerowanych", chyba że wiesz, że ich potrzebujesz.
				</div><a
                id="id-1.8.6.5.8.11.6"
                class="indexterm"></a><div
                class="para">
					The <code
                  class="literal">Enhances</code> field also describes a suggestion, but in a different context. It is indeed located in the suggested package, and not in the package that benefits from the suggestion. Its interest lies in that it is possible to add a suggestion without having to modify the package that is concerned. Thus, all add-ons, plug-ins, and other extensions of a program can then appear in the list of suggestions related to the software. Although it has existed for several years, this last field is still largely ignored by programs such as <code
                  class="command">apt</code> or <code
                  class="command">synaptic</code>. Its purpose is for a suggestion made by the <code
                  class="literal">Enhances</code> field to appear to the user in addition to the traditional suggestions — found in the <code
                  class="literal">Suggests</code> field.
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.9"></a>5.2.1.2. Konflikty: pole <code
                      class="literal">Conflicts</code></h4></div></div></div><a
              id="id-1.8.6.5.9.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.9.4"
              class="indexterm"></a><div
              class="para">
					Pole <code
                class="literal">Konflikty</code> wskazuje przypadek, kiedy pakiet nie może być zainstalowany równocześnie z innym. Najczęstszymi powodami takich sytuacji jest plik o tej samej nazwie zawierany przez oba pakiety lub taka sama usługa na tym samym porcie TCP, lub wzajemne utrudnianie sobie działania.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> will refuse to install a package if it triggers a conflict with an already installed package, except if the new package specifies that it will “replace” the installed package, in which case <code
                class="command">dpkg</code> will choose to replace the old package with the new one. <code
                class="command">apt</code> always follows your instructions: if you choose to install a new package, it will automatically offer to uninstall the package that poses a problem.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.10"></a>5.2.1.3. Niekompatybilności: pole <code
                      class="literal">Breaks</code></h4></div></div></div><a
              id="id-1.8.6.5.10.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.10.4"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Breaks</code> field has an effect similar to that of the <code
                class="literal">Conflicts</code> field, but with a special meaning. It signals that the installation of a package will “break” another package (or particular versions of it). In general, this incompatibility between two packages is transitory, and the <code
                class="literal">Breaks</code> relationship specifically refers to the incompatible versions.
				</div><div
              class="para">
					<code
                class="command">dpkg</code> will refuse to install a package that breaks an already installed package, and <code
                class="command">apt</code> will try to resolve the problem by updating the package that would be broken to a newer version (which is assumed to be fixed and, thus, compatible again).
				</div><div
              class="para">
					This type of situation may occur in the case of updates without backwards compatibility: this is the case if the new version no longer functions with the older version, and causes a malfunction in another program without making special provisions. The <code
                class="literal">Breaks</code> field prevents the user from running into these problems.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.11"></a>5.2.1.4. Dostarczone elementy: pole <code
                      class="literal">Provides</code></h4></div></div></div><a
              id="id-1.8.6.5.11.2"
              class="indexterm"></a><div
              class="para">
					This field introduces the very interesting concept of a “virtual package”. It has many roles, but two are of particular importance. The first role consists in using a virtual package to associate a generic service with it (the package “provides” the service). The second indicates that a package completely replaces another, and that for this purpose it can also satisfy the dependencies that the other would satisfy. It is thus possible to create a substitution package without having to use the same package name.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SŁOWNIK</em></span> Meta-pakiet i pakiet wirtualny</strong></p></div></div></div><a
                id="id-1.8.6.5.11.4.2"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.3"
                class="indexterm"></a><a
                id="id-1.8.6.5.11.4.4"
                class="indexterm"></a><div
                class="para">
					It is essential to clearly distinguish meta-packages from virtual packages. The former are real packages (including real <code
                  class="filename">.deb</code> files), whose only purpose is to express dependencies.
				</div><div
                class="para">
					Virtual packages, however, do not exist physically; they are only a means of identifying real packages based on common, logical criteria (service provided, compatibility with a standard program or a pre-existing package, etc.).
				</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.5"></a>5.2.1.4.1. Providing a “Service”</h5></div></div></div><div
                class="para">
						Let us discuss the first case in greater detail with an example: all mail servers, such as <span
                  class="pkg pkg">postfix</span> or <span
                  class="pkg pkg">sendmail</span> are said to “provide” the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. Thus, any package that needs this service to be functional (e.g. a mailing list manager, such as <span
                  class="pkg pkg">smartlist</span> or <span
                  class="pkg pkg">sympa</span>) simply states in its dependencies that it requires a <span
                  class="pkg pkg">mail-transport-agent</span> instead of specifying a large yet incomplete list of possible solutions (e.g. <code
                  class="command">postfix | sendmail | exim4 | …</code>). Furthermore, it is useless to install two mail servers on the same machine, which is why each of these packages declares a conflict with the <span
                  class="pkg pkg">mail-transport-agent</span> virtual package. A conflict between a package and itself is ignored by the system, but this technique will prohibit the installation of two mail servers side by side.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>POLITYKA DEBIANA</em></span> Lista pakietów wirtualnych</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.5.3.2"
                  class="indexterm"></a><div
                  class="para">
						Aby wirtualne pakiety były przydatne, wszyscy muszą zgadzać się odnośnie ich nazw. Z tego powodu są one ustandaryzowane w Polityce Debiana. Lista obejmuje między innymi <span
                    class="pkg pkg">mail-transport-agent</span> dla serwerów poczty, <span
                    class="pkg pkg">c-compiler</span> dla kompilatorów języka C, <span
                    class="pkg pkg">www-browser</span> dla przeglądarek internetowych, <span
                    class="pkg pkg">httpd</span> dla serwerów internetowych, <span
                    class="pkg pkg">ftp-server</span> dla serwerów FTP, <span
                    class="pkg pkg">x-terminal-emulator</span> dla emulatorów terminala w trybie graficznym (<code
                    class="command">xterm</code>) i <span
                    class="pkg pkg">x-window-manager</span> dla menedżerów okien.
					</div><div
                  class="para">
						Pełną listę można znaleźć w Sieci. <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt">http://www.debian.org/doc/packaging-manuals/virtual-package-names-list.txt</a></div>
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.6"></a>5.2.1.4.2. Wymienność z innymi pakietami</h5></div></div></div><div
                class="para">
						The <code
                  class="literal">Provides</code> field is also interesting when the content of a package is included in a larger package. For example, the <span
                  class="pkg pkg">libdigest-md5-perl</span> Perl module was an optional module in Perl 5.6, and has been integrated as standard in Perl 5.8 (and later versions, such as 5.20 present in <span
                  class="distribution distribution">Jessie</span>). As such, the package <span
                  class="pkg pkg">perl</span> has since version 5.8 declared <code
                  class="literal">Provides: libdigest-md5-perl</code> so that the dependencies on this package are met if the user has Perl 5.8 (or newer). The <span
                  class="pkg pkg">libdigest-md5-perl</span> package itself has eventually been deleted, since it no longer had any purpose when old Perl versions were removed.
					</div><div
                class="figure"><a
                  xmlns=""
                  id="id-1.8.6.5.11.6.3"></a><div
                  class="figure-contents"><div
                    class="mediaobject"><img
                      src="images/virtual-package.png"
                      alt="Use of a Provides field in order to not break dependencies" /></div></div><p
                  class="title"><strong>Rysunek 5.1. Use of a <code
                      class="literal">Provides</code> field in order to not break dependencies</strong></p></div><div
                class="para">
						This feature is very useful, since it is never possible to anticipate the vagaries of development, and it is necessary to be able to adjust to renaming, and other automatic replacement, of obsolete software.
					</div><div
                class="sidebar"><div
                  class="titlepage"><div><div><p
                        class="title"><strong><span
                            class="emphasis"><em>WRACAJĄC DO PODSTAW</em></span> Perl, język programowania</strong></p></div></div></div><a
                  id="id-1.8.6.5.11.6.5.2"
                  class="indexterm"></a><a
                  id="id-1.8.6.5.11.6.5.3"
                  class="indexterm"></a><div
                  class="para">
						Perl (Practical Extraction and Report Language) jest bardzo popularnym językiem programowania. Posiada wiele modułów gotowych do użycia, które pokrywają szerokie spektrum zastosowań i są rozprowadzane przez serwery CPAN (Comprehensive Perl Archive Network), rozległą sieć pakietów Perla. <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.perl.org/">http://www.perl.org/</a></div> <div
                    xmlns=""
                    class="url">→ <a
                      xmlns="http://www.w3.org/1999/xhtml"
                      href="http://www.cpan.org/">http://www.cpan.org/</a></div>
					</div><div
                  class="para">
						W związku z tym, że jest to język interpretowany, program napisany w Perlu nie wymaga kompilacji przed wykonaniem. Dlatego nazywa się je "skryptami Perla".
					</div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.8.6.5.11.7"></a>5.2.1.4.3. Past Limitations</h5></div></div></div><div
                class="para">
						Virtual packages used to suffer from some limitations, the most significant of which was the absence of a version number. To return to the previous example, a dependency such as <code
                  class="literal">Depends: libdigest-md5-perl (&gt;= 1.6)</code>, despite the presence of Perl 5.10, would never be considered as satisfied by the packaging system — while in fact it most likely is satisfied. Unaware of this, the package system chose the least risky option, assuming that the versions do not match.
					</div><div
                class="para">
						This limitation has been lifted in <span
                  class="pkg pkg">dpkg</span> 1.17.11, and is no longer relevant in Jessie. Packages can assign a version to the virtual packages they provide with a dependency such as <code
                  class="literal">Provides: libdigest-md5-perl (= 1.8)</code>.
					</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.5.12"></a>5.2.1.5. Zastępowanie plików: pole <code
                      class="literal">Replaces</code></h4></div></div></div><a
              id="id-1.8.6.5.12.2"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.3"
              class="indexterm"></a><a
              id="id-1.8.6.5.12.4"
              class="indexterm"></a><div
              class="para">
					The <code
                class="literal">Replaces</code> field indicates that the package contains files that are also present in another package, but that the package is legitimately entitled to replace them. Without this specification, <code
                class="command">dpkg</code> fails, stating that it can not overwrite the files of another package (technically, it is possible to force it to do so with the <code
                class="literal">--force-overwrite</code> option, but that is not considered standard operation). This allows identification of potential problems and requires the maintainer to study the matter prior to choosing whether to add such a field.
				</div><div
              class="para">
					Użycie tego pola jest uprawnione kiedy zmienia się nazwa pakietu lub jeden pakiet jest zawarty w innym. Zdarza się to również, gdy opiekun decyduje się na różne rozprowadzanie plików pośród różnych pakietów binarnych wytworzonych z tego samego pakietu źródłowego: zastąpiony plik nie należy już do starego pakietu, ale tylko do nowego.
				</div><div
              class="para">
					Jeżeli wszystkie pliki w zainstalowanym pakiecie zostały zastąpione, pakiet uważa się za usunięty. Ostatecznie, użycie tego pola zachęca <code
                class="command">dpkg</code> do usunięcia zastąpionego pakietu, w którym występuje konflikt.
				</div><div
              class="sidebar"><a
                xmlns=""
                id="sidebar.debtags"></a><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>IDĄC DALEJ</em></span> Pole <code
                          class="literal">Tag</code></strong></p></div></div></div><div
                class="para">
					In the <span
                  class="pkg pkg">apt</span> example above, we can see the presence of a field that we have not yet described, the <code
                  class="literal">Tag</code> field. This field does not describe a relationship between packages, but is simply a way of categorizing a package in a thematic taxonomy. This classification of packages according to several criteria (type of interface, programming language, domain of application, etc.) has been available for a long time. Despite this, not all packages have accurate tags and it is not yet integrated in all Debian tools; <code
                  class="command">aptitude</code> displays these tags, and allows them to be used as search criteria. For those who are repelled by <code
                  class="command">aptitude</code>'s search criteria, the following website allows navigation of the tag database: <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://debtags.alioth.debian.org/">http://debtags.alioth.debian.org/</a></div>
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.configuration-scripts"></a>5.2.2. Skrypty konfiguracyjne</h3></div></div></div><a
            id="id-1.8.6.6.2"
            class="indexterm"></a><a
            id="id-1.8.6.6.3"
            class="indexterm"></a><a
            id="id-1.8.6.6.4"
            class="indexterm"></a><a
            id="id-1.8.6.6.5"
            class="indexterm"></a><a
            id="id-1.8.6.6.6"
            class="indexterm"></a><div
            class="para">
				W dodatku do pliku <code
              class="filename">control</code>, archiwum <code
              class="filename">control.tar.gz</code> dla każdego pakietu Debiana może zawierać wiele skryptów, wywoływanych przez <code
              class="command">dpkg</code> na różnych etapach przetwarzania pakietu. Polityka Debiana szczegółowo opisuje możliwe przypadki, wskazując wywoływane skrypty oraz argumenty, które mogą przyjmować. Mogą to być skomplikowane sekwencje, ponieważ jeżeli jeden skrypt zakończy się niepowodzeniem, <code
              class="command">dpkg</code> będzie próbował powrócić do prawidłowego stanu poprzez anulowanie postępu instalacji lub usuwania (jeżeli tylko będzie to możliwe).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IDĄC DALEJ</em></span> Baza danych <code
                        class="command">dpkg</code></strong></p></div></div></div><a
              id="id-1.8.6.6.8.2"
              class="indexterm"></a><a
              id="id-1.8.6.6.8.3"
              class="indexterm"></a><div
              class="para">
				Wszystkie skrypty konfiguracyjne dla zainstalowanych pakietów są przechowywane w katalogu <code
                class="filename">/var/lib/dpkg/info/</code>, w formie pliku z przedrostkiem wskazującym nazwę pakietu. Katalog ten dla każdego pakietu zawiera również plik z rozszerzeniem <code
                class="filename">.list</code>, zawierający listę plików należących do danego pakietu.
			</div><div
              class="para">
				Plik <code
                class="filename">/var/lib/dpkg/status</code> zawiera szereg bloków danych (w formacie sławnych nagłówków pocztowych, RFC 2822) opisujących status każdego pakietu. Jest tam również powielona informacja z pliku <code
                class="filename">control</code> zainstalowanych pakietów.
			</div></div><div
            class="para">
				Ogólnie, skrypt <code
              class="filename">preinst</code> jest wykonywany przed instalacją pakietu, podczas gdy <code
              class="filename">postinst</code> następuje po niej. Podobnie, <code
              class="filename">prerm</code> jest wywoływany przez usunięciem pakietu, a <code
              class="filename">postrm</code> po nim. Aktualizacja pakietu jest równoznaczna z usunięciem poprzedniej wersji i instalacją nowej. Nie możliwe jest opisanie tutaj wszystkich możliwych scenariuszy, ale zostaną omówione dwa najczęściej występujące: instalacja/aktualizacja oraz usunięcie.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>UWAGA</em></span> Symboliczne nazwy skryptów</strong></p></div></div></div><div
              class="para">
				Sekwencje opisane w tej sekcji wywołują skrypty konfiguracyjne używając specyficznych nazw, takich jak <code
                class="command">old-prerm</code> lub <code
                class="command">new-postinst</code>. Są to, odpowiednio, skrypt <code
                class="command">prerm</code> zawarty w starej wersji pakietu (zainstalowanej przed aktualizacją) i skrypt <code
                class="command">postinst</code> zawarty w nowej wersji (zainstalowany przez aktualizację).
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>WSKAZÓWKA</em></span> Diagramy stanów</strong></p></div></div></div><div
              class="para">
				Manoj Srivastava made these diagrams explaining how the configuration scripts are called by <code
                class="command">dpkg</code>. Similar diagrams have also been developed by the Debian Women project; they are a bit simpler to understand, but less complete. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://people.debian.org/~srivasta/MaintainerScripts.html">https://people.debian.org/~srivasta/MaintainerScripts.html</a></div> <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="https://wiki.debian.org/MaintainerScripts">https://wiki.debian.org/MaintainerScripts</a></div>
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.6.12"></a>5.2.2.1. Instalacja i uaktualnieni</h4></div></div></div><a
              id="id-1.8.6.6.12.2"
              class="indexterm"></a><div
              class="para">
					Oto, co dzieje się podczas instalacji (lub aktualizacji):
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							W celu aktualizacji, <code
                      class="command">dpkg</code> wywołuje <code
                      class="command">old-prerm upgrade <em
                        class="replaceable">nowa-wersja</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Nadal w przypadku aktualizacji, <code
                      class="command">dpkg</code> wywołuje <code
                      class="command">new-preinst upgrade <em
                        class="replaceable">stara-wersja</em></code>; w przypadku pierwszej instalacji wywołuje <code
                      class="command">new-preinst install</code>. Może dodać starą wersję jako ostatni parametr, jeżeli pakiet był wcześniej zainstalowany i usunięty (ale nie całkowicie, gdyż zostały zatrzymane pliki konfiguracyjne).
						</div></li><li
                  class="listitem"><div
                    class="para">
							Nowe pliki pakietu są wtedy rozpakowywane. Jeżeli plik już istnieje, zostaje zastąpiony, ale jest tworzona tymczasowa kopia zapasowa.
						</div></li><li
                  class="listitem"><div
                    class="para">
							W przypadku aktualizacji, <code
                      class="command">dpkg</code> wykonuje <code
                      class="command">old-postrm upgrade <em
                        class="replaceable">nowa-wersja</em></code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> aktualizuje wszystkie wewnętrzne dane (listę plików, skrypty konfiguracyjne, itd.) i usuwa kopie zapasowe zastąpionych plików. Jest to punkt bez powrotu: <code
                      class="command">dpkg</code> nie ma już dostępu do wszystkich elementów niezbędnych do przywrócenia poprzedniego stanu.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> zaktualizuje pliki konfiguracyjne, pytając użytkownika o decyzje, jeżeli nie jest w stanie automatycznie wykonać tego zadania. Szczegóły tej procedury zostały omówione w <a
                      class="xref"
                      href="sect.package-meta-information.html#sect.conffiles">Sekcja 5.2.3, „Sumy kontrolne, lista plików konfiguracyjnych”</a>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Ostatecznie, <code
                      class="command">dpkg</code> konfiguruje pakiet poprzez wykonanie <code
                      class="command">new-postinst configure <em
                        class="replaceable">ostatnia-wersja-configured</em></code>.
						</div></li></ol></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.8.6.6.13"></a>5.2.2.2. Usuwanie pakietu</h4></div></div></div><div
              class="para">
					O to, co zachodzi podczas usuwania pakietu:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="orderedlist"><ol><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> wywołuje <code
                      class="command">prerm remove</code>.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> usuwa wszystkie pliki pakietu, z wyjątkiem plików konfiguracyjnych i skryptów konfiguracyjnych.
						</div></li><li
                  class="listitem"><div
                    class="para">
							<code
                      class="command">dpkg</code> wykonuje <code
                      class="command">postrm remove</code>. Wszystkie skrypty konfiguracyjne, poza <code
                      class="filename">postrm</code>, zostają usunięte. Jeżeli użytkownik nie użył opcji "purge", proces dobiega końca.
						</div></li><li
                  class="listitem"><div
                    class="para">
							Podczas całkowitego usuwania pakietów (po wykonaniu polecenia <code
                      class="command">dpkg --purge</code> lub <code
                      class="command">dpkg -P</code>), usuwane są również pliki konfiguracyjne, wraz z pewną liczbą ich kopii (<code
                      class="filename">*.dpkg-tmp</code>, <code
                      class="filename">*.dpkg-old</code>, <code
                      class="filename">*.dpkg-new</code>) i plików tymczasowych; następnie <code
                      class="command">dpkg</code> wykonuje <code
                      class="command">postrm purge</code>.
						</div></li></ol></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SŁOWNIK</em></span> Purge, całkowite usunięcie</strong></p></div></div></div><a
                id="id-1.8.6.6.13.4.2"
                class="indexterm"></a><div
                class="para">
					Kiedy pakiet Debiana jest usuwany, pliki konfiguracyjne są zatrzymywane w celu ułatwienia ich prawdopodobnej reinstalacji. Podobnie, dane generowane przez demona (takie jak zawartość katalogu serwera LDAP, albo zawartość bazy danych serwera SQL) są zwykle zatrzymywane.
				</div><div
                class="para">
					Do usunięcia wszystkich danych powiązanych z pakietem niezbędne jest "całkowite usunięcie" (purge) pakietu komendą, <code
                  class="command">dpkg -P <em
                    class="replaceable">pakiet</em></code>, <code
                  class="command">apt-get remove --purge <em
                    class="replaceable">pakiet</em></code> lub <code
                  class="command">aptitude purge <em
                    class="replaceable">pakiet</em></code>.
				</div><div
                class="para">
					Given the definitive nature of such data removals, a purge should not be taken lightly.
				</div></div><a
              id="id-1.8.6.6.13.5"
              class="indexterm"></a><div
              class="para">
					Opisane powyżej cztery skrypty są uzupełnione skryptem <code
                class="filename">config</code>, dostarczanym przez pakiety używające <code
                class="command">debconf</code> w celu uzyskania informacji konfiguracyjnych od użytkownika. Podczas instalacji, skrypt ten szczegółowo definiuje pytania zadawane przez <code
                class="command">debconf</code>. Odpowiedzi są zapisywane w bazie danych <code
                class="command">debconf</code> dla przyszłego odniesienia. Ten skrypt jest zazwyczaj wykonywany przez <code
                class="command">apt</code> przed instalacją pakietów jeden po drugim, w celu zgrupowania wszystkich pytań i zadania ich użytkownikowi wszystkich na raz na początku procesu. Skrypty przed- i po-instalacyjne mogą wtedy użyć tych informacji do działania zgodnie z życzeniem użytkownika.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>NARZĘDZIE</em></span> <code
                          class="command">debconf</code></strong></p></div></div></div><a
                id="id-1.8.6.6.13.7.2"
                class="indexterm"></a><div
                class="para">
					<code
                  class="command">debconf</code> został stworzony, żeby rozwiązać powtarzające się problemy Debiana. Wszystkie pakiety Debiana nie są zdolne do funkcjonowania bez chociażby minimalnej konfiguracji, która zazwyczaj zadaje pytania przy użyciu komend <code
                  class="command">echo</code> oraz <code
                  class="command">read</code> w skryptach <code
                  class="filename">postinst</code> (i innych podobnych skryptach). Ale oznacza to także, że podczas większej instalacji lub aktualizacji użytkownik musi zostać przed komputerem odpowiadając na przeróżne pytania, mogące pojawić się w każdej chwili. Tych ręcznych interakcji można teraz niemal całkowicie uniknąć dzięki użyciu narzędzia <code
                  class="command">debconf</code>.
				</div><div
                class="para">
					<code
                  class="command">debconf</code> ma wiele interesujących cech: wymaga od dewelopera sprecyzowania interakcji z użytkownikiem; pozwala tłumaczyć wszystkie ciągi znaków wyświetlane użytkownikowi (wszystkie tłumaczenia są przechowywane w pliku <code
                  class="filename">templates</code> opisującym interakcje); posiada różne interfejsy do wyświetlania pytań skierowanych do użytkownika (tryb tekstowy, graficzny, bez interaktywny); oraz umożliwia stworzenie centralnej bazy danych odpowiedzi w celu dzielenia tej samej konfiguracji na różnych komputerach... ale najważniejsze jest to, że teraz możliwe jest przedstawienia użytkownikowi wszystkich pytań na raz, przed rozpoczęciem długiej instalacji lub aktualizacji. Użytkownik może zająć się swoimi sprawami, podczas gdy system sam radzi sobie z instalacją, bez konieczności wpatrywania się w ekran w oczekiwaniu na pytanie.
				</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.conffiles"></a>5.2.3. Sumy kontrolne, lista plików konfiguracyjnych</h3></div></div></div><a
            id="id-1.8.6.7.2"
            class="indexterm"></a><a
            id="id-1.8.6.7.3"
            class="indexterm"></a><a
            id="id-1.8.6.7.4"
            class="indexterm"></a><a
            id="id-1.8.6.7.5"
            class="indexterm"></a><a
            id="id-1.8.6.7.6"
            class="indexterm"></a><div
            class="para">
				In addition to the maintainer scripts and control data already mentioned in the previous sections, the <code
              class="filename">control.tar.gz</code> archive of a Debian package may contain other interesting files. The first, <code
              class="filename">md5sums</code>, contains the MD5 checksums for all of the package's files. Its main advantage is that it allows <code
              class="command">dpkg --verify</code> (which we will study in <a
              class="xref"
              href="sect.supervision.html#sect.dpkg-verify">Sekcja 14.3.3.1, „Auditing Packages with <code
                class="command">dpkg --verify</code>”</a>) to check if these files have been modified since their installation. Note that when this file doesn't exist, <code
              class="command">dpkg</code> will generate it dynamically at installation time (and store it in the dpkg database just like other control files).
			</div><div
            class="para">
				<code
              class="filename">conffiles</code> listuje pliki pakietów, które muszą być obsługiwane jako pliki konfiguracyjne. Pliki konfiguracyjne mogą być modyfikowane przez administratora, a <code
              class="command">dpkg</code> spróbuje przechować zmiany podczas aktualizacji pakietu.
			</div><div
            class="para">
				W istocie, w tej sytuacji <code
              class="command">dpkg</code> zachowuje się na tyle inteligentnie, na ile to możliwe: jeżeli standardowy plik konfiguracyjny nie został zmieniony pomiędzy dwoma wersjami, nie robi nic. Jeżeli jednak plik był modyfikowany, spróbuje go uaktualnić. Są możliwe dwa przypadki: albo administrator nie modyfikował tego pliku konfiguracyjnego, w tym przypadku <code
              class="command">dpkg</code> automatycznie instaluje nową wersję; albo plik był modyfikowany, w tym przypadku <code
              class="command">dpkg</code> pyta administratora, której wersji chciałby użyć (starą ze zmianami albo nową dostarczoną wraz z pakietem). Dla ułatwienia podjęcia tej decyzji <code
              class="command">dpkg</code> oferuje wyświetlenie “<code
              class="command">diff</code>”, który pokazuje różnice pomiędzy dwiema wersjami. Jeżeli użytkownik postanowi zachować starą wersję, nowa będzie zachowana w tej samej lokalizacji, w pliku o rozszerzeniu <code
              class="filename">.dpkg-dist</code>. Jeżeli użytkownik wybierze nową wersję, stara będzie zachowana w pliku o rozszerzeniu <code
              class="filename">.dpkg-old</code>. Inna możliwa akcja polega na chwilowym przerwaniu <code
              class="command">dpkg</code> w celu modyfikacji pliku i próby dokonania odpowiednich zmian (poprzednio zidentyfikowanych za pomocą <code
              class="command">diff</code>).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.questions-conffiles"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IDĄC DALEJ</em></span> Unikanie pytań o pliki konfiguracyjne</strong></p></div></div></div><div
              class="para">
				<code
                class="command">dpkg</code> obsługuje aktualizacje pliku konfiguracyjnego, ale w trakcie działania regularnie przerywa pracę, żeby zapytać administratora o dane wejściowe. To czyni go mniej przyjemnym dla tych, którzy chcieliby uruchomić aktualizacje w sposób bez interaktywny. Właśnie dlatego program ten oferuje opcje pozwalające systemowi na automatyczne odpowiadanie zgodnie z tą samą logiką : <code
                class="command">--force-confold</code> zatrzymuje starą wersję pliku; <code
                class="command">--force-confnew</code> użyje nowej wersji pliku (wybory te są przestrzegane, nawet jeżeli plik nie został zmieniony przez administratora, które rzadko dają pożądany efekt). Dodanie opcji <code
                class="command">--force-confdef</code> mówi <code
                class="command">dpkg</code> żeby sam decydował, kiedy jest to możliwe (inaczej mówiąc, kiedy oryginalny plik konfiguracyjny nie był modyfikowany) i użył tylko <code
                class="command">--force-confnew</code> lub <code
                class="command">--force-confold</code> w innych przypadkach.
			</div><div
              class="para">
				Opcje te stosują się do <code
                class="command">dpkg</code>, ale przez większość czasu administrator będzie pracował bezpośrednio z <code
                class="command">aptitude</code> albo <code
                class="command">apt-get</code>. Niezbędna jest zatem znajomość składni używanej do wskazania opcji przekazywanych do komendy <code
                class="command">dpkg</code> (ich interfejsy wiersza poleceń są bardzo podobne).
			</div><pre
              class="screen">
<code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" full-upgrade</code></strong></pre><div
              class="para">
				Opcje te mogą być przechowywane bezpośrednio w konfiguracji <code
                class="command">apt</code>a. Żeby to zrobić, po prostu wpisz do pliku <code
                class="filename">/etc/apt/apt.conf.d/local</code> następującą linię:
			</div><div
              class="informalexample"><pre
                class="programlisting">
DPkg::options { "--force-confdef"; "--force-confold"; }
</pre></div><div
              class="para">
				Dołączenie tej opcji w pliku konfiguracyjnym oznacza, że będzie ona także użyta w interfejsie graficznym takim jak <code
                class="command">aptitude</code>.
			</div></div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.questions-conffiles-bis"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>IDĄC DALEJ</em></span> Wymuszanie pytań o pliki konfiguracyjne w dpkg</strong></p></div></div></div><div
              class="para">
				Opcja <code
                class="command">--force-confask</code> wymaga od <code
                class="command">dpkg</code> wyświetlenia pytań dotyczących plików konfiguracyjnych, nawet w przypadkach kiedy zwykl nie były by potrzebne. Więc, kiedy ponownie instalujemy pakiet z tą opcją, <code
                class="command">dpkg</code> ponownie zapyta o wszystkie pliki konfiguracyjne zmodyfikowane przez administratora. To jest bardzo wygodne, szczególnie do przeinstalowania oryginalnego pliku konfiguracyjnego, jeżeli został on usunięty i nie jest dostępna żadna kopia: zwykłe przeinstalowanie nie zadziała, ponieważ <code
                class="command">dpkg</code> uważa każde usunięcie za prawidłową formę modyfikacji, zatem nie zainstaluje pożądanego pliku konfiguracyjnego.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="packaging-system.html"><strong>Poprzedni</strong>Rozdział 5. System pakietowania: narzędzia oraz p...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Początek rozdziału</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Spis treści</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.source-package-structure.html"><strong>Następny</strong>5.3. Struktura Pakietu Źródłowego</a></li></ul></body></html>
