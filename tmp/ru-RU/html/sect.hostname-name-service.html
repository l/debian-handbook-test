<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.3. Присваивание Имени Компьютеру (Hostname) и Настройка Службы Имен</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Конфигурация, Локализация, Локали, Сеть, Разрешение имён, Пользователи, Группы, Аккаунты, Интерпретатор командной строки, Оболочка, Печать, Загрузчик, Компиляция ядра" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Глава 8. Базовая конфигурация: Сеть, Аккаунты, Печать..." /><link
        rel="prev"
        href="sect.network-config.html"
        title="8.2. Настройка Сети" /><link
        rel="next"
        href="sect.user-group-databases.html"
        title="8.4. Базы данных пользователей и групп" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.hostname-name-service.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.hostname-name-service"></a>8.3. Присваивание Имени Компьютеру (Hostname) и Настройка Службы Имен</h2></div></div></div><a
          id="id-1.11.7.2"
          class="indexterm"></a><a
          id="id-1.11.7.3"
          class="indexterm"></a><div
          class="para">
			Смысл присваивания IP-адресам имен, состоящих из слов, в том, чтобы облегчить людям их запоминание. В действительности, IP-адрес идентифицирующий сетевой интерфейс связан с устройством, таким как сетевая карта. Поскольку каждая машина может иметь несколько сетевых карт, и несколько сетевых интерфейсов на каждой карте, такой одиночный компьютер может иметь несколько имен в доменной системы имен.
		</div><div
          class="para">
			Однако, вначале каждая машина идентифицируется по главному (или “каноническому”) имени, сохраненном в файле <code
            class="filename">/etc/hostname</code> и общается с Linux-ядром сценариями инициализации через команду <code
            class="command">hostname</code>. Настоящее значение доступно в виртуальной файловой системе, и может быть получено с командой <code
            class="command">cat /proc/sys/kernel/hostname</code>.
		</div><a
          id="id-1.11.7.6"
          class="indexterm"></a><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>К ОСНОВАМ</em></span> Виртуальные файловые системы <code
                      class="filename">/proc/</code> и <code
                      class="filename">/sys/</code></strong></p></div></div></div><a
            id="id-1.11.7.7.2"
            class="indexterm"></a><a
            id="id-1.11.7.7.3"
            class="indexterm"></a><a
            id="id-1.11.7.7.4"
            class="indexterm"></a><a
            id="id-1.11.7.7.5"
            class="indexterm"></a><div
            class="para">
			Файлы, расположенные в древовидных каталогах <code
              class="filename">/proc/</code> и <code
              class="filename">/sys/</code>, образуют так называемую “виртуальную” файловую систему. Их практическое значение состоит в том, чтобы восстанавливать (считывать) информацию от ядра (помещенную тем в виртуальные файлы) и общаться с ним таким образом (записывая информацию в виртуальные файлы - для передачи ядру).
		</div><div
            class="para">
			Например файлы, расположенные в каталоге <code
              class="filename">/sys/</code>, предназначены для обеспечения доступа к внутренним объектам в ядре, особенно к тем, которые представляют различные устройства в системе. Ядро таким образом может делиться различного рода информацией: сообщать например статус каждого устройства (к примеру, находится ли оно в режиме энергосбережения), является ли это устройство съемным и т.д. Обратите внимание, что каталог с файлами <code
              class="filename">/sys/</code> появился с моменты выхода в свет версии ядра 2.6.
		</div></div><div
          class="para">
			Удивительным является то, что доменное имя не управляется подобным образом, а приходит в ядро извне от полного имени машины, которое той присвоено через систему разрешения имен. Вы можете изменить имя машины в файле <code
            class="filename">/etc/hosts</code>; просто запишите полное имя для машины там вначале перечня имен, связав его с адресом машины, как в следующем примере:
		</div><div
          class="informalexample"><pre
            class="programlisting">
127.0.0.1     localhost
192.168.0.1    arrakis.falcot.com arrakis</pre></div><a
          id="id-1.11.7.10"
          class="indexterm"></a><a
          id="id-1.11.7.11"
          class="indexterm"></a><a
          id="id-1.11.7.12"
          class="indexterm"></a><a
          id="id-1.11.7.13"
          class="indexterm"></a><a
          id="id-1.11.7.14"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.name-resolution"></a>8.3.1. Разрешение Имен</h3></div></div></div><a
            id="id-1.11.7.15.2"
            class="indexterm"></a><a
            id="id-1.11.7.15.3"
            class="indexterm"></a><div
            class="para">
				Механизм разрешения имен в Linux модульный и может использовать различные источники информации, объявленные в файле <code
              class="filename">/etc/nsswitch.conf</code>. Запись <code
              class="literal">hosts</code> включает в себя порядок разрешения имен. По умолчанию эта запись содержит <code
              class="literal">files dns</code>, а это значит, что система вначале консультируется с файлом <code
              class="filename">/etc/hosts</code>, затем с указанными в нем DNS серверами. NIS/NIS+ или LDAP серверы являются другими возможными источниками.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ЗАМЕТКА</em></span> NSS и DNS</strong></p></div></div></div><div
              class="para">
				Имейти в виду, что команды, специально предназначенные для DNS-запросов (особенно <code
                class="command">host</code>) не используют стандартный механизм разрешения имен (NSS). Как следствие, они не принимают во внимание <code
                class="filename">/etc/nsswitch.conf</code>, и следовательно, не учитывают и <code
                class="filename">/etc/hosts</code> также.
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.dns-server-configuration"></a>8.3.1.1. Настройка DNS-серверов</h4></div></div></div><a
              id="id-1.11.7.15.6.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.3"
              class="indexterm"></a><div
              class="para">
					DNS (Служба доменных имен) является распределенной и иерархической службой, переводящей имена машин в IP-адреса (десятичные), и наоборот. В частности, она может превратить хорошо понятное людям имя, такое как <code
                class="literal">www.eyrolles.com</code> в реальный IP адрес, <code
                class="literal">213.244.11.247</code>.
				</div><div
              class="para">
					Для доступа к информации, размещенной на DNS сервере, сам сервер должен быть доступен для того, чтобы передавать запросы дальше (ретранслировать). У Falcot Corp имеется свой DNS сервер, но индивидуальным пользователям более подойдет вариант использовать DNS сервер, предоставляемый их ISP (интернет-провайдером).
				</div><a
              id="id-1.11.7.15.6.6"
              class="indexterm"></a><a
              id="id-1.11.7.15.6.7"
              class="indexterm"></a><div
              class="para">
					DNS серверы, которые будут использоваться, указываются в файле <code
                class="filename">/etc/resolv.conf</code>, по одному в строке, где вначале строки идет слово <code
                class="literal">nameserver</code>, а далее указан десятичный IP адрес (это при варианте статичного адреса IP вашей машины, при использовании DHCP здесь будет другая запись), так как показано в следуюшем примере:
				</div><pre
              class="programlisting">
nameserver 212.27.32.176
nameserver 212.27.32.177
nameserver 8.8.8.8
</pre><div
              class="para">
					Обратите внимание, что файл <code
                class="filename">/etc/resolv.conf</code> может быть обработан автоматически (и перезаписан) когда сетью или вашим одиноким компьютером управляет Диспетчер связи (NetworkManager) или этот файл сконфигурирован службой DHCP (или ваш модем может включать в себя такую возможность, как организация DNS сервера, следовательно такие настройки вы сделаете внутри него).
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.etc-hosts"></a>8.3.1.2. Файл <code
                      class="filename">/etc/hosts</code></h4></div></div></div><a
              id="id-1.11.7.15.7.2"
              class="indexterm"></a><a
              id="id-1.11.7.15.7.3"
              class="indexterm"></a><div
              class="para">
					Если в локальной сети нет сервера имен, то можно создать небольшую таблицу соответствия IP адресов и имен узлов машин в файле <code
                class="filename">/etc/hosts</code>, который обычно зерезервирован для локальной сети станций (статичная адресация). Синтаксис этого файла очень простой: каждая линия включает определенный IP адрес, а далее перечисляются любые связанные с ним имена, (первым идет настоящее доменное имя вашего компьютера, так называемое “полностью квалифицированное” имя, например "192.168.200.6 example.debian.org example").
				</div><div
              class="para">
					Этот файл доступен даже во время отключения от сети (интернета) или когда DNS серверы недоступны. Для того, чтобы в данных случаях все нормально работало необходимо, чтобы копия этого файла была расположена на каждой машине в вашей сети. Как только внесли изменения в этот файл на одной из машин, тут же необходимо скопировать его на все машины вашей сети. Это объясняет, почему файл <code
                class="filename">/etc/hosts</code> обычно содержит только самые важные записи (не перегружен другой информацией).
				</div><div
              class="para">
					Такой файл будет достаточен для маленькой сети, не подсоединенной к Интернету, но с 5-ью машинами и более, рекомендуется установить правильно настроенный DNS сервер.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>СОВЕТ</em></span> В обход DNS</strong></p></div></div></div><div
                class="para">
					Поскольку приложения, перед тем, как сделать запрос DNS, проверяют файл <code
                  class="filename">/etc/hosts</code>, становится возможным включить в данный файл информацию о том, что есть отличия, каким образом DNS запрос будет возвращаться, и поэтому необходимо обойти нормальную DNS-базирующуюся службу разрешения имен.
				</div><div
                class="para">
					Это может пригодиться в следующей ситуации: предположим, в установленной системе адрес вэб-сайта некорректно сопоставлен с правильным IP-адресом. При проведении тестирования вэб-сайта это выяснилось. Внесены изменения в DNS записи, но еще до вступления их в силу, уже можно повторно тестировать вэб-сайт (осуществляя DNS запросы "в обход" действующей в настоящей момент службы разрешения имен).
				</div><div
                class="para">
					Другое возможное применение - это перенаправление трафика, предназначенного в специфический узел на локальном узле, таким образом предотвращая любое сообщение с данным узлом. Для примера - можно изменить направление трафика таким образом, чтобы они обходили узлы, обслуживающие объявления. Это приведет к большей гибкости, меньшему отвлечению внимания, лучшей навигации.
				</div></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.network-config.html"><strong>Пред.</strong>8.2. Настройка Сети</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.user-group-databases.html"><strong>След.</strong>8.4. Базы данных пользователей и групп</a></li></ul></body></html>
