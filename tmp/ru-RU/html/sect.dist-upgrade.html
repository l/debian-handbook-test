<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.6. Обновление Одного Стабильного Дистибутива в Следующий</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="apt.html"
        title="Глава 6. Обслуживание и обновление: инструменты APT" /><link
        rel="prev"
        href="sect.package-authentication.html"
        title="6.5. Проверка подлинности пакета" /><link
        rel="next"
        href="sect.regular-upgrades.html"
        title="6.7. Содержание системы с периодическими обновлениями" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.dist-upgrade.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.dist-upgrade"></a>6.6. Обновление Одного Стабильного Дистибутива в Следующий</h2></div></div></div><div
          class="para">
			Одна из самых известных особенностей Debian - это возможность обновлять установленную систему из одного стабильного выпуска в следующий: <span
            class="foreignphrase"><em
              class="foreignphrase">dist-upgrade</em></span>. Во многом благодаря этой, хорошо известной команде, очень сильно повысилась репутация всего проекта. С небольшой предосторожностью, обновление компьютера может продолжаться по времени - как всего несколько минут, так и несколько десятков минут. Это зависит от скорости загрузки (вашего провайдера) из хранилищ с пакетами.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.15.3"></a>6.6.1. Рекомендованный порядок действий</h3></div></div></div><div
            class="para">
				Как только Debian перестанет работать некоторое время над текущей стабильной версией, ты получишь предупреждение об этом и о необходимости выполнить обновление вашего дистибутива на следующую стабильную версию.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>К ОСНОВАМ</em></span> Заметки о выпуске</strong></p></div></div></div><div
              class="para">
				Заметки о выпуске новой версии операционной системы (а в более общем случае - для любого программного обеспечения) - это документ, дающий обзор программных продуктов, с некоторыми подробностями касательно особенностей этих версий. Эте документы как правило короче, в сравнении с полным комплектом документации. В них обычно перечислены возможности, которые вводятся в сравнении с предыдущей версией. Они также сообщают детали о процедурах обновления, предупреждения для пользователей предыдущих версий, и иногда опечатки.
			</div><div
              class="para">
				Release notes are available online: the release notes for the current stable release have a dedicated URL, while older release notes can be found with their codenames: <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.debian.org/releases/stable/releasenotes">http://www.debian.org/releases/stable/releasenotes</a></div> <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://www.debian.org/releases/jessie/releasenotes">http://www.debian.org/releases/jessie/releasenotes</a></div>
			</div></div><div
            class="para">
				In this section, we will focus on upgrading a <span
              class="distribution distribution">Jessie</span> system to <span
              class="distribution distribution">Stretch</span>. This is a major operation on a system; as such, it is never 100% risk-free, and should not be attempted before all important data has been backed up.
			</div><div
            class="para">
				Другая хорошая привычка, которая сделает обновление быстрее (и короче), - это привести в порядок ваши установленные пакеты и хранить только те из них, что действительно необходимы вам. Полезные инструменты, делающие это, имеются в программах <code
              class="command">aptitude</code>, <code
              class="command">deborphan</code> и <code
              class="command">debfoster</code> (смотри <a
              class="xref"
              href="sect.apt-get.html#sect.automatic-tracking">Раздел 6.2.7, «Трассирование автоматически устнавливаемых пакетов (наблюдение)»</a>). Для примера, ты можешь использовать следующую команду, и следом использовать еще одну команду <code
              class="command">aptitude</code> в интерактивном режиме для двойной проверки и тонкой настройки намеченных удалений (команды вводится одной строкой и они будут выполнены поочередно - слева-направо):
			</div><pre
            class="screen"># <strong
              class="userinput"><code>deborphan | xargs aptitude --schedule-only remove</code></strong></pre><div
            class="para">
				Now for the upgrading itself. First, you need to change the <code
              class="filename">/etc/apt/sources.list</code> file to tell APT to get its packages from <span
              class="distribution distribution">Stretch</span> instead of <span
              class="distribution distribution">Jessie</span>. If the file only contains references to <span
              class="distribution distribution">Stable</span> rather than explicit codenames, the change isn't even required, since <span
              class="distribution distribution">Stable</span> always refers to the latest released version of Debian. In both cases, the database of available packages must be refreshed (with the <code
              class="command">apt update</code> command or the refresh button in <code
              class="command">synaptic</code>).
			</div><div
            class="para">
				Как только эти новые исходные пакеты будут зарегистрированы, вам вначале надо сделать небольшое обновление с <code
              class="command">apt upgrade</code>. Делая обновление в два шага, мы облегчаем работу, используя инструменты для управления пакетами. Эти инструменты много раз обеспечивали нас последними версиями тем программ, которые могут накопить исправления и улучшения, необходимые для обеспечения полного обновления дистрибутива (то есть делают пред-подготовку перед серьезным шагом).
			</div><div
            class="para">
				Once this first upgrade is done, it is time to handle the upgrade itself, either with <code
              class="command">apt full-upgrade</code>, <code
              class="command">aptitude</code>, or <code
              class="command">synaptic</code>. You should carefully check the suggested actions before applying them: you might want to add suggested packages or deselect packages which are only recommended and known not to be useful. In any case, the front-end should come up with a scenario ending in a coherent and up-to-date <span
              class="distribution distribution">Stretch</span> system. Then, all you need is to do is wait while the required packages are downloaded, answer the Debconf questions and possibly those about locally modified configuration files, and sit back while APT does its magic.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.15.4"></a>6.6.2. Решение проблем после обновления</h3></div></div></div><div
            class="para">
				Несмотря на на все усилия сопровождающих Debian, не всегда большие системные обновление проходят так гладко как вы можете пожелать. Новые версии программных продуктов могут быть несовместимы с предыдущими такими же программами (для примера, может измениться: их поведение по умолчанию или формат данных). Кроме того, некоторые ошибки могут проскользнуть сквозь имеющиеся недоработки в программах (через "дыры", о которых еще не известно разработчикам) несмотря на то, что уже была стадия тестирования, которая всегда предшествует выпуску Debian.
			</div><div
            class="para">
				Предвосхищая некоторые из возможных проблем, вы можете установить пакет <span
              class="pkg pkg">apt-listchanges</span>, который отобразит информацию о возможных проблемах в самом начале обновления пакетов. Эта информация компилируется (собирается) сопровождающими пакетов и помещается в файлы <code
              class="filename">/usr/share/doc/<em
                class="replaceable">package</em>/NEWS.Debian</code> для того, чтобы помочь пользователям в процессе обновления. Чтение этих файлов (возможно сквозь <span
              class="pkg pkg">apt-listchanges</span>) поможет вам избежать неприятных сюрпризов.
			</div><div
            class="para">
				Иногда вы можете столкнуться с ситуацией, что новые версии программных продуктов не работает совсем. Обычно это случается если программа не особо популярна и не была достаточно протестирована. Последние минуты обновления могут также показать возможность возвращения в прежнее состояние (отката), которое было сделано после обновления только стабильной версии. В обоих случаях первое, что надо сделать - посмотреть в системе отслеживания ошибок по адресу <code
              class="literal">https://bugs.debian.org/<em
                class="replaceable">package</em></code>, и проверить нет ли там зарегистрированных аналогичных проблем. Если нет, то было бы крайне желательно, чтобы вы послали сообщение об ошибке сами с <code
              class="command">reportbug</code>. Если эта проблема уже известна, то рапорт об ошибке и другая информация по данному вопросу (вывод на консоле) является отличными исходными данными полезной информации, касаемой этой темы (это поможет разработчикам быстрее устранить эту ошибку):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						иногда заплата уже существует, и она доступна в системе отслеживания ошибок; кроме того вы можете перекомпилировать (пересобрать) исправленную версию оборванного пакета локально (смотри <a
                    class="xref"
                    href="debian-packaging.html#sect.rebuilding-package">Раздел 15.1, «Пересборка пакета из его исходного кода»</a>);
					</div></li><li
                class="listitem"><div
                  class="para">
						в других случаях, пользователи возможно уже нашли обходной путь решения данной проблемы и поделились этими знаниями между собой в их сообщениях к этой ошибке;
					</div></li><li
                class="listitem"><div
                  class="para">
						Кроме того в других случаях, пакет с исправленной ошибкой может быть уже приготовлен и имеется об этом публикация от сопровождающих.
					</div></li></ul></div><div
            class="para">
				В зависимости от серьезности ошибок, обновленная версия пакета может быть подготовлена сопровождающими в специальной версии для выпуска именно к моменту пересмотра нового стабильного дистибутива. Когда такое случается, исправленный пакет доступен в разделе <code
              class="literal">proposed-updates</code> на зеркалах Debian (смотри <a
              class="xref"
              href="apt.html#sect.proposed-updates">Раздел 6.1.2.3, «Предполагаемые обновления»</a>). В данном случае надо временно добавить соответствующую запись в файл <code
              class="filename">sources.list</code>, и обновление пакетов тогда сможет установить такой пакет с <code
              class="command">apt</code> или <code
              class="command">aptitude</code>.
			</div><div
            class="para">
				Иногда исправленный пакет еще не доступен в этом разделе, потому что ожидает подтверждения от Управляющих Стабильным Выпуском. Вы можете проверить это на их вэб-странице в интернет. Пакеты, перечисленные там, не размещены еще на доступных зеркалах, но по крайней мере вы знаете что сейчас происходит процесс его рассмотрения к публикации. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="https://release.debian.org/proposed-updates/stable.html">https://release.debian.org/proposed-updates/stable.html</a></div>
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.package-authentication.html"><strong>Пред.</strong>6.5. Проверка подлинности пакета</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.regular-upgrades.html"><strong>След.</strong>6.7. Содержание системы с периодическими обновлен...</a></li></ul></body></html>
