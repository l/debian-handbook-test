<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.8. Автоматическое Обновление</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-ru-RU-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="apt.html"
        title="Глава 6. Обслуживание и обновление: инструменты APT" /><link
        rel="prev"
        href="sect.regular-upgrades.html"
        title="6.7. Содержание системы с периодическими обновлениями" /><link
        rel="next"
        href="sect.searching-packages.html"
        title="6.9. Поиск пакетов" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.automatic-upgrades.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automatic-upgrades"></a>6.8. Автоматическое Обновление</h2></div></div></div><a
          id="id-1.9.17.2"
          class="indexterm"></a><a
          id="id-1.9.17.3"
          class="indexterm"></a><div
          class="para">
			Поскольку Falcot Corp имеет много компьютеров, но ограничена в численности сотрудников, его администраторы пытаются как можно больше автоматизировать процесс обновления. Поэтому программы, которым поручили выполнение этих процессов, должны выполняться без вмешательства человека.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.5"></a>6.8.1. Конфигурирование <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				Как мы уже упоминали (смотри вкладку <a
              class="xref"
              href="sect.package-meta-information.html#sidebar.questions-conffiles"><span
                class="emphasis"><em>УГЛУБЛЯЕМСЯ</em></span> Как избежать вопросов по поводу конфигурационных файлов</a>), программе <code
              class="command">dpkg</code> может быть поручено не спрашивать подтверждения при перезаписи конфигурационного файла (с опцией <code
              class="literal">--force-confdef --force-confold</code>). Однако, интерактивно можно выбрать три других варианта: некоторые приходят от самого APT, другие передаются через <code
              class="command">debconf</code>, и иногда случается работа с командной строкой скриптов конфигурации пакета.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.6"></a>6.8.2. Настройка APT (конфигурирование)</h3></div></div></div><div
            class="para">
				В случае применения APT - это просто: опция <code
              class="literal">-y</code> (или <code
              class="literal">--assume-yes</code>) скажет APT-у, что надо принимать во внимание - на все вопросы ответ пользователя будет “да”.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.7"></a>6.8.3. Настройка <code
                    class="command">debconf</code></h3></div></div></div><div
            class="para">
				При применении <code
              class="command">debconf</code> - эта программа заслуживает больше подробностей. С самого начала эта программа была создана контролировать уместные в данной ситуации вопросы а также их объем, отображаемые пользователю, а также то, как они показаны. Поэтому ее конфигурация нуждается в минимальном уровне приоритета для вопросов; только вопросы свыше минимального уровня приоритета она отобразит. <code
              class="command">debconf</code> допускает ответы по умолчанию для вопросов (определенные сопровождающими пакетов), которые она пропустит.
			</div><div
            class="para">
				Другой, уместный для ознакомления, элемент конфигурации - интерфейс использования программы через оболочку. Если вы измените на вариант <code
              class="literal">noninteractive</code>, то интерактивность с пользователем будет отключена. Если пакет будет пытаться отобразить какие-то информационные сообщение - они будут высылаться на email администратору.
			</div><div
            class="para">
				Для переконфигурирования <code
              class="command">debconf</code>, используйте программу <code
              class="command">dpkg-reconfigure</code> из пакета <span
              class="pkg pkg">debconf</span>; соответствующая команда - <code
              class="command">dpkg-reconfigure debconf</code>. Запомните, что сконфигурированные переменные могут быть временно переопределены другими переменными среды окружения, когда понадобится (для примера, переменная <code
              class="varname">DEBIAN_FRONTEND</code> управляет оболочкой интерфейса, как описано в странице руководства <span
              class="citerefentry"><span
                class="refentrytitle">debconf</span>(7)</span> ).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.8"></a>6.8.4. Управление Взаимодействием Через Командную Строку</h3></div></div></div><div
            class="para">
				Последний ключ взаимодействия, а такой случай нельзя исключить, это запуск конфигурационных скриптов через программу <code
              class="command">dpkg</code>. К сожалению в этом случае нет стандартных решений, и нет ответов в подавляющем большинстве случаев какие ответы лучше, чем другие (то есть в данном случае трудно дать совет - здесь все индивидуально, надо быть очень внимательными).
			</div><div
            class="para">
				The common approach is to suppress the standard input by redirecting the empty content of <code
              class="filename">/dev/null</code> into it with <code
              class="command"><em
                class="replaceable">command</em> &lt;/dev/null</code>, or to feed it with an endless stream of newlines. None of these methods is 100 % reliable, but they generally lead to the default answers being used, since most scripts consider a lack of reply as an acceptance of the default value.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.9"></a>6.8.5. The Miracle Combination</h3></div></div></div><div
            class="para">
				Комбинируя предыдущие элементы, можно создать небольшой, но довольно надежный скрипт, который сможет автоматически обрабатывать обновление.
			</div><div
            class="example"><a
              xmlns=""
              id="example.non-interactive-upgrade"></a><p
              class="title"><strong>Пример 6.4. Не-интерактивный скрипт обновления</strong></p><div
              class="example-contents"><pre
                class="programlisting">export DEBIAN_FRONTEND=noninteractive
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade
</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>НА ПРАКТИКЕ</em></span> В качестве примера с компанией Falcot Corp</strong></p></div></div></div><div
              class="para">
				Falcot компьютеры организованы в гетерогенную систему, с машинами, имеющими различные функции. Поэтому администраторы будут подбирать наиболее соответствующие решения для каждого компьютера.
			</div><div
              class="para">
				На практике, сервера, на которых работает <span
                class="distribution distribution">Jessie</span> сконфигурированы с упомянутой выше “Удивительно хорошей Комбинаций”, которая сохраняет (выполняет) обновления автоматически. Только большинство критических серверов (файрволл, для примера) делают это с <code
                class="command">apticron</code>, таким образом это всегда происходит под наблюдением администратора.
			</div><div
              class="para">
				The office workstations in the administrative services also run <span
                class="distribution distribution">Jessie</span>, but they are equipped with <span
                class="pkg pkg">gnome-packagekit</span>, so that users trigger the upgrades themselves. The rationale for this decision is that if upgrades happen without an explicit action, the behavior of the computer might change unexpectedly, which could cause confusion for the main users.
			</div><div
              class="para">
				In the lab, the few computers using <span
                class="distribution distribution">Testing</span> — to take advantage of the latest software versions — are not upgraded automatically either. Administrators only configure APT to prepare the upgrades but not enact them; when they decide to upgrade (manually), the tedious parts of refreshing package lists and downloading packages will be avoided, and administrators can focus on the really useful part.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Пред.</strong>6.7. Содержание системы с периодическими обновлен...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>След.</strong>6.9. Поиск пакетов</a></li></ul></body></html>
