<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.5. IPv6</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="Сеть, Шлюз, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="network-infrastructure.html"
        title="Глава 10. Сетевая инфраструктура" /><link
        rel="prev"
        href="sect.dynamic-routing.html"
        title="10.4. Динамическая Маршрутизация" /><link
        rel="next"
        href="sect.domain-name-servers.html"
        title="10.6. Система Доменных Имен Серверов (DNS)" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/ru-RU/stable/sect.ipv6.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.dynamic-routing.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.domain-name-servers.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.ipv6"></a>10.5. IPv6</h2></div></div></div><div
          class="para">
			IPv6, преéмник IPv4, является новой версией IP протокола, предназначенный для исправления его недостатков, в первую очередь устранить нехватку доступных IP адресов. Это протокол работает на сетевом уровне; его целью является поддержать способы адресации машин, транспортировка данных к месту их назначения, и для обработки данных фрагментации при необходимости (другими словами, разрезать пакеты на дольки размерами, зависящими от сетевого соединения, используемого на пути, и воссоздать пакет из долек, собрав их в правильном порядке, сразу по прибытии в месте его назначения).
		</div><div
          class="para">
			В ядра Debian включена обработка IPv6 внутри самого ядра (за исключением нескольких архитектур устройств, в которых скомпилирован модуль, называемый <code
            class="literal">ipv6</code>). Основные инструменты, такие как <code
            class="command">ping</code> и <code
            class="command">traceroute</code>, имеют их IPv6 эквивалентов, называемых <code
            class="command">ping6</code> и <code
            class="command">traceroute6</code>, которые доступны в пакетах с соответствующими именами <span
            class="pkg pkg">iputils-ping</span> и <span
            class="pkg pkg">iputils-tracepath</span>.
		</div><a
          id="id-1.13.8.4"
          class="indexterm"></a><a
          id="id-1.13.8.5"
          class="indexterm"></a><a
          id="id-1.13.8.6"
          class="indexterm"></a><div
          class="para">
			Сеть IPv6 настраивается аналогично тому, как это делается в IPv4, в файле <code
            class="filename">/etc/network/interfaces</code>. Но если вы хотите, чтобы сеть была доступна глобально, вы должны убедиться, что имеете IPv6-совместимый маршрутизатор, перенаправляющий трафик в глобальную IPv6 сеть.
		</div><div
          class="example"><a
            xmlns=""
            id="example.network-interfaces-ipv6"></a><p
            class="title"><strong>Пример 10.10. Пример настройки IPv6</strong></p><div
            class="example-contents"><pre
              class="programlisting">
iface eth0 inet6 static
    address 2001:db8:1234:5::1:1
    netmask 64
    # Отключить автоконфигурирование
    # autoconf 0
    # Маршрутизатор автоконфигурирован и не имеет статичных адресов
    # (accept_ra 1). If it had:
    # gateway 2001:db8:1234:5::1</pre></div></div><div
          class="para">
			Подсети IPv6 обычно имеют сетевую маску в 64 бита. Из этого следует, что внутри подсетей может существовать до 2<sup>64</sup> различных адресов. Это позволяет делать автонастройку выдачи адресов для машин в подсетях на основе MAC-адреса сетевого интерфейса ("Stateless Address Autoconfiguration" или коротко <acronym
            class="acronym">SLAAC</acronym>). По умолчанию, если <acronym
            class="acronym">SLAAC</acronym> активирован в вашей сети и IPv6 есть на вашем компьютере, то ядро автоматически найдёт IPv6 маршрутизаторы и настроит сетевые интерфейсы.
		</div><div
          class="para">
			Такое стандартное поведение автоназначения IPv6 адресов может иметь (нежелательные) последствия для вашей личной жизни. Если вы часто переключаетесь между разными сетями, например с ноутбуком (смартфоном, планшетом и так далее), возможно вы не захотите, чтобы ваш <acronym
            class="acronym">MAC</acronym> адрес становился частью публичного IPv6 адреса. Поскольку становится возможным быстро определить личность клиента с одним и тем же устройством в различных сетях (то есть выполнить идентификацию личности в мировом масштабе, с привязкой её к определённому электронному устройству). Для решения данного вопроса были созданы дополнительные расширения IPv6, разработанные специально для повышения секретности (которые Debian включает по умолчанию если IPv6 соединение было обнаружено в процессе первоначальной установки системы). Эти расширения будут назначать существующим физическим сетевым интерфейсам другие номера адресов, сгенерированные случайным образом, периодически изменяя их в дальнейшем, а также предпочитать их для исходящих соединений. Входящие соединения могут использовать адреса только лишь сгенерированные по правилам SLAAC. В следующем примере, показана активизация секретных расширений в файле <code
            class="filename">/etc/network/interfaces</code>.
		</div><div
          class="example"><a
            xmlns=""
            id="example.network-interface-ipv6-privext"></a><p
            class="title"><strong>Пример 10.11. Расширения секретности IPv6</strong></p><div
            class="example-contents"><pre
              class="programlisting">
iface eth0 inet6 auto
    # Предпочитать случайным образом назначенные адреса для исходящих соединений.
    privext 2</pre></div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>СОВЕТ</em></span> Программы, поддерживающие IPv6</strong></p></div></div></div><div
            class="para">
			Многие части программного обеспечения нуждаются в доработке для того, чтобы они имели возможность обрабатывать IPv6. Большинство пакетов в Debian уже адаптированы для этого, но не все. Если ваш любимый пакет ещё не работает с IPv6, вы можете попросить помощи в списке рассылок <span
              class="emphasis"><em>debian-ipv6</em></span> по e-mail. Общающиеся там люди могут знать о готовящейся IPv6 замене по нужному вам пакету или дать вам совет как отправить файл с ошибкой, а в дальнейшем отслеживать изменения по этому bug-у. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://lists.debian.org/debian-ipv6/">http://lists.debian.org/debian-ipv6/</a></div>
		</div></div><a
          id="id-1.13.8.13"
          class="indexterm"></a><a
          id="id-1.13.8.14"
          class="indexterm"></a><a
          id="id-1.13.8.15"
          class="indexterm"></a><div
          class="para">
			Соединения по IPv6 могут быть ограниченны подобно тому, как это делается в IPv4: стандартные ядра Debian включают адаптированный <span
            class="emphasis"><em>netfilter</em></span> для IPv6. Такое ограниченное IPv6 соединение в <span
            class="emphasis"><em>netfilter</em></span> настраивается аналогично его двойника IPv4, за исключением программ, использующих в своей работе <code
            class="command">ip6tables</code>, а не команду <code
            class="command">iptables</code>.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ipv6-tunneling"></a>10.5.1. Туннелирование</h3></div></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ПРЕДОСТЕРЕЖЕНИЕ</em></span> Туннелирование IPv6 и брандмауэры</strong></p></div></div></div><div
              class="para">
				При туннелировании IPv6 поверх IPv4 (в отличие от родной IPv6) необходимо, чтобы брандмауэр принимающий трафик использовал протокол IPv4 номер 41.
			</div></div><div
            class="para">
				Если родное IPv6 соединение недоступно, метод "fallback" использует туннель поверх IPv4. Одним из (свободных) провайдеров, поддерживающий туннель такого типа является Gogo6: <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://www.gogo6.com/freenet6/tunnelbroker">http://www.gogo6.com/freenet6/tunnelbroker</a></div>
			</div><a
            id="id-1.13.8.17.4"
            class="indexterm"></a><a
            id="id-1.13.8.17.5"
            class="indexterm"></a><div
            class="para">
				Для использования туннеля Freenet6 Pro, вам необходимо зарегистрироваться и получить учётную запись (аккаунт) на их вэбсайте, далее установить пакет <span
              class="pkg pkg">gogoc</span> и настроить туннель. Для этого необходимо отредактировать файл <code
              class="filename">/etc/gogoc/gogoc.conf</code>: в строки <code
              class="literal">userid</code> и <code
              class="literal">password</code> надо добавить данные, полученные по e-mail, а <code
              class="literal">server</code> надо изменить на <code
              class="literal">authenticated.freenet6.net</code>.
			</div><div
            class="para">
				IPv6 соединение предлагается для всех машин локальной сети путём добавления трёх пунктов в файл <code
              class="filename">/etc/gogoc/gogoc.conf</code> (в данном примере предполагается, что локальная сеть имеет соединение через интерфейс eth0):
			</div><pre
            class="programlisting">
host_type=router
prefixlen=56
if_prefix=eth0
</pre><div
            class="para">
				Далее эта машина становится маршрутизатором доступа для подсети с 56-битным префиксом. Один туннель осведомлён об этих изменениях, а локальной сети необходимо рассказать об этом; что означает установку демона <code
              class="command">radvd</code> (из пакета с похожим именем). Этот демон настройки IPv6 выполняет роль аналогичную той роли, что <code
              class="command">dhcpd</code> делает в мире IPv4.
			</div><div
            class="para">
				Файл настройки <code
              class="filename">/etc/radvd.conf</code> необходимо вначале создать (смотри <code
              class="filename">/usr/share/doc/radvd/examples/simple-radvd.conf</code> в качестве отправной точки для ознакомления). В нашем случае, необходимо изменить только префикс, который надо заменить на тот, что предоставляет Freenet6; его можно найти запустив команду <code
              class="command">ifconfig</code> в терминале, в блоке, относящемся к интерфейсу <code
              class="literal">tun</code>.
			</div><a
            id="id-1.13.8.17.11"
            class="indexterm"></a><div
            class="para">
				Затем запустите <code
              class="command">service gogoc restart</code> и <code
              class="command">service radvd start</code>, и после этого IPv6 сеть будет работать.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.dynamic-routing.html"><strong>Пред.</strong>10.4. Динамическая Маршрутизация</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.domain-name-servers.html"><strong>След.</strong>10.6. Система Доменных Имен Серверов (DNS)</a></li></ul></body></html>
