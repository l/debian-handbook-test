<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">12.3. Automatisert installasjon</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="RAID, LVM, FAI, Å komme foran, Overvåking, Visualisering, Xen, LXC" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="advanced-administration.html"
        title="Kapittel 12. Avansert administrasjon" /><link
        rel="prev"
        href="sect.virtualization.html"
        title="12.2. Visualisering" /><link
        rel="next"
        href="sect.monitoring.html"
        title="12.4. Overvåking" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.automated-installation.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtualization.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.monitoring.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automated-installation"></a>12.3. Automatisert installasjon</h2></div></div></div><a
          id="id-1.15.6.2"
          class="indexterm"></a><a
          id="id-1.15.6.3"
          class="indexterm"></a><div
          class="para">
			Falcot Corps administratorer, som mange administratorer av store IT-tjenester, trenger verktøy for å installere sine nye maskiner (eller installere på nytt) raskt, og automatisk hvis mulig.
		</div><div
          class="para">
			Disse kravene kan bli møtt av et bredt spekter av løsninger. På den ene siden, generiske verktøy som SystemImager håndtere dette ved å skape et bilde med en maskin som mal, deretter distribuere bildet dit det skal hos systemene. I den andre enden av spekteret, kan standard Debian installeren bli innledet med en konfigurasjonsfil som gir svarene på spørsmålene under installasjonsprosessen. Som en slags middelvei, installerer et hybridverktøy, som FAI (<span
            class="emphasis"><em>Fully Automatic Installer</em></span>) maskiner ved hjelp av pakkesystemet, men det bruker også sin egen infrastruktur for oppgaver som er mer spesifikke for massive distribusjoner (som å starte, partisjonering, konfigurasjon og så videre).
		</div><div
          class="para">
			Hver av disse løsningene har sine fordeler og ulemper: SystemImager fungerer uavhengig av et bestemt pakkesystem, som gjør det mulig å håndtere store sett med maskiner ved hjelp av flere forskjellige Linux-distribusjoner. Det inkluderer også et oppdateringsystem som ikke krever en reinstallasjon, men denne oppdateringen kan systemet bare være pålitelig hvis maskinene ikke endres her for seg; Med andre ord, må brukeren ikke oppdatere programvare på egen hånd, eller installere noen annen programvare. Tilsvarende sikkerhetsoppdateringer må ikke være automatisert, fordi de må gå gjennom det sentraliserte referansebildet som vedlikeholdes av SystemImager. Denne løsningen krever også at maskinene det gjelder er homogene, ellers må mange forskjellige bilder må tas vare på og håndteres (en i386 bilde vil ikke passe på en PowerPC maskin, og så videre).
		</div><div
          class="para">
			På den annen side, kan en automatisert installasjon som bruker Debian-installereren tilpasse seg de nærmere spesifikasjoner for hver maskin: Installereren vil hente den riktige kjernen og programvarepakker fra de aktuelle pakkebrønnene, oppdage tilgjengelig maskinvare, partisjonere hele harddisken for å dra nytte av all tilgjengelig plass, installere det tilsvarende Debian-systemet, og sette opp en passende oppstartslaster. Imidlertid vil standard-installereren bare installere standard Debian-versjoner, med basesystem og et sett forhåndsvalgte "oppgaver"; Dette utelukker å installere et bestemt system med ikke-pakkede applikasjoner. Å oppfylle dette behovet krever tilpassing av installereren ... Heldigvis er installatøren veldig modulær, og det er verktøy for å automatisere det meste av arbeidet som kreves for denne tilpasningen, viktigst er enkel-CDD (CDD er en forkortelse av <span
            class="emphasis"><em>Custom Debian Derivative</em></span>). Selv den enkle-CDD løsningen håndterer imidlertid bare innledende installasjoner; Dette er vanligvis ikke et problem siden APT-verktøyene gir effektiv utrulling av oppdateringer senere.
		</div><div
          class="para">
			Vi vil bare gi en grov oversikt over FAI, og helt hoppe over SystemImager (som ikke lenger er i Debian), for å fokusere sterkere på Debian-installereren og simple-CDD, som er mer interessant i en bare Debian sammenheng.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.fai"></a>12.3.1. Fully Automatic Installer (FAI)</h3></div></div></div><a
            id="id-1.15.6.9.2"
            class="indexterm"></a><div
            class="para">
				<span
              class="foreignphrase"><em
                class="foreignphrase">Fully Automatic Installer</em></span> er trolig det eldste automatisert utrullingssystemet for Debian, noe som forklarer dets status som en referanse, men den svært fleksible naturen kompenserer bare akkurat for den kompleksiteten det innebærer.
			</div><div
            class="para">
				FAI krever et tjenersystem for å lagre utrullingsinformasjon og tillate maskinene det gjelder å starte opp fra nettverket. Denne tjeneren krever <span
              class="pkg pkg">fai-server</span>-pakken (eller <span
              class="pkg pkg">fai-quickstart</span>, som også bringer med seg de nødvendige elementer for en standard konfigurasjon).
			</div><div
            class="para">
				FAI bruker en bestemt metode for å definere de ulike installerbare profilene. I stedet for ganske enkelt å bare kopiere en referanseinstallasjon, er FAI en fullverdig installerer, fullt konfigurerbar via et sett med filer og skript som er lagret på tjeneren; Standardplasseringen <code
              class="filename">/srv/fai/config/</code> er ikke opprettet automatisk, slik at administrator må lage den sammen med de aktuelle filene. Mesteparten av tiden, vil disse filene bli tilpasset fra eksempelfiler som er tilgjengelig i dokumentasjonen til <span
              class="pkg pkg">fai-doc</span>-pakken, mer spesielt i <code
              class="filename">/usr/share/doc/fai-doc/examples/simple/</code>-mappen.
			</div><div
            class="para">
				Så snart profilene er definert, genererer <code
              class="command">fai-setup</code>-kommandoen de elementene som kreves for å starte en FAI installasjon; Dette betyr stort sett å forberede eller å oppdatere et minimal system (NFS-root) som brukes under installasjonen. Et alternativ er å generere en dedikert oppstarts-CD med <code
              class="command">fai-cd</code>.
			</div><div
            class="para">
				Å opprette alle disse konfigurasjonsfilene krever en viss forståelse for hvordan FAI fungerer. En typisk installasjonen gjøres i følgende trinn:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						å hente en kjerne fra nettverket, og starte den;
					</div></li><li
                class="listitem"><div
                  class="para">
						å montere rotfilsystemet fra NFS;
					</div></li><li
                class="listitem"><div
                  class="para">
						å kjøre <code
                    class="command">/usr/sbin/fai</code>, som kontrollerer resten av prosessen (de neste trinnene er derfor initiert av dette skriptet);
					</div></li><li
                class="listitem"><div
                  class="para">
						å kopiere konfigurasjonsplassen fra tjeneren til <code
                    class="filename">/fai/</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						å kjøre <code
                    class="command">fai-class</code>. <code
                    class="filename">/fai/class/[0-9][0-9]*</code>-skriptene blir så utført, og returnerer navnene på "klasser" som gjelder for maskinen som blir installert. Denne informasjonen vil tjene som et utgangspunkt for de neste trinnene. Dette åpner for en viss fleksibilitet i å definere hvilke tjenester som skal installeres og konfigureres.
					</div></li><li
                class="listitem"><div
                  class="para">
						å hente et antall konfigureringsvariable, avhengig av de aktuelle klasser;
					</div></li><li
                class="listitem"><div
                  class="para">
						å partisjonere diskene og formatere partisjonene, ut fra informasjon i <code
                    class="filename">/fai/disk_config/<em
                      class="replaceable">class</em></code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						montere said partisjoner
					</div></li><li
                class="listitem"><div
                  class="para">
						å installere basesystemet;
					</div></li><li
                class="listitem"><div
                  class="para">
						å gi forrang til Debconf database med <code
                    class="command">fai-debconf</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						å hente listen over tilgjengelige pakker for APT;
					</div></li><li
                class="listitem"><div
                  class="para">
						å installere pakkene listet i <code
                    class="filename">/fai/package_config/<em
                      class="replaceable">class</em></code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						å kjøre etterkonfigurerings-skriptene, <code
                    class="filename">/fai/scripts/<em
                      class="replaceable">class</em>/[0-9][0-9]*</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						å registrere installasjonsloggene, avmontere partisjonene, og omstart.
					</div></li></ul></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.d-i-preseeding"></a>12.3.2. Å gi fortrinn til Debian-Installer</h3></div></div></div><a
            id="id-1.15.6.10.2"
            class="indexterm"></a><a
            id="id-1.15.6.10.3"
            class="indexterm"></a><div
            class="para">
				Alt i alt, bør det beste verktøyet til å installere Debian-systemer skulle logisk være den offisielle Debian installereren. Dette er grunnen, helt fra begynnelsen,for at Debian-installereren er konstruert for automatisert bruk, og drar nytte av infrastrukturen levert av <span
              class="pkg pkg">debconf</span>. Sistnevnte gjør det mulig, på den ene siden, - å redusere antall spørsmål (skjulte spørsmål vil bruke de medfølgende standardsvar), og - på den annen siden, - å gi standard svar separat, slik at installasjonen kan være ikke-interaktiv. Dette siste trekk er kjent som <span
              class="emphasis"><em>preseeding</em></span>.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GOING FURTHER</em></span> Debconf med en sentralisert database</strong></p></div></div></div><a
              id="id-1.15.6.10.5.2"
              class="indexterm"></a><div
              class="para">
				Bruk av de foregående gjør det mulig å gi et sett av svar på Debconf spørsmål på installasjonstidspunktet, men disse svarene er statiske og ikke utvikle seg som tiden går. Siden allerede installerte maskiner kan trenge oppgradering, og nye svar kan bli nødvendige, kan <code
                class="filename">/etc/debconf.conf</code>-konfigurasjonsfilen settes opp slik at Debconf bruker eksterne datakilder (som en LDAP-katalogtjener, eller en ekstern fil som nås via NFS eller Samba). Flere eksterne datakilder kan defineres på samme tid, og de utfyller hverandre. Den lokale databasen brukes fortsatt (for lese- og skrivetilgang), men de eksterne databasene vanligvis er begrenset til lesing. Manualsiden <span
                class="citerefentry"><span
                  class="refentrytitle">debconf.conf</span>(5)</span> beskriver i detalj alle mulighetene (du trenger <span
                class="pkg pkg">debconf-doc</span>-pakken).
			</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.6"></a>12.3.2.1. Å bruke en foregående fil</h4></div></div></div><div
              class="para">
					Det er flere steder hvor installereren kan få en foregående fil:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							i initrd som brukes til å starte maskinen; I dette tilfelle bestemmes rekkefølgen helt i begynnelsen av installeringen, og alle spørsmålene kan unngås. Filen trenger bare å bli kalt <code
                      class="filename">preseed.cfg</code> og bli lagret i initrd-roten.
						</div></li><li
                  class="listitem"><div
                    class="para">
							på oppstartmedia (CD eller USB-nøkkel); Å sette rekkefølgen skjer så snart media er montert, noe som betyr rett etter spørsmålene om språk og tastaturoppsett. <code
                      class="literal">preseed/file</code>-oppstarts-parameteren kan brukes til å indikere plasseringen av den foregående filen (f.eks <code
                      class="filename">/cdrom/preseed.cfg</code> når installasjonen er gjort fra en CD-ROM, eller <code
                      class="filename">/hd-media/preseed.cfg</code> hvis fra en USB-minnepinne.
						</div></li><li
                  class="listitem"><div
                    class="para">
							fra nettverket; settes rekkefølgen da bare etter at nettverket er (automatisk) konfigurert; det relevante oppstartsparameteret er <code
                      class="literal">preseed/url=http://<em
                        class="replaceable">server</em>/preseed.cfg</code>.
						</div></li></ul></div><div
              class="para">
					I et raskt øyekast, inkludert den foregående filen i initrd, ser den ut som den mest interessante løsningen; men den er imidlertid sjelden brukt i praksis. Fordi å generere et installasjons-initrd er ganske komplisert. De to andre løsninger er mye mer vanlige, spesielt siden oppstartsparametere gir en annen måte å bruke foregående svar til de første spørsmålene i installasjonsprosessen. Den vanlige måten å spare bryet med å skrive disse oppstartsparametere for hånd på hver installasjon er å lagre dem inn i oppsettet for <code
                class="command">isolinux</code> (i CD-ROM tilfellet eller <code
                class="command">syslinux</code> (ved USB key).
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.7"></a>12.3.2.2. Å lage en rekkefølgefil</h4></div></div></div><div
              class="para">
					En foregående fil er en ren tekstfil, der hver linje inneholder svaret på et Debconf spørsmål. En linje er delt i fire felt, atskilt med mellomrom (mellomrom eller tabulatorer), som i, for eksempel,<code
                class="literal">d-i mirror/suite string stable</code>:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							det første feltet er "eieren" av spørsmålet. "D-i" brukes for spørsmål som er relevante for installasjonsprogrammet, men det kan også være et pakkenavn for spørsmål som kommer fra Debian-pakker;
						</div></li><li
                  class="listitem"><div
                    class="para">
							det andre feltet er er en identifikasjon for spørsmålet;
						</div></li><li
                  class="listitem"><div
                    class="para">
							tredje, typen spørsmål;
						</div></li><li
                  class="listitem"><div
                    class="para">
							det fjerde og siste feltet inneholder verdien for svaret. Legg merke til at det må være atskilt fra det tredje felt med et mellomrom; hvis det er mer enn ett, regnes følgende mellomrom som en del av verdien.
						</div></li></ul></div><div
              class="para">
					Den enkleste måte å skrive en foregående fil på er å installere et system for hånd. Deretter vil <code
                class="command">debconf-get-selections --installer</code> gi svar om installasjonsprogrammet. Svar om andre pakker kan oppnås med <code
                class="command">debconf-get-selections</code>. Men det er en renere løsning å skrive den foregående filen for hånd, med start fra et eksempel og referansedokumentasjonen. Med en slik tilnærming, kan bare spørsmål om hvor standardsvaret trenger å bli overskrevet. bli foregrepet ved å bruke <code
                class="literal">priority=critical</code>-oppstartsparameter vil instruere Debconf om å bare å stille kritiske spørsmål, og bruke standardsvarene for andre.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>DOCUMENTATION</em></span> Tillegg til installasjonsveiledningen</strong></p></div></div></div><div
                class="para">
					Installasjonsveiledningen, som er tilgjengelig på nettet, inneholder detaljert dokumentasjon om bruken av en foregående fil i et Appendix. Det har også med en detaljert og kommentert eksempelfil som kan tjene som basis for lokale tilpasninger. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/amd64/apb.html">https://www.debian.org/releases/jessie/amd64/apb.html</a></div> <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/example-preseed.txt">https://www.debian.org/releases/jessie/example-preseed.txt</a></div>
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.10.8"></a>12.3.2.3. Å lage et skreddersydd oppstartsmedium</h4></div></div></div><div
              class="para">
					Å vite hvor foregående filen skal lagres er vel og bra, men plasseringen er ikke alt. På en eller annen måte må man få installasjonens oppstartsmedia til å endre oppstartsparametre og legge til den foregående filen.
				</div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.3"></a>12.3.2.3.1. Å starte opp fra nettverket</h5></div></div></div><div
                class="para">
						Når en datamaskin startes fra nettverket, vil tjeneren som sender oppstartselementene også definere oppstartsparametere. Dermed må endringene som skal lages, utføres i oppstartstjenerens PXE-konfigurasjon; Mer spesifikt, i dens <code
                  class="filename">/tftpboot/pxelinux.cfg/default</code>-konfigurasjonsfil. Å sette opp nettverksoppstart er en forutsetning, se Installation Guide for mer informasjon. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="https://www.debian.org/releases/jessie/amd64/ch04s05.html">https://www.debian.org/releases/jessie/amd64/ch04s05.html</a></div>
					</div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.4"></a>12.3.2.3.2. Å forberede en Bootable USB Key</h5></div></div></div><div
                class="para">
						Så snart en oppstartbar minnepenn er forberedt (se <a
                  class="xref"
                  href="installation.html#sect.install-usb">Seksjon 4.1.2, «Oppstart fra en USB-minnepenn»</a>), er noen ekstra operasjoner nødvendige. Anta at inneholdet er tilgjengelig under <code
                  class="filename">/media/usbdisk/</code>:
					</div><div
                xmlns:d="http://docbook.org/ns/docbook"
                class="itemizedlist"><ul><li
                    class="listitem"><div
                      class="para">
								kopier den tidligere filen til <code
                        class="filename">/media/usbdisk/preseed.cfg</code>
							</div></li><li
                    class="listitem"><div
                      class="para">
								rediger <code
                        class="filename">/media/usbdisk/syslinux.cfg</code> og legg til de nødvendige oppstartsparametre (se eksempel nedenfor).
							</div></li></ul></div><div
                class="example"><a
                  xmlns=""
                  id="id-1.15.6.10.8.4.4"></a><p
                  class="title"><strong>Eksempel 12.2. syslinux.cfg-file og foregående parametre</strong></p><div
                  class="example-contents"><pre
                    class="programlisting">default vmlinuz
append preseed/file=/hd-media/preseed.cfg locale=en_US.UTF-8 keymap=us language=us country=US vga=788 initrd=initrd.gz  --
</pre></div></div></div><div
              class="section"><div
                class="titlepage"><div><div><h5
                      class="title"><a
                        xmlns=""
                        id="id-1.15.6.10.8.5"></a>12.3.2.3.3. Å lage et CD-ROM-bilde</h5></div></div></div><a
                id="id-1.15.6.10.8.5.2"
                class="indexterm"></a><div
                class="para">
						En USB-minnepenn er et lese-skrive medium, så det var lett for oss å legge til en fil der og endre noen parametere. I CD-ROM tilfellet, er operasjonen mer komplisert, siden vi trenger å fornye et fullt ISO-bilde. Denne oppgaven er håndtert av <span
                  class="pkg pkg">debian-cd</span>, men dette verktøyet er ganske vanskelig å bruke. Det er behov for et lokalt speil, og det krever en forståelse av alle valgene som tilbys av <code
                  class="filename">/usr/share/debian-cd/CONF.sh</code>; selv da må <code
                  class="command">make</code> tas i bruk i flere omganger. <code
                  class="filename">/usr/share/debian-cd/README</code> er derfor en svært anbefalt å lese.
					</div><div
                class="para">
						Når det er sagt, fungerer Debian-cd alltid på en lignende måte: et "bilde"-katalog med det eksakte innholdet på CD-ROM blir generert, og deretter konvertert til en ISO-fil med et verktøy som <code
                  class="command">genisoimage</code>, <code
                  class="command">mkisofs</code> eller <code
                  class="command">xorriso</code>. Bildekatalogen er ferdig etter debian-cds <code
                  class="command">make image-trees</code> skritt. På dette tidspunktet, setter vi inn den foreliggende filen i den aktuelle mappen (vanligvis <code
                  class="filename">$TDIR/$CODENAME/CD1/</code>, $TDIR og $CODENAME er parametre definert av konfigurasjonsfilen <code
                  class="filename">CONF.sh</code>). CD-ROM-en bruker <code
                  class="command">isolinux</code> som sin oppstartslaster, og konfigurasjonsfilen dens må tilpasses fra hva debian-cd-en genererte, for å sette inn de nødvendige oppstartsparametere (den spesifikke filen er <code
                  class="filename">$TDIR/$CODENAME/boot1/isolinux/isolinux.cfg</code>). Så kan "normal" prosessen fortsette, og vi kan gå videre med å generere ISO-bildet med <code
                  class="command">make image CD=1</code> (eller <code
                  class="command">make images</code> hvis flere CD-ROM-er blir generert).
					</div></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.simple-cdd"></a>12.3.3. Simple-CDD: Alt i ett løsningen</h3></div></div></div><a
            id="id-1.15.6.11.2"
            class="indexterm"></a><div
            class="para">
				Å bare bruke en forhåndsklargjort fil er ikke nok til å oppfylle alle krav som kan komme i store distribusjoner. Selv om det er mulig å utføre noen få skript ved slutten av den normale installasjonsprosessen, er valget av settet av pakkene til installasjon likevel ikke helt fleksibelt (i utgangspunktet, kan bare "tasks" velges); og viktigere, bare dette tillater bare å installere offisielle Debian-pakker, og utelukker de lokalt genererte.
			</div><div
            class="para">
				På den annen side er debian-cd i stand til å integrere eksterne pakker, og debian-installereren kan utvides ved å sette inn nye trinn i installasjonsprosessen. Ved å kombinere disse egenskapene, bør det være mulig å lage et tilpasset installasjonsprogram som oppfyller våre behov; Det bør også kunne konfigurere enkelte tjenester etter utpakking av de nødvendige pakkene. Heldigvis er dette ikke bare en hypotese, siden dette er nøyaktig det Simple-CDD (i <span
              class="pkg pkg">simple-cdd</span>-pakken) gjør.
			</div><div
            class="para">
				The purpose of Simple-CDD is to allow anyone to easily create a distribution derived from Debian, by selecting a subset of the available packages, preconfiguring them with Debconf, adding specific software, and executing custom scripts at the end of the installation process. This matches the “universal operating system” philosophy, since anyone can adapt it to their own needs.
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.6"></a>12.3.3.1. Creating Profiles</h4></div></div></div><div
              class="para">
					Simple-CDD defines “profiles” that match the FAI “classes” concept, and a machine can have several profiles (determined at installation time). A profile is defined by a set of <code
                class="filename">profiles/<em
                  class="replaceable">profile</em>.*</code> files:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="filename">.description</code> file contains a one-line description for the profile;
						</div></li><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="filename">.packages</code> file lists packages that will automatically be installed if the profile is selected;
						</div></li><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="filename">.downloads</code> file lists packages that will be stored onto the installation media, but not necessarily installed;
						</div></li><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="filename">.preseed</code> file contains preseeding information for Debconf questions (for the installer and/or for packages);
						</div></li><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="filename">.postinst</code> file contains a script that will be run at the end of the installation process;
						</div></li><li
                  class="listitem"><div
                    class="para">
							lastly, the <code
                      class="filename">.conf</code> file allows changing some Simple-CDD parameters based on the profiles to be included in an image.
						</div></li></ul></div><div
              class="para">
					The <code
                class="literal">default</code> profile has a particular role, since it is always selected; it contains the bare minimum required for Simple-CDD to work. The only thing that is usually customized in this profile is the <code
                class="literal">simple-cdd/profiles</code> preseed parameter: this allows avoiding the question, introduced by Simple-CDD, about what profiles to install.
				</div><div
              class="para">
					Note also that the commands will need to be invoked from the parent directory of the <code
                class="filename">profiles</code> directory.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.7"></a>12.3.3.2. Configuring and Using <code
                      class="command">build-simple-cdd</code></h4></div></div></div><a
              id="id-1.15.6.11.7.2"
              class="indexterm"></a><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>QUICK LOOK</em></span> Detailed configuration file</strong></p></div></div></div><div
                class="para">
					An example of a Simple-CDD configuration file, with all possible parameters, is included in the package (<code
                  class="filename">/usr/share/doc/simple-cdd/examples/simple-cdd.conf.detailed.gz</code>). This can be used as a starting point when creating a custom configuration file.
				</div></div><div
              class="para">
					Simple-CDD requires many parameters to operate fully. They will most often be gathered in a configuration file, which <code
                class="command">build-simple-cdd</code> can be pointed at with the <code
                class="literal">--conf</code> option, but they can also be specified via dedicated parameters given to <code
                class="command">build-simple-cdd</code>. Here is an overview of how this command behaves, and how its parameters are used:
				</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
							the <code
                      class="literal">profiles</code> parameter lists the profiles that will be included on the generated CD-ROM image;
						</div></li><li
                  class="listitem"><div
                    class="para">
							based on the list of required packages, Simple-CDD downloads the appropriate files from the server mentioned in <code
                      class="literal">server</code>, and gathers them into a partial mirror (which will later be given to debian-cd);
						</div></li><li
                  class="listitem"><div
                    class="para">
							the custom packages mentioned in <code
                      class="literal">local_packages</code> are also integrated into this local mirror;
						</div></li><li
                  class="listitem"><div
                    class="para">
							debian-cd is then executed (within a default location that can be configured with the <code
                      class="literal">debian_cd_dir</code> variable), with the list of packages to integrate;
						</div></li><li
                  class="listitem"><div
                    class="para">
							once debian-cd has prepared its directory, Simple-CDD applies some changes to this directory:
						</div><div
                    class="itemizedlist"><ul><li
                        class="listitem"><div
                          class="para">
									files containing the profiles are added in a <code
                            class="filename">simple-cdd</code> subdirectory (that will end up on the CD-ROM);
								</div></li><li
                        class="listitem"><div
                          class="para">
									other files listed in the <code
                            class="literal">all_extras</code> parameter are also added;
								</div></li><li
                        class="listitem"><div
                          class="para">
									the boot parameters are adjusted so as to enable the preseeding. Questions concerning language and country can be avoided if the required information is stored in the <code
                            class="literal">language</code> and <code
                            class="literal">country</code> variables.
								</div></li></ul></div></li><li
                  class="listitem"><div
                    class="para">
							debian-cd then generates the final ISO image.
						</div></li></ul></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.15.6.11.8"></a>12.3.3.3. Generating an ISO Image</h4></div></div></div><div
              class="para">
					Once we have written a configuration file and defined our profiles, the remaining step is to invoke <code
                class="command">build-simple-cdd --conf simple-cdd.conf</code>. After a few minutes, we get the required image in <code
                class="filename">images/debian-8.0-amd64-CD-1.iso</code>.
				</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.virtualization.html"><strong>Forrige</strong>12.2. Visualisering</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.monitoring.html"><strong>Neste</strong>12.4. Overvåking</a></li></ul></body></html>
