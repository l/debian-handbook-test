<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.2. aptitude, apt-get, og apt-kommandoer</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="apt.html"
        title="Kapittel 6. Vedlikehold og oppdateringer; ATP-verktøyene" /><link
        rel="prev"
        href="apt.html"
        title="Kapittel 6. Vedlikehold og oppdateringer; ATP-verktøyene" /><link
        rel="next"
        href="sect.apt-cache.html"
        title="6.3. Kommandoen apt-cache" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.apt-get.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.apt-get"></a>6.2. <code
                  class="command">aptitude</code>, <code
                  class="command">apt-get</code>, og <code
                  class="command">apt</code>-kommandoer</h2></div></div></div><a
          id="id-1.9.11.2"
          class="indexterm"></a><a
          id="id-1.9.11.3"
          class="indexterm"></a><a
          id="id-1.9.11.4"
          class="indexterm"></a><div
          class="para">
			APT er et stort prosjekt, der et grafisk grensesnitt inngår i de opprinnelige planene. Det er basert på et bibliotek med kjernen programmet (the core application), og <code
            class="command">apt-get</code> er den første grenseflaten - kommandolinjebasert - som ble utviklet i prosjektet. <code
            class="command">apt</code> er en andre kommandolinjebaserte grenseflate, levert fra APT, som overkommer noen designfeil i <code
            class="command">apt-get</code>.
		</div><div
          class="para">
			Tallrike andre grafiske grensesnitt dukket opp som eksterne prosjekter: <code
            class="command">synaptic</code>, <code
            class="command">aptitude</code> (som inkluderer både et tekstmodus grensesnitt og et grafisk - selv om det ikke er fullført ennå), <code
            class="command">wajig</code>, etc. Det mest anbefalte grensesnittet, <code
            class="command">apt</code>, er det vi vil bruke i eksemplene vi gir i denne seksjonen. Noter gjerne at <code
            class="command">apt-get</code> og <code
            class="command">aptitude</code> har en veldig lik kommandolinje-syntaks. Når det er store forskjeller mellom <code
            class="command">apt</code>, <code
            class="command">apt-get</code> og <code
            class="command">aptitude</code>, vil disse forskjellene være detaljerte.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.7"></a>6.2.1. Initialisering</h3></div></div></div><div
            class="para">
				For alt arbeid med APT, trenger listen over tilgjengelige pakker å oppdateres; dette kan enkelt gjøres med <code
              class="command">apt update</code>. Denne operasjonen kan, avhengig av hastigheten på nettilkoblingen, ta en stund siden det innebærer nedlasting et visst antall <code
              class="filename">Packages</code>/<code
              class="filename">Sources</code>/<code
              class="filename">Translation-<em
                class="replaceable">language-code</em></code>-filer, som sakte har blitt større og større etter hvert som Debian har utviklet seg (minst 10 MB med data for <code
              class="literal">main</code>-seksjonen). Installering fra en CD-ROM krever, selvfølgelig, ingen nedlasting - i det tilfellet er operasjonen meget rask.
			</div><a
            id="id-1.9.11.7.3"
            class="indexterm"></a><a
            id="id-1.9.11.7.4"
            class="indexterm"></a><a
            id="id-1.9.11.7.5"
            class="indexterm"></a></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.11.8"></a>6.2.2. Installere og fjerne</h3></div></div></div><a
            id="id-1.9.11.8.2"
            class="indexterm"></a><a
            id="id-1.9.11.8.3"
            class="indexterm"></a><a
            id="id-1.9.11.8.4"
            class="indexterm"></a><a
            id="id-1.9.11.8.5"
            class="indexterm"></a><div
            class="para">
				Med APTs, kan pakker legges til eller fjernes fra systemet, med henholdsvis <code
              class="command">apt install <em
                class="replaceable">package</em></code> og <code
              class="command">apt remove <em
                class="replaceable">pakke</em></code>. I begge tilfeller, vil APT automatisk installere de nødvendige avhengighetene eller slette pakker som er avhengig av pakken som blir fjernet. <code
              class="command">apt purge <em
                class="replaceable">pakke</em></code>-pakken involverer en komplett avinstallisering - konfigurasjonsfilene slettes også.
			</div><a
            id="id-1.9.11.8.7"
            class="indexterm"></a><a
            id="id-1.9.11.8.8"
            class="indexterm"></a><a
            id="id-1.9.11.8.9"
            class="indexterm"></a><a
            id="id-1.9.11.8.10"
            class="indexterm"></a><a
            id="id-1.9.11.8.11"
            class="indexterm"></a><a
            id="id-1.9.11.8.12"
            class="indexterm"></a><a
            id="id-1.9.11.8.13"
            class="indexterm"></a><a
            id="id-1.9.11.8.14"
            class="indexterm"></a><a
            id="id-1.9.11.8.15"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Installere samme utvalg av pakker flere ganger</strong></p></div></div></div><div
              class="para">
				Det kan være nyttig å automatisk installere den samme listen med pakker på flere datamaskiner. Dette kan gjøres ganske enkelt.
			</div><div
              class="para">
				Først, hent listen over pakker installert på datamaskinen som skal fungere som «modell» for kopiering.
			</div><pre
              class="screen"><code
                class="computeroutput">$ </code><strong
                class="userinput"><code>dpkg --get-selections &gt;pkg-list</code></strong></pre><div
              class="para">
				<code
                class="filename">pkg-list</code>-filen inneholder nå listen med installerte pakker. Deretter overføres <code
                class="filename">pkg-list</code>-filen på datamaskinene du vil oppdatere, og bruker følgende kommandoer::
			</div><pre
              class="screen">## Oppdater databasen til dpkg over kjente pakker
# <strong
                class="userinput"><code>avail=`mktemp`</code></strong>
# <strong
                class="userinput"><code>apt-cache dumpavail &gt; "$avail"</code></strong>
# <strong
                class="userinput"><code>dpkg --merge-avail "$avail"</code></strong>
# <strong
                class="userinput"><code>rm -f "$avail"</code></strong>
## Oppdater utvalg i dpkg
# <strong
                class="userinput"><code>dpkg --set-selections &lt; pkg-list</code></strong>
## Be apt-get om å installere de valgte pakkene
# <strong
                class="userinput"><code>apt-get dselect-upgrade</code></strong></pre><div
              class="para">
				De første kommandoene registrerer listen over tilgjengelige pakker i dpkg-databasen, deretter gjenoppretter <code
                class="command">dpkg --set-selections</code> valget av pakker du ønsker å installere, og <code
                class="command">apt-get</code> kjører de nødvendige operasjonene! <code
                class="command">aptitude</code> har ikke denne kommandoen.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Fjerne og installere samtidig</strong></p></div></div></div><div
              class="para">
				Det er mulig å spørre <code
                class="command">apt</code> (eller <code
                class="command">apt-get</code>, eller <code
                class="command">aptitude</code>) til å installere enkelte pakker, og fjerne andre på samme kommandolinje ved å legge til et suffiks. Med en <code
                class="command">apt install</code>-kommando, legg til «<code
                class="literal">-</code>» til navnene på de pakkene du ønsker å fjerne. Med en <code
                class="command">apt remove</code>-kommando, legg «<code
                class="literal">+</code>» til navnene på de pakkene du vil installere.
			</div><div
              class="para">
				Det neste eksempelet viser to forskjellige måter å installere <em
                class="replaceable">pakke1</em> og for å fjerne <em
                class="replaceable">pakke2</em>.
			</div><pre
              class="screen"># <strong
                class="userinput"><code>apt install <em
                    class="replaceable">pakke1</em> <em
                    class="replaceable">pakke2-</em></code></strong>
[...]
# <strong
                class="userinput"><code>apt remove <em
                    class="replaceable">pakke1+</em> <em
                    class="replaceable">pakke2</em></code></strong>
[...]</pre><div
              class="para">
				Dette kan også brukes til å ekskludere pakker som ellers ville blitt installert, for eksempel på grunn av en <code
                class="literal">Recommends</code>. Generelt vil avhengighetsløseren bruke denne informasjonen som et hint for å lete etter alternative løsninger.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt --reinstall</code> og <code
                        class="command">aptitude reinstall</code></strong></p></div></div></div><a
              id="id-1.9.11.8.18.2"
              class="indexterm"></a><div
              class="para">
				Systemet kan noen ganger bli skadet etter fjerning eller endring av filer i en pakke. Den enkleste måten å hente frem disse filene er å installere den berørte pakken. Dessverre finner pakkesystemet at sistnevnte allerede er installert, og høflig nekter å installere det på nytt; for å unngå dette, kan du bruke <code
                class="literal">--reinstall</code> muligheten av <code
                class="command">apt</code> og <code
                class="command">apt-get</code>-kommandoer. De følgende kommandoer reinstallerer <span
                class="pkg pkg">postfix</span> selv om den allerede er tilstede:
			</div><pre
              class="screen"><code
                class="computeroutput"># </code><strong
                class="userinput"><code>apt --reinstall install postfix</code></strong></pre><div
              class="para">
				<code
                class="command">aptitude</code>-kommandolinjen er litt ulik, men oppnår det samme resultat med <code
                class="command">aptitude reinstall postfix</code>.
			</div><div
              class="para">
				Problemet oppstår ikke med <code
                class="command">dpkg</code>, men administratoren bruker den sjelden direkte.
			</div><div
              class="para">
				Vær forsiktig. Å bruke <code
                class="command">apt --reinstall</code> for å gjenopprette pakker modifisert under et angrep, vil sikkert ikke gjenopprette systemet slik det var. <a
                class="xref"
                href="sect.dealing-with-compromised-machine.html">Seksjon 14.7, «Å håndtere en kompromittert maskin»</a> gir detaljene med de nødvendige skritt overfor et kompromittert system.
			</div></div><div
            class="para">
				Hvis filen <code
              class="filename">sources.list</code> nevner flere distibusjoner, er det mulig å gi den versjonen av pakken som skal installeres. Et spesifikt versjonsnummer kan hentes med <code
              class="command">apt install <em
                class="replaceable">pakke</em>=<em
                class="replaceable">versjon</em></code>, men å indikere distribusjonens opprinnelse (<span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span> eller <span
              class="distribution distribution">Unstable</span>) - med <code
              class="command">apt install <em
                class="replaceable">pakke</em>/<em
                class="replaceable">distribusjon</em></code> - er vanligvis foretrukket. Med denne kommandoen er det mulig å gå tilbake til en eldre versjon av en pakke (hvis for eksempel du vet at den fungerer godt), forutsatt at den er tilgjengelig i en av kildene refererert til av <code
              class="filename">sources.list</code>-filen. Ellers kan <code
              class="literal">snapshot.debian.org</code>-arkivet komme til hjelp (se sidefelt <a
              class="xref"
              href="apt.html#sidebar.snapshot.debian.org"><span
                class="emphasis"><em>GÅR VIDERE</em></span> Old package versions: <code
                class="literal">snapshot.debian.org</code></a>).
			</div><div
            class="example"><a
              xmlns=""
              id="id-1.9.11.8.20"></a><p
              class="title"><strong>Eksempel 6.3. Installasjon av <span
                  class="distribution distribution">unstable</span>-versjonen av <span
                  class="pkg pkg">spamassassin</span></strong></p><div
              class="example-contents"><pre
                class="screen"><code
                  class="computeroutput"># </code><strong
                  class="userinput"><code>apt install spamassassin/unstable</code></strong></pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>GÅR VIDERE</em></span>The cache of (hurtiglager) <code
                        class="filename">.deb</code>-filer</strong></p></div></div></div><div
              class="para">
				APT tar vare på en kopi av hver nedlastede <code
                class="filename">.deb</code>-fil i mappen <code
                class="filename">/var/cache/apt/archives/</code>. Ved hyppige oppdateringer, kan denne mappen raskt ta mye diskplass med flere versjoner av hver pakke: Du bør regelmessig ordne dem. To kommandoer kan brukes: <code
                class="command">apt-get clean</code> tømmer mappen helt; <code
                class="command">apt-get autoclean</code> fjerner kun pakker som ikke lenger kan lastes ned (fordi de har forsvunnet fra Debian-speilet) og er derfor klart ubrukelig (konfigurasjonsparameteren <code
                class="literal">APT::Clean-Installed</code> kan hindre fjerning av <code
                class="filename">.deb</code>-filer som nå er installert). Merk at <code
                class="command">apt</code> ikke støtter disse kommandoene.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-upgrade"></a>6.2.3. Oppgradering av systemet</h3></div></div></div><a
            id="id-1.9.11.9.2"
            class="indexterm"></a><a
            id="id-1.9.11.9.3"
            class="indexterm"></a><a
            id="id-1.9.11.9.4"
            class="indexterm"></a><a
            id="id-1.9.11.9.5"
            class="indexterm"></a><div
            class="para">
				Regelmessige oppgraderinger anbefales fordi de inneholder de nyeste sikkerhetsoppdateringene. For å oppgradere bruk <code
              class="command">apt upgrade</code>, <code
              class="command">apt-get upgrade</code>, eller <code
              class="command">aptitude safe-upgrade</code> (selvfølgelig etter <code
              class="command">apt update</code>). Denne kommandoen ser etter installerte pakker som kan oppgraderes uten at pakker fjernes. Med andre ord er målet å sikre den minst mulig påtrengende oppgraderingen. <code
              class="command">apt-get</code> er litt mer krevende enn <code
              class="command">aptitude</code>, eller <code
              class="command">apt</code> fordi den vil avslå å installere pakker som ikke var installert på forhånd.
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-pdiff"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Trinnvis oppgradering</strong></p></div></div></div><div
              class="para">
				Som vi forklarte tidligere er målet med <code
                class="command">apt update</code>-kommandoen å laste ned den samsvarende <code
                class="filename">Packages</code> (eller <code
                class="filename">Sources</code>)-filen for hver kildepakke. Imidlertid, selv etter en <code
                class="command">bzip2</code>-komprimering, kan disse filene forbli ganske store (<code
                class="filename">Packages.xz</code> for <span
                class="foreignphrase"><em
                  class="foreignphrase">main</em></span>-seksjonen til <span
                class="distribution distribution">Jessie</span> kreves mer enn 6 MB). Dersom du ønsker å oppgradere regelmessig, kan disse nedlastingene bruke mye tid.
			</div><div
              class="para">
				For å fremskynde prosessen kan APT laste ned «diff»-filer med endringene siden forrige oppdatering, og ikke filen i sin helhet. For å oppnå dette distribuerer offisielle Debian-speil forskjellige filer som lister forskjellene mellom en versjon av <code
                class="filename">Packages</code>-filen and den følgende versjonen. De er generert ved hver mappeoppdatering, og en ukes historie er lagret. Hver av disse «diff»-filene har bare et par dusin kilobyte for <span
                class="distribution distribution">Unstable</span>, slik at mengden data som lastes ned ved en ukentlig <code
                class="command">apt update</code> blir ofte en tiendedel. For distribusjoner som <span
                class="distribution distribution">Stable</span> og <span
                class="distribution distribution">Testing</span>, som endrer mindre, er gevinsten enda mer merkbar.
			</div><div
              class="para">
				Men det kan noen ganger være av interesse å tvinge nedlasting av hele <code
                class="filename">Packages</code>-filen, spesielt når den siste oppgraderingen er svært gammel, og når mekanismen med gradvis økende forskjeller ikke bidrar mye. Dette kan også være interessant når nettverkstilgang er veldig rask, men prosessoren på maskinen som skal oppgraderes er ganske treg, slik at tiden spart på nedlasting blir mer enn tapt når datamaskinen beregner de nye versjonene av disse filene (starter med de eldre versjonene og anvender de nedlastede forskjellene). For å gjøre det kan du bruke konfigurasjonsparameteret <code
                class="literal">Acquire::Pdiffs</code>, og sette det til <code
                class="literal">false</code>.
			</div></div><div
            class="para">
				<code
              class="command">apt</code> vil vanligvis velge det seneste versjonsnummeret (unntatt for pakker fra <span
              class="distribution distribution">Experimental</span> og <span
              class="distribution distribution">stable-backports</span>, som ignoreres uansett versjonsnummer). Hvis du spesifiserer <span
              class="distribution distribution">Testing</span>, eller <span
              class="distribution distribution">Unstable</span> i din <code
              class="filename">sources.list</code>, vil <code
              class="command">apt upgrade</code> skifte til det meste av ditt <span
              class="distribution distribution">Stable</span>-system til <span
              class="distribution distribution">Testing</span> eller <span
              class="distribution distribution">Unstable</span>, som kanskje ikke var det du ville.
			</div><div
            class="para">
				Å be <code
              class="command">apt</code> om å bruke en bestemt distribusjon når du søker etter oppgraderte pakker, må du bruke <code
              class="literal">-t</code> or <code
              class="literal">--target-release</code>-valget, etterfulgt av navnet på distribusjonen du ønsker (for eksempel:<code
              class="command">apt -t stable upgrade</code>). For å slippe å spesifisere dette alternativet hver gang du bruker<code
              class="command">apt</code>, kan du legge til <code
              class="literal">APT::Default-Release "stable";</code> i filen <code
              class="filename">/etc/apt/apt.conf.d/local</code>.
			</div><a
            id="id-1.9.11.9.10"
            class="indexterm"></a><a
            id="id-1.9.11.9.11"
            class="indexterm"></a><a
            id="id-1.9.11.9.12"
            class="indexterm"></a><a
            id="id-1.9.11.9.13"
            class="indexterm"></a><a
            id="id-1.9.11.9.14"
            class="indexterm"></a><div
            class="para">
				For viktigere oppgraderinger, som for eksempel overgang fra en stor Debian versjon til den neste, må du bruke <code
              class="command">apt full-upgrade</code>. Med denne instruksjonen vil <code
              class="command">apt</code> fullføre oppgraderingen selv om den må fjerne noen utdaterte pakker, eller installere nye avhengigheter. Dette er også kommandoen som benyttes av brukere som jobber daglig med Debian <span
              class="distribution distribution">Unstable</span>-utgaven, og følger dens utvikling dag for dag. Det er så enkelt at det nesten ikke trenger forklaring: APTs omdømme er basert på denne store funksjonaliten.
			</div><div
            class="para">
				Til forskjell fra <code
              class="command">apt</code> og <code
              class="command">aptitude</code>, kjenner ikke <code
              class="command">apt-get</code> til <code
              class="command">full-upgrade</code>-kommandoen. I stedet skal du bruke <code
              class="command">apt-get dist-upgrade</code> («distribution upgrade»), den historiske og velkjente kommandoen <code
              class="command">apt</code> og <code
              class="command">aptitude</code> godtas også, til lettelse for de brukerne som ble vant med den.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-config"></a>6.2.4. Konfigureringsvalg</h3></div></div></div><a
            id="id-1.9.11.10.2"
            class="indexterm"></a><a
            id="id-1.9.11.10.3"
            class="indexterm"></a><a
            id="id-1.9.11.10.4"
            class="indexterm"></a><div
            class="para">
				Foruten de konfigurasjonselementer som allerede er nevnt, er det mulig å konfigurere visse egenskaper ved APT ved å legge til direktiver i en fil i <code
              class="filename">/etc/apt/apt.conf.d/</code>-mappen. Husk for eksempel at det er mulig for APT å be <code
              class="command">dpkg</code> om å ignorere filkonfliktfeil ved å spesifisere <code
              class="literal">DPkg::options { "--force-overwrite"; }</code>.
			</div><div
            class="para">
				Hvis Internettet bare kan nås via en mellomtjener, legg til en linje som <code
              class="literal">Acquire::http::proxy "http://<em
                class="replaceable">yourproxy</em>:3128"</code>. For en FTP-mellomtjener, skriv <code
              class="literal">Acquire::ftp::proxy "ftp://<em
                class="replaceable">yourproxy</em>"</code>. For å finne flere konfigurasjonsvalg, les <span
              class="citerefentry"><span
                class="refentrytitle">apt.conf</span>(5)</span> manualside med <code
              class="command">man apt.conf</code>-kommandoen (for detaljer om manualsider, se <a
              class="xref"
              href="solving-problems.html#sect.manual-pages">Seksjon 7.1.1, «Manualsider»</a>).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.directory.d"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TILBAKE TIL BASIS</em></span> Kataloger som slutter på <code
                        class="filename">.d</code></strong></p></div></div></div><a
              id="id-1.9.11.10.7.2"
              class="indexterm"></a><div
              class="para">
				Mapper med et <code
                class="filename">.d</code>-suffiks blir brukt oftere og oftere. Hver mappe representerer en konfigurasjonsfil som er fordelt over flere filer. I denne forstand er alle filene i <code
                class="filename">/etc/apt/apt.conf.d/</code> instruksjoner av APT-konfigurering. APT inkluderer dem i alfabetisk rekkefølge, slik at de siste kan endre et konfigurasjonselement definert i en av de første.
			</div><div
              class="para">
				Denne strukturen gir en viss fleksibilitet til maskinens administrator og til pakkens vedlikeholdere. Faktisk kan administratoren enkelt endre konfigurasjonen av programvaren ved å legge til en ferdig fil i katalogen det gjelder uten å måtte endre en eksisterende fil. Pakkevedlikeholdere bruker samme tilnærming når de må tilpasse konfigurasjonen av annen programvare for å sikre at den fullt ut virker sammen med deres. Debians politikk forbyr eksplisitt endring av konfigurasjonsfiler fra andre pakker - bare brukere får lov til å gjøre dette. Husk at under en pakkeoppgradering, får brukeren velge den versjonen av konfigurasjonsfilen som skal beholdes når en endring er påvist. Enhver ekstern endring av filen vil utløse den forespørselen, noe som ville forstyrre administratoren, som er sikker på å ikke ha endret noe.
			</div><div
              class="para">
				Uten en <code
                class="filename">.d</code>-katalog er det umulig for en ekstern pakke å endre på oppsettet til et program uten å endre programmets oppsettsfiler. I stedet må den eksterne pakken spørre brukeren om å gjøre endringen selv, og beskrive operasjonene som skal utføres i filen <code
                class="filename">/usr/share/doc/<em
                  class="replaceable">pakke</em>/README.Debian</code>.
			</div><div
              class="para">
				Avhengig av programmet, brukes <code
                class="filename">.d</code>-mappen direkte, eller styrt av et eksternt skript som vil kolble sammen alle filene for å opprette selve konfigurasjonsfilen. Det er viktig å kjøre skriptet etter alle endringer i denne katalogen, slik at de seneste endringene blir tatt hensyn til. På samme måte er det viktig å ikke arbeide direkte i konfigurasjonsfilen som er opprettet automatisk, siden alt ville gå tapt ved neste kjøring av skriptet. Den valgte metoden (<code
                class="filename">.d</code>-mappen brukes direkte, eller en fil generert fra denne mappen) er vanligvis diktert av implementeringsbegrensninger, men i begge tilfeller kompenserer gevinstene i form av konfigurasjonsfleksibilitet for de små komplikasjonene de medfører. Exim 4-posttjeneren er et eksempel på den genererte filmetoden: Den kan konfigureres gjennom flere filer (<code
                class="filename">/etc/exim4/conf.d/*</code>) som er koblet sammen til <code
                class="filename">/var/lib/exim4/config.autogenerated</code> av <code
                class="command">update-exim4.conf</code>-kommandoen.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt.priorities"></a>6.2.5. Styring av pakkeprioriteter</h3></div></div></div><div
            class="para">
				En av de viktigste aspektene i konfigurasjonen av APT er behandlingen av prioriteringene knyttet til hver pakkekilde. For eksempel kan du ønske å forlenge en fordeling med en eller to nyere pakker fra <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span>, eller <span
              class="distribution distribution">Experimental</span>. Det er mulig å tildele en prioritet til hver tilgjengelig pakke (samme pakke kan ha flere prioriteringer, avhengig av hvilken versjon eller distribusjon den kommer fra). Disse prioriteringene vil påvirke APTs oppførsel: For hver pakke vil det alltid velge versjonen med høyest prioritet (unntatt hvis denne versjonen er eldre enn den installerte, og hvis prioriteten er mindre enn 1000).
			</div><a
            id="id-1.9.11.11.3"
            class="indexterm"></a><a
            id="id-1.9.11.11.4"
            class="indexterm"></a><a
            id="id-1.9.11.11.5"
            class="indexterm"></a><a
            id="id-1.9.11.11.6"
            class="indexterm"></a><a
            id="id-1.9.11.11.7"
            class="indexterm"></a><a
            id="id-1.9.11.11.8"
            class="indexterm"></a><a
            id="id-1.9.11.11.9"
            class="indexterm"></a><div
            class="para">
				APT definerer flere standard prioriteringer. Hver installert pakkeversjon har en prioritet på 100. En ikke-installerte versjon har en prioritet på 500 som standard, men det kan hoppe til 990 hvis det er en del av målrettet utgivelse (definert med <code
              class="literal">-t</code> kommandolinjevalg, eller <code
              class="literal">APT::Default-Release</code> konfigureringsdirektiv).
			</div><div
            class="para">
				Du kan endre prioriteringer ved å legge til oppføringer i <code
              class="filename">/etc/apt/preferences</code>-filen med navnene på de berørte pakker, versjonen, opprinnelsen og den nye prioriteten deres.
			</div><div
            class="para">
				APT vil aldri installere en eldre distribusjon av en pakke (som er en pakke med et versjonsnummer som er lavere enn det som den allerede installerte pakken har), unntatt hvis prioriteten dens er over 1000. APT vil alltid installere pakken med høyeste prioritet som følger denne begrensningen. Hvis to pakker har samme prioritet, installerer APT den nyeste (hvis versjonsnummer er høyest). Hvis to pakker av samme versjon har samme prioritet, men varierer i innhold, installerer APT versjonen som ikke er installert (denne regelen har blitt opprettet for å dekke tilfelle av en pakkeoppdatering uten økning av revisjonsnummeret, noe som vanligvis er nødvendig).
			</div><div
            class="para">
				Mer konkret, en pakke som har prioritet mindre enn 0 vil aldri bli installert. En pakke med en prioritet som varierer mellom 0 og 100 vil kun installeres hvis ingen annen versjon av pakken allerede er installert. Med en prioritet mellom 100 og 500, vil pakken bare installeres når det ikke finnes noen annen nyere versjon installert, eller er tilgjengelig i en annen distribusjon. En pakke med prioritet mellom 501 og 990 vil kun installeres hvis det ikke er noen nyere versjon installert eller tilgjengelig i distribusjonen det gjelder. Med en prioritet mellom 990 og 1000, vil pakken bli installert, bortsett fra hvis den installerte versjonen er nyere. En prioritet høyere enn 1000 vil alltid føre til installasjon av pakken, selv om det tvinger APT til å nedgradere til en eldre versjon.
			</div><div
            class="para">
				Når APT sjekker <code
              class="filename">/etc/apt/preferences</code>, tar den først hensyn til de bestemte oppføringer (ofte de som spesifiserer den aktuelle pakken), deretter de mer generiske (inkludert for eksempel alle pakkene i en distribusjon). Hvis flere generiske oppføringer finnes, brukes det første treffet. De tilgjengelige utvalgskriteriene inkluderer pakkens navn og kilden den kommer fra. Hver pakkekilde identifiseres av informasjonen i <code
              class="filename">Release</code>-filen som APT laster ned sammen med <code
              class="filename">Packages</code>-filene. Den angir opprinnelsen (vanligvis «Debian» for pakker fra offisielle speil, men det kan også være en persons eller en organisasjons navn for tredjeparts kodelagre). Den gir også navnet på distribusjonen (vanligvis <span
              class="distribution distribution">Stable</span>, <span
              class="distribution distribution">Testing</span>, <span
              class="distribution distribution">Unstable</span>, eller <span
              class="distribution distribution">Experimental</span> for standard distribusjoner levert av Debian) sammen med versjonen (for eksempel 8 for Debian <span
              class="distribution distribution">Jessie</span>). La oss se på syntaksen i noen realistiske casestudier med denne mekanismen.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KONKRET SAK</em></span> Prioritering av <span
                        class="distribution distribution">experimental</span></strong></p></div></div></div><a
              id="id-1.9.11.11.15.2"
              class="indexterm"></a><div
              class="para">
				Hvis du listet <span
                class="distribution distribution">Experimental</span> i din <code
                class="filename">sources.list</code>-fil, vil de tilsvarende pakker nesten aldri bli installert fordi prioritert standard APT er 1. Dette er selvfølgelig et eget tilfelle, designet for å holde brukerne fra feilaktig å installere <span
                class="distribution distribution">Experimental</span>-pakker. Pakkene kan bare bli installert ved å skrive <code
                class="command">aptitude install <em
                  class="replaceable">pakke</em>/experimental</code> - Brukere som skriver denne kommandoen må bare være klar over risikoene de tar. Det er fremdeles mulig (selv om <span
                class="emphasis"><em>ikke</em></span> er anbefalt) å behandle pakker i <span
                class="distribution distribution">Experimental</span> på samme måte som de i andre distribusjoner ved å gi dem en prioritering på 500. Dette gjøres med en egen oppføring i <code
                class="filename">/etc/apt/preferences</code>:
			</div><div
              class="informalexample"><pre
                class="programlisting">Package: *
Pin: release a=experimental
Pin-Priority: 500</pre></div></div><div
            class="para">
				La oss anta at du bare vil bruke pakker fra den stabile versjonen av Debian. De som leveres i andre versjoner bør ikke installeres med mindre det eksplisitt blir bedt om det. Du kan skrive inn følgende i <code
              class="filename">/etc/apt/preferences</code>-filen:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: *
Pin: release a=stable
Pin-Priority: 900

Package: *
Pin: release o=Debian
Pin-Priority: -10</pre></div><div
            class="para">
				<code
              class="literal">a=stable</code> definerer navnet på den valgte distribusjonen. <code
              class="literal">o=Debian</code> begrenser utvalget til pakker som kommer fra «Debian».
			</div><div
            class="para">
				La oss nå anta at du har en tjener med flere lokale programmer som støtter seg på versjon 5.14 av Perl, og at du ønsker å sikre at oppgraderinger ikke vil installere en annen versjon av den. Da kan du skrive inn det følgende:
			</div><div
            class="informalexample"><pre
              class="programlisting">Package: perl
Pin: version 5.14*
Pin-Priority: 1001</pre></div><div
            class="para">
				Referansedokumentasjonen for denne konfigurasjonsfilen er tilgjengelig på manualsiden <span
              class="citerefentry"><span
                class="refentrytitle">apt_preferences</span>(5)</span>, som du kan vise med <code
              class="command">man apt_preferences</code>.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> Kommentarer i <code
                        class="filename">/etc/apt/preferences</code></strong></p></div></div></div><a
              id="id-1.9.11.11.22.2"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.3"
              class="indexterm"></a><a
              id="id-1.9.11.11.22.4"
              class="indexterm"></a><div
              class="para">
				Det er ingen offisiell syntaks for å sette kommentarer i <code
                class="filename">/etc/apt/preferences</code>-filen, men enkelte tekstbeskrivelser kan ordnes ved å sette en eller flere «<code
                class="literal">Explanation</code>»-felter ved starten av hver oppføring:
			</div><div
              class="informalexample"><pre
                class="programlisting">Explanation: The package xserver-xorg-video-intel provided
Explanation: in experimental can be used safely
Package: xserver-xorg-video-intel
Pin: release a=experimental
Pin-Priority: 500
</pre></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.apt-mix-distros"></a>6.2.6. Å arbeide med flere distribusjoner</h3></div></div></div><div
            class="para">
				Når <code
              class="command">apt</code> er et så fantastisk verktøy, er det fristende å plukke pakker som kommer fra andre distribusjoner. For eksempel, etter å ha installert et <span
              class="distribution distribution">Stable</span>-system, ønsker du kanskje å prøve ut en programvarepakke som finnes i <span
              class="distribution distribution">Testing</span>, eller <span
              class="distribution distribution">Unstable</span> uten å avvike for mye fra systemets opprinnelige tilstand.
			</div><div
            class="para">
				Selv om du noen ganger vil støte på problemer mens du mikser pakker fra forskjellige distribusjoner, håndterer <code
              class="command">apt</code> slik sameksistens veldig godt, og begrenser risiko svært effektivt. Den beste måten for å fortsette er å liste opp alle distribusjoner som brukes i <code
              class="filename">/etc/apt/sources.list</code> (noen vil alltid sette inn de tre distribusjonene, men husk at <span
              class="distribution distribution">Unstable</span> er reservert for erfarne brukere), og for å definere din referansedistribusjon med <code
              class="literal">APT::Default-Release</code>-parameter (se <a
              class="xref"
              href="sect.apt-get.html#sect.apt-upgrade">Seksjon 6.2.3, «Oppgradering av systemet»</a>).
			</div><div
            class="para">
				La oss anta at <span
              class="distribution distribution">Stable</span> er din referansedistribusjon med at <span
              class="distribution distribution">Testing</span> og <span
              class="distribution distribution">Unstable</span> også er listet i din <code
              class="filename">sources.list</code>-fil. I dette tilfellet kan du bruke <code
              class="command">apt install <em
                class="replaceable">pakke</em>/testing</code> til å installere en pakke fra <span
              class="distribution distribution">Testing</span>. Hvis installasjonen mislykkes på grunn av noen ikke-tilfredsstilte avhengigheter, la den løse disse avhengighetene innenfor <span
              class="distribution distribution">Testing</span> ved å legge til <code
              class="literal">-t testing</code>-parameteret. Det samme gjelder selvsagt <span
              class="distribution distribution">Unstable</span>.
			</div><div
            class="para">
				I denne situasjonen blir oppgraderingene (<code
              class="command">upgrade</code> og <code
              class="command">full-upgrade</code>) gjort innenfor <span
              class="distribution distribution">Stable</span>, bortsett fra for pakker som allerede er oppgradert til en annen distribusjon: De vil følge oppdateringene som er tilgjengelige i andre distribusjoner. Vi forklarer denne virkemåten ved hjelp av standardprioriteringene satt av APT nedenfor. Ikke nøl med å bruke <code
              class="command">apt-cache policy</code> (se sidefelt <a
              class="xref"
              href="sect.apt-get.html#sidebar.apt-cache-policy"><span
                class="emphasis"><em>TIP</em></span> <code
                class="command">apt-cache policy</code></a>) for å verifisere de gitte prioriteringene.
			</div><div
            class="para">
				Alt er basert på det faktum at APT bare vurderer pakker med høyere eller lik versjon enn den installerte (forutsatt at <code
              class="filename">/etc/apt/preferences</code> ikke har vært brukt til å tvinge prioriteter høyere enn 1000 for noen pakker).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.apt-cache-policy"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIP</em></span> <code
                        class="command">apt-cache policy</code></strong></p></div></div></div><div
              class="para">
				For å få en bedre forståelse av prioritetsmekanismen nøl ikke med å kjøre <code
                class="command">apt-cache policy</code> for å vise standardprioriteten for hver pakkekilde. Du kan også bruke <code
                class="command">apt-cache policy <em
                  class="replaceable">pakke</em></code> for å vise prioriteringen for alle tilgjengelige versjoner av en gitt pakke.
			</div></div><div
            class="para">
				La oss anta at du har installert versjon 1 av en første pakke fra <span
              class="distribution distribution">Stable</span>, og at versjon 2 og 3 respektivt er tilgjengelig i <span
              class="distribution distribution">Testing</span> og <span
              class="distribution distribution">Unstable</span>. Den installerte versjonen har en prioritet på 100 mens versjonen som ligger i <span
              class="distribution distribution">Stable</span> (akkurat den samme) har en prioritet på 990 (fordi den er en del av målet utgivelse (target release)). Pakker i <span
              class="distribution distribution">Testing</span>, og <span
              class="distribution distribution">Unstable</span> har en prioritet på 500 (standardprioriteten til en ikke-installert versjon). Vinneren er da versjon 1 med en prioritet på 990. Pakken «står i <span
              class="distribution distribution">Stable</span>».
			</div><div
            class="para">
				La oss ta et eksempel fra en annen pakke som versjon 2 er installert fra <span
              class="distribution distribution">Testing</span>. Version 1 er tilgjengelig i <span
              class="distribution distribution">Stable</span>, og versjon 3 i <span
              class="distribution distribution">Unstable</span>. Versjon 1 (med prioritet 990 - altså lavere enn 1000) forkastes fordi det er lavere enn den installerte versjonen. Bare versjon 2 og 3 står igjen, begge med prioritet 500. Konfrontert med dette alternativet, velger APT den nyeste versjonen, den ene fra <span
              class="distribution distribution">Unstable</span>. Hvis du ikke ønsker en pakke installert fra <span
              class="distribution distribution">Testing</span> til å flytte til <span
              class="distribution distribution">Unstable</span>, må du tildele en prioritet lavere enn 500 (490 for eksempel) til pakker som kommer fra <span
              class="distribution distribution">Unstable</span>. Du kan endre <code
              class="filename">/etc/apt/preferences</code> med denne effekten:
			</div><pre
            class="programlisting">Package: *
Pin: release a=unstable
Pin-Priority: 490</pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.automatic-tracking"></a>6.2.7. Å finne installerte pakker automatisk</h3></div></div></div><div
            class="para">
				En av de svært viktige funksjonene i <code
              class="command">apt</code> er sporing av pakker som bare er installert ved avhengigheter. Disse pakkene kalles «automatiske», og inkluderer for eksempel ofte biblioteker.
			</div><div
            class="para">
				Med denne informasjonen, når pakker er fjernet, kan de pakkeansvarlige lage en liste over automatiske pakker som ikke lenger trengs (fordi det ikke er noen «manuelt installerte» pakker som er avhengig av dem). <code
              class="command">apt-get autoremove</code> vil kvitte seg med disse pakkene. <code
              class="command">aptitude</code> og <code
              class="command">apt</code> har ikke denne kommandoen: Den første fordi den fjerner dem automatisk så snart de er identifisert, og sistnevnte trolig fordi brukeren ikke skal måtte kjøre en slik kommando manuelt. I alle tilfelle, verktøyene viser en klar melding som lister de berørte pakkene.
			</div><a
            id="id-1.9.11.13.4"
            class="indexterm"></a><a
            id="id-1.9.11.13.5"
            class="indexterm"></a><a
            id="id-1.9.11.13.6"
            class="indexterm"></a><a
            id="id-1.9.11.13.7"
            class="indexterm"></a><div
            class="para">
				Det er en god vane å merke med automatisk, pakker som du ikke trenger direkte, slik at de fjernes automatisk når de ikke er nødvendige lenger. <code
              class="command">apt-mark auto <em
                class="replaceable">pakke</em></code> vil merke en gitt pakke som automatisk, mens <code
              class="command">apt-mark manual <em
                class="replaceable">pakke</em></code> gjør det motsatte. <code
              class="command">aptitude markauto</code> og <code
              class="command">aptitude unmarkauto</code> virker på samme måte selv om de tilbyr flere funksjoner for å merke mange pakker på en gang (se <a
              class="xref"
              href="sect.apt-frontends.html#sect.aptitude">Seksjon 6.4.1, «<code
                class="command">aptitude</code>»</a>). Det konsollbaserte brukergrensesnittet til <code
              class="command">aptitude</code> gjør det også enkelt å gjennomgå det «automatiske flagget» hos mange pakker.
			</div><a
            id="id-1.9.11.13.9"
            class="indexterm"></a><div
            class="para">
				Folk vil kanskje vite hvorfor en automatisk installert pakke er til stede på systemet. For å få denne informasjonen fra kommandolinjen kan du bruke <code
              class="command">aptitude why <em
                class="replaceable">pakke</em></code> (<code
              class="command">apt</code> og <code
              class="command">apt-get</code> har ingen tilsvarende funksjon):
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>aptitude why python-debian
</code></strong><code
              class="computeroutput">i   aptitude         Recommends apt-xapian-index         
i A apt-xapian-index Depends    python-debian (&gt;= 0.1.15)
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIV</em></span> <code
                        class="command">deborphan</code> og <code
                        class="command">debfoster</code></strong></p></div></div></div><a
              id="id-1.9.11.13.12.2"
              class="indexterm"></a><a
              id="id-1.9.11.13.12.3"
              class="indexterm"></a><div
              class="para">
				Da det ikke var mulig for <code
                class="command">apt</code>, <code
                class="command">apt-get</code> og <code
                class="command">aptitude</code> å spore automatiske pakker, var det to verktøy som produserte lister over unødvendige pakker: <code
                class="command">deborphan</code> og <code
                class="command">debfoster</code>.
			</div><div
              class="para">
				<code
                class="command">deborphan</code> er det mest elementære av begge. Den skanner rett og slett <code
                class="literal">libs</code> og <code
                class="literal">oldlibs</code>-seksjonene (i fravær av tilleggsveiledninger) på jakt etter installerte pakker som ingen andre pakke er avhengig av. Den resulterende listen kan da tjene som grunnlag for å fjerne unødvendige pakker.
			</div><div
              class="para">
				<code
                class="command">debfoster</code> har en mer forseggjort tilnærming, svært lik APTs: Den opprettholder en liste med pakker som helt eksplisitt er installert, og husker hvilke pakker som er virkelig nødvendig mellom hvert kall. Hvis nye pakker vises på systemet, og hvis <code
                class="command">debfoster</code> ikke kjenner dem som nødvendige pakker, vil de bli vist på skjermen sammen med en liste over avhengighetene sine. Programmet tilbyr deretter et valg: Fjern pakken (eventuelt sammen med dem som er avhengige av den), merk den som eksplisitt nødvendig, eller ignorer den midlertidig.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="apt.html"><strong>Forrige</strong>Kapittel 6. Vedlikehold og oppdateringer; ATP-ver...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.apt-cache.html"><strong>Neste</strong>6.3. Kommandoen apt-cache</a></li></ul></body></html>
