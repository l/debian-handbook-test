<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.2. Ekstern innlogging</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Systemoppstart, Initskript, SSH, Telnet, Rettigheter, Tillatelser, Overvåking, Inetd, Cron, Sikkerhetskopiering, Hot-plugging, PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="Debian-administratorens håndbok" /><link
        rel="up"
        href="unix-services.html"
        title="Kapittel 9. Unix-tjenester" /><link
        rel="prev"
        href="unix-services.html"
        title="Kapittel 9. Unix-tjenester" /><link
        rel="next"
        href="sect.rights-management.html"
        title="9.3. Å håndtere rettigheter" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.remote-login.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="unix-services.html"><strong>Forrige</strong></a></li><li
          class="home">Debian-administratorens håndbok</li><li
          class="next"><a
            accesskey="n"
            href="sect.rights-management.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.remote-login"></a>9.2. Ekstern innlogging</h2></div></div></div><div
          class="para">
			Det er viktig for en administrator å kunne koble seg til en datamaskin utenfra. Tjenere, innesperret i sitt eget rom, er sjelden utstyrt med permanente tastaturer og skjermer - men de er koblet til nettverket.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>TILBAKE TIL BASIS</em></span> Klient, tjener</strong></p></div></div></div><a
            id="id-1.12.5.3.2"
            class="indexterm"></a><a
            id="id-1.12.5.3.3"
            class="indexterm"></a><div
            class="para">
			Et system hvor flere prosesser kommuniserer med hverandre, blir ofte beskrevet med «klient/tjener» metaforer. Tjeneren er programmet som tar forespørsler som kommer fra en klient, og utfører dem. Det er klienten som styrer operasjonene, tjeneren tar ikke noen egne initiativ.
		</div></div><a
          id="id-1.12.5.4"
          class="indexterm"></a><a
          id="id-1.12.5.5"
          class="indexterm"></a><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.ssh"></a>9.2.1. Sikker ekstern innlogging: SSH</h3></div></div></div><a
            id="id-1.12.5.6.2"
            class="indexterm"></a><a
            id="id-1.12.5.6.3"
            class="indexterm"></a><div
            class="para">
				<span
              class="emphasis"><em>SSH</em></span> (Secure SHell)-protokollen ble utformet med tanke på sikkerhet og pålitelighet. Tilkoblinger som bruker SSH er sikre: Partneren er godkjent, og all datautveksling er kryptert.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>KULTUR</em></span> Telnet og RSH er foreldet</strong></p></div></div></div><a
              id="id-1.12.5.6.5.2"
              class="indexterm"></a><a
              id="id-1.12.5.6.5.3"
              class="indexterm"></a><div
              class="para">
				Før SSH var <span
                class="emphasis"><em>Telnet</em></span> og <span
                class="emphasis"><em>RSH</em></span> de viktigste verktøyene for ekstern innlogging. Nå er de i stor grad foreldet, og skal ikke lenger brukes selv om Debian fortsatt har dem med.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ORDFORRÅD</em></span> Autentisering, kryptering</strong></p></div></div></div><div
              class="para">
				Når du trenger å gi en klient evnen til å utføre eller utløse handlinger på en server, er sikkerhet viktig. Du må sikre identiteten til klienten; dette er autentisering. Denne identiteten består vanligvis av et passord som må holdes hemmelig, ellers kan hvilken som helst skaffe seg passordet. Dette er hensikten med kryptering, som er en form for koding som tillater to systemer å kommunisere konfidensiell informasjon på en offentlig kanal, samtidig som den er beskyttet mot å være lesbar for andre.
			</div><div
              class="para">
				Autentisering og kryptering er ofte nevnt sammen, både fordi de ofte er brukt sammen, og fordi de vanligvis gjennomføres med matematiske begreper som ligner hverandre.
			</div></div><div
            class="para">
				SSH tilbyr også to filoverføringstjenester. <code
              class="command">scp</code> er et kommandolinjeverktøy som kan brukes som <code
              class="command">cp</code>, bortsett fra at hvilken som helst sti til en annen maskin har et prefiks med maskinens navn, etterfulgt av et kolon.
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>scp fil maskin:/tmp/</code></strong></pre><div
            class="para">
				<code
              class="command">sftp</code> er en interaktiv kommando, som svarer til <code
              class="command">ftp</code>. I en enkelt økt kan <code
              class="command">sftp</code> overføre flere filer, og med den er det mulig å manipulere eksterne filer (slette, endre navn, endre tillatelser, etc.).
			</div><a
            id="id-1.12.5.6.10"
            class="indexterm"></a><a
            id="id-1.12.5.6.11"
            class="indexterm"></a><div
            class="para">
				Debian bruker OpenSSH, som er en fri versjon av SSH, som vedlikeholdes av <code
              class="command">OpenBSD</code>-prosjektet (et fritt operativsystem basert på BSD-kjernen, med fokus på sikkerhet), og er en gaffel av den opprinnelige SSH-programvaren utviklet av SSH Communications Security Corp selskapet i Finland. Dette selskapet utviklet opprinnelig SSH som fri programvare, men som til slutt bestemte seg for å fortsette utviklingen under en proprietær lisens. OpenBSD-prosjektet opprettet deretter OpenSSH for å opprettholde en fri versjon av SSH.
			</div><a
            id="id-1.12.5.6.13"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TILBAKE TIL BASIS</em></span> <span
                        class="foreignphrase"><em
                          class="foreignphrase">Fork («gaffel»)</em></span></strong></p></div></div></div><a
              id="id-1.12.5.6.14.2"
              class="indexterm"></a><div
              class="para">
				På programvarefeltet betyr en «gaffel» et nytt prosjekt som starter som en klone av et eksisterende prosjekt, og som vil konkurrere med det. Fra da av vil begge programvarer raskt avvike fra hverandre i nyutvikling. En gaffel er ofte et resultat av uenighet innenfor utviklingsteamet.
			</div><div
              class="para">
				Alternativet til å «gafle» et prosjekt, er et direkte resultat av selve naturen til fri programvare; en gaffel er en sunn hendelse når det muliggjør en videreføring av et prosjekt som fri programvare (for eksempel i tilfelle av lisensendringer). En gaffel, som følge av tekniske eller personlige uoverensstemmelser, er ofte en sløsing med menneskelige ressurser; en annen løsning ville være å foretrekke. Fusjoner av to prosjekter som tidligere gikk gjennom en tidligere gaffel har forekommet.
			</div></div><div
            class="para">
				OpenSSL er delt i to pakker: Klientdelen er i <span
              class="pkg pkg">openssh-client</span>-pakken, og tjeneren er i <span
              class="pkg pkg">openssh-server</span>-pakken. <span
              class="pkg pkg">ssh</span>-meta-pakken er avhengig av begge, og forenkler installeringen av begge (<code
              class="command">apt install ssh</code>).
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.ssh-key-based-auth"></a>9.2.1.1. Nøkkel-basert autentisering</h4></div></div></div><div
              class="para">
					Hver gang noen logger inn over SSH, spør en ekstern tjener om et passord for å autentisere brukeren. Dette kan være problematisk hvis du ønsker å automatisere en tilkobling, eller hvis du bruker et verktøy som krever hyppige forbindelser over SSH. Dette er grunnen til at SSH tilbyr et nøkkelbasert autentiseringssystem.
				</div><div
              class="para">
					Brukeren generer et nøkkelpar på klientmaskinen med <code
                class="command">ssh-keygen -t rsa</code>; den offentlige nøkkelen er lagret i <code
                class="filename">~/.ssh/id_rsa.pub</code>, mens den korresponderende private nøkkel er lagret i <code
                class="filename">~/.ssh/id_rsa</code>. Brukeren bruker så <code
                class="command">ssh-copy-id <em
                  class="replaceable">server</em></code> for å legge til sin offentlige nøkkel til <code
                class="filename">~/.ssh/authorized_keys</code>-filen på tjeneren. Dersom den private nøkkelen ikke var beskyttet med en «adgangsfrase» p å tidspunktet for etableringen, vil alle etterfølgende innlogginger på serveren fungere uten et passord. Ellers må den private nøkkelen dekrypteres hver gang ved å skrive inn passordet. Heldigvis tillater <code
                class="command">ssh-agent</code> oss å holde private nøkler i minnet for å ikke regelmessig måtte taste inn igjen passord. For dette bruker du bare <code
                class="command">ssh-add</code> (en gang per økt), forutsatt at økten allerede er knyttet til en funksjonell forekomst med <code
                class="command">ssh-agent</code>. Debian aktiverer den som standard i grafiske økter, men dette kan deaktiveres ved å endre <code
                class="filename">/etc/X11/Xsession.options</code>. Du kan manuelt starte en konsolløkt med <code
                class="command">eval $(ssh-agent)</code>.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>SIKKERHET</em></span> Beskyttelse av den private nøkkelen</strong></p></div></div></div><div
                class="para">
					Den som har den private nøkkelen, kan logge seg på den kontoen som er konfigurert for det. Dette er grunnen til tilgang til den private nøkkelen er beskyttet av en «adgangsfrase» («passphrase»). Noen som får en kopi av en privat nøkkelfil (for eksempel <code
                  class="filename">~/.ssh/id_rsa</code>), må fremdeles kjenne denne frasen for å kunne bruke den. Denne ekstra beskyttelse er imidlertid ikke uangripelig, og hvis du tror at denne filen har blitt kompromittert, er det best å deaktivere den nøkkelen på datamaskinene der den har blitt installert (ved å fjerne den fra <code
                  class="filename">authorized_keys</code> filer), og erstatte den med en nylig generert nøkkel.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>KULTUR</em></span> OpenSSL feil i Debian <span
                          class="distribution distribution">Etch</span></strong></p></div></div></div><div
                class="para">
					OpenSSL-biblioteket, som i utgangspunktet er tilgjengelig i Debian <span
                  class="distribution distribution">Etch</span>, hadde et alvorlig problem i sin generator for tilfeldige tall (RNG). Faktisk hadde Debians vedlikeholder gjort en endring slik at programmer som bruker den ikke lenger ville generere advarsler når den ble analysert av et testverktøy for minnet som <code
                  class="command">valgrind</code>. Dessverre, denne endringen betydde også at RNG-en bare anvender en entropikilde som korresponderer med prosessantallet (PID), der 32 000 mulige verdier ikke gir tilstrekkelig tilfeldighet. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://www.debian.org/security/2008/dsa-1571">http://www.debian.org/security/2008/dsa-1571</a></div>
				</div><div
                class="para">
					Spesielt når OpenSSL ble brukt til å generere en nøkkel, produserte den alltid en nøkkel i løpet av et visst sett av hundretusener av nøkler (32 000 multiplisert med et lite antall nøkkellengder). Dette påvirket SSH-nøkler, SSL-nøkler og X.509-sertifikater som brukes av mange programmer, som OpenVPN. En inntrenger trengte bare å prøve alle nøklene for å få uautorisert tilgang. For å redusere virkningen av problemet ble SSH-nissen modifisert til å nekte problematiske nøkler som er oppført i <span
                  class="pkg pkg">openssh-blacklist</span>- og <span
                  class="pkg pkg">openssh-blacklist-extra</span>-pakkene. I tillegg tillater <code
                  class="command">ssh-vulnkey</code>-kommandoen identifisering av mulige kompromitterte nøkler i systemet.
				</div><div
                class="para">
					En grundigere analyse av denne hendelsen bringer frem i lyset at det er et resultat av flere (små) problemer, både i OpenSSL-prosjektet og med Debian-pakkevedlikeholderen. Et mye brukt bibliotek som OpenSSL skal - uten endringer - ikke generere advarsler under testing av <code
                  class="command">valgrind</code>. Videre bør koden (spesielt de delene som er så følsomme som RNG) bli bedre kommentert for å forhindre slike feil. På Debians side, ønsket vedlikeholderen å validere modifikasjonene med OpenSSLs utviklere, men forklarte ganske enkelt endringene, uten å legge ut den korresponderende programfiksen til gjennomgang, og unnlot å nevne sin rolle i Debian. Endelig, vedlikeholdsvalgene var sub-optimale: Endringene i den opprinnelige koden ble ikke klart dokumentert; alle modifikasjoner ble effektivt lagret i en Subversjon kildebrønn, men de endte opp med alt samlet i en enkelt programfiks under oppretting av kildepakken.
				</div><div
                class="para">
					Det er vanskelig under slike forhold å finne de korrigerende tiltak for å hindre gjentakelse av slike hendelser. Denne leksen ga her den lærdommen at alle divergenser Debian introduserer i oppstrøms programvare, må begrunnes, dokumenteres, sendes til oppstrømsprosjektetet når det er mulig, og publiseres vidt. Det er ut fra dette perspektivet at det nye kildepakkeformatet («3.0 (quilt)») og webtjenesten for Debian-kilder ble utviklet. <div
                  xmlns=""
                  class="url">→ <a
                    xmlns="http://www.w3.org/1999/xhtml"
                    href="http://sources.debian.net">http://sources.debian.net</a></div>
				</div></div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.ssh-x11"></a>9.2.1.2. Ved hjelp av Remote X11-programmer</h4></div></div></div><div
              class="para">
					SSH-protokollen tillater videresending av grafiske data («X11» sesjon, fra navnet på det mest utbredte grafiske systemet i Unix); tjeneren holder da en egen kanal for disse dataene. Spesielt kan et grafisk program, kjørt eksternt, vises på X.org-tjeneren til den lokale skjermen, og hele økten (inndata og visning) vil være sikker. Ettersom denne funksjonen tillater at eksterne programmer forstyrrer det lokale systemet, er det deaktivert som standard. Du kan aktivere det ved å angi <code
                class="literal">X11Forwarding yes</code> i tjenerkonfigurasjonsfilen (<code
                class="filename">/etc/ssh/sshd_config</code>). Avslutningsvis må brukeren også be om det ved å legge <code
                class="literal">-X</code>-valget til <code
                class="command">ssh</code>-kommandolinjen.
				</div></div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="sect.ssh-port-forwarding"></a>9.2.1.3. Å lage krypterte tunneler med portvideresending (Port Forwarding)</h4></div></div></div><a
              id="id-1.12.5.6.18.2"
              class="indexterm"></a><div
              class="para">
					Dets <code
                class="literal">-R</code> og <code
                class="literal">-L</code>-valg tillater <code
                class="command">ssh</code> å lage «krypterte tunneler» mellom to maskiner, sikker videresending til en lokal TCP-port (se sidestolpe <a
                class="xref"
                href="network-infrastructure.html#sidebar.tcp-udp"><span
                  class="emphasis"><em>TILBAKE TIL BASIS</em></span> TCP/UDP</a>) til en ekstern maskin og omvendt.
				</div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ORDFORRÅD</em></span> Tunnel</strong></p></div></div></div><a
                id="id-1.12.5.6.18.4.2"
                class="indexterm"></a><a
                id="id-1.12.5.6.18.4.3"
                class="indexterm"></a><div
                class="para">
					Internettet, og de fleste lokalnett som er koblet til det, opererer i pakke-modus, og ikke i tilkoblet modus. Dette betyr at en pakke utstedt fra en datamaskin til en annen, kommer til å bli oppholdt på flere mellomliggende rutere for å finne veien til sin destinasjon. Du kan fortsatt simulere en tilkoblet operasjon der strømmen er innkapslet i normale IP-pakker. Disse pakkene følger sin vanlige rute, men strømmen blir rekonstruert uendret på bestemmelsesstedet. Vi kaller dette en «tunnel», tilsvarende en veitunnel der biler kjører direkte fra inngangen (inndata) til utgangen (utdata) uten å møte noen kryss, i motsetning til en bane på overflaten, som ville innebære kryss og skiftende retninger.
				</div><div
                class="para">
					Du kan bruke denne muligheten til å legge kryptering til tunnelen: Strømmen som flommer igjennom er da ugjenkjennelig fra utsiden, men den blir levert dekryptert ved utgangen av tunnelen.
				</div></div><div
              class="para">
					<code
                class="command">ssh -L 8000:server:25 intermediary</code> etablerer en SSH-økt med <em
                class="replaceable">intermediary</em>-verten, og lytter til lokal port 8000 (se <a
                class="xref"
                href="sect.remote-login.html#figure.ssh-L">Figur 9.3, «Videresende en lokal port med SSH»</a>). For alle tilkoblinger som etableres til denne porten, vil <code
                class="command">ssh</code> initiere en forbindelse fra <em
                class="replaceable">intermediary</em>-datamaskinen til port 25 på <em
                class="replaceable">server</em>-tjeneren, og vil binde begge tilknytninger sammen.
				</div><div
              class="para">
					<code
                class="command">ssh -R 8000:server:25 intermediary</code> etablerer også en SSH-økt til <em
                class="replaceable">intermediary</em>-datamaskinen, men det er på denne maskinen at <code
                class="command">ssh</code> lytter til port 8000 (se <a
                class="xref"
                href="sect.remote-login.html#figure.ssh-R">Figur 9.4, «Videresende en ekstern port med SSH»</a>). Alle tilknytninger som er etablert til denne porten vil få <code
                class="command">ssh</code> til å åpne en tilknytning fra den lokale maskinen til port 25 hos <em
                class="replaceable">server</em>-en, og til å binde begge tilknytninger sammen.
				</div><div
              class="para">
					I begge tilfeller er forbindelsene lagt til port 25 på <em
                class="replaceable"> 1server</em>-verten, og passerer gjennom SSH-tunnelen som er etablert mellom den lokale maskinen og <em
                class="replaceable"> 3intermediary</em>-maskinen. I det første tilfellet er inngangen til tunnelen lokal port 8000, og dataene beveger seg mot <em
                class="replaceable">intermediary</em>-maskinen før de blir dirigert videre til <em
                class="replaceable">server</em>en i det «offentlige» nettverket. I det andre tilfellet er inngangen og utgangen i tunnelen reversert: Inngangen er port 8000 på <em
                class="replaceable">intermediary</em>-maskinen, og utdataene er på den lokale verten, og dataene blir deretter sendt til <em
                class="replaceable">server</em>-en. I praksis er tjeneren vanligvis enten den lokale maskinen eller mellomstasjonen. På den måten sikrer SSH forbindelsen fra den ene enden til den andre.
				</div><div
              class="figure"><a
                xmlns=""
                id="figure.ssh-L"></a><div
                class="figure-contents"><div
                  class="mediaobject"><img
                    src="images/ssh-L.png"
                    alt="Videresende en lokal port med SSH" /></div></div><p
                class="title"><strong>Figur 9.3. Videresende en lokal port med SSH</strong></p></div><div
              class="figure"><a
                xmlns=""
                id="figure.ssh-R"></a><div
                class="figure-contents"><div
                  class="mediaobject"><img
                    src="images/ssh-R.png"
                    alt="Videresende en ekstern port med SSH" /></div></div><p
                class="title"><strong>Figur 9.4. Videresende en ekstern port med SSH</strong></p></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.remote-desktops"></a>9.2.2. Å bruke eksterne grafiske skrivebord</h3></div></div></div><div
            class="para">
				VNC (Virtual Network Computing) tillater ekstern tilgang til grafiske skrivebord.
			</div><a
            id="id-1.12.5.7.3"
            class="indexterm"></a><a
            id="id-1.12.5.7.4"
            class="indexterm"></a><a
            id="id-1.12.5.7.5"
            class="indexterm"></a><a
            id="id-1.12.5.7.6"
            class="indexterm"></a><a
            id="id-1.12.5.7.7"
            class="indexterm"></a><div
            class="para">
				Dette verktøyet er mest brukt for teknisk assistanse; administratoren kan se feil som brukeren står overfor, og vise dem hva det er riktig å gjøre, uten å måtte stå ved siden av dem.
			</div><a
            id="id-1.12.5.7.9"
            class="indexterm"></a><a
            id="id-1.12.5.7.10"
            class="indexterm"></a><a
            id="id-1.12.5.7.11"
            class="indexterm"></a><div
            class="para">
				Først må brukeren autorisere deling av sin sesjon. GNOMEs grafiske skrivebordsmiljø i <span
              class="distribution distribution">Jessie</span> omfatter dette alternativet i sitt konfigurasjonspanel (i motsetning til tidligere versjoner av Debian, der brukeren måtte installere og kjøre <code
              class="command">vino</code>). KDE krever fortsatt at <code
              class="command">krfb</code> brukes for å tillate deling av en eksisterende økt over VNC. For andre grafiske skrivebordsmiljøer tjener <code
              class="command">x11vnc</code>-kommandoen (fra Debian-pakken med samme navn) samme formål: Du kan gjøre det tilgjengelig for brukeren med et eksplisitt ikon.
			</div><a
            id="id-1.12.5.7.13"
            class="indexterm"></a><a
            id="id-1.12.5.7.14"
            class="indexterm"></a><a
            id="id-1.12.5.7.15"
            class="indexterm"></a><a
            id="id-1.12.5.7.16"
            class="indexterm"></a><div
            class="para">
				Når den grafiske økten er gjort tilgjengelig av VNC, må administratoren koble den til med en VNC-klient. GNOME har <code
              class="command">vinagre</code> og <code
              class="command">remmina</code> til det, mens KDE innkluderer <code
              class="command">krdc</code> (i menyen hos <span
              class="guimenu"><strong>K</strong></span> → <span
              class="guisubmenu"><strong>Internet</strong></span> → <span
              class="guimenuitem"><strong>Tilkobling til et eksternt system (Remote Desktop Client)</strong></span>). Det er andre VNC-klienter som bruker kommandolinjen, for eksempel <code
              class="command">xvnc4viewer</code> i Debian pakken med samme navn. Når du er tilkoblet, kan administratoren se hva som skjer, arbeide eksternt på maskinen, og vise brukeren hvordan man går frem.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SIKKERHET</em></span> VNC over SSH</strong></p></div></div></div><a
              id="id-1.12.5.7.18.2"
              class="indexterm"></a><div
              class="para">
				Hvis du ønsker å koble til med VNC, og du ikke vil at dataene sendes i klartekst på nettverket, er det mulig å kapsle dataene i en SSH-tunnel (se <a
                class="xref"
                href="sect.remote-login.html#sect.ssh-port-forwarding">Seksjon 9.2.1.3, «Å lage krypterte tunneler med portvideresending (Port Forwarding)»</a>). Du må bare vite at VNC bruker port 5900 som standard for det første skjermbildet (kalt «localhost:0»), 5901 for den andre (kalt «localhost:1»), osv.
			</div><div
              class="para">
				<code
                class="command">ssh -L localhost:5901:localhost:5900 -N -T <em
                  class="replaceable">maskin</em></code>-kommandoen oppretter en tunnel mellom lokal port 5901 i lokalvertgrensesnittet og til 5900-porten hos <em
                class="replaceable">maskin</em>-verten. Den første «lokalverten» begrenser SSH til å lytte bare til det grensesnittet på den lokale maskinen. Den andre «lokalverten» indikerer grensesnittet på den eksterne maskinen som skal motta nettverkstrafikk til «localvertst:5901». Dermed vil <code
                class="command">vncviewer localhost:1</code> knytte VNC-klienten til den eksterne skjermen, selv om du anga navnet på den lokale maskinen.
			</div><div
              class="para">
				Når VNC-sesjonen er lukket, må du huske å stenge tunnelen ved også å avslutte den tilsvarende SSH-økten.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TILBAKE TIL BASIS</em></span> Display manager</strong></p></div></div></div><a
              id="id-1.12.5.7.19.2"
              class="indexterm"></a><a
              id="id-1.12.5.7.19.3"
              class="indexterm"></a><a
              id="id-1.12.5.7.19.4"
              class="indexterm"></a><a
              id="id-1.12.5.7.19.5"
              class="indexterm"></a><a
              id="id-1.12.5.7.19.6"
              class="indexterm"></a><a
              id="id-1.12.5.7.19.7"
              class="indexterm"></a><div
              class="para">
				<code
                class="command">gdm3</code>, <code
                class="command">kdm</code>, <code
                class="command">lightdm</code>, og <code
                class="command">xdm</code> er Display Managere. De tar kontroll over det grafiske grensesnittet kort etter oppstart for å gi brukeren et innloggingsbilde. Når brukeren har logget inn, kjøres de programmene som trengs for å starte en grafisk arbeidsøkt .
			</div></div><div
            class="para">
				VNC fungerer også for mobile brukere, eller næringslivsledere, som av og til trenger å logge inn hjemmefra for å få tilgang til et eksternt skrivebord lik det de bruker på jobben. Konfigurasjonen av en slik tjeneste er mer komplisert: Du må først installere<span
              class="pkg pkg">vnc4server</span>-pakken, endre oppsettet på skjermviseren til å godta <code
              class="literal">XDMCP Query</code>-forespørsler (for <code
              class="command">gdm3</code>. Dette kan gjøres ved å legge til <code
              class="literal">Enable=true</code> i «xdmcp»-seksjonen til <code
              class="filename">/etc/gdm3/daemon.conf</code>), og til slutt, starte VNC-tjeneren med <code
              class="command">inetd</code> slik at en økt starter automatisk når en bruker prøver å logge seg inn. For eksempel kan du legge til denne linjen til <code
              class="filename">/etc/inetd.conf</code>:
			</div><pre
            class="programlisting">5950  stream  tcp  nowait  nobody.tty  /usr/bin/Xvnc Xvnc -inetd -query localhost -once -geometry 1024x768 -depth 16 securitytypes=none</pre><div
            class="para">
				Å omdirigere innkomne forbindelser til skjermhåndterer, løser problemet med autentisering, fordi bare brukere med lokale kontoer vil passere innloggingsskjermen <code
              class="command">gdm3</code> login screen (eller tilsvarende <code
              class="command">kdm</code>, <code
              class="command">xdm</code>, etc.). Ettersom denne operasjonen tillater flere samtidige pålogginger uten problem (forutsatt at serveren er kraftig nok), kan den også brukes til å tilby komplette skrivebord til mobile brukere (eller til mindre kraftige stasjonære systemer, konfigurert som tynne klienter). Brukere logger bare inn på serverens skjerm med <code
              class="command">vncviewer <em
                class="replaceable">server</em>:50</code>, fordi den benyttede porten er 5950.
			</div><a
            id="id-1.12.5.7.23"
            class="indexterm"></a></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="unix-services.html"><strong>Forrige</strong>Kapittel 9. Unix-tjenester</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.rights-management.html"><strong>Neste</strong>9.3. Å håndtere rettigheter</a></li></ul></body></html>
