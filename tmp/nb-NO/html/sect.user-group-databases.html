<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.4. Bruker og gruppers databaser</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-nb-NO-1.0-1" /><meta
        name="keywords"
        content="Oppsett, Lokalisering, Localer, Nettverk, Navneoppslag, Brukere, Grupper, Kontoer, Kommandolinjetolker, Skall, Utskrift, Oppstartslaster, Kjernekompilering" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="basic-configuration.html"
        title="Kapittel 8. Grunnleggende oppsett: Nettverk, kontoer, utskrift ..." /><link
        rel="prev"
        href="sect.hostname-name-service.html"
        title="8.3. Sette vertsnavnet, og sette opp navntjenesten" /><link
        rel="next"
        href="sect.creating-accounts.html"
        title="8.5. Å lage kontoer" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.user-group-databases.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.user-group-databases"></a>8.4. Bruker og gruppers databaser</h2></div></div></div><a
          id="id-1.11.8.2"
          class="indexterm"></a><a
          id="id-1.11.8.3"
          class="indexterm"></a><a
          id="id-1.11.8.4"
          class="indexterm"></a><a
          id="id-1.11.8.5"
          class="indexterm"></a><div
          class="para">
			Listen av brukere er vanligvis lagret i <code
            class="filename">/etc/passwd</code>-filen, mens <code
            class="filename">/etc/shadow</code>-filen lagrer krypterte passord. Begge er tekstfiler, i et relativt enkelt format, som kan leses og modifiseres med en tekstredigerer. Hver bruker er oppført der på en linje med flere felt atskilt med et kolon («<code
            class="literal">:</code>»).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>MERK</em></span> Redigere systemfiler</strong></p></div></div></div><div
            class="para">
			Systemfilene, som er nevnt i dette kapitlet, er alle rene tekstfiler, og kan redigeres med en tekstredigerer. Tatt i betraktning betydningen deres for kjernesystemets funksjonalitet, er det alltid en god idé å ta ekstra forholdsregler når du redigerer systemfiler. Først, lag alltid en kopi eller backup av en systemfil før du åpner eller endrer den. For det andre, på tjenere eller maskiner der mer enn én person som potensielt kan få tilgang til samme fil samtidig, ta ekstra forholdsregler for å beskytte filen mot å bli ødelagt.
		</div><div
            class="para">
			For dette formålet er det nok å bruke <code
              class="command">vipw</code>-kommandoen for å redigere <code
              class="filename">/etc/passwd</code>-filen, eller <code
              class="command">vigr</code> for å redigere <code
              class="filename">/etc/group</code>. Disse kommandoene låser den aktuelle filen før du kjører tekstredigereren (<code
              class="command">vi</code> som standard, om ikke <code
              class="varname">EDITOR</code> miljøvariabelen har blitt endret). <code
              class="literal">-s</code>-valget i disse kommandoene tillater redigering av den overensstemmende <span
              class="foreignphrase"><em
                class="foreignphrase">shadow</em></span>-filen.
		</div></div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>DET GRUNNLEGGENDE</em></span> Crypt, en enveisfunksjon</strong></p></div></div></div><a
            id="id-1.11.8.8.2"
            class="indexterm"></a><div
            class="para">
			<code
              class="command">crypt</code> er en enveisfunksjon som endrer en streng (<code
              class="varname">A</code>) til en annen streng (<code
              class="varname">B</code>) på en måte som <code
              class="varname">A</code> ikke kan avledes fra <code
              class="varname">B</code>. Den eneste måten å identifisere <code
              class="varname">A</code> på er å teste alle mulige verdier, og sjekke hver og en for å avgjøre om funksjonsendringen vil produsere <code
              class="varname">B</code> eller ikke. Den bruker opp til 8 karakterer som inndata (streng <code
              class="varname">A</code>), og genererer en streng på 13, utskriftsbare, ASCII-karakterer (streng <code
              class="varname">B</code>).
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-passwd"></a>8.4.1. Brukerliste: <code
                    class="filename">/etc/passwd</code></h3></div></div></div><div
            class="para">
				Her er listen med feltene i <code
              class="filename">/etc/passwd</code>-filen:
			</div><a
            id="id-1.11.8.9.3"
            class="indexterm"></a><a
            id="id-1.11.8.9.4"
            class="indexterm"></a><a
            id="id-1.11.8.9.5"
            class="indexterm"></a><a
            id="id-1.11.8.9.6"
            class="indexterm"></a><a
            id="id-1.11.8.9.7"
            class="indexterm"></a><a
            id="id-1.11.8.9.8"
            class="indexterm"></a><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						login, for eksempel <code
                    class="literal">rhertzog</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						passord: Dette er et passord kryptert med en enveis funksjon (<code
                    class="command">crypt</code>), som støtter seg på <code
                    class="literal">DES</code>, <code
                    class="literal">MD5</code>, <code
                    class="literal">SHA-256</code>, eller <code
                    class="literal">SHA-512</code>. Spesialverdien «<code
                    class="literal">x</code>» indikerer at det krypterte passordet er lagret i <code
                    class="filename">/etc/shadow</code>;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">uid</code>: unikt nummer som identifiserer hver bruker;
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: unikt nummer for brukerens hovedgruppe (Debian lager en bestemt gruppe for hver bruker som standard);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">GECOS</code>: datafelt som vanligvis inneholder brukerens fulle navn;
					</div></li><li
                class="listitem"><div
                  class="para">
						innloggingsmappe, tildelt til brukeren for oppbevaring av sine personlige filer (miljøvariabelen <code
                    class="varname">$HOME</code> peker generelt hit);
					</div></li><li
                class="listitem"><div
                  class="para">
						program som skal kjøres ved pålogging. Dette er vanligvis en kommandofortolker (skall), som gir brukeren frie hender. Hvis du angir <code
                    class="command">/bin/false</code> (som ikke gjør noe, og returnerer kontrollen umiddelbart), kan ikke brukeren logge inn.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DET GRUNNLEGGENDE</em></span> Unix-gruppe</strong></p></div></div></div><a
              id="id-1.11.8.9.10.2"
              class="indexterm"></a><div
              class="para">
				En Unix-gruppe er en enhet som omfatter flere brukere slik at de enkelt kan dele filer ved hjelp av det integrerte tillatelsesystemet (ved å dra nytte av de samme rettigheter). Man kan også begrense bruken av visse programmer til en bestemt gruppe.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-shadow"></a>8.4.2. Den skjulte og krypterte passordfilen: <code
                    class="filename">/etc/shadow</code></h3></div></div></div><a
            id="id-1.11.8.10.2"
            class="indexterm"></a><a
            id="id-1.11.8.10.3"
            class="indexterm"></a><div
            class="para">
				<code
              class="filename">/etc/shadow</code>-filen inneholder de følgende feltene:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						login;
					</div></li><li
                class="listitem"><div
                  class="para">
						krypterte passord;
					</div></li><li
                class="listitem"><div
                  class="para">
						flere felt håndterer passordopphør.
					</div></li></ul></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DOKUMENTASJON</em></span> <code
                        class="filename">/etc/passwd</code>, <code
                        class="filename">/etc/shadow</code> og <code
                        class="filename">/etc/group</code>-filformater</strong></p></div></div></div><div
              class="para">
				Disse formatene er dokumentert i de følgende manualsidene: <span
                class="citerefentry"><span
                  class="refentrytitle">passwd</span>(5)</span>, <span
                class="citerefentry"><span
                  class="refentrytitle">shadow</span>(5)</span>, og <span
                class="citerefentry"><span
                  class="refentrytitle">group</span>(5)</span>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SIKKERHET</em></span> <code
                        class="filename">/etc/shadow</code>-filsikkerhet</strong></p></div></div></div><div
              class="para">
				<code
                class="filename">/etc/shadow</code>, ulikt dets alter ego, <code
                class="filename">/etc/passwd</code>, kan ikke leses av vanlige brukere. Et hvilket som helst kryptert passord lagret i <code
                class="filename">/etc/passwd</code> kan leses av hvem som helst; en cracker (knekker) kan forsøke å «bryte» (eller avsløre) et passord ved en av flere «brutale» metoder som, enkelt sagt, å gjette på vanlig brukte kombinasjoner av tegn. Dette angrepet - kalt «ordbokangrep» - er ikke lenger mulig på systemer som bruker <code
                class="filename">/etc/shadow</code>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.account-modification"></a>8.4.3. Å modifisere en eksisterende konto eller passord</h3></div></div></div><a
            id="id-1.11.8.11.2"
            class="indexterm"></a><a
            id="id-1.11.8.11.3"
            class="indexterm"></a><a
            id="id-1.11.8.11.4"
            class="indexterm"></a><a
            id="id-1.11.8.11.5"
            class="indexterm"></a><a
            id="id-1.11.8.11.6"
            class="indexterm"></a><div
            class="para">
				Følgende kommandoer tillater endring av informasjonen som er lagret i bestemte felt i brukerdatabasen: <code
              class="command">passwd</code> tillater en vanlig bruker å endre passordet sitt, som igjen oppdaterer <code
              class="filename">/etc/shadow</code>-filen; <code
              class="command">chfn</code> (CHange Full Name), er reservert for superbrukeren (rot), modifiserer <code
              class="literal">GECOS</code>-feltet. <code
              class="command">chsh</code> (CHange SHell) lar brukeren endre sitt innloggingsskall, men tilgang til valgene vil være begrenset til dem som er oppført i <code
              class="filename">/etc/shells</code>; administratoren, på den annen side, er ikke bundet av denne begrensningen, og kan sette skallet til et hvilket som helst program de velger.
			</div><div
            class="para">
				Til slutt, <code
              class="command">chage</code> (CHange AGE)-kommandoen tillater administratoren å endre passordets utløpsinnstillinger (<code
              class="literal">-l <em
                class="replaceable">bruker</em></code>-valget vil liste de gjeldende innstillingene). Du kan også tvinge utløpet for et passord ved å bruke <code
              class="command">passwd -e <em
                class="replaceable">bruker</em></code>-kommandoen, som vil kreve at brukerne endrer sitt passord neste gang de logger inn.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.disabling-account"></a>8.4.4. Deaktivere en konto</h3></div></div></div><a
            id="id-1.11.8.12.2"
            class="indexterm"></a><a
            id="id-1.11.8.12.3"
            class="indexterm"></a><div
            class="para">
				Du trenger kanskje å «deaktivere en konto» (låse ut en bruker), som disiplinærtiltak, i forbindelse med en undersøkelse, eller rett og slett i tilfelle av en langvarig eller definitivt fravær fra en bruker. En deaktivert konto betyr at brukeren ikke kan logge inn eller få tilgang til maskinen. Kontoen er fortsatt intakt på maskinen, og ingen filer eller data blir slettet; Den er simpelthen utilgjengelig. Dette oppnås ved hjelp av kommandoen <code
              class="command">passwd -l <em
                class="replaceable">bruker</em></code> (lock). Å reetablere kontoen er gjort på samme måte, med <code
              class="literal">-u</code>-valget (unlock).
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.intro-nss"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>FOR VIDEREKOMMENDE</em></span> NSS og systemdatabaser</strong></p></div></div></div><a
              id="id-1.11.8.12.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.12.5.3"
              class="indexterm"></a><div
              class="para">
				I stedet for å bruke de vanlige filene for å administrere lister over brukere og grupper, kan du bruke andre typer databaser, for eksempel LDAP eller <code
                class="command">db</code>, ved hjelp av en passende NSS (Name Service Switch)-modul. Modulene som brukes er oppført i <code
                class="filename">/etc/nsswitch.conf</code>-filen, under <code
                class="literal">passwd</code>, <code
                class="literal">shadow</code> og <code
                class="literal">group</code>-inngangene. Se <a
                class="xref"
                href="sect.ldap-directory.html#sect.config-nss">Seksjon 11.7.3.1, «Oppsett av NSS»</a> for et spesifikt eksempel på at LDAP bruker en NSS-modul.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.etc-group"></a>8.4.5. Gruppeliste: <code
                    class="filename">/etc/group</code></h3></div></div></div><div
            class="para">
				Grupper er listet i <code
              class="filename">/etc/group</code>-filen, en enkel tekstdatabase i et format som ligner det til <code
              class="filename">/etc/passwd</code>-filen, med de følgende feltene:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						gruppenavn;
					</div></li><li
                class="listitem"><div
                  class="para">
						passord (valgfritt): Denne brukes bare til å bli med i en gruppe når man ikke er et vanlig medlem (med <code
                    class="command">newgrp</code>, eller <code
                    class="command">sg</code>-kommandoer, se sidestolpe <a
                    class="xref"
                    href="sect.user-group-databases.html#sidebar.working-with-several-groups"><span
                      class="emphasis"><em>DET GRUNNLEGGENDE</em></span> Å arbeide med flere grupper</a>);
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">gid</code>: unikt gruppeidentifikasjonsnummer;
					</div></li><li
                class="listitem"><div
                  class="para">
						medlemsliste: liste over navn på brukere som er medlemmer av gruppen, atskilt med komma.
					</div></li></ul></div><div
            class="para">
			</div><div
            class="sidebar"><a
              xmlns=""
              id="sidebar.working-with-several-groups"></a><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DET GRUNNLEGGENDE</em></span> Å arbeide med flere grupper</strong></p></div></div></div><a
              id="id-1.11.8.13.5.2"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.3"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.4"
              class="indexterm"></a><a
              id="id-1.11.8.13.5.5"
              class="indexterm"></a><div
              class="para">
				Hver bruker kan være medlem av mange grupper; en av dem er deres «hovedgruppe». En brukers hovedgruppe er, som standard, laget under det første brukeroppsettet. Som standard tilhører hver fil en bruker som oppretter dem, så vel som deres hovedgruppe. Dette er ikke alltid ønskelig; for eksempel når brukeren skal jobbe i en mappe som også deles av en annen enn sin egen hovedgruppe. I dette tilfellet må brukeren endre sin viktigste gruppe ved å bruke en av følgende kommandoer: <code
                class="command">newgrp</code>, som starter en nytt skall, eller <code
                class="command">sg</code>, som bare utfører en kommando ved å bruke den angitte alternative gruppen. Disse kommandoene tillater også brukeren å delta i en gruppe som de ikke hører hjemme i. Dersom gruppen er passordbeskyttet, må de oppgi det riktige passordet før kommandoen blir utført.
			</div><div
              class="para">
				Alternativt kan brukeren sette <code
                class="literal">setgid</code>-bit på katalogen, noe som fører til at filene som er opprettet i den mappen automatisk hører til den riktige gruppen. For mer informasjon, se sidestolpe <a
                class="xref"
                href="sect.rights-management.html#sidebar.setgid-dir"><span
                  class="emphasis"><em>SIKKERHET</em></span> <code
                  class="literal">setgid</code> katalog og <span
                  class="emphasis"><em>sticky bit</em></span></a>.
			</div><div
              class="para">
				<code
                class="command">id</code>-kommandoen viser brukerens nåværende tilstand med sin personlige identifikator (<code
                class="varname">uid</code>-variabel), nåværende hovedgruppe (<code
                class="varname">gid</code>-variabel), og listen med grupper som de hører til (<code
                class="varname">groups</code>-variabel).
			</div></div><a
            id="id-1.11.8.13.6"
            class="indexterm"></a><a
            id="id-1.11.8.13.7"
            class="indexterm"></a><div
            class="para">
				The <code
              class="command">addgroup</code> and <code
              class="command">delgroup</code> commands add or delete a group, respectively. The <code
              class="command">groupmod</code> command modifies a group's information (its <code
              class="literal">gid</code> or identifier). The command <code
              class="command">gpasswd <em
                class="replaceable">group</em></code> changes the password for the group, while the <code
              class="command">gpasswd -r <em
                class="replaceable">group</em></code> command deletes it.
			</div><a
            id="id-1.11.8.13.9"
            class="indexterm"></a><a
            id="id-1.11.8.13.10"
            class="indexterm"></a><a
            id="id-1.11.8.13.11"
            class="indexterm"></a><a
            id="id-1.11.8.13.12"
            class="indexterm"></a><a
            id="id-1.11.8.13.13"
            class="indexterm"></a><a
            id="id-1.11.8.13.14"
            class="indexterm"></a><a
            id="id-1.11.8.13.15"
            class="indexterm"></a><a
            id="id-1.11.8.13.16"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>TIPS</em></span> <code
                        class="command">getent</code></strong></p></div></div></div><a
              id="id-1.11.8.13.17.2"
              class="indexterm"></a><div
              class="para">
				Kommandoen <code
                class="command">getent</code> (hent oppføringer) sjekker systemdatabasen på standardmåten, ved hjelp av de aktuelle bibliotekfunksjoner, som igjen kaller på NSS-moduler satt opp i <code
                class="filename">/etc/nsswitch.conf</code>-filen. Kommandoen tar ett eller to argumenter: Navnet på databasen som skal sjekkes, og en mulig søkenøkkel. Således vil kommandoen <code
                class="command">getent passwd rhertzog</code> gi informasjon fra brukerdatabasen om brukeren <code
                class="literal">rhertzog</code>.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.hostname-name-service.html"><strong>Forrige</strong>8.3. Sette vertsnavnet, og sette opp navntjenesten</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.creating-accounts.html"><strong>Neste</strong>8.5. Å lage kontoer</a></li></ul></body></html>
