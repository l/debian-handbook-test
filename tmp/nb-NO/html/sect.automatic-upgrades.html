<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.8. Automatiske oppgraderinger</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-nb-NO-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Håndbok for Debian-administratoren" /><link
        rel="up"
        href="apt.html"
        title="Kapittel 6. Vedlikehold og oppdateringer; APT-verktøyene" /><link
        rel="prev"
        href="sect.regular-upgrades.html"
        title="6.7. Å holde systemet oppdatert" /><link
        rel="next"
        href="sect.searching-packages.html"
        title="6.9. Søke etter pakker" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/nb-NO/stable/sect.automatic-upgrades.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Forrige</strong></a></li><li
          class="home">Håndbok for Debian-administratoren</li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>Neste</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.automatic-upgrades"></a>6.8. Automatiske oppgraderinger</h2></div></div></div><a
          id="id-1.9.17.2"
          class="indexterm"></a><a
          id="id-1.9.17.3"
          class="indexterm"></a><div
          class="para">
			Siden Falcot Corp har mange datamaskiner, men bare begrenset arbeidskraft, prøver administratorene der å gjøre oppgraderinger så automatiske som mulig. Programmene som er ansvarlige for disse prosessene må derfor kjøres uten menneskelig inngripen.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.5"></a>6.8.1. Oppsett av <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				Som vi allerede har nevnt kan (se sidefelt <a
              class="xref"
              href="sect.package-meta-information.html#sidebar.questions-conffiles"><span
                class="emphasis"><em>FOR VIDEREKOMMENDE</em></span> Hvordan unngå oppsettsfilspørsmålene</a>), <code
              class="command">dpkg</code> bli instruert om å ikke be om bekreftelse når du skifter ut en oppsettsfil (med <code
              class="literal">--force-confdef --force-confold</code>-valgene). Interaksjoner kan imidlertid komme fra tre andre kilder: Noen fra APT selv, noen er håndtert av <code
              class="command">debconf</code>, og noen skjer på kommandolinjen som følge av pakkeoppsettsskript.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.6"></a>6.8.2. Oppsett av APT</h3></div></div></div><div
            class="para">
				For APT er enkel: <code
              class="literal">-y</code>-valget (eller <code
              class="literal">--assume-yes</code>) ber APT å anse svaret på alle dens spørsmål for «yes».
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.7"></a>6.8.3. Oppsett av <code
                    class="command">debconf</code></h3></div></div></div><div
            class="para">
				Oppgaven <code
              class="command">debconf</code> fortjener flere detaljer. Dette programmet var, fra begynnelsen av, designet for å styre relevans og antall spørsmål som vises til brukeren, samt måten de vises på. Det er derfor oppsettet knytter liten oppmerksomhet til spørsmål; bare spørsmål med mer enn minimal prioritet blir vist. <code
              class="command">debconf</code> forutsetter standard svar (definert av pakkeutvikleren ) for spørsmål det er besluttet å hoppe over.
			</div><div
            class="para">
				Det andre relevante oppsettselementet er grensesnittet som brukes av grenseflaten. Hvis du velger <code
              class="literal">noninteractive</code> blant valgene, er all brukerinteraksjon deaktivert. Hvis en pakke prøver å vise en informativ merknad, vil den bli sendt til administratoren via e-post.
			</div><div
            class="para">
				For å refigurere <code
              class="command">debconf</code> bruk <code
              class="command">dpkg-reconfigure</code>-verktøyet fra <span
              class="pkg pkg">debconf</span>-pakken; den relevante kommandoen er <code
              class="command">dpkg-reconfigure debconf</code>. Legg merke til at de oppsatte verdiene midlertidig kan overstyres av miljøvariabler ved behov (for eksempel <code
              class="varname">DEBIAN_FRONTEND</code> kontrollerer brukergrensesnittet, som dokumentert i manualsiden <span
              class="citerefentry"><span
                class="refentrytitle">debconf</span>(7)</span>).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.8"></a>6.8.4. Å håndtere kommandolinjesamhandling</h3></div></div></div><div
            class="para">
				Den siste kilden til samhandling, og den vanskeligste å bli kvitt, er oppsettsskriptet som drives av <code
              class="command">dpkg</code>. Det er dessverre ingen standardløsning, og ingen svar er overveiende bedre enn en annet.
			</div><div
            class="para">
				Den vanligste metoden er å undertrykke standard inndata ved å omdirigere det tomme innholdet i <code
              class="filename">/dev/null</code> til den med <code
              class="command"><em
                class="replaceable">command</em> &lt;/dev/null</code>, eller å mate den med en endeløs strøm av linjeskift. Ingen av disse metodene er 100 prosent pålitelige, men de fører vanligvis til at standardsvarene blir brukt, siden de fleste skript vurderer en mangel på svar som å akseptere standardverdien.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.9.17.9"></a>6.8.5. Mirakelkombinasjonen</h3></div></div></div><div
            class="para">
				Ved å kombinere de foregående elementene, er det mulig å utforme et lite, men temmelig pålitelig skript som kan håndtere automatiske oppgraderinger.
			</div><div
            class="example"><a
              xmlns=""
              id="example.non-interactive-upgrade"></a><p
              class="title"><strong>Eksempel 6.4. Ikke-interaktive oppgraderingsskript</strong></p><div
              class="example-contents"><pre
                class="programlisting">export DEBIAN_FRONTEND=noninteractive
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>I PRAKSIS</em></span> Situasjonen hos Falcot Corp</strong></p></div></div></div><div
              class="para">
				Datamaskinene på Falcon utgjør et heterogent system, med maskiner med ulike funksjoner. Administratorer vil derfor velge ut den mest relevante løsningen for hver datamaskin.
			</div><div
              class="para">
				I praksis kjører tjenerne som <span
                class="distribution distribution">Jessie</span> er satt opp med «mirakelkombinasjonen» ovenfor, og holdes oppdatert automatisk. Bare de mest kritiske tjenere (brannmurene for eksempel) er satt opp med<code
                class="command">apticron</code>, slik at oppgraderinger alltid skjer under oppsyn av en administrator.
			</div><div
              class="para">
				Kontorets arbeidsstasjoner for de administrative tjenestene kjører også <span
                class="distribution distribution">Jessie</span>, men de er utstyrt med <span
                class="pkg pkg">gnome-packagekit</span>, slik at brukerne utløser oppgraderinger selv. Begrunnelsen for denne beslutningen er at hvis oppgraderinger skjer uten en eksplisitt handling, kan oppførselen til datamaskinen endres uventet, noe som kan føre til forvirring for de viktigste brukerne.
			</div><div
              class="para">
				I laboratoriet, der de få datamaskinene som bruker <span
                class="distribution distribution">Testing</span> - kan få fordelen med de siste programvareversjonene - er heller ikke oppgradert automatisk. Administratorer setter bare opp APT til å forberede oppgraderinger, ikke til å implementere dem. Når de bestemmer seg for å oppgradere (manuelt), vil de kjedelige delene med å oppdatere pakkelister, og med nedlasting av pakker unngås, og administratorer kan fokusere på den virkelig nyttige delen.
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Forrige</strong>6.7. Å holde systemet oppdatert</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Opp</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Hjem</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>Neste</strong>6.9. Søke etter pakker</a></li></ul></body></html>
