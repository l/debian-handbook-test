<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="installation">
  <chapterinfo>
    <mediaobject condition="pdf">
      <imageobject>
        <imagedata fileref="images/chap-installation.png" scalefit="1" />
      </imageobject>
    </mediaobject>
    <keywordset>
      <keyword>Instalación</keyword>
      <keyword>Particionado</keyword>
      <keyword>Formateo</keyword>
      <keyword>Sistema de archivos</keyword>
      <keyword>Sector de arranque</keyword>
      <keyword>Detección de hardware</keyword>
    </keywordset>
  </chapterinfo>
  <title>Instalación</title>
  <highlights>
    <para>Para utilizar Debian necesita instalarlo en una máquina; el programa <emphasis>debian-installer</emphasis> se encarga de esta tarea. Una instalación apropiada incluye muchas tareas. Este capítulo las revisa en orden cronológico.</para>
  </highlights>
  <indexterm><primary>instalación</primary><secondary>del sistema</secondary></indexterm>

  <sidebar>
    <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Un curso acelerado en los apéndices</title>

    <para>Instalar un equipo siempre es más simple cuando uno conoce cómo funciona. Si no lo sabe, desvíese rápidamente al <xref linkend="short-remedial-course" /> antes de leer este capítulo.</para>
  </sidebar>

  <para>El instalador para <emphasis role="distribution">Jessie</emphasis> está basado en <command>debian-installer</command>. Su diseño modular le permite trabajar en varios escenarios y evolucionar y adaptarse a los cambios. A pesar de las limitaciones que implica la compatibilidad con un gran número de arquitecturas, este instalador es muy accesible para principiantes ya que asiste a los usuarios en cada paso del proceso. La detección automática de hardware, el particionamiento guiado y la interfaz gráfica de usuario solucionaron la mayoría de los problemas que debían enfrentar los novatos durante los primeros años de Debian.</para>
  <indexterm><primary>instalador</primary></indexterm>
  <indexterm><primary><command>debian-installer</command></primary></indexterm>

  <para>La instalación necesita 80 MB de RAM (siglas en inglés de «memoria de acceso aleatorio») y al menos 700 MB de espacio en disco duro. Todos los equipos de Falco cumplen con dicho criterio. Es de notar, sin embargo, que estos números son aplicables en la instalación de un sistema muy limitado sin un escritorio gráfico. Se recomienda un mínimo de 512 MB de RAM y 5 GB de disco duro en un equipo de escritorio para oficina.</para>

  <sidebar>
    <title><emphasis>CUIDADO</emphasis> Actualizando desde Wheezy</title>

    <para>Si ya tiene Debian Wheezy instalado en su máquina ¡este capítulo no es para usted! A diferencia de otras distribuciones, Debian permite actualizar un sistema de una versión a la siguiente sin tener que reinstalarlo. Una reinstalación, además de innecesaria, podría ser peligrosa ya que puede eliminar programas ya instalados.</para>

    <para>Describiremos el proceso de actualización en la <xref linkend="sect.dist-upgrade" />.</para>
  </sidebar>
  <section id="sect.installation-methods">
    <title>Métodos de instalación</title>

    <para>Se puede instalar un sistema Debian desde diferentes medios siempre que lo permita el BIOS del equipo. Puede iniciar desde un CD-ROM, una llave USB o inclusive desde la red.</para>

    <sidebar>
      <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> BIOS, la interfaz hardware/software</title>
      <indexterm><primary>BIOS</primary></indexterm>
      <indexterm><primary>sistema básico de entrada/salida</primary></indexterm>

      <para>BIOS (las siglas en inglés de «sistema básico de entrada/salida») es un software que se encuentra en la placa madre (la placa electrónica que conecta todos los periféricos) y se ejecuta cuando arranca el equipo, para poder cargar el sistema operativo (por medio de un gestor de arranque adaptado). Se mantiene en ejecución en segundo plano para proporcionar una interfaz entre el hardware y el software (en nuestro caso, el núcleo Linux).</para>
    </sidebar>
    <section id="sect.install-cd">
      <title>Instalación desde CD-ROM/DVD-ROM</title>

      <para>El medio de instalación más utilizado es mediante un CD-ROM (o DVD-ROM, que se comporta exactamente de la misma forma): el equipo inicia desde este medio y el programa de instalación toma el control.</para>

      
      <para>Diferentes familias de CD-ROMs tienen distintos propósitos: <emphasis>netinst</emphasis> («network installation»: instalación por red) contiene el instalador y el sistema base Debian, se descargarán luego todos los otros programas. Su «imagen», el sistema de archivos ISO-9660 que contiene el contenido exacto del disco, sólo ocupa entre 150 a 280 MB (dependiendo de la arquitectura). Por el otro lado, el conjunto completo ofrece todos los paquetes y permite la instalación en un equipo sin acceso a internet; requiere alrededor de 84 CD-ROMs (o 12 DVD-ROMs, o dos discos Blu-ray). Pero los programas se dividen entre los discos según popularidad e importancia; los primeros tres discos deberían ser suficientes para la mayoría de las instalaciones ya que contienen el software más utilizado.</para>

      <para>Existe un último tipo de imagen, conocida como <filename>mini.iso</filename>, que solo está disponible como producto del instalador. La imagen solo contiene lo mínimo indispensable para configurar la red y todo lo demás es descargado (incluyendo las partes del instalador en sí mismo, lo cual es así porque aquéllas imágenes tienden a romperse cuando se publica una nueva versión del instalador). Estas imágenes se pueden encontrar en las réplicas de Debian bajo el directorio <filename>dists/<replaceable>release</replaceable>/main/installer-<replaceable>arch</replaceable>/current/images/netboot/</filename>.</para>
      <indexterm><primary><filename>mini.iso</filename></primary></indexterm>

      <sidebar>
        <title><emphasis>SUGERENCIA</emphasis> Discos multiarquitectura</title>

	<para>La mayoría de los CD-ROMs y DVD-ROMs de instalación sólo funcionan en una arquitectura de hardware específica. Si desea descargar las imágenes completas debe tener cuidado de elegir aquella que funcione en el hardware del equipo en el que desea instalarlo.</para>

	<para>Algunas imágenes de CD/DVD-ROM pueden funcionar en varias arquitecturas. Tenemos una imagen de CD-ROM que combina las imágenes <emphasis>netinst</emphasis> para las arquitecturas <emphasis>i386</emphasis> y <emphasis>amd64</emphasis>. También existe una imagen de DVD-ROM que contiene el instalador y una selección de paquetes binarios para <emphasis>i386</emphasis> y <emphasis>amd64</emphasis> así como también los paquetes fuente correspondientes.</para>
      </sidebar>
      <indexterm><primary>CD-ROM</primary><secondary>de instalación</secondary></indexterm>
      <indexterm><primary>CD-ROM</primary><secondary><emphasis>netinst</emphasis></secondary></indexterm>
      <indexterm><primary>DVD-ROM</primary><secondary>de instalación</secondary></indexterm>
      <indexterm><primary>DVD-ROM</primary><secondary><emphasis>netinst</emphasis></secondary></indexterm>

      <para>Para adquirir imágenes de CD-ROM de Debian puede, por supuesto, descargarlas y grabarlas en un disco. Puede también comprarlas y, de esa forma, proveer un poco de ayuda financiera al proyecto. En el sitio web encontrará una lista de proveedores de imágenes de CD-ROM y sitios donde descargarlas. <ulink type="block" url="http://www.debian.org/CD/index.html" /></para>
    </section>
    <section id="sect.install-usb">
      <title>Arranque desde una llave USB</title>
      <indexterm><primary>llave USB</primary></indexterm>

      <para>Desde que la mayor parte de los ordenadores pueden arrancar desde dispositivos USB, tambien podrá instalar Debian desde un llavero USB (esto no es más que un pequeño disco de memoria flash).</para>

      <para>El manual de instalación explica cómo crear una llave USB que contenga <command>debian-installer</command>. El procedimiento es muy simple ya que las imágenes ISO para arquitecturas i386 y amd64 son ahora imágenes híbridas que pueden arrancar tanto desde un CD-ROM como desde una llave USB.</para>

      <para>Primero debe identificar el nombre de dispositivo de la llave USB (por ejemplo: <literal>/dev/sdb</literal>; el método más simple para hacerlo es revisar el mensaje generado por el núcleo con la orden <command>dmesg</command>. Luego debe copiar la imagen ISO ya descargada (por ejemplo debian-8.0.0-amd64-i386-netinst.iso) con la orden <command>cat debian-8.0.0-amd64-i386-netinst.iso &gt;/dev/sdb; sync</command>. Esta orden necesita permisos de administrador ya que accede directamente a la llave USB y borra su contenido ciegamente.</para>

      <para>Podrá encontrar una explicación más detallada en el manual de instalación. Entre otras cosas, describe un método alternativo para preparar la llave USB que es más complejo pero permite modificar las opciones predeterminadas del instalador (aquellas definidas en la línea de órdenes del núcleo). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s03.html" /></para>
    </section>
    <section id="sect.install-net">
      <title>Instalación a través de arranque por red</title>
      <indexterm><primary>instalación</primary><secondary><emphasis>por red</emphasis></secondary></indexterm>
      <indexterm><primary>instalación</primary><secondary><emphasis>PXE</emphasis></secondary></indexterm>
      <indexterm><primary>instalación</primary><secondary><emphasis>por TFTP</emphasis></secondary></indexterm>

      <para>Muchos BIOS permiten arrancar directamente desde la red descargando un núcleo y una imagen mínima para usar como sistema de archivos . Este método (que tiene varios nombres como arranque <acronym>PXE</acronym> o <acronym>TFTP</acronym>) puede ser un salvavidas si el equipo no tiene una lectora de CD-ROM o si su BIOS no puede arrancar por otros medios.</para>

      <para>Este método de instalación funciona en dos pasos. Primero, al arrancar el equipo, el BIOS (o la placa de red) hace un pedido BOOTP/DHCP para adquirir una dirección IP automáticamente. Cuando un servidor BOOTP o DHCP envía una respuesta, incluye un nombre de archivo además de la configuración de red. Luego de configurar la red, el equipo cliente hace un pedido TFTP (siglas en inglés de «protocolo trivial de transferencia de archivos») para el archivo del nombre que recibió. Una vez que adquiere dicho archivo, lo ejecuta como un gestor de arranque. Esto luego ejecuta el programa de instalación de Debian como si lo hubiese cargado desde el disco duro, un CD-ROM o una llave USB.</para>

      <para>Todos los detalles de este método están disponibles en la guía de instalación (sección «Preparando los archivos para arranque por red TFTP»). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch05s01.html#boot-tftp" /> <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s05.html" /></para>
    </section>
    <section id="sect.install-auto">
      <title>Otros métodos de instalación</title>

      <para>Cuando necesitamos desplegar instalaciones personalizadas para una gran cantidad de equipos generalmente elegimos un método de instalación automático en lugar de uno manual. Dependiendo de la situación y la complejidad de las instalaciones podemos utilizar FAI (siglas de «instalador completamente automático», descripto en la <xref linkend="sect.fai" />) o un CD de instalación preconfigurado («preseeding», revise la <xref linkend="sect.d-i-preseeding" />).</para>
    </section>
  </section>
  <section id="sect.installation-steps">
    <title>Instalación, paso a paso</title>
    <section id="sect.install-boot">
      <title>Arranque e inicio del instalador</title>

      <para>Una vez que el BIOS comenzó el arranque desde el CD o DVD-ROM aparecerá el menú del gestor de arranque Isolinux. En esta etapa, el núcleo Linux no está cargado aún; este menú le permite elegir el núcleo a arrancar y posiblemente ingresar los parámetros a pasarle en el proceso.</para>

      <para>Para una instalación estándar sólo necesita elegir «Instalación» o «Instalación gráfica» (con las teclas de flecha), luego presionar la tecla <keycap>Enter</keycap> para iniciar el resto del proceso de instalación. Si el DVD-ROM es un disco multiarquitectura y el equipo tiene un procesador Intel o AMD de 64 bits, las opciones «Instalación 64 bits» y «Instalación gráfica 64 bits» permiten instalar la variante de 64 bits (<emphasis>amd64</emphasis>) en lugar de la versión predeterminada de 32 bits (<emphasis>i386</emphasis>). En la práctica, casi siempre podrá utilizar la versión de 64 bits: los procesadores más recientes son de 64 bits y la versión de 64 bits adminstra mejor la gran cantidad de memoria RAM que suelen tener los nuevos equipos.</para>

      <sidebar>
        <title><emphasis>YENDO MÁS ALLÁ</emphasis> ¿32 o 64 bits?</title>
        <indexterm><primary>PAE</primary></indexterm>
        <indexterm><primary>Extensión de direcciones físicas</primary></indexterm>
        <indexterm><primary>32/64 bits, elección</primary></indexterm>

	<para>La diferencia fundamental entre los sistemas de 32 y 64 bits es el tamaño de las direcciones de memoria. En teoría, un sistema de 32 bits no puede direccionar más de 4 GB de RAM (2<superscript>32</superscript> bytes). En la práctica, es posible superar esta limitación usando la variante <literal>686-pae</literal> del núcleo siempre que el procesador sea compatible con PAE (siglas en inglés de «extensión de direcciones físicas»). Sin embargo, usar esta funcionalidad tiene un gran impacto en el rendimiento del sistema. Por ello es conveniente usar el modo de 64 bits en un servidor con grandes cantidades de RAM.</para>

	<para>Para un equipo de oficina (donde una diferencia en rendimiento de un pequeño porcentaje es despreciable) debe tener en cuenta que algunos programas privativos no tienen versiones de 64 bits disponibles (Skype por ejemplo). Es técnicamente posible hacerlos funcionar en sistemas de 64 bits, pero tendrá que instalar las versiones de 32 bits de todas las bibliotecas necesarias (revise la <xref linkend="sect.multi-arch" />) y a veces utilizar <command>setarch</command> o <command>linux32</command> (del paquete <emphasis role="pkg">util-linux</emphasis>) para engañar a la aplicación sobre la naturaleza del sistema. <indexterm><primary><command>setarch</command></primary></indexterm> <indexterm><primary><command>linux32</command></primary></indexterm></para>
      </sidebar>

      <sidebar>
        <title><emphasis>EN LA PRÁCTICA</emphasis> Instalación junto a un sistema Windows existente</title>
        <indexterm><primary>arranque dual</primary></indexterm>

	<para>Si el equipo ya ejecuta Windows, no es necesario eliminar el sistema para poder instalar Debian. Puede tener ambos sistemas simultáneamente, cada uno instalado en un disco o partición separado, y elegir cuál iniciar al momento de arrancar el equipo. Generalmente esta configuración es llamada «arranque dual» y el sistema de instalación de Debian puede configurarla. Esto se realiza durante la etapa de particionado del disco duro de la instalación y durante la configuración del gestor de arranque (revise los recuadros <xref linkend="sidebar.shrinking-partition" /> y <xref linkend="sidebar.bootloader-dual-boot" />).</para>

	<para>Si ya tiene un sistema Windows funcionando puede inclusive evitar utilizar un CD-ROM; Debian ofrece un programa para Windows que descargará un instalador Debian ligero y lo configurará en el disco duro. Luego, sólo necesita reiniciar el equipo y seleccionar entre un arranque normal de Windows o iniciar el programa de instalación. También podrá encontrarlo en un sitio web dedicado con un nombre bastante explícito… <ulink type="block" url="http://ftp.debian.org/debian/tools/win32-loader/stable/" /> <ulink type="block" url="http://www.goodbye-microsoft.com/" /></para>
      </sidebar>

      <sidebar>
        <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Gestor de arranque</title>
        <indexterm><primary>arranque</primary><secondary>gestor de</secondary></indexterm>
        <indexterm><primary>gestor de arranque</primary></indexterm>
        <indexterm><primary>gestor</primary><secondary>de arranque</secondary></indexterm>

	<para>El gestor de arranque es un programa de bajo nivel que es responsable de arrancar el núcleo Linux después que el BIOS le cede el control. Para encargarse de esta tarea debe poder ubicar en el disco al kernel Linux a arrancar. Los programas más utilizados en las arquitecturas i386 y amd64 para esta tarea son LILO, el más antiguo de los dos, y GRUB su reemplazo moderno. Isolinux y Syslinux son alternativas utilizadas frecuentemente para arrancar desde medios removibles.</para>
      </sidebar>

      <para>Cada elemento del menú esconde una línea de órdenes específica para el arraque que puede ser configurada según sea necesario presionando la tecla <keycap>TAB</keycap> antes de validarlo y arrancar. El menú «Ayuda» muestra la interfaz de línea de órdenes antigua, donde las teclas <keycap>F1</keycap> a <keycap>F10</keycap> muestran diferentes pantallas de ayuda que detallan las opciones disponibles. Rara vez necesitará utilizar esta opción salvo casos muy específicos.</para>

      <para>El modo «experto» (disponible en el menú «Opciones avanzadas») detalla todas las posibles opciones en el proceso de instalación y permite navegar entre los varios pasos en lugar de que éstos ocurran de forma automática y secuencial. Tenga cuidado, este modo puede ser confuso debido a la cantidad de opciones de configuración que ofrece.</para>

      <figure>
        <title>Pantalla de arranque</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-boot.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Una vez iniciado, el programa de instalación le guiará a través del proceso paso a paso. Esta sección presenta cada uno de estos pasos en detalle. Seguiremos aquí el proceso de una instalación desde un DVD-ROM multiarquitectura (más específicamente, la versión beta4 del instalador para Jessie); las instalaciones <emphasis>netinst</emphasis>, así como también la versión final del instalador pueden verse ligeramente distintas. También abordaremos la instalación en modo gráfico, pero difiere de la instalación «clásica» (modo texto) sólo en su apariencia.</para>
    </section>
    <section id="sect.install-lang">
      <title>Selección del idioma</title>
      <indexterm><primary>selección</primary><secondary>de idioma</secondary></indexterm>

      <para>El programa de instalación comienza en inglés, pero en el primer paso del mismo se permite al usuario elegir el idioma que será utilizado durante el resto del proceso de instalación. Por ejemplo, al elegir el idioma francés el proceso de instalación será traducido a francés (y como resultado el sistema configurado en francés). Esta elección se utiliza para definir opciones predeterminadas más relevantes en las fases subsiguientes del proceso de instalación (como la distribución del teclado).</para>

      <sidebar>
        <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Navegación mediante teclado</title>

	<para>Algunos pasos del proceso de instalación requieren que ingrese información. Estas pantallas tienen varias áreas que pueden «obtener el foco» (áreas de entrada de texto, cajas de confirmación, listas de opciones, botones para confirmar o cancelar) y la tecla <keycap>TAB</keycap> le permite moverse de una a otra.</para>

	<para>En el modo gráfico, puede utilizar el ratón como lo haría normalmente en un escritorio gráfico ya instalado.</para>
      </sidebar>

      <figure role="flow.inline">
        <title>Selección del idioma</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-country">
      <title>Selección del país</title>
      <indexterm><primary>selección</primary><secondary>del país</secondary></indexterm>

      <para>El segundo paso consiste en elegir su país. Combinada con el idioma, esta información le permite al programa ofrecer la distribución de teclado más apropiada. También tendrá influencia en la configuración de la zona horaria. En los Estados Unidos se sugerirá un teclado QWERTY estándar y las opciones de zonas horarias apropiadas.</para>

      <figure role="flow.inline">
        <title>Selección del país</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-keyboard">
      <title>Selección de la distribución de teclado</title>
      <indexterm><primary>distribución del teclado</primary></indexterm>
      <indexterm><primary>distribución del teclado</primary></indexterm>

      <para>El teclado propuesto «American English» corresponde a la distribución QWERTY usual.</para>

      <figure role="flow.inline">
        <title>Elección de teclado</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-detect-hardware">
      <title>Detección de hardware</title>

      <para>Este paso es completamente automático en la gran mayoría de los casos. El instalador detecta su hardware e intenta identificar el dispositivo CD-ROM a utilizar para acceder a su contenido. Carga los módulos correspondientes a los componentes de hardware detectados y luego «monta» el CD-ROM para poder leerlo. Los pasos previos estaban completamente contenidos en la imagen incluida en el CD, un archivo de tamaño limitado y cargado en memoria por el BIOS al arrancar desde el CD.</para>

      <para>El instalador funciona con la gran mayoría de los dispositivos, especialmente periféricos estándar ATAPI (a veces llamados IDE y EIDE). Sin embargo, si falla la detección de la lectora de CD-ROM, el instalador ofrecerá la opción de cargar los módulos para el núcleo (por ejemplo desde una llave USB) que corresponden al controlador del CD-ROM.</para>
    </section>
    <section id="sect.install-load-components">
      <title>Carga de componentes</title>

      <para>Con los contenidos del CD disponibles, el instalador carga todos los archivos necesarios para continuar con su trabajo. Esto incluye controladores adicionales para el resto del hardware (especialmente la placa de red) así como también todos los componentes del programa de instalación.</para>
    </section>
    <section id="sect.install-detect-network">
      <title>Detección de hardware de red</title>

      <para>Este paso automático intenta identificar la placa de red y cargar el módulo correspondiente. Si falla la detección automática puede seleccionar el módulo a cargar manualmente. Si no funciona ningún módulo es posible cargar un módulo específico de dispositivos removibles. Esta última solución generalmente sólo es necesaria cuando el controlador adecuado no está incluido en el núcleo Linux estándar pero está disponible en otro lado, como el sitio web del fabricante.</para>

      <para>Este paso tiene que ser exitoso obligatoriamente para las instalaciones <emphasis>netinst</emphasis> ya que se deben cargar los paquetes Debian desde la red.</para>
    </section>
    <section id="sect.install-network-config">
      <title>Configuración de red</title>
      <indexterm><primary>red</primary><secondary>configuración</secondary><tertiary>estática</tertiary></indexterm>
      <indexterm><primary>red</primary><secondary>configuración</secondary><tertiary>DHCP</tertiary></indexterm>

      <para>Para poder automatizar el proceso tanto como sea posible, el instalador intenta configurar la red de forma automática con DHCP (para IPv4) y utilizando el descubrimiento de redes IPv6. Si eso falla ofrece más opciones: intentar nuevamente con una configuración DHCP normal, intentar una configuración DHCP declarando el nombre del equipo o configurar la red de forma estática.</para>

      <para>La última opción necesita una dirección IP, una máscara de red, una dirección IP para una posible puerta de enlace, un nombre de equipo y un nombre de dominio.</para>

      <sidebar>
        <title><emphasis>SUGERENCIA</emphasis> Configuración sin DHCP</title>

	<para>Si la red local tiene un servidor DHCP que no desea utilizar porque prefiere configurar una dirección IP estática para el equipo durante la instalación, puede agregar la opción <userinput>netcfg/use_dhcp=false</userinput> al arrancar desde el CD-ROM. Sólo necesita seleccionar el elemento del menú que desea utilizar, presionar la tecla <keycap>TAB</keycap> y agregar esta opción antes de presionar la tecla <keycap>Enter</keycap>.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>CUIDADO</emphasis> No improvise</title>

	<para>Muchas redes locales están basadas en la premisa implícita que se puede confiar en todos los equipos, la configuración inadecuada en un sólo equipo generalmente perturbará toda la red. Como resultado, no conecte su equipo a una red sin antes acordar las configuraciones adecuadas con el administrador (por ejemplo, la dirección IP, máscara de red y dirección de difusión).</para>
      </sidebar>
    </section>
    <section>
      <title>Contraseña del administrador</title>
      <indexterm><primary>cuenta</primary><secondary>de administrador</secondary></indexterm>

      <para>La cuenta de superusuario «root», reservada para el administrador del equipo, será creada automáticamente durante la instalación; por ello se solicita una contraseña. El instalador la preguntará por una confirmación de la contraseña para prevenir cualquier error en la entrada que luego sería difícil de corregir.</para>

      <figure>
        <title>Contraseña del administrador</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-rootpw.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <sidebar>
        <title><emphasis>SEGURIDAD</emphasis> Contraseña del administrador</title>

	<para>La contraseña del usuario root debería ser larga (8 caracteres o más) e imposible de adivinar. De hecho, cualquier equipo (y cualquier servidor a fortiori) conectado a internet es objetivo regular de intentos automáticos de conexión con las contraseñas más obvias. A veces inclusive será sujeto a ataques de diccionario en el que se probarán como contraseña muchas combinaciones de palabras y números. Evite utilizar nombres de hijos o padres, fechas de nacimiento, etc.: muchos de sus compañeros de trabajo podrían conocerlos y rara vez deseará proveerles acceso libre al equipo en cuestión.</para>

	<para>Estos comentarios son igualmente aplicables para contraseñas de otros usuarios, pero las consecuencias de una cuenta comprometida son menos drásticas para usuarios sin permisos de administración.</para>

	<para>Si le falta inspiración no dude en utilizar generadores de contraseñas como <command>pwgen</command> (en el paquete del mismo nombre).</para>
      </sidebar>
    </section>
    <section>
      <title>Creación del primer usuario</title>

      <para>Debian también impone la creación de una cuenta de usuario estándar para que el administrador no adquiera el mal hábito de trabajar como root. La norma básica de precaución significa esencialmente que se realiza cada tarea con los permisos mínimos necesarios para limitar el daño que pueda causar un error humano. Es por esto que el instalador pedirá el nombre completo de su primer usuario, su nombre de usuario y su contraseña (dos veces para evitar el riesgo de entradas erróneas).</para>

      <figure>
        <title>Nombre del primer usuario</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-username.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-clock-config">
      <title>Configuración del reloj</title>

      <para>Si la red se encuentra disponible, el reloj interno del sistema es actualizado (por única vez) desde un servidor NTP. De esta forma, la marcas temporales en los registros serán correctas desde el primer arranque. Para que se mantengan consistentes en el tiempo es necesario configurar un demonio NTP luego de la instalación inicial (revise la <xref linkend="sect.time-synchronization" />).</para>
    </section>
    <section id="sect.install-detect-disks">
      <title>Detección de discos y otros dispositivos</title>

      <para>Este paso detecta automáticamente los discos duros en los que se podría instalar Debian. Serán presentados en el próximo paso: particionado.</para>
    </section>
    <section id="sect.install-partman">
      <title>Inicio de la herramienta de particionado</title>
      <indexterm><primary>particionado</primary></indexterm>

      <sidebar>
        <title><emphasis>CULTURA</emphasis> Usos del particionado</title>

	<para>El particionado, un paso indispensable en la instalación, consiste en dividir el espacio disponible en los discos duros (cada subdivisión de los mismos es llamada «partición») según los datos que serán almacenados en él y el uso propuesto para el equipo. Este paso también incluye elegir los sistemas de archivo que serán utilizados. Todas estas decisiones influirán en el rendimiento, la seguridad de los datos y el administrador del servidor.</para>
      </sidebar>

      <para>El paso de particionado es tradicionalmente difícil para usuarios nuevos. Es necesario definir varias porciones del disco (o «particiones») en las que se almacenarán los sistemas de archivos Linux y la memoria virtual («swap»). Esta tarea es más complicada si el equipo ya posee otro sistema operativo que desea conservar. Efectivamente, tendrá que asegurarse de modificar sus particiones (o que las redimensione sin causar daños).</para>

      <para>Afortunadamente, el software de particionado tiene un modo «guiado» que recomienda las particiones que debe crear el usuario — en la mayoría de los casos puede simplemente aceptar las sugerencias del software.</para>

      <figure>
        <title>Elección del modo de particionado</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>La primera pantalla en la herramienta de particionado ofrece la opción de utilizar un disco duro completo para crear varias particiones. Para un equipo (nuevo) que sólamente utilizará Linux esta es claramente la más simple, y puede elegir la opción «Guiado - utilizar todo el disco». Si el equipo tiene dos discos duros para dos sistemas operativos, definir un disco para cada uno también es una solución que facilitará el particionado. En ambos casos, la pantalla siguiente le ofrecerá elegir el disco en el que instalar Linux seleccionando la opción correspondiente (por ejemplo «SCSI1 (0,0,0) (sda) - 12.9 GB ATA VBOX HARDDISK»). Luego comenzará el particionado guiado.</para>

      <figure>
        <title>Disco a utilizar para el particionado guiado</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman-disk.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>El particionado guiado también puede configurar volúmenes lógicos LVM en lugar de particiones (revise más adelante). Ya que el resto del funcionamiento es el mismo, no entraremos en los detalles de la opción «Guiado - utilizar todo el disco duro y configurar LVM» (cifrado o no).</para>

      <para>En otros casos, cuando Linux deba trabajar junto a otras particiones preexistentes, necesitará seleccionar el particionado manual.</para>
      <section id="sect.install-autopartman-mode">
        <title>Particionado guiado</title>
        <indexterm><primary>particionado</primary><secondary>guiado</secondary></indexterm>

	<para>La herramienta de particionado guiado ofrece tres métodos de particionado que corresponden a distintos usos.</para>

        <figure>
          <title>Particionado guiado</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-autopartman-mode.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>

	<para>El primer método es llamado «Todo los archivos en una partición». El árbol completo del sistema Linux será almacenado en un sólo sistema de archivos que corresponde con el directorio raíz <filename>/</filename>. Este particionado simple y robusto es adecuado para sistemas personales o con un sólo usuario. De hecho, se crearán dos particiones: la primera tendrá el sistema completo y la segunda la memoria virtual (swap).</para>

	<para>El segundo método, «Partición <filename>/home/</filename> separada» es similar pero divide la jerarquía de archivos en dos: una partición contiene el sistema Linux (<filename>/</filename>) y la segunda contiene los «directorios de usuario» (es decir, los datos de usuarios, en archivos y subdirectorios disponibles en <filename>/home/</filename>).</para>

	<para>El último método de particionado, llamado «Particiones <filename>/home</filename>, <filename>/var</filename> y <filename>/tmp</filename> separadas» es apropiada para servidores y sistemas multiusuario. Divide el árbol de archivos en muchas particiones: además de las particiones para la raíz (<filename>/</filename>) y las cuentas de usuario (<filename>/home/</filename>), también creará particiones para datos de software de servidor (<filename>/var/</filename>), y archivos temporales (<filename>/tmp/</filename>). Estas divisiones tiene varias ventajas. Un usuario no podrá bloquear el servidor consumiendo todo el espacio disponible en el disco duro (sólo pueden llenar <filename>/tmp/</filename> y <filename>/home/</filename>). Los datos de demonios (especialmente registros) tampoco podrán trabar el resto del sistema.</para>

        <sidebar>
          <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Elección de un sistema de archivos</title>
          <indexterm><primary>sistema</primary><secondary>de archivos</secondary></indexterm>
          <indexterm><primary>archivos</primary><secondary>sistema de</secondary></indexterm>

	  <para>Un sistema de archivos define la forma en la que se organizan los datos en el disco duro. Cada sistema de archivos existente tiene sus méritos y limitaciones. Algunos son más robustos, otros más efectivos: si conoce bien sus necesidades es posible elegir el sistema de archivos más apropiado. Ya se han realizado muchas comparaciones; parecería que ReiserFS es particularmente eficiente para leer muchos archivos pequeños; <emphasis>XFS</emphasis>, en cambio, trabaja más rápido con archivos grandes. <emphasis>Ext4</emphasis>, el sistema de archivos predeterminado para Debian, es un buen punto medio basado en las tres versiones anteriores de sistemas de archivos utilizados en Linux históricamente (<emphasis>ext</emphasis> y <emphasis>ext2</emphasis> y <emphasis>ext3</emphasis>). <emphasis>ext4</emphasis> supera algunas limitaciones de <emphasis>ext3</emphasis> y es particularmente apropiado para discos duros de gran capacidad. Otra opción es experimentar con el prometedor <emphasis>btrfs</emphasis> que incluye muchas funcionalidades que requerirían, al día de hoy, utilizar LVM y/o RAID.</para>

	  <para>Un sistema de archivos con registros (como <emphasis>ext3</emphasis>, <emphasis>ext4</emphasis>, <emphasis>btrfs</emphasis>, <emphasis>reiserfs</emphasis> o <emphasis>xfs</emphasis>) toma medidas especiales que posibilitan volver a un estado consistente anterior luego de una interrupción abrupta sin analizar completamente el disco entero (como era el caso con el sistema <emphasis>ext2</emphasis>). Esta funcionalidad se lleva a cabo manteniendo un registro que describe las operaciones a realizar antes que sean ejecutadas. Si se interrumpe una operación será posible «reproducirla» desde el registro. Por el otro lado, si la interrupción ocurre durante una actualización del registro, simplemente se ignora el último cambio solicitado; los datos almacenados podrían perderse pero, como los datos en el disco no han cambiado, se mantuvieron coherentes. Esto es nada más y nada menos que el mecanismo transaccional aplicado al sistema de archivos.</para>
        </sidebar>

	<para>Luego de elegir el tipo de la partición, el software calculará una sugerencia y la describirá en la pantalla; el usuario podrá modificarla si es necesario. Puede, en particular, elegir otro sistema de archivos si la opción estándar (<emphasis>ext4</emphasis>) no es apropiada. En la mayoría de los casos, sin embargo, el particionado propuesto es razonable y se puede aceptar seleccionando la opción «Finalizar particionado y escribir cambios al disco».</para>

        <figure>
          <title>Validación del particionado</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-partman-validation.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>
      </section>
      <section id="sect.manual-partitioning">
        <title>Particionado manual</title>
        <indexterm><primary>particionado</primary><secondary>manual</secondary></indexterm>

	<para>El particionado manual provee mayor flexibilidad, permitiéndole al usuario seleccionar el propósito y tamaño de cada partición. Lo que es más, este modo es inevitable si desea utilizar RAID por software.</para>

        <sidebar id="sidebar.shrinking-partition">
          <title><emphasis>EN LA PRÁCTICA</emphasis> Reduciendo una partición Windows</title>
          <indexterm><primary>redimiensionar una partición</primary></indexterm>
          <indexterm><primary>reducir una partición</primary></indexterm>

	  <para>Para instalar Debian junto a un sistema operativo existente (Windows u otro), debe tener espacio disponible en el disco duro que no sea utilizado por el otro sistema para poder crear las particiones dedicadas a Debian. En la mayoría de los casos esto significa reducir una partición Windows y reutilizar el espacio liberado.</para>

	  <para>El instalador Debian permite esta operación si utiliza el modo de particionado manual. Sólo necesitará elegir la partición Windows e ingresar su nuevo tamaño (esto funciona igual tanto en particiones FAT como NTFS).</para>
        </sidebar>

	<para>La primera pantalla mostrará los discos disponibles, sus particiones y cualquier espacio libre posible que no haya sido particionado aún. Puede seleccionar cada elemento mostrado; presionar la tecla <keycap>Enter</keycap> mostrará una lista con las acciones posibles.</para>

	<para>Puede borrar todas las particiones en un disco al seleccionarlo.</para>

	<para>Al seleccionar el espacio libre en un disco puede crear una nueva partición manualmente. También puede hacerlo con el particionado guiado, que es una solución interesante para un disco que ya contiene otro sistema operativo pero que podría desear particionar para Linux de forma estándar. Revise <xref linkend="sect.install-autopartman-mode" /> para más detalles sobre el particionado guiado.</para>

        <sidebar>
          <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Punto de montaje</title>
          <indexterm><primary>punto de montaje</primary></indexterm>
          <indexterm><primary>punto, punto de montaje</primary></indexterm>

	  <para>El punto de montaje es el árbol de directorios que albergará el contenido del sistema de archivos en la partición seleccionada. Por lo tanto, una partición montada en <filename>/home/</filename> generalmente está destinada a contener la información de los usuarios.</para>

	  <para>Cuando el directorio se llama «<filename>/</filename>» es llamada «<emphasis>raíz</emphasis>» («root») del árbol de archivos y, por lo tanto, la raíz de la partición que contendrá el sistema Debian en sí.</para>
        </sidebar>

        <sidebar>
          <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Memoria virtual, «swap»</title>
          <indexterm><primary>memoria virtual</primary></indexterm>
          <indexterm><primary>intercambio</primary></indexterm>
          <indexterm><primary>swap</primary><secondary>partición</secondary></indexterm>
          <indexterm><primary>partición swap</primary></indexterm>

	  <para>La memoria virtual le permite al núcleo Linux, cuando no tiene suficiente memoria (RAM), liberar parte de ella almacenando las partes de la RAM que han estado inactivas por un tiempo en la partición swap del disco duro.</para>

	  <para>Para simular la memoria adicional Windows utiliza un archivo swap que se encuentra directamente en el sistema de archivos. Por otro lado, Linux utiliza una partición dedicada a este propósito, de ahí el término «partición swap».</para>
        </sidebar>

	<para>Al elegir una partición puede elegir la forma en la que la va a utilizar:</para>
        <itemizedlist>
          <listitem>
	    <para>darle formato e incluirla en el árbol de archivos eligiendo un punto de montaje;</para>
          </listitem>
          <listitem>
	    <para>utilizarla como partición swap;</para>
          </listitem>
          <listitem>
	    <para>convertirla en un «volúmen físico para cifrado» (para proteger la confidencialidad de los datos en ciertas particiones, revise abajo);</para>
          </listitem>
          <listitem>
	    <para>convertirla en un «volúmen físico para LVM» (se discute este concepto en detalle más adelante en este capítulo);</para>
          </listitem>
          <listitem>
	    <para>utilizarla como dispositivo RAID (revise más adelante en este capítulo);</para>
          </listitem>
          <listitem>
	    <para>también puede elegir no utilizarla y, por lo tanto, no modificarla.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section id="sect.install-software-raid">
        <title>Configuración de dispositivos multidisco (RAID por software)</title>
        <indexterm><primary>RAID</primary><secondary>RAID Software</secondary></indexterm>
        <indexterm><primary>RAID por software</primary></indexterm>
        <indexterm><primary>dispositivo</primary><secondary>multidisco</secondary></indexterm>

	<para>Algunos tipos de RAID permiten duplicar la información almacenada en los discos duros para evitar la pérdida de datos en caso de que uno de ellos sufra algún problema de hardware. RAID nivel 1 mantiene una copia simple e idéntica (réplica, «mirror») de un disco duro en otro dispositivo mientras que RAID nivel 4 divide datos redundantes en varios discos permitiendo la reconstrucción completa de un dispositivo que falle.</para>

	<para>Sólo describiremos RAID nivel 1 que es el más simple de implementar. El primer paso incluye crear dos particiones del mismo tamaño en dos discos duros distintos y utilizarlas como «volúmen físico para RAID».</para>

	<para>Luego debe seleccionar «Configurar RAID por software» en la herramienta de particionado para combinar estas dos particiones en un nuevo disco virtual y seleccionar «Crear dispositivo MD» en la pantalla de configuración. Luego necesita responder una serie de preguntas sobre este nuevo dispositivo. La primera pregunta sobre el nivel de RAID a utilizar, que en nuestro caso será «RAID1». La segunda pregunta es sobre la cantidad de dispositivos activos — dos en nuestro caso, que es la cantidad de particiones que tienen que incluirse en este dispositivo MD. La tercera pregunta sobre la cantidad de dispositivos libres — 0; no tenemos planeado agregar discos adicionales de repuesto en caso que uno de los discos falle. La última pregunta requiere que seleccione las particiones para el dispositivo RAID — éstas serían las dos que separó para este propósito (asegúrese de seleccionar sólamente las particiones que mencionen «raid» específicamente).</para>

	<para>Nuevamente en el menú principal, aparecerá un nuevo disco «RAID». Este disco se presenta con sólo una partición que no puede ser eliminada pero a la que podemos especificar el uso que le daremos (como con cualquier otra partición).</para>

	<para>Para más detalles sobre funciones RAID, revise la <xref linkend="sect.raid-soft" />.</para>
      </section>
      <section id="sect.install-lvm">
        <title>Configuración del gestor de volúmenes lógicos (LVM)</title>
        <indexterm><primary>LVM</primary><secondary>durante la instalación</secondary></indexterm>
        <indexterm><primary>Gestor de volúmenes lógicos</primary><secondary>durante la instalación</secondary></indexterm>

	<para>LVM le permite crear particiones «virtuales» a través de varios discos. Los beneficios son dobles: el tamaño de las particiones no estará limitado por el tamaño de los discos individuales sino por el del conjunto completo y podrá modificar el tamaño de las particiones existentes en cualquier momento, posiblemente agregando un disco adicional cuando lo necesite.</para>

	<para>LVM utiliza una terminología particular: una partición virtual es un «volúmen lógico», que es parte de un «grupo de volúmenes» o la asociación de varios «volúmenes físicos». De hecho, cada uno de esos términos se corresponde con una partición «real» (o dispositivo de RAID por software).</para>
        <indexterm><primary>volúmen</primary><secondary>lógico</secondary></indexterm>
        <indexterm><primary>volúmen</primary><secondary>físico</secondary></indexterm>
        <indexterm><primary>grupo</primary><secondary>de volúmenes</secondary></indexterm>
        <indexterm><primary>volúmen</primary><secondary>grupo de volúmenes</secondary></indexterm>

	<para>Esta técnica funciona de una forma muy simple: se divide cada volúmen, sea lógico o físico, en bloques del mismo tamaño que LVM hace que coincidan. Agregar un nuevo disco causará la creación de un nuevo volúmen físico y sus nuevos bloques pueden ser asociados a cualquier grupo de volúmenes. Todas las particiones del grupo de volúmenes expandido tendrán espacio adicional sobre el que extenderse.</para>

	<para>La herramienta de particionado configura LVM en varios pasos. Primero debe crear las particiones en los discos existentes que serán «volúmenes físicos para LVM». Para activar LVM debe seleccionar «Configurar el gestor de volúmenes lógicos (LVM)» y luego, en la misma pantalla de configuración, «Crear grupo de volúmenes» al que le asociará los volúmenes físicos existentes. Finalmente podrá crear volúmenes lógicos dentro de este grupo de volúmenes. La herramienta de particionado automático puede realizar todos estos pasos automáticamente.</para>

	<para>Cada volúmen físico aparecerá en el menú de particionado como un disco con sólo una partición que no puede ser eliminada pero que puede utilizar como desee.</para>

	<para>Se describe el uso de LVM con más detalles en la <xref linkend="sect.lvm" />.</para>
      </section>
      <section>
        <title>Configuración de particiones cifradas</title>
        <indexterm><primary>LUKS</primary></indexterm>
        <indexterm><primary>dm-crypt</primary></indexterm>
        <indexterm><primary>cifrada</primary><secondary>partición</secondary></indexterm>
        <indexterm><primary>partición cifrada</primary></indexterm>
        <indexterm><primary>confidencialidad</primary><secondary>archivos</secondary></indexterm>
        <indexterm><primary>archivo</primary><secondary>confidencialidad de</secondary></indexterm>

	<para>Para garantizar la confidencialidad de sus datos, por ejemplo en el caso de pérdida o robo de su equipo o un disco duro, es posible cifrar los datos en algunas particiones. Se puede agregar esta funcionalidad bajo cualquier sistema de archivos ya que, como con LVM; Linux (en particular el controlador dm-crypt) utiliza el mapeador de dispositivos («Device Mapper») para crear una partición virtual (cuyo contenido es protegido) basándose en una partición subyacente que almacenará los datos en forma cifrada (gracias a LUKS, «configuración unificada de claves en Linux» por sus siglas en inglés, un formato estándar que permite almacenar tanto datos encriptados como también metainformación que indica los algoritmos de cifrado utilizados).</para>

        <sidebar id="sidebar.encrypted-swap-partition">
          <title><emphasis>SEGURIDAD</emphasis> Partición swap cifrada</title>

	  <para>Cuando se utiliza una partición cifrada, se almacena la clave de cifrado en memoria (RAM). Obtener esta clave permite descfirar los datos, por lo que es de mayor importancia evitar dejar una copia de esta clave que pueda ser accedida por el potencial ladrón del equipo o disco duro o a un técnico de mantenimiento. Esto puede ocurrir fácilmente en un equipo portátil ya que al hibernar se almacenan los contenidos de la RAM en la partición SWAP. Si esta partición no se encuentra cifrada, el ladrón podrá acceder a la clave y utilizarla para descifrar los datos de las particiones cifradas. Por esta razón, cuando utilice particiones cifradas ¡es imperativo también cifrar la partición swap!</para>

	  <para>El instalador de Debian advertirá al usuario si intenta crear una partición cifrada cuando la partición swap no sea cifrada también.</para>
        </sidebar>

	<para>Para crear una partición cifrada primero debe asignar una partición disponible para este propósito. Lo logrará seleccionando una partición e indicando que sea utilizada como «volúmen físico para cifrado». Luego de particionar el disco que contenga el volúmen físico, seleccione «Configurar volúmenes cifrados». El software le propondrá inicializar el volúmen físico con datos aleatorios (dificultando aún más la localización de los datos reales) y le pedirá que ingrese una «frase de cifrado» que tendrá que ingresar cada vez que arranque el equipo para poder acceder al contenido de la partición cifrada. Una vez que complete este paso y haya vuelto al menú de la herramienta de particionado, tendrá disponible una nueva partición en un «volúmen cifrado» que puede configurar como cualquier otra partición. En la mayoría de los casos, utilizará esta partición como un volúmen físico de LVM para proteger varias particiones (volúmenes lógicos LVM) con la misma clave de cifrado, incluyendo la partición swap (revise el recuadro <xref linkend="sidebar.encrypted-swap-partition" />).</para>
      </section>
    </section>
    <section>
      <title>Instalación del sistema base</title>
      <indexterm><primary>sistema</primary><secondary>base</secondary></indexterm>

      <para>Este paso, que no necesita interacción con el usuario, instala los paquetes del «sistema base» Debian. Esto incluye las herramientas <command>dpkg</command> y <command>apt</command> que administran los paquetes Debian, así como también los programas necesarios para iniciar el sistema y comenzar a utlizarlo.</para>

      <figure>
        <title>Instalación del sistema base</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-basesystem.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section>
      <title>Configuración del gestor de paquetes (<command>apt</command>)</title>
      <indexterm><primary>configuración</primary><secondary>inicial de APT</secondary></indexterm>
      <indexterm><primary>APT</primary><secondary>configuración inicial</secondary></indexterm>

      <para>Para poder instalar software adicional, necesita configurar APT para indicarle dónde encontrar paquetes Debian. Este paso es tan automático como es posible. Comienza preguntando si debe utilizar una fuente de paquetes en la red o si sólo debe buscar paquetes en el CD-ROM.</para>

      <sidebar>
        <title><emphasis>NOTA</emphasis> CD-ROM de Debian en el dispositivo</title>

	<para>Si el instalador detecta un disco de instalación de Debian en el lector de CD/DVD, no es necesario configurar APT para que busque paquetes en la red: APT es configurado automáticamente para leer paquetes de un dispositivo removible. Si el disco es parte de un conjunto el software ofrecerá la opción de «explorar» otros discos para tener referencias a todos los paquetes en ellos.</para>
      </sidebar>

      <para>Si se desea obtener paquetes de la red, las siguientes dos preguntas le permitirán elegir un servidor del que descargar los paquetes seleccionando primero un país y depués una réplica disponible en dicho país (una réplica es un servidor público que alberga copias de todos los archivos del archivo principal de Debian).</para>

      <figure>
        <title>Selección de una réplica de Debian</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-mirror.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Finalmente, el programa propone utilizar un proxy HTTP. Si no configura un proxy, accederá a internet directamente. Si ingresa <literal>http://proxy.falcot.com:3128</literal>, APT utilizará el <foreignphrase>proxy/caché</foreignphrase> de Falco, un programa «Squid». Puede encontrar estas configuraciones revisando la configuración de un navegador web en otro equipo conectado a la misma red.</para>

      <para>Los archivos <filename>Packages.gz</filename> y <filename>Sources.gz</filename> son descargados automáticamente para actualizar la lista de paquetes reconocidos por APT.</para>

      <sidebar>
        <title><emphasis>VOLVER A LOS CIMIENTOS</emphasis> Proxy HTTP</title>
        <indexterm><primary>proxy</primary></indexterm>
        <indexterm><primary>caché proxy</primary></indexterm>
        <indexterm><primary>proxy, caché</primary></indexterm>
        <indexterm><primary>Squid</primary></indexterm>

	<para>Un proxy HTTP es un servidor que redirige un pedido HTTP para usuarios de red. A veces ayuda a acelerar las descargas manteniendo una copia de los archivos transferidos a través de él (hablamos entonces de un «proxy/caché»). En algunos casos es el único modo de acceder un servicio web externo; en dichos casos es esencial responder la pregunta correspondiente durante la instalación para que el programa pueda descargar los paquetes Debian a través de él.</para>

	<para>Squid es el nombre del software de servidor utilizado por Falcot Corp que ofrece este servicio.</para>
      </sidebar>
    </section>
    <section>
      <title>Concurso de popularidad de paquetes Debian</title>

      <para>El sistema Debian contiene un paquete llamado <emphasis role="pkg">popularity-contest</emphasis> cuyo propósito es compilar estadísticas del uso de paquetes. Cada semana, este paquete recopila información de los paquetes instalados y aquellos utilizados recientemente y envía esta información de forma anónima a los servidores del proyecto Debian. El proyecto luego puede utilizar esta información para determinar la importancia relativa de cada paquete, lo que influencia la prioridad que se le dará a cada uno. En particular, los paquetes más «populares» serán incluidos en el CD-ROM de instalación facilitando el acceso a los mismos a aquellos usuarios que no deseen descargarlos o adquirir un conjunto completo.</para>

      <para>Este paquete sólo se activa a pedido por respeto a la confidencialidad de los datos de uso de los usuarios.</para>
    </section>
    <section>
      <title>Selección de paquetes para instalación</title>

      <para>El próximo paso le permite elegir el propósito del equipo en términos muy generales; las diez tareas sugeridas corresponden a listas de paquetes a instalar. La lista de paquetes que será instalada realmente será adaptada y completada más adelante, pero provee un buen punto de partida de forma simple.</para>

      <para>Algunos paquetes también son instalados automáticamente según el hardware detectado (gracias al programa <command>discover-pkginstall</command> del paquete <emphasis role="pkg">discover</emphasis>). Por ejemplo, si se detecta una máquina virtual VirtualBox el programa instalará el paquete <emphasis role="pkg">virtualbox-guest-dkms</emphasis> que permite una mejor integración de la máquina virtual con el sistema anfitrión.</para>

      <figure>
        <title>Elección de tareas</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-tasksel.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.installing-grub">
      <title>Instalación del gestor de arranque GRUB</title>
      <indexterm><primary>arranque</primary><secondary>gestor de</secondary></indexterm>
      <indexterm><primary>gestor de arranque</primary></indexterm>
      <indexterm><primary>GRUB</primary></indexterm>

      <para>El gestor de arranque es el primer progama iniciado por el BIOS. Este programa carga el núcleo Linux a la memoria y luego lo ejecuta. Generalmente ofrece un menú que le permite al usuario seleccionar el núcleo y/o sistema operativo a iniciar.</para>

      <sidebar id="sidebar.bootloader-dual-boot">
        <title><emphasis>CUIDADO</emphasis> El gestor de arranque e inicio dual</title>
        <indexterm><primary>arranque dual</primary></indexterm>

	<para>Esta fase en el proceso de instalación de Debian detecta los sistemas operativos que ya se encuentran instalados en el equipo y agrega los elementos correspondientes al menú de arranque, pero no todos los programas de instalación lo hacen.</para>

	<para>En particular, si luego instala (o reinstala) Windows borrará el gestor de arranque. Debian seguirá en el disco duro pero no podrá accederlo desde el menú de arranque. Necesitará inicar el sistema de instalación de Debian en modo «rescate» (<userinput>rescue</userinput>) para configurar un gestor de arranque menos exclusivo. El manual de instalación describe en detalle esta operación. <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch08s07.html" /></para>
      </sidebar>

      <para>De forma predeterminada, el menú propuesto por GRUB contiene todos los núcleos Linux instalados así como también todos los demás sistemas operativos detectados. Es por esta razón que debería aceptar la oferta de instalarlo en el registro de arranque maestro («Master Boot Record»). Generalmente tiene sentido mantener algunas versiones anteriores del núcleo ya que hacerlo mantiene su capacidad de iniciar el mismo sistema cuando el último núcleo instalado es defectuoso o no se adapta correctamente al hardware.</para>

      <para>GRUB es el gestor de arranque instalado por Debian de forma predeterminada gracias a su superioridad técnica: funciona con la mayoría de los sistemas de archivo y no necesita actualizarlo luego de cada instalación de un nuevo núcleo ya que lee su configuración durante el inicio y encuentra la posición exacta del nuevo núcleo. La versión 1 de GRUB (ahora conocida como «Grub Legacy») no era compatible con todas las combinaciones de LVM y RAID por software; la versión 2, instalada de forma predeterminada, es más completa. Aún pueden existir situaciones donde es más recomendable instalar LILO (otro gestor de arranque); el instalador lo sugerirá automáticamente.</para>

      <para>Para más información sobre la configuración de GRUB, revise la <xref linkend="sect.config-grub" />.</para>

      <sidebar>
        <title><emphasis>CUIDADO</emphasis> Gestores de arranque y arquitecturas</title>

	<para>LILO y GRUB, mencionados en este capítulo, son los gestores de arranque para las arquitecturas <emphasis>i386</emphasis> y <emphasis>amd64</emphasis>. Si instala Debian en otra arquitectura necesitará utilizar otro gestor de arranque. Entre ellos podemos citar <command>yaboot</command> o <command>quik</command> para <emphasis>powerpc</emphasis>, <command>silo</command> para <emphasis>sparc</emphasis>, <command>aboot</command> para <emphasis>alpha</emphasis>, <command>arcboot</command> para <emphasis>mips</emphasis>.</para>
      </sidebar>
    </section>
    <section>
      <title>Finalización de la instalación y reiniciado</title>

      <para>La instalación ahora está completa, el programa le invita a quitar el CD-ROM y reiniciar el equipo.</para>
    </section>
  </section>
  <section id="sect.after-first-boot">
    <title>Luego del primer arranque</title>

    <para>Si activó la tarea «Entorno Debian de escritorio» sin ninguna elección explícita (o con la elección de "GNOME"), el equipo mostrará el gestor de inicio de sesión <command>gdm3</command>.</para>

    <figure>
      <title>Primer arranque</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/inst-gdm.png" scalefit="1" width="65%" />
        </imageobject>
      </mediaobject>
    </figure>

    <para>El usuario que fue creado puede iniciar sesión y comenzar a trabajar inmediatamente.</para>
    <section>
      <title>Instalación de software adicional</title>

      <para>Los paquetes instalados corresponden a los perfiles seleccionados durante la instalación pero no necesariamente para el uso que se le dará realmente al equipo. Por lo tanto, podría desear utilizar una herramienta de gestión de paquetes para refinar la selección de paquetes instalados. Las dos herramientas utilizadas más frecuentemente (que son instaladas si se eligió el perfil «Entorno Debian de escritorio») son <command>apt</command> (disponible desde la línea de órdenes) y <command>synaptic</command> («Administrador de paquetes Synaptic» en el menú).</para>

      <para>Para facilitar la instalación de grupos de programas coherentes, Debian crea «tareas» dedicadas a usos específicos (servidor de correo, servidor de archivos, etc.). Tuvo oportunidad de seleccionarlos durante la instalación y puede accederlos nuevamente gracias a herramientas de gestión de paquetes como <command>aptitude</command> (las tareas se encuentran en una sección particular) y <command>synaptic</command> (a través del menú <menuchoice><guimenu>Editar</guimenu> <guimenuitem>Marcar paquetes por tarea...</guimenuitem> </menuchoice>).</para>

      <para>Aptitude es una interfaz para APT de pantalla completa en modo texto. Permite al usuario navegar la lista de paquetes disponibles según varias categorías (paquetes instalados o no instalados, por tarea, por sección, etc.) y revisar toda la información disponible para cada uno de ellos (dependencias, conflictos, descripción, etc.). Cada paquete puede ser marcado «install» (para instalar, la tecla <keycap>+</keycap>) o «remove» (para eliminar, la tecla <keycap>-</keycap>), Se realizarán todas estas operaciones simultáneamente una vez que las confirme presionando la tecla <keycap>g</keycap> (por «go!», «¡adelante!»). Si se olvidó algunos programas no se preocupe; podrá ejecutar <command>aptitude</command> nuevamente una vez que se completó la instalación inicial.</para>
      <indexterm><primary>aptitude</primary></indexterm>

      <sidebar>
        <title><emphasis>SUGERENCIA</emphasis> Debian piensa en quienes no hablan inglés</title>

	<para>Muchas tareas están dedicadas a la localización del sistema a otros idiomas además del inglés. Incluyen documentación traducida, diccionarios y varios otros paquetes útiles a quienes hablen distintos idiomas. Se selecciona la tarea apropiada automáticamente si seleccionó un idioma distinto al inglés durante la instalación.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>CULTURA</emphasis> <command>dselect</command>, la antigua interfaz para instalar paquetes</title>

	<para>Antes de <command>aptitude</command>, el programa estándar para seleccionar paquetes a instalar era <command>dselect</command>, la antigua interfaz gráfica asociada con <command>dpkg</command>. Ya que se trata de un programa difícil de utilizar para principiantes, no es recomendado.</para>
        <indexterm><primary><command>dselect</command></primary></indexterm>
      </sidebar>

      <para>Por supuesto, se puede no seleccionar tarea alguna para instalar. En este caso, puede instalar manualmente el software deseado con <command>apt-get</command> o <command>aptitude</command> (ambos disponibles en la línea de órdenes).</para>

      <sidebar>
        <title><emphasis>VOCABULARIO</emphasis> Dependencias de un paquete, conflictos</title>

	<para>En la jerga de empaquetado de Debian, una «dependencia» es otro paquete necesario para que el paquete en cuestión funcione correctamente. A la inversa, un «conflicto» es un paquete que no puede ser instalado junto con otro.</para>

	<para>Se discuten estos conceptos con más detalles en el <xref linkend="packaging-system" />.</para>
      </sidebar>
    </section>
    <section>
      <title>Actualización del sistema</title>
      <indexterm><primary>safe-upgrade</primary></indexterm>

      <para>Al principio, generalmente se necesitaba <command>aptitude safe-upgrade</command> (una orden utilizada para actualizar automáticamente los programas instalados), especialmente debido a posibles actualizaciones de seguridad publicadas desde la entrega de la última versión estable de Debian. Estas actualizaciones podrían requerir preguntas adicionales a través de <command>debconf</command>, la herramienta estándar para configuración en Debian. Para más información sobre estas actualizaciones realizadas por <command>aptitude</command> revise la <xref linkend="sect.apt-upgrade" />.</para>
    </section>
  </section>
</chapter>
