<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">9.7. Programación de tareas con cron y atd</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Arranque del sistema, Scripts de inicio, SSH, Telnet, Derechos, Permisos, Supervisión, Inetd, Cron, Respaldo, Conexión en caliente («hotplug»), PCMCIA, APM, ACPI" /><link
        rel="home"
        href="index.html"
        title="El manual del Administrador de Debian" /><link
        rel="up"
        href="unix-services.html"
        title="Capítulo 9. Servicios Unix" /><link
        rel="prev"
        href="sect.inetd.html"
        title="9.6. El superservidor inetd" /><link
        rel="next"
        href="sect.asynchronous-task-scheduling-anacron.html"
        title="9.8. Programación de tareas asincrónicas: anacron" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/es-ES/stable/sect.task-scheduling-cron-atd.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.inetd.html"><strong>Anterior</strong></a></li><li
          class="home">El manual del Administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.asynchronous-task-scheduling-anacron.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.task-scheduling-cron-atd"></a>9.7. Programación de tareas con <code
                  class="command">cron</code> y <code
                  class="command">atd</code></h2></div></div></div><a
          id="id-1.12.10.2"
          class="indexterm"></a><a
          id="id-1.12.10.3"
          class="indexterm"></a><a
          id="id-1.12.10.4"
          class="indexterm"></a><a
          id="id-1.12.10.5"
          class="indexterm"></a><div
          class="para">
			<code
            class="command">cron</code> es el demonio responsable de ejecutar tareas programadas y recurrentes (todos los días, todas las semanas, etc.); <code
            class="command">atd</code> está encargado de los programas a ejecutar una sola vez pero en un momento específico en el futuro.
		</div><div
          class="para">
			En un sistema Unix, muchas tareas están programadas para ejecutarse regularmente:
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					rotar los archivos de registro;
				</div></li><li
              class="listitem"><div
                class="para">
					actualizar la base de datos del programa <code
                  class="command">locate</code>;
				</div></li><li
              class="listitem"><div
                class="para">
					respaldos;
				</div></li><li
              class="listitem"><div
                class="para">
					scripts de mantenimiento (como limpiar los archivos temporales).
				</div></li></ul></div><div
          class="para">
			De forma predeterminada, todos los usuarios pueden programar tareas para ejecutar. Cada usuario tiene su propio «<span
            class="emphasis"><em>crontab</em></span>» en el que pueden almacenarlas. Puede editarlo ejecutando <code
            class="command">crontab -e</code> (el contenido del mismo es almacenado en el archivo <code
            class="filename">/var/spool/cron/crontabs/<em
              class="replaceable">usuario</em></code>).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>SEGURIDAD</em></span> Restricción de <code
                      class="command">cron</code> o <code
                      class="command">atd</code></strong></p></div></div></div><div
            class="para">
			Puede restringir el acceso a <code
              class="command">cron</code> si crea un archivo de autorización explícita (una lista blanca) en <code
              class="filename">/etc/cron.allow</code> donde indique sólo los usuarios autorizados a programar tareas. Todos los demás usuarios automáticamente quedarán excluidos de dicha funcionalidad. A la inversa, si sólo desea bloquear unos pocos usuarios problemáticos, podría agregar su nombres de usuario en el archivo de prohibición explícita <code
              class="filename">/etc/cron.deny</code>. Esta misma funcionalidad está disponible para <code
              class="command">atd</code> con los archivos <code
              class="filename">/etc/at.allow</code> y <code
              class="filename">/etc/at.deny</code>.
		</div></div><div
          class="para">
			El usuario root tiene su propio «<span
            class="emphasis"><em>crontab</em></span>», pero también puede utilizar el archivo <code
            class="filename">/etc/crontab</code> o escribir archivos «<span
            class="emphasis"><em>crontab</em></span>» adicionales en el directorio <code
            class="filename">/etc/cron.d</code>. Estas dos últimas soluciones tienen la ventaja de poder especificar el usuario bajo el que se ejecutará el programa.
		</div><div
          class="para">
			De forma predeterminada, el paquete <span
            class="emphasis"><em>cron</em></span> incluye algunas tareas programadas que ejecutan:
		</div><div
          xmlns:d="http://docbook.org/ns/docbook"
          class="itemizedlist"><ul><li
              class="listitem"><div
                class="para">
					programas en el directorio <code
                  class="filename">/etc/cron.hourly/</code> una vez por hora;
				</div></li><li
              class="listitem"><div
                class="para">
					programas en el directorio <code
                  class="filename">/etc/cron.daily/</code> una vez por día;
				</div></li><li
              class="listitem"><div
                class="para">
					programas en el directorio <code
                  class="filename">/etc/cron.weekly/</code> una vez por semana;
				</div></li><li
              class="listitem"><div
                class="para">
					programas en el directorio <code
                  class="filename">/etc/cron.monthly/</code> una vez por mes.
				</div></li></ul></div><div
          class="para">
			Muchos paquetes Debian dependen de este servicio: agregan sus scripts de mantenimiento en estos directorios, los cuales garantizan un funcionamiento óptimo de sus servicios.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.format-crontab"></a>9.7.1. Formato de un archivo <code
                    class="filename">crontab</code></h3></div></div></div><a
            id="id-1.12.10.15.2"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Atajos de texto para <code
                        class="command">cron</code></strong></p></div></div></div><div
              class="para">
				<code
                class="command">cron</code> reconoce algunas abreviaciones que reemplazan los primeros cinco campos de un elemento de <code
                class="filename">crontab</code>. Corresponden a las opciones de programación más comunes:
			</div><div
              xmlns:d="http://docbook.org/ns/docbook"
              class="itemizedlist"><ul><li
                  class="listitem"><div
                    class="para">
						<code
                      class="literal">@yearly</code>: una vez por año (1 de Enero a las 00:00);
					</div></li><li
                  class="listitem"><div
                    class="para">
						<code
                      class="literal">@monthly</code>: una vez por mes (el 1ro de mes a las 00:00);
					</div></li><li
                  class="listitem"><div
                    class="para">
						<code
                      class="literal">@weekly</code>: una vez por semana (Domingo a las 00:00);
					</div></li><li
                  class="listitem"><div
                    class="para">
						<code
                      class="literal">@daily</code>: una vez por día (a las 00:00);
					</div></li><li
                  class="listitem"><div
                    class="para">
						<code
                      class="literal">@hourly</code>: una vez por hora (al principio de cada hora).
					</div></li></ul></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CASO ESPECIAL</em></span> <code
                        class="command">cron</code> y horarios de verano</strong></p></div></div></div><div
              class="para">
				En Debian, <code
                class="command">cron</code> tiene en cuenta los cambios de hora (para horarios de verano o, de hecho, cualquier cambio importante en la hora local) de la mejor forma que le es posible. Por lo tanto, las tareas que deben ejecutarse durante una hora que nunca existió (por ejemplo: aquellas programadas para las 02:30 durante el cambio de horario de verano en Francia, ya que el reloj salta de las 02:00 a las 03:00 directamente) se ejecutarán poco después del cambio de hora (por lo tanto, alrededor de las 03:00 DST). Por otro lado, en otoño, las tareas serán ejecutadas sólo una vez cuando podrían ser ejecutadas varias veces (a las 02:30 DST y luego a las 02:30 en horario estándar ya que a las 03:00 DST el reloj vuelve a las 02:00).
			</div><div
              class="para">
				Tenga cuidado, sin embargo, si el orden y el tiempo entre ejecuciones de tareas programadas importa. Debe revisar la compatibilidad de estas limitaciones con el comportamiento de <code
                class="command">cron</code>; si es necesario, puede preparar una programación especial para las dos noches problemáticas del año.
			</div></div><div
            class="para">
				Cada línea significativa de un archivo <span
              class="emphasis"><em>crontab</em></span> describe una tarea programada con los siguientes seis (o siete) campos:
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						el valor del minuto (número de 0 a 59);
					</div></li><li
                class="listitem"><div
                  class="para">
						el valor de la hora (de 0 a 23);
					</div></li><li
                class="listitem"><div
                  class="para">
						el valor del día del mes (de 1 a 31);
					</div></li><li
                class="listitem"><div
                  class="para">
						el valor del mes (de 1 a 12);
					</div></li><li
                class="listitem"><div
                  class="para">
						el valor de los días de la semana (de 0 a 7, donde 1 es el lunes y el domingo es tanto el 0 como el 7; también es posible utilizar las tres primeras letras del nombre del día en inglés, como <code
                    class="literal">Sun</code>, <code
                    class="literal">Mon</code>, etc.);
					</div></li><li
                class="listitem"><div
                  class="para">
						el nombre de usuario bajo el que se ejecutará el programa (en el archivo <code
                    class="filename">/etc/crontab</code> y en los fragmentos ubicados en <code
                    class="filename">/etc/cron.d/</code>, pero no en los archivos de cada usuario);
					</div></li><li
                class="listitem"><div
                  class="para">
						el programa a ejecutar (cuando se cumpla la condición definida por los primeros cinco campos).
					</div></li></ul></div><div
            class="para">
				Todos estos detalles están documentados en la página de manual <span
              class="citerefentry"><span
                class="refentrytitle">crontab</span>(5)</span>.
			</div><div
            class="para">
				Puede expresar cada valor como una lista de valores posibles (separados por coma). La sintaxis <code
              class="literal">a-b</code> describe el intervalo de todos los valores entre <code
              class="literal">a</code> y <code
              class="literal">b</code>. La sintaxis <code
              class="literal">a-b/c</code> describe el intervalo con un incremento de <code
              class="literal">c</code> (por ejemplo: <code
              class="literal">0-10/2</code> es lo mismo que <code
              class="literal">0,2,4,6,8,10</code>. Un asterisco «<code
              class="literal">*</code>» es un comodín y representa todos los valores posibles.
			</div><div
            class="example"><a
              xmlns=""
              id="example.crontab"></a><p
              class="title"><strong>Ejemplo 9.2. Ejemplo de archivo <code
                  class="filename">crontab</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">#Formato
#min hora dia mes dds  programa

# Descargar los datos todas las noches a las 19:25
 25  19   *   *   *    $HOME/bin/descargar.pl

# 08:00 en días de semana (Lunes a Viernes)
 00  08   *   *   1-5  $HOME/bin/haceralgo

# Reiniciar el proxy IRC luego de cada reinicio
@reboot /usr/bin/dircproxy</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Ejecución de un programa durante el inicio</strong></p></div></div></div><div
              class="para">
				Para ejecutar un programa sólo una vez, justo después de iniciar el equipo, puede utilizar el macro <code
                class="literal">@reboot</code> (reiniciar <code
                class="command">cron</code> no disparará aquello programado con <code
                class="literal">@reboot</code>). Este macro reemplaza los primeros cinco campos de un elemento en el archivo «<span
                class="emphasis"><em>crontab</em></span>».
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVA</em></span> Emulación de <code
                        class="command">cron</code> mediante <code
                        class="command">systemd</code></strong></p></div></div></div><div
              class="para">
				Es posible emular parte del comportamiento de <code
                class="command">cron</code> mediante el mecanismo de temporizadores de <code
                class="command">systemd</code> (ver <a
                class="xref"
                href="unix-services.html#sect.systemd">Sección 9.1.1, “El sistema de inicio systemd”</a>).
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.at-command"></a>9.7.2. Utilización del programa <code
                    class="command">at</code></h3></div></div></div><a
            id="id-1.12.10.16.2"
            class="indexterm"></a><div
            class="para">
				La orden <code
              class="command">at</code> ejecuta un programa en un momento específico en el futuro. Obtiene la fecha y hora deseada como parámetros y el programa a ejecutar en su entrada estándar. Ejecutará el programa como si hubiese sido ingresado en la consola actual. <code
              class="command">at</code> incluso se encarga de mantener el entorno para poder reproducir las mismas condiciones al ejecutar el programa. Puede indicar la hora con las convenciones usuales: <code
              class="literal">16:12</code> o <code
              class="literal">4:12pm</code> representan 12 minutos pasadas las 4 de la tarde. También puede especificar la fecha en varios formatos europeos u occidentales, incluyendo <code
              class="literal">DD.MM.AA</code> (<code
              class="literal">27.07.15</code> representaría el 27 de Julio de 2015), <code
              class="literal">AAAA-MM-DD</code> (la misma fecha se representaría como <code
              class="literal">2015-07-27</code>), <code
              class="literal">MM/DD/[CC]AA</code> (es decir: <code
              class="literal">12/25/15</code> o <code
              class="literal">12/25/2015</code> representan, ambas, el 25 de Diciembre de 2015) o simplemente <code
              class="literal">MMDDCCAA</code> (de forma que <code
              class="literal">122515</code> o <code
              class="literal">12252015</code> también representaría el 25 de Diciembre de 2015). Sin fecha, ejecutará el programa tan pronto como el reloj indique la hora especificada (el mismo día o el siguiente si ya pasó dicha hora ese día). También puede ingresar simplemente «today» o «tomorrow» representando el día actual o el día siguiente, respectivamente.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>at 09:00 27.07.15 &lt;&lt;END</code></strong>
<code
              class="computeroutput">&gt; </code><strong
              class="userinput"><code>echo "¡No olvides desearle un feliz cumpleaños a Raphaël!" \</code></strong>
<code
              class="computeroutput">&gt; </code><strong
              class="userinput"><code>  | mail lolando@debian.org</code></strong>
<code
              class="computeroutput">&gt; </code><strong
              class="userinput"><code>END</code></strong>
<code
              class="computeroutput">warning: commands will be executed using /bin/sh
job 31 at Mon Jul 27 09:00:00 2015</code></pre><div
            class="para">
				Una sintaxis alternativa posterga la ejecución por un tiempo determinado: <code
              class="command">at now + <em
                class="replaceable">número</em> <em
                class="replaceable">período</em></code>. El <em
              class="replaceable">período</em> puede ser <code
              class="literal">minutes</code> (minutos), <code
              class="literal">hours</code> (horas), <code
              class="literal">days</code> (días) o <code
              class="literal">weeks</code> (semanas). <em
              class="replaceable">número</em> simplemente indica la cantidad de dichas unidades deben pasar antes de ejecutar el programa.
			</div><div
            class="para">
				Para cancelar una tarea programada con <code
              class="command">cron</code>, simplemente ejecute <code
              class="command">crontab -e</code> y elimine la línea correspondiente del archivo <span
              class="emphasis"><em>crontab</em></span>. Para tareas en <code
              class="command">at</code> es casi igual de sencillo: ejecute <code
              class="command">atrm <em
                class="replaceable">número-tarea</em></code>. El número de tarea es indicado por <code
              class="command">at</code> cuando la programó, pero puede volver a encontrarla ejecutando <code
              class="command">atq</code> que le proveerá una lista de las tareas programadas actualmente.
			</div><a
            id="id-1.12.10.16.7"
            class="indexterm"></a><a
            id="id-1.12.10.16.8"
            class="indexterm"></a></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.inetd.html"><strong>Anterior</strong>9.6. El superservidor inetd</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.asynchronous-task-scheduling-anacron.html"><strong>Siguiente</strong>9.8. Programación de tareas asincrónicas: anacron</a></li></ul></body></html>
