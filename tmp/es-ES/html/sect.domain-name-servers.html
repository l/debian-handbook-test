<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">10.6. Servidores de nombres de dominio (DNS)</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-8-es-ES-1.0-1" /><meta
        name="keywords"
        content="Red, Puerta de enlace, TCP/IP, IPv6, DNS, Bind, DHCP, QoS" /><link
        rel="home"
        href="index.html"
        title="El manual del Administrador de Debian" /><link
        rel="up"
        href="network-infrastructure.html"
        title="Capítulo 10. Infraestructura de red" /><link
        rel="prev"
        href="sect.ipv6.html"
        title="10.5. IPv6" /><link
        rel="next"
        href="sect.dhcp.html"
        title="10.7. DHCP" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/es-ES/stable/sect.domain-name-servers.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>Anterior</strong></a></li><li
          class="home">El manual del Administrador de Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>Siguiente</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.domain-name-servers"></a>10.6. Servidores de nombres de dominio (DNS)</h2></div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-principe"></a>10.6.1. Principio y mecanismo</h3></div></div></div><a
            id="id-1.13.9.2.2"
            class="indexterm"></a><a
            id="id-1.13.9.2.3"
            class="indexterm"></a><div
            class="para">
				El <span
              class="emphasis"><em>servicio de nombres de dominio</em></span> (DNS: «Domain Name Service») es un componente fundamental de Internet: asocia nombres de equipo con direcciones IP (y viceversa), lo que permite utilizar <code
              class="literal">www.debian.org</code> en lugar de <code
              class="literal">5.153.231.4</code> o <code
              class="literal">2001:41c8:1000:21::21:4</code>.
			</div><div
            class="para">
				Los registros DNS se organizan en zonas; cada zona coincide con un dominio (o subdominio) o un rango de direcciones IP (ya que generalmente se proveen direcciones IP en rangos consecutivos). Un servidor primario es autoridad sobre los contenidos de una zona; los servidores secundarios, generalmente en otras máquinas, proveen copias de la zona primaria actualizadas regularmente.
			</div><a
            id="id-1.13.9.2.6"
            class="indexterm"></a><a
            id="id-1.13.9.2.7"
            class="indexterm"></a><div
            class="para">
				Cada zona puede contener registros de varios tipos (<span
              class="emphasis"><em>registros de recursos</em></span>: «Resource Records»):
			</div><div
            xmlns:d="http://docbook.org/ns/docbook"
            class="itemizedlist"><ul><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">A</code>: dirección IPv4. <a
                    id="id-1.13.9.2.9.1.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">CNAME</code>: alias (<span
                    class="emphasis"><em>nombre canónico</em></span>: «canonical name»). <a
                    id="id-1.13.9.2.9.2.1.3"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">MX</code>: <span
                    class="emphasis"><em>intercambio de correo</em></span> («mail exchange»), un servidor de correo. Los otros servidores de correo utilizan esta información para encontrar a dónde redirigir los emails enviados a una dirección particular. Cada registro MX tiene una prioridad. Primero se intenta el servidor con mayor prioridad, con el menor número (revise el recuadro <a
                    class="xref"
                    href="network-services.html#sidebar.smtp"><span
                      class="emphasis"><em>VOLVER A LOS CIMIENTOS</em></span> SMTP</a>); se contactan los demás servidores en orden decreciente de prioridad si el primero no responde. <a
                    id="id-1.13.9.2.9.3.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">PTR</code>: asociación de una dirección IP con un nombre. Se almacenan estos registros en una zona de «DNS inverso» cuyo nombre está basado en el rango de direcciones IP. Por ejemplo, <code
                    class="literal">1.168.192.in-addr.arpa</code> es la zona que contiene las asociaciones inversas de todas las direcciones en el rango <code
                    class="literal">192.168.1.0/24</code>. <a
                    id="id-1.13.9.2.9.4.1.4"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">AAAA</code>: dirección IPv6. <a
                    id="id-1.13.9.2.9.5.1.2"
                    class="indexterm"></a>
					</div></li><li
                class="listitem"><div
                  class="para">
						<code
                    class="literal">NS</code>: asocia un nombre con un servidor de nombres. Cada dominio debe tener al menos un registro NS. Estos registros apuntan al servidor DNS que puede responder consultas sobre este dominio; generalmente apuntan a los servidores primarios y secundarios del dominio. Estos registros también permiten delegaciones de DNS; por ejemplo, la zona <code
                    class="literal">falcot.com</code> puede incluir un registro NS para <code
                    class="literal">internal.falcot.com</code>, lo que significa que otro servidor administra la zona <code
                    class="literal">internal.falcot.com</code>. Por supuesto, este servidor debe declarar una zona <code
                    class="literal">internal.falcot.com</code>. <a
                    id="id-1.13.9.2.9.6.1.6"
                    class="indexterm"></a>
					</div></li></ul></div><a
            id="id-1.13.9.2.10"
            class="indexterm"></a><a
            id="id-1.13.9.2.11"
            class="indexterm"></a><div
            class="para">
				El servidor de nombres de referencia, Bind, fue desarrollado y es mantenido por ISC (<span
              class="emphasis"><em>consorte de software de Internet</em></span>: «Internet Software Consortium»). Está disponible en Debian en el paquete <span
              class="pkg pkg">bind9</span>. La versión 9 provee dos cambios importantes comparada con versiones anteriores. Primero, el servidor DNS ahora puede ejecutar como un usuario sin privilegios para que una vulnerabilidad de seguridad en el servidor no provea permisos de root al atacante (como pasaba frecuentemente con las versiones 8.X).
			</div><div
            class="para">
				Lo que es más, Bind es compatible con el estándar DNSSEC para firmar (y, por lo tanto, autenticar) registros DNS, lo que permite bloquear datos apócrifos durante ataques con intermediarios («man-in-the-middle»).
			</div><a
            id="id-1.13.9.2.14"
            class="indexterm"></a><a
            id="id-1.13.9.2.15"
            class="indexterm"></a><a
            id="id-1.13.9.2.16"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURA</em></span> DNSSEC</strong></p></div></div></div><a
              id="id-1.13.9.2.17.2"
              class="indexterm"></a><div
              class="para">
				La normativa DNSSEC es bastante compleja; esto explica parcialmente por qué no es utilizada ampliamente aún (aún si puede coexistir perfectamente con servidores DNS que no conozcan de DNSSEC). Para entender los recovecos debería revisar el siguiente artículo. <div
                xmlns=""
                class="url">→ <a
                  xmlns="http://www.w3.org/1999/xhtml"
                  href="http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions">http://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions</a></div>
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.dns-config"></a>10.6.2. Configuración</h3></div></div></div><div
            class="para">
				Archivos de configuración de <code
              class="command">bind</code>, sin importar su versión, tienen la misma estructura.
			</div><div
            class="para">
				Los administradores de Falcot crearon una zona primaria <code
              class="literal">falcot.com</code> para almacenar información relacionada con este dominio y una zona <code
              class="literal">168.192.in-addr.arpa</code> para la asociación inversa de direcciones IP en las redes locales.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>PRECAUCIÓN</em></span> Nombres de zonas inversas</strong></p></div></div></div><a
              id="id-1.13.9.3.4.2"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.3"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.4"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.5"
              class="indexterm"></a><a
              id="id-1.13.9.3.4.6"
              class="indexterm"></a><div
              class="para">
				Las zonas inversas tiene un nombre particular. La zona que cubre la red <code
                class="literal">192.168.0.0/16</code> necesita llamarse <code
                class="literal">168.192.in-addr.arpa</code>: se invierten los componentes de la dirección IP seguidos del sufijo <code
                class="literal">in-addr.arpa</code>.
			</div><div
              class="para">
				Para redes IPv6, el sufijo es <code
                class="literal">ip6.arpa</code> y los componentes de la dirección IP, invertidos, son cada caracter de la dirección IP en su representación hexadecimal completa. Por ejemplo, la red <code
                class="literal">2001:0bc8:31a0::/48</code> podría utilizar una red llamada <code
                class="literal">0.a.1.3.8.c.b.0.1.0.0.2.ip6.arpa</code>.
			</div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>SUGERENCIA</em></span> Pruebas del servidor DNS</strong></p></div></div></div><div
              class="para">
				El programa <code
                class="command">host</code> (en el paquete <span
                class="pkg pkg">bind9-host</span>) consulta un servidor DNS y puede utilizarse para probar la configuración del servidor. Por ejemplo, <code
                class="command">host maquina.falcot.com localhost</code> revisa la respuesta del servidor local a la consulta por <code
                class="literal">maquina.falcot.com</code>. <code
                class="command">host <em
                  class="replaceable">direccion.ip</em> localhost</code> prueba la resolución inversa.
			</div><a
              id="id-1.13.9.3.5.3"
              class="indexterm"></a></div><div
            class="para">
				Los siguientes extractos de configuración, de los archivos de Falcot, pueden servirle como punto de partida para configurar un servidor DNS:
			</div><a
            id="id-1.13.9.3.7"
            class="indexterm"></a><a
            id="id-1.13.9.3.8"
            class="indexterm"></a><div
            class="example"><a
              xmlns=""
              id="example.bind-named.conf.local"></a><p
              class="title"><strong>Ejemplo 10.12. Extracto de <code
                  class="filename">/etc/bind/named.conf.local</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">
zone "falcot.com" {
        type master;
        file "/etc/bind/db.falcot.com";
        allow-query { any; };
        allow-transfer {
                195.20.105.149/32 ; // ns0.xname.org
                193.23.158.13/32 ; // ns1.xname.org
        };
};

zone "internal.falcot.com" {
        type master;
        file "/etc/bind/db.internal.falcot.com";
        allow-query { 192.168.0.0/16; };
};

zone "168.192.in-addr.arpa" {
        type master;
        file "/etc/bind/db.192.168";
        allow-query { 192.168.0.0/16; };
};</pre></div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.falcot.com"></a><p
              class="title"><strong>Ejemplo 10.13. Extracto de <code
                  class="filename">/etc/bind/db.falcot.com</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; Zona falcot.com 
; admin.falcot.com. =&gt; contacto de la zona: admin@falcot.com
$TTL    604800
@       IN      SOA     falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresco
                          86400         ; Reintento
                        2419200         ; Expiración
                         604800 )       ; TTL de caché negativo
;
; El @ hace referencia al nombre de la zona («falcot.com» aquí)
; o a $ORIGIN (origen) si se utilizó esta directiva
;
@       IN      NS      ns
@       IN      NS      ns0.xname.org.

internal IN      NS      192.168.0.2

@       IN      A       212.94.201.10
@       IN      MX      5 mail
@       IN      MX      10 mail2

ns      IN      A       212.94.201.10
mail    IN      A       212.94.201.10
mail2   IN      A       212.94.201.11
www     IN      A       212.94.201.11

dns     IN      CNAME   ns</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>PRECAUCIÓN</em></span> Sintaxis de un nombre</strong></p></div></div></div><div
              class="para">
				La sintaxis de los nombres de máquinas deben adherirse a reglas estrictas. Por ejemplo, <code
                class="literal">maquina</code> implica <code
                class="literal">maquina.<em
                  class="replaceable">dominio</em></code>. Si no se debe agregar el nombre de dominio a un nombre, debe escribir dicho nombre como <code
                class="literal">maquina.</code> (con un punto de sufijo). Por lo tanto, indicar un nombre DNS fuera del dominio actual necesita una sintaxis como <code
                class="literal">maquina.otrodominio.com.</code> (con el punto final).
			</div></div><div
            class="example"><a
              xmlns=""
              id="example.bind-db.192.168"></a><p
              class="title"><strong>Ejemplo 10.14. Extracto de <code
                  class="filename">/etc/bind/db.192.168</code></strong></p><div
              class="example-contents"><pre
                class="programlisting">; Zona inversa para 192.168.0.0/16
; admin.falcot.com. =&gt; contacto de la zona: admin@falcot.com
$TTL    604800
@       IN      SOA     ns.internal.falcot.com. admin.falcot.com. (
                        20040121        ; Serial
                         604800         ; Refresco
                          86400         ; Reintento
                        2419200         ; Expiración
                         604800 )       ; TTL de caché negativo

        IN      NS      ns.internal.falcot.com.

; 192.168.0.1 -&gt; arrakis
1.0     IN      PTR     arrakis.internal.falcot.com.
; 192.168.0.2 -&gt; neptune
2.0     IN      PTR     neptune.internal.falcot.com.

; 192.168.3.1 -&gt; pau
1.3     IN      PTR     pau.internal.falcot.com.</pre></div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.ipv6.html"><strong>Anterior</strong>10.5. IPv6</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Subir</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Inicio</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.dhcp.html"><strong>Siguiente</strong>10.7. DHCP</a></li></ul></body></html>
