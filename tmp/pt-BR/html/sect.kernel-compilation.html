<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">8.10. Compilando o núcleo</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-pt-BR-1.0-1" /><meta
        name="keywords"
        content="Configuração, Localização, Localidades, Rede, Resolução de nomes, Usuários, Grupos, Contas, Interpretador de linha de comando, Shell, Impressão, Sistema de iniciação, Compilação de kernel" /><link
        rel="home"
        href="index.html"
        title="O Manual do Administrador Debian" /><link
        rel="up"
        href="basic-configuration.html"
        title="Capítulo 8. Configuração Básica: Rede, Contas, Impressão..." /><link
        rel="prev"
        href="sect.config-misc.html"
        title="8.9. Outras Configurações: Sincronização de tempo, Logs, Compartilhando acesso…" /><link
        rel="next"
        href="sect.kernel-installation.html"
        title="8.11. Instalando o Núcleo" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/pt-BR/stable/sect.kernel-compilation.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>Anterior</strong></a></li><li
          class="home">O Manual do Administrador Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>Próxima</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.kernel-compilation"></a>8.10. Compilando o núcleo</h2></div></div></div><a
          id="id-1.11.14.2"
          class="indexterm"></a><a
          id="id-1.11.14.3"
          class="indexterm"></a><div
          class="para">
			Os núcleos fornecidos pelo Debian incluem o maior número de recursos possível, assim como o máximo de drivers, para cobrir o mais amplo espectro de configurações de hardware. É por isso que alguns usuários preferem recompilar o núcleo, e assim, incluir apenas o que eles precisam especificamente. Existem duas razões para essa escolha. Primeiro, talvez seja para otimizar o consumo de memória, já que o código do núcleo, mesmo nunca sendo usado, ocupa memória para nada (e nunca "cai" no espaço swap, já que é a RAM real que ele usa), o que pode comprometer o desempenho de todo o sistema. Um núcleo compilado localmente pode também limitar o risco com problemas de segurança já que apenas uma fração do código do kernel é compilado e rodado.
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>NOTA</em></span> Atualizações de segurança</strong></p></div></div></div><div
            class="para">
			Se você escolher compilar seu próprio kernel, você tem que aceitar as consequências: o Debian não pode garantir atualizações de segurança para seu kernel customizado. Mantendo o kernel fornecido pelo Debian, você se beneficia das atualizações preparadas pelo time de seguração do Projeto Debian.
		</div></div><div
          class="para">
			A recompilação do kernel também é necessária se você quer usar certas características que só estão disponíveis através de patches (e portanto não incluídas na versão padrão do kernel).
		</div><div
          class="sidebar"><div
            class="titlepage"><div><div><p
                  class="title"><strong><span
                      class="emphasis"><em>APROFUNDANDO</em></span> Manual do Kernel do Debian</strong></p></div></div></div><a
            id="id-1.11.14.7.2"
            class="indexterm"></a><div
            class="para">
			O time do núcleo do Debian mantém o “Debian Kernel Handbook” (também disponível no pacote <span
              class="pkg pkg">debian-kernel-handbook</span>) com documentação ampla sobre a maioria das tarefas relacionadas ao núcleo e sobre como os pacotes oficiais do núcleo do Debian são tratados. Esse é o primeiro lugar aonde você deve olhar caso você precise de informações além das que são fornecidas nesta seção. <div
              xmlns=""
              class="url">→ <a
                xmlns="http://www.w3.org/1999/xhtml"
                href="http://kernel-handbook.alioth.debian.org">http://kernel-handbook.alioth.debian.org</a></div>
		</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-compilation-prerequisites"></a>8.10.1. Introdução e Pré-requisitos</h3></div></div></div><div
            class="para">
				Obviamente o Debian gerencia o núcleo na forma de pacote, que não é como os núcleos tem sido tradicionalmente compilados e instalados. Como o núcleo se mantém no controle do sistema de empacotamento, ele pode ser removido de maneira limpa, ou implantado em várias máquinas. Além do mais, os scripts associados com esses pacotes automatizam a interação com o carregador de inicialização e o gerador de initrd.
			</div><div
            class="para">
				Os fontes do desenvolvedor principal do Linux contém tudo o que é necessário para construir um pacote Debian do núcleo. Mas você ainda precisa instalar o <span
              class="pkg pkg">build-essential</span> para garantir que você tem as ferramentas necessárias para construção de um pacote Debian. Além do mais, a etapa de configuração do núcleo requer o pacote <span
              class="pkg pkg">libncurses5-dev</span>. E finalmente, o pacote <span
              class="pkg pkg">fakeroot</span> irá permitir a criação de um pacote Debian sem usar os direitos de administrador.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURA</em></span> Os bons e velhos tempos do <span
                        class="pkg pkg">kernel-package</span></strong></p></div></div></div><a
              id="id-1.11.14.8.4.2"
              class="indexterm"></a><div
              class="para">
				Antes do sistema de construção do Linux ganhar a habilidade de construir pacotes Debian apropriados, a maneira recomendada de construir esses pacotes era usar o pacote <code
                class="command">make-kpkg</code> from the <span
                class="pkg pkg">kernel-package</span>.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-sources"></a>8.10.2. Pegando os Fontes</h3></div></div></div><a
            id="id-1.11.14.9.2"
            class="indexterm"></a><a
            id="id-1.11.14.9.3"
            class="indexterm"></a><a
            id="id-1.11.14.9.4"
            class="indexterm"></a><div
            class="para">
				Like anything that can be useful on a Debian system, the Linux kernel sources are available in a package. To retrieve them, just install the <span
              class="pkg pkg">linux-source-<em
                class="replaceable">version</em></span> package. The <code
              class="command">apt search ^linux-source</code> command lists the various kernel versions packaged by Debian. The latest version is available in the <span
              class="distribution distribution">Unstable</span> distribution: you can retrieve them without much risk (especially if your APT is configured according to the instructions of <a
              class="xref"
              href="sect.apt-get.html#sect.apt-mix-distros">Seção 6.2.6, “Trabalhando com Distribuições Diversas”</a>). Note that the source code contained in these packages does not correspond precisely with that published by Linus Torvalds and the kernel developers; like all distributions, Debian applies a number of patches, which might (or might not) find their way into the upstream version of Linux. These modifications include backports of fixes/features/drivers from newer kernel versions, new features not yet (entirely) merged in the upstream Linux tree, and sometimes even Debian specific changes.
			</div><div
            class="para">
				The remainder of this section focuses on the 4.9 version of the Linux kernel, but the examples can, of course, be adapted to the particular version of the kernel that you want.
			</div><div
            class="para">
				We assume the <span
              class="pkg pkg">linux-source-4.9</span> package has been installed. It contains <code
              class="filename">/usr/src/linux-source-4.9.tar.xz</code>, a compressed archive of the kernel sources. You must extract these files in a new directory (not directly under <code
              class="filename">/usr/src/</code>, since there is no need for special permissions to compile a Linux kernel): <code
              class="filename">~/kernel/</code> is appropriate.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>mkdir ~/kernel; cd ~/kernel</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>tar -xaf /usr/src/linux-source-4.9.tar.xz</code></strong></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>CULTURA</em></span> Localização dos fontes do núcleo</strong></p></div></div></div><div
              class="para">
				Tradicionalmente, os fontes do kernel Linux deveriam ser colocados em <code
                class="filename">/usr/src/linux/</code>, e assim, requerer permissões de root para compilação. Entretanto, trabalhar com direitos de administrador deve ser evitado quando não são necessários. Existe um grupo <code
                class="literal">src</code> que permite que seus membros trabalhem nesse diretório, mas trabalhar em <code
                class="filename">/usr/src/</code> deve ser evitado entretanto. Mantendo os fontes do kernel em um diretório pessoal, você obtêm segurança em todas as contas: nenhum arquivo em <code
                class="filename">/usr/</code> desconhecido pelo sistema de empacotamento, e nenhum risco de engano por programas que leem o <code
                class="filename">/usr/src/linux</code> enquanto tentam ganhar informação do kernel em uso.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.config-kernel"></a>8.10.3. Configurando o Núcleo</h3></div></div></div><a
            id="id-1.11.14.10.2"
            class="indexterm"></a><a
            id="id-1.11.14.10.3"
            class="indexterm"></a><a
            id="id-1.11.14.10.4"
            class="indexterm"></a><div
            class="para">
				O próximo passo consiste da configuração do núcleo de acordo com suas necessidades. O procedimento exato depende dos objetivos.
			</div><div
            class="para">
				Quando recompilamos uma versão mais recente do núcleo (possivelmente com um patch adicional), a configuração, provavelmente, será mantida o mais próximo possível daquela proposta pelo Debian. Nesse caso, e ao invés de reconfigurar tudo a partir do zero, será suficiente copiar o arquivo <code
              class="filename">/boot/config-<em
                class="replaceable">versão</em></code> (a versão é aquela do núcleo atualmente usado, a qual pode ser encontrada com o comando <code
              class="command">uname -r</code>) para o arquivo <code
              class="filename">.config</code> dentro do diretório contendo os fontes do núcleo.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cp /boot/config-4.9.0-3-amd64 ~/kernel/linux-source-4.9/.config</code></strong></pre><div
            class="para">
				A menos que você precise mudar a configuração, você pode parar por aqui e pular para <a
              class="xref"
              href="sect.kernel-compilation.html#sect.kernel-build">Seção 8.10.4, “Compilando e Construindo um Pacote”</a>. Se você precisa mudá-la, por outro lado, ou se você decidir reconfigurar tudo a partir do zero, você precisa dedicar um tempo para configurar seu núcleo. Existem varias interfaces dedicadas no diretório do fonte do núcleo que podem ser usadas executando o comando <code
              class="command">make <em
                class="replaceable">alvo</em></code>, aonde <em
              class="replaceable">alvo</em> é um dos valores descritos abaixo.
			</div><div
            class="para">
				0 <code
              class="command">make menuconfig</code> compila e executa uma interface de modo texto (é aqui que o pacote <span
              class="pkg pkg">libncurses5-dev</span> é necessário) a qual permite a navegação pelas opções disponíveis em uma estrutura hierárquica. Pressionar a tecla <span
              class="keycap"><strong>Espaço</strong></span> muda o valor da opção selecionada, e <span
              class="keycap"><strong>Enter</strong></span> valida o botão selecionado no pé da tela; <span
              class="guibutton"><strong>Select</strong></span> returna ao sub menu selecionado; <span
              class="guibutton"><strong>Exit</strong></span> fecha a tela corrente e volta para cima na hierarquia; <span
              class="guibutton"><strong>Help</strong></span> irá exibir informações mais detalhadas sobre a função da opção selecionada. As setas permitem mover pela lista de opções e botões. Para sair do programa de configuração, escolha <span
              class="guibutton"><strong>Exit</strong></span> no menu principal. O programa então oferece salvar as alterações que você fez; aceite se você estiver satisfeito com suas escolhas.
			</div><div
            class="para">
				Outras interfaces tem características semelhantes, mas elas trabalham com interfaces gráficas mais modernas; como a <code
              class="command">make xconfig</code>, a qual usa a interface gráfica Qt, e a <code
              class="command">make gconfig</code>, a qual usa GTK+. A primeira requer <span
              class="pkg pkg">libqt4-dev</span>, enquanto a última depende de <span
              class="pkg pkg">libglade2-dev</span> e <span
              class="pkg pkg">libgtk2.0-dev</span>.
			</div><div
            class="para">
				Ao usar uma dessa interfaces de configuração, sempre é uma boa ideia iniciar a partir de uma configuração padrão razoável. O núcleo prove tais configurações em <code
              class="filename">arch/<em
                class="replaceable">arch</em>/configs/*_defconfig</code> e você pode colocar sua configuração selecionada no lugar com um comando como <code
              class="command">make x86_64_defconfig</code> (no caso de um PC de 64-bit) ou <code
              class="command">make i386_defconfig</code> (no caso de um PC de 32-bit).
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>DICA</em></span> Lidando com arquivos <code
                        class="filename">.config</code> desatualizados</strong></p></div></div></div><div
              class="para">
				Quando você provê um arquivo <code
                class="filename">.config</code> que tenha sido gerado por outra versão do núcleo (geralmente mais antiga), você terá que atualizá-lo. Você pode fazer isso com o <code
                class="command">make oldconfig</code>, ele irá interativamente perguntar a você as perguntas correspondentes as novas opções de configuração. Se você quiser usar a resposta padrão para todas essas perguntas você pode usar o <code
                class="command">make olddefconfig</code>. Com o <code
                class="command">make oldnoconfig</code>, ele assumirá uma resposta negativa em todas as perguntas.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-build"></a>8.10.4. Compilando e Construindo um Pacote</h3></div></div></div><a
            id="id-1.11.14.11.2"
            class="indexterm"></a><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>NOTA</em></span> Limpar antes de construir</strong></p></div></div></div><div
              class="para">
				Se você já fez uma compilação no diretório e quer reconstruir tudo a partir do zero (por exemplo, porque você fez mudanças substanciais na configuração do núcleo), você terá que executar <code
                class="command">make clean</code> para remover os arquivos compilados. <code
                class="command">make distclean</code> remove mais arquivos gerados, incluindo seu arquivo <code
                class="filename">.config</code> também, então tenha certeza de guardar uma cópia dele.
			</div></div><div
            class="para">
				Uma vez que a configuração do núcleo esteja pronta, um simples <code
              class="command">make deb-pkg</code> irá gerar até 5 pacotes Debian: <span
              class="pkg pkg">linux-image-<em
                class="replaceable">versão</em></span> que contém a imagem do núcleo e módulos associados, <span
              class="pkg pkg">linux-headers-<em
                class="replaceable">versão</em></span> o qual contém os arquivos de cabeçalho necessários para construir módulos externos, <span
              class="pkg pkg">linux-firmware-image-<em
                class="replaceable">versão</em></span> o qual contém os arquivos de firmware necessários por alguns drivers (esse pacote pode estar faltando quando você constroí a partir dos fontes do kernel fornecidos pelo Debian), <span
              class="pkg pkg">linux-image-<em
                class="replaceable">versão</em>-dbg</span> o qual contém os símbolos de depuração para a imagem do núcleo e seus módulos, e <span
              class="pkg pkg">linux-libc-dev</span> o qual contém cabeçalhos relevantes para algumas bibliotecas do espaço do usuário como a glibc GNU.
			</div><div
            class="para">
				A <em
              class="replaceable">versão</em> é definida pela concatenação da versão do upstream (como definido pelas variáveis <code
              class="literal">VERSION</code>, <code
              class="literal">PATCHLEVEL</code>, <code
              class="literal">SUBLEVEL</code> e <code
              class="literal">EXTRAVERSION</code> no <code
              class="filename">Makefile</code>), do parâmetro de configuração <code
              class="literal">LOCALVERSION</code>, e da variável de ambiente <code
              class="literal">LOCALVERSION</code>. A versão do pacote reusa a mesma cadeia de caracteres da versão com uma revisão adicionada, que é regularmente incrementada (e armazenada em <code
              class="filename">.version</code>), exceto se você sobrescrever ela com a variável de ambiente <code
              class="literal">KDEB_PKGVERSION</code>.
			</div><pre
            class="screen"><code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make deb-pkg LOCALVERSION=-falcot KDEB_PKGVERSION=$(make kernelversion)-1
</code></strong><code
              class="computeroutput">[...]
$ </code><strong
              class="userinput"><code>ls ../*.deb
</code></strong><code
              class="computeroutput">../linux-headers-4.9.30-ckt4-falcot_4.9.30-1_amd64.deb
../linux-image-4.9.30-ckt4-falcot_4.9.30-1_amd64.deb
../linux-image-4.9.30-ckt4-falcot-dbg_4.9.30-1_amd64.deb
../linux-libc-dev_4.9.30-1_amd64.deb
</code></pre></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.modules-build"></a>8.10.5. Compilando Módulos Externos</h3></div></div></div><a
            id="id-1.11.14.12.2"
            class="indexterm"></a><a
            id="id-1.11.14.12.3"
            class="indexterm"></a><a
            id="id-1.11.14.12.4"
            class="indexterm"></a><div
            class="para">
				Alguns módulos são mantidos fora do núcleo Linux oficial. Para usá-los, eles devem ser compilados a parte do referido núcleo. Um número de módulos de terceiros comuns são fornecidos pelo Debian em pacotes dedicados, tais como o <span
              class="pkg pkg">xtables-addons-source</span> (môdulos extra para o iptables) ou <span
              class="pkg pkg">oss4-source</span> (Open Sound System, alguns drivers de áudio alternativos).
			</div><div
            class="para">
				Esses pacotes externos são muitos e variados e nós não vamos listar todos aqui; o comando <code
              class="command">apt-cache search source$</code> pode diminuir o campo de pesquisa. Contudo, uma lista completa não é particularmente útil, já que não existe uma razão em particular para compilar módulos externos, exceto quando você sabe que precisa de um. Nesses casos, a documentação do dispositivo irá tipicamente detalhar os módulo(s) específicos que ele precisa para funcionar sob o Linux.
			</div><div
            class="para">
				Por exemplo, vamos dar uma olhada no pacote <span
              class="pkg pkg">xtables-addons-source</span>: após a instalação, um <code
              class="filename">.tar.bz2</code> dos fontes do módulo é armazenado em <code
              class="filename">/usr/src/</code>. Ainda que nós possamos manualmente extrair o tarball e construir o módulo, na prática nós preferimos automatizar tudo isso usando o DKMS. A maioria dos módulos oferecem a requerida integração DKMS em um pacote terminando com o sufixo <code
              class="literal">-dkms</code>. No nosso caso, instalar o <span
              class="pkg pkg">xtables-addons-dkms</span> é tudo que é preciso para compilar o módulo do núcleo para o núcleo corrente, incluindo também o pacote <span
              class="pkg pkg">linux-headers-*</span> associado ao núcleo instalado. Por exemplo, se você usa o <span
              class="pkg pkg">linux-image-amd64</span>, você deve também instalar o <span
              class="pkg pkg">linux-headers-amd64</span>.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>sudo apt install xtables-addons-dkms</code></strong>
<code
              class="computeroutput">
[...]
Setting up xtables-addons-dkms (2.12-0.1) ...
Loading new xtables-addons-2.12 DKMS files...
Building for 4.9.0-3-amd64
Building initial module for 4.9.0-3-amd64
Done.

xt_ACCOUNT:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/4.9.0-3-amd64/updates/dkms/
[...]
DKMS: install completed.
$ </code><strong
              class="userinput"><code>sudo dkms status</code></strong>
<code
              class="computeroutput">xtables-addons, 2.12, 4.9.0-3-amd64, x86_64: installed
$ </code><strong
              class="userinput"><code>sudo modinfo xt_ACCOUNT</code></strong>
<code
              class="computeroutput">filename:       /lib/modules/4.9.0-3-amd64/updates/dkms/xt_ACCOUNT.ko
license:        GPL
alias:          ipt_ACCOUNT
author:         Intra2net AG &lt;opensource@intra2net.com&gt;
description:    Xtables: per-IP accounting for large prefixes
[...]
</code></pre><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>ALTERNATIVA</em></span>module-assistant</strong></p></div></div></div><a
              id="id-1.11.14.12.9.2"
              class="indexterm"></a><div
              class="para">
				Antes do DKMS, o <span
                class="pkg pkg">module-assistant</span> era a solução mais simples para construir e implantar módulos do núcleo. Ele ainda pode ser usado, em particular para pacotes sem integração com o DKMS: com um simples comando como <code
                class="command">module-assistant auto-install xtables-addons</code> (ou <code
                class="command">m-a a-i xtables-addons</code> para abreviar),os módulos são compilados para o núcleo corrente, colocado em um novo pacote Debian, e o pacote é instalado na hora.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="sect.kernel-patch"></a>8.10.6. Aplicando um Patch ao Núcleo</h3></div></div></div><a
            id="id-1.11.14.13.2"
            class="indexterm"></a><a
            id="id-1.11.14.13.3"
            class="indexterm"></a><div
            class="para">
				Alguns recursos não são incluídos no kernel padrão devido a falta de maturidade ou algum desentendimento entre os mantenedores do kernel. Tais recursos podem ser distribuídos através de patches, e assim, qualquer um está livre para aplicá-los aos fontes do kernel.
			</div><div
            class="para">
				Debian sometimes provides some of these patches in <span
              class="pkg pkg">linux-patch-*</span> packages but they often don't make it into stable releases (sometimes for the very same reasons that they are not merged into the official upstream kernel). These packages install files in the <code
              class="filename">/usr/src/kernel-patches/</code> directory.
			</div><div
            class="para">
				Para aplicar um ou mais desses patches instalados, use o comando <code
              class="command">patch</code> no diretório dos fontes, e então, inicie a compilação do kernel como descrito acima.
			</div><pre
            class="screen">
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>cd ~/kernel/linux-source-4.9</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>make clean</code></strong>
<code
              class="computeroutput">$ </code><strong
              class="userinput"><code>zcat /usr/src/kernel-patches/diffs/grsecurity2/grsecurity-3.1-4.9.11-201702181444.patch.gz | patch -p1</code></strong></pre><div
            class="para">
				Note que um patch(qualquer um) talvez não necessariamente funcione com todas as versões do núcleo; é possível que o <code
              class="command">patch</code> falhe ao aplicá-lo nos fontes do núcleo. Uma mensagem de error será exibida e informará alguns detalhes sobre a falha; neste caso, referencie a documentação disponível no pacote Debian do patch (no diretório <code
              class="filename">/usr/share/doc/linux-patch-*/</code>). Na maioria dos casos, o mantenedor indica para qual versão do núcleo o patch é feito.
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.config-misc.html"><strong>Anterior</strong>8.9. Outras Configurações: Sincronização de tempo...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Acima</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Principal</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.kernel-installation.html"><strong>Próxima</strong>8.11. Instalando o Núcleo</a></li></ul></body></html>
