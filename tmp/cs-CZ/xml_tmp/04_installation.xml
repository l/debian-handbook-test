<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<chapter id="installation">
  <chapterinfo>
    <mediaobject condition="pdf">
      <imageobject>
        <imagedata fileref="images/chap-installation.png" scalefit="1" />
      </imageobject>
    </mediaobject>
    <keywordset>
      <keyword>Instalace</keyword>
      <keyword>Rozdělení</keyword>
      <keyword>Formátování</keyword>
      <keyword>Systém souborů</keyword>
      <keyword>Bootovací sektor</keyword>
      <keyword>Rozpoznání hardwaru</keyword>
    </keywordset>
  </chapterinfo>
  <title>Instalace</title>
  <highlights>
    <para>Aby jste mohli používat Debian, musíte ho na počítač nainstalovat; splnění tohoto úkolu zabezpečuje program <emphasis>debian-installer</emphasis>. Správná instalace zahrnuje mnoho operací. Tato kapitola se jim věnuje postupně chronologicky.</para>
  </highlights>
  <indexterm><primary>instalace</primary><secondary>systému</secondary></indexterm>

  <sidebar>
    <title><emphasis>ZPÁTKY K ZÁKLADŮM</emphasis> Doučovací kurz v přílohách</title>

    <para>Instalace počítače je vždy jednodušší, pokud je vám známo, jak funguje. Pokud ne, vemte to krátkou oklikou přes <xref linkend="short-remedial-course" /> před čtením této kapitoly. </para>
  </sidebar>

  <para>The installer for <emphasis role="distribution">Stretch</emphasis>
  is based on <command>debian-installer</command>. Its modular design
  enables it to work in various scenarios and allows it to evolve and adapt
  to changes. Despite the limitations implied by the need to support a
  large number of architectures, this installer is very accessible to
  beginners, since it assists users at each stage of the process. Automatic
  hardware detection, guided partitioning, and graphical user interfaces
  have solved most of the problems that newbies used to face in the
  early years of Debian.</para>
  <indexterm><primary>instalátor</primary></indexterm>
  <indexterm><primary><command>debian-installer</command></primary></indexterm>

  <para>Installation requires 128 MB of RAM (Random Access Memory) and at
  least 2 GB of hard drive space. All Falcot computers meet these
  criteria. Note, however, that these figures apply to the installation of
  a very limited system without a graphical desktop. A minimum of 512 MB
  of RAM and 10 GB of hard drive space are really recommended for a basic
  office desktop workstation.</para>

  <sidebar>
    <title><emphasis>BEWARE</emphasis> Upgrading from Jessie</title>

    <para>If you already have Debian Jessie installed on your computer, this
    chapter is not for you! Unlike other distributions, Debian allows
    updating a system from one version to the next without having to
    reinstall the system. Reinstalling, in addition to being unnecessary,
    could even be dangerous, since it could remove already installed
    programs.</para>

    <para>Proces upgradování bude popsán v <xref linkend="sect.dist-upgrade" />.</para>
  </sidebar>
  <section id="sect.installation-methods">
    <title>Metody instalace</title>

    <para>Systém Debian může být nainstalovaný z různých typů médií, pokud to BIOS daného zařízení umožní. Bootovat můžete například s CD-ROM, USB zařízením nebo třeba prostřednictvím sítě. </para>

    <sidebar>
      <title><emphasis>ZPĚT K ZÁKLADŮM</emphasis> BIOS, hardware/softwarové rozhraní</title>
      <indexterm><primary>BIOS</primary></indexterm>
      <indexterm><primary>základní systém vstupu/výstupu</primary></indexterm>

      <para>BIOS (z anglického Basic Input/Output System) je software, který je obsažený v základní desce (elektronické desce propojující všechna periferní zařízení) a spuštěný, když je počítač bootován, za účelem nahrání operačního systému (prostřednictvím uzpůsobeného bootloaderu). Stojí v pozadí a poskytuje rozhraní mezi hardwarem a softwarem (v našem případě Linuxovým jádrem).</para>
    </sidebar>
    <section id="sect.install-cd">
      <title>Instalace z CD-ROM/DVD-ROM</title>

      <para>Nejrozšířenější instalační metoda je z CD-ROM (nebo DVD-ROM, který se chová úplně stejně): počítač je bootován z tohoto média a instalační program se ujme své funkce.</para>

      
      <para>Various CD-ROM families have different purposes:
      <emphasis>netinst</emphasis> (network installation) contains the
      installer and the base Debian system; all other programs are
      then downloaded. Its “image”, that is the ISO-9660 filesystem
      that contains the exact contents of the disk, only takes up
      about 150 to 280 MB (depending on architecture).
      On the other hand, the complete set offers all packages and
      allows for installation on a computer that has no Internet access;
      it requires around 14 DVD-ROMs (or 3 Blu-ray disks). There is no
      more official CD-ROMs set as they were really huge, rarely used and
      now most of the computers use DVD-ROMs as well as CD-ROMs. But the
      programs are divided among the disks
      according to their popularity and importance; the first
      disk will be sufficient for most installations, since it
      contains the most used softwares.</para>

      <para>Potom je tu poslední obraz, známý jako <filename>mini.iso</filename>, který je dostupný pouze jako vedlejší produkt instalátoru. Tento obraz obsahuje pouze minimum potřebné k nastavení sítě a všechno ostatní je stáhnuto (včetně částí samotného instalátoru, což je důvod, proč mají tyto obrazy tendenci padat, když je vydána nová verze instalátoru). Tyto obrazy mohou být nalezeny na běžných zrcadlových serverech Debianu pod adresářem <filename>dists/<replaceable>release</replaceable>/main/installer-<replaceable>arch</replaceable>/current/images/netboot/</filename> directory.</para>
      <indexterm><primary><filename>mini.iso</filename></primary></indexterm>

      <sidebar>
        <title><emphasis>TIP</emphasis> Multi-architekturní disky</title>

	<para>Většina instalačních CD a DVD pracuje pouze s určitou hardwarovou architekturou. Pokud si přejete stáhnout komplentí obrazy, musíte pečlivě vybírat ty, které fungují na hardwaru počítače, na kterém si je přejete nainstalovat.</para>

	<para>Some CD/DVD-ROM images can work on several
	architectures. We thus have a CD-ROM image combining the
	<emphasis>netinst</emphasis> images of the
	<emphasis>i386</emphasis> and <emphasis>amd64</emphasis>
	architectures.</para>
      </sidebar>
      <indexterm><primary>CD</primary><secondary>instalační CD</secondary></indexterm>
      <indexterm><primary>CD</primary><secondary><emphasis>netinst CD</emphasis></secondary></indexterm>
      <indexterm><primary>DVD</primary><secondary>instalační DVD</secondary></indexterm>
      <indexterm><primary>DVD</primary><secondary><emphasis>netinst DVD</emphasis></secondary></indexterm>

      <para>To acquire Debian CD-ROM images, you may of course download
      them and burn them to disk. You may also purchase them, and, thus,
      provide the project with a little financial support. Check the
      website to see the list of DVD-ROM image vendors and download sites.
      <ulink type="block" url="http://www.debian.org/CD/index.html" />
      </para>
    </section>
    <section id="sect.install-usb">
      <title>Bootování z USB klíčenky</title>
      <indexterm><primary>USB klíčenka</primary></indexterm>

      <para>Protože je většina počítačů schopna bootovat z USB zařízení, můžete instalovat Debian také z USB klíčenky (což je v podstatě malý disk s flash pamětí).</para>

      <para>Instalační manuál vysvětluje, jak vytvořit USB klíčenku, která obsahuje <command>debian-installer</command>. Postup je velmi snadný, protože ISO obrazy pro i386 a amd64 jsou hybridní obrazy, které je možno bootovat jak z CD, tak z USB klíčenky.</para>

      <para>You must first identify the device name of the USB key
      (ex: <literal>/dev/sdb</literal>); the simplest means to do this
      is to check the messages issued by the kernel using the
      <command>dmesg</command> command. Then you must copy the
      previously downloaded ISO image (for example
      debian-9.0.0-amd64-netinst.iso) with the command
      <command>cat debian-9.0.0-amd64-netinst.iso &gt;/dev/sdb;
      sync</command>.  This command requires administrator rights,
      since it accesses the USB key directly and blindly erases its
      content.</para>

      <para>Detailnější vysvětlení je k dispozici v instalačním manuálu. Tak, jako ostatní věci, popisuje alternativní metodu přípravy USB klíčenky, která je složitější, ale umožňuje přizpůsobit přednastavené uživatelské volby (ty, které jsou nastaveny v příkazovém řádku jádra). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s03.html" /></para>
    </section>
    <section id="sect.install-net">
      <title>Instalace za pomocí síťového bootování</title>
      <indexterm><primary>instalace</primary><secondary><emphasis>netboot instalace</emphasis></secondary></indexterm>
      <indexterm><primary>instalace</primary><secondary><emphasis>PXE instalace</emphasis></secondary></indexterm>
      <indexterm><primary>instalace</primary><secondary><emphasis>TFTP instalalace</emphasis></secondary></indexterm>

      <para>Mnoho BIOSů umožňuje bootování přímo ze sítě za použití stáhnutí obrazu jádra a minimálního systému souborů. Tato metoda (která se různě nazývá, jako <acronym>PXE</acronym> nebo <acronym>TFTP</acronym> bootování) nás může spasit, pokud počítač namá CD-ROM nebo pokud BIOS nemůže bootovat z takových médií.</para>

      <para>Tato instalační metoda pracuje ve dvou krocích. První, když při bootování počítače BIOS (nebo síťová karta) vytvoří BOOTP/DHCP požadavek na automatické získání IP adresy. Pokud server BOOTP nebo DHCP vrátí odezvu, zahrnuje jak jméno souboru, tak nastavení sítě. Po nastavení sítě, klientský počítač vydá TFTP (Trivial File Transfer Protocol) požadavek na soubor, jehož jméno bylo předtím oznámeno. Po jeho získání je tento soubor spuštěn jako by to byl bootloader. Ten poté nahodí instalační program Debianu, který je spuštěn, jako by běžel z harddisku, CD nebo USB klíčenky.</para>

      <para>Všechny detaily této metody jsou k dispozici v instalačním průvodci (sekci “Příprava souborů pro TFTP síťové bootování”). <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch05s01.html#boot-tftp" /> <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch04s05.html" /></para>
    </section>
    <section id="sect.install-auto">
      <title>Další metody instalace</title>

      <para>When we have to deploy customized installations for a large
      number of computers, we generally choose an automated rather than a
      manual installation method. Depending on the situation and the
      complexity of the installations to be made, we can use FAI (Fully
      Automatic Installer, described in <xref linkend="sect.fai" />), or even a
      customized installation DVD with preseeding (see <xref linkend="sect.d-i-preseeding" />).</para>
    </section>
  </section>
  <section id="sect.installation-steps">
    <title>Instalace, krok za krokem</title>
    <section id="sect.install-boot">
      <title>Bootování a nastartování instalátoru</title>

      <para>Jakmile se BIOS začne bootovat z CD nebo DVD-ROM, objeví se Isolinuxové menu bootloaderu. V této fázi ještě není Linuxové jádro nahráno; toto menu vám umožní si vybrat jádro, určené k bootování a zadat možné paramatry, které se k němu během procesu přenesou.</para>

      <para>For a standard installation, you only need to choose
      “Install” or “Graphical install” (with the arrow keys), then
      press the <keycap>Enter</keycap> key to initiate the remainder
      of the installation process. If the DVD-ROM is a “Multi-arch” disk,
      and the machine has an Intel or AMD 64 bit processor, those menu
      options enable the installation of the 64 bit variant
      (<emphasis>amd64</emphasis>) and the installation of the 32 bit
      variant remains available in a dedicated sub-menu (“32-bit install
      options”). If you have a 32 bit processor, you don't get a choice
      and the menu entries install the 32 bit variant
      (<emphasis>i386</emphasis>).
      </para>

      <sidebar>
        <title><emphasis>JDEME DÁLE</emphasis> 32 nebo 64 bit?</title>
        <indexterm><primary>PAE</primary></indexterm>
        <indexterm><primary>Nástavba fyzické adresy</primary></indexterm>
        <indexterm><primary>32/64 bit, volba</primary></indexterm>

	<para>Zásadní rozdíl mezi 32 a 64-bitovým systémem je velikost paměťových adres. Teoreticky nemůže 32-bitový systém pracovat s více než 4 GB RAM (2<superscript>32</superscript> bajtů). V praxi je možné toto omezení obejít za pomoci varianty jádra <literal>686-pae</literal>, za předpokladu, že procesor zvládá funkcionalitu PAE (nástavbu fyzické adresy). Každopádně, využití této možnosti má významný vliv na výkonnost systému. To je důvod, proč je užitečné použít 64-bitový mód na serverech s velkým objemem RAM.</para>

	<para>Pro kancelářský počítač (kde je nějaké to procento rozdílu ve výkonu zanedbatelné), musíte mít na mysli, že některé proprietární programy nejsou ve 64-bitové verzi k dispozici (jako je Skype například). Technicky je možné je přimět fungovat na 64-bitových systémech, musíte ale nainstalovat 32-bitové verze všech potřebných knihoven (více na <xref linkend="sect.multi-arch" />) a někdy použít <command>setarch</command> nebo <command>linux32</command> (v balíčku <emphasis role="pkg">util-linux</emphasis>) oklamat aplikace co do povahy systému. <indexterm><primary><command>setarch</command></primary></indexterm> <indexterm><primary><command>linux32</command></primary></indexterm></para>
      </sidebar>

      <sidebar>
        <title><emphasis>V PRAXI</emphasis> Instalace vedle existujícího systému Windows</title>
        <indexterm><primary>dvojí bootování</primary></indexterm>

	<para>Pokud na počítači již běží Windows, není nutné mazat systém za účelem instalování Debianu. Můžete mít současně oba systémy, každý nainstalovaný na jiném disku nebo oddělené části a vybírat, který nastartovat při bootování počítače. Toto nastavení je často nazýváno “dual boot” a instalační systém Debianu jej umožňuje nastavit. To se děje během fáze dělení harddiskové jednotky při instalaci a za nastavování bootloaderu (viz. postranní poznámky <xref linkend="sidebar.shrinking-partition" /> a <xref linkend="sidebar.bootloader-dual-boot" />).</para>

	<para>Pokud již máte funkční systém Windows, můžete se vyhnout používání CD-ROM; Debian nabízí program pro Windows, který stáhne odlehčený instalátor Debianu a nastaví jej na harddisku. Poté vám postačí pouze rebootovat počítač a vybrat si mezi normálním bootováním Windows a bootováním instalačního programu. Můžete jej také najít na speciální internetové stránce s vyčerpávajícím jménem… <ulink type="block" url="http://ftp.debian.org/debian/tools/win32-loader/stable/" /> <ulink type="block" url="http://www.goodbye-microsoft.com/" /></para>
      </sidebar>

      <sidebar>
        <title><emphasis>ZPĚT K ZÁKLADŮM</emphasis> Bootloader</title>
        <indexterm><primary>loader</primary><secondary>bootloader</secondary></indexterm>
        <indexterm><primary>bootloader</primary></indexterm>
        <indexterm><primary>boot</primary><secondary>loader</secondary></indexterm>

	<para>Bootloader je nízkoúrovňový program, který je odpovědný za bootování Linuxového jádra ihned, jakmile se BIOS vzdá kontroly. K zabezpečení tohoto úkolu musíte být schopni lokalizovat na disku Linuxové jádro, které má být bootováno. Na architekturách i386 a amd64 jsou k provedení tohoto úkolu nejpoužívanější starší z těchto dvou LILO a GRUB, jeho novodobá náhrada. Isolinux a Syslinux jsou často používané alternativy pro bootování z odnímatelných médií.</para>
      </sidebar>

      <para>Každý vstup menu skrývá specifický bootovací příkazový řádek, který může být v případě potřeby nakonfigutován zmáčknutím klávesy <keycap>TAB</keycap> před potvrzením vstupu a bootováním. Vstup menu “Help” zobrazuje staré rozhraní příkazového řádku, kde klávesy <keycap>F1</keycap> až <keycap>F10</keycap> zobrazují rozdílné pomocné obrazovky upřesňující různé dostupné možnosti k zadání. Zřídkakdy budete používat tuto možnost vyjma některých velmi zvláštních případů.</para>

      <para>Mód s názvem “expert” (přístupný v menu “Advanced options”) upřesňuje veškeré možné volby v procesu instalace a umožňuje navigaci mezi různými kroky bez jejich automatického provedení v posloupnosti. Buďte opatrní, tento upovídaný mód může být matoucí kvůli spoustě konfiguračních možností, které nabízí.</para>

      <figure>
        <title>Bootovací obrazovka</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-boot.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Once booted, the installation program guides you step by
      step throughout the process. This section presents each of these
      steps in detail. Here we follow the process of an installation
      from an amd64 DVD-ROM (more specifically, the rc3 version
      of the installer for Stretch); <emphasis>netinst</emphasis>
      installations, as well as the final release of the installer,
      may look slightly different. We will also address installation
      in graphical mode, but the only difference from “classic”
      (text-mode) installation is in the visual appearance.</para>
    </section>
    <section id="sect.install-lang">
      <title>Výběr jazyka</title>
      <indexterm><primary>volba</primary><secondary>jazyka</secondary></indexterm>

      <para>Instalční program začíná v angličtině, ale první krok umožňuje uživateli si vybrat jazyk, který bude používat po zbytek procesu. Například při výběru francouzštiny, se provede instalace kompletně přeložená do francouzštiny (a systém bude ve výsledku také ve francouzštině). Tato volba je také použita k definování dalších důležitých přednastavených možností v následujících krocích (především rozvržení klávesnice).</para>

      <sidebar>
        <title><emphasis>ZPĚT K ZÁKLADŮM</emphasis> Navigování za pomocí klávesnice</title>

	<para>Některé kroky v instalačním procesu vyžadují vložení informací. Tyto obrazovky mají různé oblasti, které mohou mít svá zaměření (místa pro vložení textu, okénka na zatrhávání, seznamy možností, tlačítka OK a Cancel) a klávesa <keycap>TAB</keycap> vám umožní se přemisťovat z jednoho na druhé.</para>

	<para>V grafickém módu můžete požívat myš, stejně jako v normálním nainstalovaném grafickém prostředí.</para>
      </sidebar>

      <figure role="flow.inline">
        <title>Výběr jazyka</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-lang-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-country">
      <title>Výběr země</title>
      <indexterm><primary>volba</primary><secondary>země</secondary></indexterm>

      <para>Druhý krok spočívá ve výběru země. V kombivaci s jazykem tato informace umožňuje programu nabídnout to nejvhodnější rozložení klávesnice. To také ovlivní nastavení časové zóny. Ve Spojených státech je doporučena standardní klávesnice QWERTY a nabídnuta volba vhodné časové zóny.</para>

      <figure role="flow.inline">
        <title>Výběr země</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-country-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-keyboard">
      <title>Výběr rozložení klávesnice</title>
      <indexterm><primary>rozložení klávesnice</primary></indexterm>
      <indexterm><primary>rozložení, klávesnice</primary></indexterm>

      <para>Navrhnutá “American English” klávesnice odpovídá obvyklému QWERTY rozložení.</para>

      <figure role="flow.inline">
        <title>Volba klávesnice</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-keyboard-txt.png" scalefit="1" width="50%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-detect-hardware">
      <title>Rozeznávání hardwaru</title>

      <para>Tento krok je plně automatický v drtivé většině případů. Instalátor rozezná hardware a pokusí se identifikovat jednotku CD-ROM použitou za účelem přístupu k jejímu obsahu. Nahraje moduly odpovídající různým rozpoznaným hardwarovým komponentům a potom “nastaví” CD-ROM za účelem čtení z něho. Předcházející kroky byly zcela zahrnuty v bootovacím obrazu obsaženém na CD - souboru omezené velikosti a nahrány do paměti BIOSem za bootování z CD.</para>

      <para>Instalátor je schopen pracovat s drtivou většinou jednotek, především se standardními ATAPI periferními zařízeními (někdy nazývanými IDE a EIDE). Každopádně, pokud rozpoznávání CD-ROM selže, instalátor nabídne možnost nahrát modul jádra (například z USB klíčenky) odpovídající jednotce CD-ROM.</para>
    </section>
    <section id="sect.install-load-components">
      <title>Nahrávání komponentů</title>

      <para>S nyní přístupným obsahem CD, instalátor nahraje všechny soubory potřebné k pokračování ve své činnosti. To zahrnuje přídavné jednotky pro zbývající hardware (obzvláště síťovou kartu), stejně, jako všechny komponenty instalačního programu.</para>
    </section>
    <section id="sect.install-detect-network">
      <title>Rozeznávání síťového hardwaru</title>

      <para>Tento automatický krok se pokouší identifikovat síťovou kartu a nahrát odpovídající modul. Pokud je automatické rozpoznávání neúspěšné, můžete manuálně vybrat modul, který se má nahrát. Pokud nefunguje žádný modul, je možné nahrát odpovídající modul z odnímatelného zařízení. Toto poslední řešení je potřeba pouze pokud není vhodná jednotka zahrnuta ve standardním Linuxovém jádru, ale k dispozici někde jinde, jako třeba na stránkách výrobce.</para>

      <para>Tento krok musí být nutně úspěšný pro <emphasis>netinst</emphasis> instalace, protože balíčky Debianu se musí nahrát ze sítě.</para>
    </section>
    <section id="sect.install-network-config">
      <title>Nastavení sítě</title>
      <indexterm><primary>nastavení</primary><secondary>sítě</secondary><tertiary>statické</tertiary></indexterm>
      <indexterm><primary>nastavení</primary><secondary>sítě</secondary><tertiary>DHCP</tertiary></indexterm>

      <para>Za účelem maximálního možného zautomatizování procesu, se instalátor pokouší o automatické síťové nastavení za pomocí DHCP (pro IPv4) a IPv6 prozkoumávání sítě. Pokud toto selže, nabídne další možnosti: zkuste znovu normální DHCP konfiguraci, pokuste se o nastavení za pomocí deklarace jména zařízení nebo nastavte statickou síťovou konfiguraci.</para>

      <para>Tato poslední možnost vyžaduje IP adresu, masku podsítě, IP adresu pro potenciální brány, jméno zařízení a doménové jméno.</para>

      <sidebar>
        <title><emphasis>TIP</emphasis> Nastavení bez DHCP</title>

	<para>Pokud je místní síť vybavená DHCP serverem, který si nepřejete použít z toho důvodu, že preferujete stanovit statickou IP adresu zařízení během instalace, můžete přidat <userinput>netcfg/use_dhcp=false</userinput> možnost během bootování z CD-ROM. Musíte pouze vstoupit do požadované položky menu stisknutím klávesy <keycap>TAB</keycap> a zadat zamýšlenou volbu před stisknutím klávesy <keycap>Enter</keycap>.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>MĚJTE SE NA POZORU</emphasis> Neimprovizujte</title>

	<para>Mnoho místních sítí je založeno na vlastním předpokladu, že všechna zařízení jsou důvěryhodná a nedostatečné nastavení jednoho počítače často nadělá starosti celé síti. Z toho plyne, nezapojujte zařízení do sítě, aniž by jste se nejdříve nedohodli s jeho správcem na odpovídajícím nastavení (například IP adrese, masce sítě a adrese pro broadcast).</para>
      </sidebar>
    </section>
    <section>
      <title>Heslo administrátora</title>
      <indexterm><primary>účet</primary><secondary>administrátorský účet</secondary></indexterm>

      <para>Kořenový účet super-uživatele, rezervovaný pro správce zařízení, je automaticky vytvořen během instalace; z toho důvodu je požadováno heslo. Instalátor také zažádá o potvrzení tohoto hesla, aby předešel chybě při zadávání, která by se později obtížně napravovala.</para>

      <figure>
        <title>Heslo administrátora</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-rootpw.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <sidebar>
        <title><emphasis>BEZPEČNOST</emphasis> Heslo správce</title>

	<para>Heslo kořenového uživatele by mělo být dlouhé (8 znaků nebo více) a těžko k uhádnutí. Samozřejmě, jakýkoliv počítač (a tím spíše jakýkoliv server) připojený na internet bývá běžně terčem automatických pokusů o připojení za pomoci nejběžnějších hesel. Někdy může být dokonce i předmětem slovníkových útoků, kdy je jako potenciální heslo testováno množství kombinací slov a čísel. Vyhněte se používání jmen dětí a rodičů, datumů narození apod.: mnoho vašich spolupracovníků je může znát a málokdy jim chcete dát volný přístup k danému počítači.</para>

	<para>Tyto poznámky se stejně hodí i pro hesla ostatních uživatelů, ale následky nalomeného účtu nejsou tak drastické pro uživatele bez správcovských práv.</para>

	<para>Pokud dochází inspirace, neváhejte použít generátory hesel, jako je <command>pwgen</command> (v balíčku pod tím samým jménem).</para>
      </sidebar>
    </section>
    <section>
      <title>Vytvoření prvního uživatele</title>

      <para>Debian také vyžaduje vytvoření účtu běžného uživatele, takže se administrátor vyvaruje špatného návyku pracovat jako uživatel s nejvyšším oprávněním (root). Tento preventivní princip v podstatě znamená, že každá úloha je provedena s minimálními požadovanými právy, za účelem omezení škod způsobených lidským faktorem. To je důvod, proč instalátor žádá celé jméno tohoto prvního uživatale, jeho uživatelské jméno a heslo (dvakrát, aby se zabránilo chybnému zadání).</para>

      <figure>
        <title>Jméno prvního uživatele</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-username.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.install-clock-config">
      <title>Nastavení hodin</title>

      <para>Pokud je k dispozici síť, jsou systémové hodiny aktualizovány (způsobem jednoho pokusu) z NTP serveru. Takto budou časová razítka na záznamech správná od prvního bootování. Aby zůstala i nadále stále přesná, musí být po počáteční instalaci nařízeni NTP démoni (více na <xref linkend="sect.time-synchronization" />).</para>
    </section>
    <section id="sect.install-detect-disks">
      <title>Rozpoznávání disků a dalších zařízení</title>

      <para>Tento krok automaticky rozpozná pevné paměťové jednotky, na které může být Debian nainstalován. Ty budou prezentovány v dalším kroku: dělení.</para>
    </section>
    <section id="sect.install-partman">
      <title>Spuštění dělícího nástroje</title>
      <indexterm><primary>dělení</primary></indexterm>

      <sidebar>
        <title><emphasis>KULTURA</emphasis> Použití dělení</title>

	<para>Dělení, nezbytný krok instalace, spočívá v rozdělení dostupného místa na pevné paměťové jednotce (každá sekce se potom nazývá “díl”) podle dat, která budou na něm uložena a použití, pro které je počítač určen.</para>
      </sidebar>

      <para>Dělení je tradičně obtížné pro nové uživatele. Je nezbytné definovat různé části disku (nebo “díly”) na kterých bude Linuxový systém souborů a virtuální paměti (swapu) uložen. Tento úkol je komplikovaný, pokud je na zařízení již jiný operační systém, který chcete zachovat. Samozřejmě, musíte se potom ujistit, že jste neupravili jeho oddíly (nebo nezměnili jejich velikost a způsobili poškození).</para>

      <para>Naštěstí, software na dělení má “průvodcovský” mód, který doporučí, jaké dělení provést — ve většině případů, můžete jednoduše potvrzovat návrhy tohoto softwaru.</para>

      <figure>
        <title>Výběr dělícího módu</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>The first screen in the partitioning tool offers the choice of
      using an entire hard drive to create various partitions. For a (new)
      computer which will solely use Linux, this option is clearly the
      simplest, and you can choose the option “Guided - use entire
      disk”. If the computer has two hard drives for two operating
      systems, setting one drive for each is also a solution that can
      facilitate partitioning. In both of these cases, the next screen
      offers to choose the disk where Linux will be installed by selecting
      the corresponding entry (for example, “SCSI3 (0,0,0) (sda) - 17.2
      GB ATA VBOX HARDDISK”). You then start guided partitioning.</para>

      <figure>
        <title>Disk, pro který se použije řízené dělení</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-partman-disk.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Řízené dělení může také nastavit LVM logické objemy narozdíl od oddílů (viz. níže). Protože zbytek operace je stejný, nebudeme procházet možnost “Řízené - použij celý disk a nastav LVM” (kódované či ne) až do konce.</para>

      <para>V ostatních případech, pokud Linux bude pracovat vedle již existujících oddílů, musíte zvolit manuální dělení</para>
      <section id="sect.install-autopartman-mode">
        <title>Řízené dělení</title>
        <indexterm><primary>dělení</primary><secondary>řízené dělení</secondary></indexterm>

	<para>Nástroj pro řízené dělení nabízí tři dělící metody, které odovídají různým použitím.</para>

        <figure>
          <title>Řízené dělení</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-autopartman-mode.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>

	<para>První metoda se jmenuje “Všechny soubory do jednoho oddílu”. Celý Linuxový systémový strom je uložen do jednoho souborového systému, odpovídajícímu kořenovému <filename>/</filename> adresáři. Toto jednoduché a robustní dělení se bezvadně hodí pro osobní systémy nebo systémy určené pro jednoho uživatele. V podstatě budou vytvořeny dva oddíly: první bude domovem pro celý systém, druhý  pro virtuální paměť (swap).</para>

	<para>Druhá metoda, “Oddělený <filename>/home/</filename> oddíl”, je podobná, ale rozdělí hierarchii souborů do dvou: jeden oddíl obsahuje systém Linuxu (<filename>/</filename>) a druhý obsahuje “domovské adresáře” (tím jsou míněna uživatelská data v souborech a podadresářích přístupných pod <filename>/home/</filename>).</para>

	<para>Poslední metoda dělení se nazývá “Oddělené <filename>/home</filename>, <filename>/var</filename>, a <filename>/tmp</filename> oddíly” a je vhodná pro servery a systémy s více uživateli. Rozdělí souborový strom do mnoha oddílů: navíc ke kořenu (<filename>/</filename>) a oddílům uživatelských kont (<filename>/home/</filename>), má také oddíly pro serverová softwarová data (<filename>/var/</filename>) a dočasné soubory (<filename>/tmp/</filename>). Tato dělení mají pár výhod. Uživatelé nemohou uzamknout server tím, že spotřebují veškeré volné místo na pevné paměťové jednotce (mohou pouze naplnit <filename>/tmp/</filename> a <filename>/home/</filename>). Data démonů (především logy) již více nemohou ucpat zbytek systému.</para>

        <sidebar>
          <title><emphasis>ZPĚT K ZÁKLADŮM</emphasis> Výběr systému souborů</title>
          <indexterm><primary>systém</primary><secondary>systém souborů</secondary></indexterm>
          <indexterm><primary>soubor</primary><secondary>systém</secondary></indexterm>

	  <para>A filesystem defines the way in which data is
	  organized on the hard drive. Each existing filesystem has
	  its merits and limitations. Some are more robust, others
	  more effective: if you know your needs well, choosing the
	  most appropriate filesystem is possible. Various comparisons
          have already been made; it seems that <emphasis>ReiserFS</emphasis> is
	  particularly efficient for reading many small files;
	  <emphasis>XFS</emphasis>, in turn, works faster with large
	  files. <emphasis>Ext4</emphasis>, the default filesystem for
	  Debian, is a good compromise, based on the three previous
	  versions of filesystems historically used in Linux
	  (<emphasis>ext</emphasis>, <emphasis>ext2</emphasis> and
	  <emphasis>ext3</emphasis>). <emphasis>Ext4</emphasis>
	  overcomes certain limitations of <emphasis>ext3</emphasis>
	  and is particularly appropriate for very large capacity hard
	  drives.  Another option would be to experiment with the very
	  promising <emphasis>btrfs</emphasis>, which includes
	  numerous features that require, to this day, the use of LVM
	  and/or RAID.</para>

	  <para>Žurnálovací souborové systémy (jako jsou <emphasis>ext3</emphasis>, <emphasis>ext4</emphasis>, <emphasis>btrfs</emphasis>, <emphasis>reiserfs</emphasis>, nebo <emphasis>xfs</emphasis>) činí speciální opatření, aby byl možný návrat k poslenímu konzistentnímu stavu po neočekávaném přerušení bez kompletní analýzy celého disku (což byl případ <emphasis>ext2</emphasis> systému). Tato funkčnost je prováděna za pomocí vyplňování žurnálu, který popisuje operace, které se mají provést před jejich skutečným provedením. Pokud je nějaké oprace přerušena, bude ji možné z tohoto žurnálu “znovu přehrát”. A naopak, pokud se vyskytne nějaké přerušení během aktualizace žurnálu, poslední požadovaná změna je jednoduše ingnorována; data, co byla zapisována mohou být ztracena, ale protože data na disku se nezměnila, zůstávají konzistentní. Není to nic jiného, než transakční mechanismus uplatněný na systému souborů.</para>
        </sidebar>

	<para>Po vybrání typu dělení, software vypočítá návrh a popíše ho na obrazovce; uživatel jej potom může, pokud je to zapotřebí, pozměnit. Můžete si zejména zvolit jiný systém souborů, pokud standardní volba (<emphasis>ext4</emphasis>) není vhodná. Ve většině případů ovšem bývá navrhované dělení opodstatněné a může být odsouhlaseno zvolením možnosti “Ukonči dělení a zapiš změny na disk”.</para>

        <figure>
          <title>Potvrzení dělení</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/inst-partman-validation.png" scalefit="1" width="65%" />
            </imageobject>
          </mediaobject>
        </figure>
      </section>
      <section id="sect.manual-partitioning">
        <title>Manuální dělení</title>
        <indexterm><primary>dělení</primary><secondary>manuální dělení</secondary></indexterm>

	<para>Manuální dělení nabízí větší flexibilitu tím, že umožňuje uživateli vybrat účel a velikost každého oddílu. Navíc, tento mód je nevyhnutelný, pokud si přejete použít softwarové RAID.</para>

        <sidebar id="sidebar.shrinking-partition">
          <title><emphasis>V PRAXI</emphasis> Zmenšení oddílu Windows</title>
          <indexterm><primary>změna velikosti oddílu</primary></indexterm>
          <indexterm><primary>změnit velikost oddílu</primary></indexterm>

	  <para>Pro instalaci Debianu vedle již existujícího operačního systému (Windows nebo jiného), musíte mít nějaké místo na pevné paměťové jednotce, co není používáno jiným systémem, aby jste byli schopni vytvořit oddíly určené Debianu. Ve většině případů to znamená zmenšení oddílu pro Windows a znovupoužití uvolněného místa.</para>

	  <para>Instalátor Debianu umožňuje tuto operaci, pokud použijete manuální mód pro dělení. Musíte pouze vybrat oddíl Windows a zadat jeho novou velikost (funguje to stejně s oběma oddíly FAT i NTFS).</para>
        </sidebar>

	<para>První obrazovka zobrazuje dostupně disky, jejich oddíly a možné volné místo, co ještě nebylo děleno. Můžete vybrat každý zobrazený element; stisknutím klávesy <keycap>Enter</keycap> potom dostanete seznam možných akcí.</para>

	<para>Můžete smazat všechny oddíly na disku, tím, že je vyberete.</para>

	<para>When selecting free space on a disk, you can manually create
	a new partition. You can also do this with guided partitioning,
	which is an interesting solution for a disk that already contains
	another operating system, but which you may wish to partition for
        Linux in a standard manner. See <xref linkend="sect.install-autopartman-mode" /> for more details on
        guided partitioning.</para>

        <sidebar>
          <title><emphasis>BACK TO BASICS</emphasis> Mount point</title>
          <indexterm><primary>mount point</primary></indexterm>
          <indexterm><primary>point, mount point</primary></indexterm>

	  <para>The mount point is the directory tree that will house the
	  contents of the filesystem on the selected partition. Thus, a
	  partition mounted at <filename>/home/</filename> is traditionally
	  intended to contain user data.</para>

	  <para>When this directory is named “<filename>/</filename>”,
	  it is known as the <emphasis>root</emphasis> of the file tree,
	  and therefore the root of the partition that will actually host
	  the Debian system.</para>
        </sidebar>

        <sidebar>
          <title><emphasis>BACK TO BASICS</emphasis> Virtual memory, swap</title>
          <indexterm><primary>virtual memory</primary></indexterm>
          <indexterm><primary>swap</primary></indexterm>
          <indexterm><primary>partition</primary><secondary>swap partition</secondary></indexterm>
          <indexterm><primary>swap partition</primary></indexterm>

	  <para>Virtual memory allows the Linux kernel, when lacking
	  sufficient memory (RAM), to free a bit of storage by storing the
	  parts of the RAM that have been inactive for some time on the
	  swap partition of the hard disk.</para>

	  <para>To simulate the additional memory, Windows uses a swap file
	  that is directly contained in a filesystem. Conversely, Linux
	  uses a partition dedicated to this purpose, hence the term
	  “swap partition”.</para>
        </sidebar>

	<para>When choosing a partition, you can indicate the manner in
	which you are going to use it:</para>
        <itemizedlist>
          <listitem>
	    <para>format it and include it in the file tree by choosing a
	    mount point;</para>
          </listitem>
          <listitem>
	    <para>use it as a swap partition;</para>
          </listitem>
          <listitem>
	    <para>make it into a “physical volume for encryption” (to
	    protect the confidentiality of data on certain partitions, see
	    below);</para>
          </listitem>
          <listitem>
	    <para>make it a “physical volume for LVM” (this concept is
	    discussed in greater detail later in this chapter);</para>
          </listitem>
          <listitem>
	    <para>use it as a RAID device (see later in this
	    chapter);</para>
          </listitem>
          <listitem>
	    <para>you can also choose not to use it, and therefore
	    leave it unchanged.</para>
          </listitem>
        </itemizedlist>
      </section>
      <section id="sect.install-software-raid">
        <title>Configuring Multidisk Devices (Software RAID)</title>
        <indexterm><primary>RAID</primary><secondary>Software RAID</secondary></indexterm>
        <indexterm><primary>Software RAID</primary></indexterm>
        <indexterm><primary>device</primary><secondary>multi-disk device</secondary></indexterm>

	<para>Some types of RAID allow the duplication of information
	stored on hard drives to prevent data loss in the event of a
	hardware problem affecting one of them. Level 1 RAID keeps a
	simple, identical copy (mirror) of a hard drive on another drive,
	while level 5 RAID splits redundant data over several disks, thus
	allowing the complete reconstruction of a failing drive.</para>

	<para>We will only describe level 1 RAID, which is the simplest to
	implement. The first step involves creating two partitions of
	identical size located on two different hard drives, and to label
	them “physical volume for RAID”.</para>

	<para>You must then choose “Configure software RAID” in the
	partitioning tool to combine these two partitions into a new
	virtual disk and select “Create MD device” in the configuration
	screen. You then need to answer a series of questions about this
	new device. The first question asks about the RAID level to use,
	which in our case will be “RAID1”. The second question asks
	about the number of active devices — two in our case, which is
	the number of partitions that need to be included in this MD
	device. The third question is about the number of spare devices —
	0; we have not planned any additional disk to take over for a
	possible defective disk. The last question requires you to choose
	the partitions for the RAID device — these would be the two
	that we have set aside for this purpose (make sure you only select
	the partitions that explicitly mention “raid”).</para>

	<para>Back to the main menu, a new virtual “RAID” disk appears.
	This disk is presented with a single partition which can not be
	deleted, but whose use we can choose (just like for any other
	partition).</para>

	<para>For further details on RAID functions, please refer to <xref linkend="sect.raid-soft" />.</para>
      </section>
      <section id="sect.install-lvm">
        <title>Configuring the Logical Volume Manager (LVM)</title>
        <indexterm><primary>LVM</primary><secondary>during installation</secondary></indexterm>
        <indexterm><primary>Logical Volume Manager</primary><secondary>during installation</secondary></indexterm>

	<para>LVM allows you to create “virtual” partitions that span
	over several disks. The benefits are twofold: the size of the
	partitions are no longer limited by individual disks but by
	their cumulative volume, and you can resize existing
	partitions at any time, possibly after adding an additional
	disk when needed.</para>

	<para>LVM uses a particular terminology: a virtual partition is a
	“logical volume”, which is part of a “volume group”, or an
	association of several “physical volumes”. Each of these terms
	in fact corresponds to a “real” partition (or a software RAID
	device).</para>
        <indexterm><primary>volume</primary><secondary>logical volume</secondary></indexterm>
        <indexterm><primary>volume</primary><secondary>physical volume</secondary></indexterm>
        <indexterm><primary>group</primary><secondary>of volumes</secondary></indexterm>
        <indexterm><primary>volume</primary><secondary>group</secondary></indexterm>

	<para>This technique works in a very simple way: each volume,
	whether physical or logical, is split into blocks of the same size,
	which are made to correspond by LVM. The addition of a new disk
	will cause the creation of a new physical volume, and these new
	blocks can be associated to any volume group. All of the partitions
	in the volume group that is thus expanded will have additional
	space into which they can extend.</para>

	<para>The partitioning tool configures LVM in several
	steps. First you must create on the existing disks the
	partitions that will be “physical volumes for LVM”. To
	activate LVM, you need to choose “Configure the Logical Volume
	Manager (LVM)”, then on the same configuration screen “Create
	a volume group”, to which you will associate the existing
	physical volumes. Finally, you can create logical volumes
	within this volume group. Note that the automatic partitioning
	system can perform all these steps automatically.</para>

	<para>In the partitioning menu, each physical volume will appear as
	a disk with a single partition which can not be deleted, but that
	you can use as desired.</para>

	<para>The usage of LVM is described in further detail in <xref linkend="sect.lvm" />.</para>
      </section>
      <section>
        <title>Setting Up Encrypted Partitions</title>
        <indexterm><primary>LUKS</primary></indexterm>
        <indexterm><primary>dm-crypt</primary></indexterm>
        <indexterm><primary>partition</primary><secondary>encrypted</secondary></indexterm>
        <indexterm><primary>partition encryption</primary></indexterm>
        <indexterm><primary>confidentiality</primary><secondary>files</secondary></indexterm>
        <indexterm><primary>file</primary><secondary>confidentiality</secondary></indexterm>

	<para>To guarantee the confidentiality of your data, for instance
	in the event of the loss or theft of your computer or a hard drive,
	it is possible to encrypt the data on some partitions. This feature
	can be added underneath any filesystem, since, as for LVM, Linux
	(and more particularly the dm-crypt driver) uses the Device Mapper
	to create a virtual partition (whose content is protected) based on
	an underlying partition that will store the data in an encrypted
	form (thanks to LUKS, Linux Unified Key Setup, a standard format
	that enables the storage of encrypted data as well as
	meta-information that indicates the encryption algorithms
	used).</para>

        <sidebar id="sidebar.encrypted-swap-partition">
          <title><emphasis>SECURITY</emphasis> Encrypted swap partition</title>

	  <para>When an encrypted partition is used, the encryption key is
	  stored in memory (RAM). Since retrieving this key allows the
	  decryption of the data, it is of utmost importance to avoid
	  leaving a copy of this key that would be accessible to the
	  possible thief of the computer or hard drive, or to a maintenance
	  technician. This is however something that can easily occur with
	  a laptop, since when hibernating the contents of RAM is stored on
	  the swap partition. If this partition isn't encrypted, the thief
	  may access the key and use it to decrypt the data from the
	  encrypted partitions. This is why, when you use encrypted
	  partitions, it is imperative to also encrypt the swap
	  partition!</para>

	  <para>The Debian installer will warn the user if they try to make
	  an encrypted partition while the swap partition isn't
	  encrypted.</para>
        </sidebar>

	<para>To create an encrypted partition, you must first assign an
	available partition for this purpose. To do so, select a partition
	and indicate that it is to be used as a “physical volume for
	encryption”. After partitioning the disk containing the physical
	volume to be made, choose “Configure encrypted volumes”. The
	software will then propose to initialize the physical volume with
	random data (making the localization of the real data more
	difficult), and will ask you to enter an “encryption
	passphrase”, which you will have to enter every time you boot
	your computer in order to access the content of the encrypted
	partition. Once this step has been completed, and you have returned
	to the partitioning tool menu, a new partition will be available in
	an “encrypted volume”, which you can then configure just like
	any other partition. In most cases, this partition is used as a
	physical volume for LVM so as to protect several partitions (LVM
	logical volumes) with the same encryption key, including the swap
	partition (see sidebar <xref linkend="sidebar.encrypted-swap-partition" />).</para>
      </section>
    </section>
    <section>
      <title>Installing the Base System</title>
      <indexterm><primary>system</primary><secondary>base</secondary></indexterm>

      <para>This step, which doesn't require any user interaction, installs
      the Debian “base system” packages. This includes the
      <command>dpkg</command> and <command>apt</command> tools, which
      manage Debian packages, as well as the utilities necessary to boot
      the system and start using it.</para>

      <figure>
        <title>Installation of the base system</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-basesystem.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section>
      <title>Configuring the Package Manager (<command>apt</command>)</title>
      <indexterm><primary>configuration</primary><secondary>initial configuration of APT</secondary></indexterm>
      <indexterm><primary>APT</primary><secondary>initial configuration</secondary></indexterm>

      <para>In order to be able to install additional software, APT needs
      to be configured and told where to find Debian packages. This step is
      as automated as possible. It starts with a question asking if it must
      use a network source for packages, or if it should only look for
      packages on the CD-ROM.</para>

      <sidebar>
        <title><emphasis>NOTE</emphasis> Debian CD-ROM in the drive</title>

	<para>If the installer detects a Debian installation disk in the
	CD/DVD reader, it is not necessary to configure APT to go looking
	for packages on the network: APT is automatically configured to
	read packages from a removable media drive. If the disk is part of
	a set, the software will offer to “explore” other disks in
	order to reference all of the packages stored on them.</para>
      </sidebar>

      <para>If getting packages from the network is requested, the next two
      questions allow to choose a server from which to download these
      packages, by choosing first a country, then a mirror available
      in that country (a mirror is a public server hosting copies of all
      the files of the Debian master archive).</para>

      <figure>
        <title>Selecting a Debian mirror</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-mirror.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>

      <para>Finally, the program proposes to use an HTTP proxy. If there is
      no proxy, Internet access will be direct. If you type
      <literal>http://proxy.falcot.com:3128</literal>, APT will use the
      Falcot <foreignphrase>proxy/cache</foreignphrase>, a “Squid”
      program. You can find these settings by checking the configurations
      of a web browser on another machine connected to the same
      network.</para>

      <para>The files <filename>Packages.xz</filename> and
      <filename>Sources.xz</filename> are then automatically downloaded to
      update the list of packages recognized by APT.</para>

      <sidebar>
        <title><emphasis>BACK TO BASICS</emphasis> HTTP proxy</title>
        <indexterm><primary>proxy</primary></indexterm>
        <indexterm><primary>proxy cache</primary></indexterm>
        <indexterm><primary>cache, proxy</primary></indexterm>
        <indexterm><primary>Squid</primary></indexterm>

	<para>An HTTP proxy is a server that forwards an HTTP request for
	network users. It sometimes helps to speed up downloads by keeping
	a copy of files that have been transferred through it (we then
	speak of proxy/cache). In some cases, it is the only means of
	accessing an external web server; in such cases it is essential to
	answer the corresponding question during installation for the
	program to be able to download the Debian packages through
	it.</para>

	<para>Squid is the name of the server software used by Falcot Corp
	to offer this service.</para>
      </sidebar>
    </section>
    <section>
      <title>Debian Package Popularity Contest</title>

      <para>The Debian system contains a package called <emphasis role="pkg">popularity-contest</emphasis>, whose purpose is to compile
      package usage statistics. Each week, this program collects
      information on the packages installed and those used recently, and
      anonymously sends this information to the Debian project servers. The
      project can then use this information to determine the relative
      importance of each package, which influences the priority that will
      be granted to them. In particular, the most “popular” packages
      will be included in the installation CD-ROM, which will facilitate
      their access for users who do not wish to download them or to
      purchase a complete set.</para>

      <para>This package is only activated on demand, out of respect for
      the confidentiality of users' usage.</para>
    </section>
    <section>
      <title>Selecting Packages for Installation</title>

      <para>The following step allows you to choose the purpose of the
      machine in very broad terms; the ten suggested tasks correspond to
      lists of packages to be installed. The list of the packages that will
      actually be installed will be fine-tuned and completed later on, but
      this provides a good starting point in a simple manner.</para>

      <para>Some packages are also automatically installed according to the
      hardware detected (thanks to the program
      <command>discover-pkginstall</command> from the <emphasis role="pkg">discover</emphasis> package).</para>

      <figure>
        <title>Task choices</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/inst-tasksel.png" scalefit="1" width="65%" />
          </imageobject>
        </mediaobject>
      </figure>
    </section>
    <section id="sect.installing-grub">
      <title>Installing the GRUB Bootloader</title>
      <indexterm><primary>loader</primary><secondary>bootloader</secondary></indexterm>
      <indexterm><primary>bootloader</primary></indexterm>
      <indexterm><primary>GRUB</primary></indexterm>

      <para>The bootloader is the first program started by the BIOS. This
      program loads the Linux kernel into memory and then executes it. It
      often offers a menu that allows the user to choose the kernel to load
      and/or the operating system to boot.</para>

      <sidebar id="sidebar.bootloader-dual-boot">
        <title><emphasis>BEWARE</emphasis> Bootloader and dual boot</title>
        <indexterm><primary>dvojí bootování</primary></indexterm>

	<para>This phase in the Debian installation process detects the
	operating systems that are already installed on the computer, and
	automatically adds corresponding entries in the boot menu, but not
	all installation programs do this.</para>

	<para>In particular, if you install (or reinstall) Windows
	thereafter, the bootloader will be erased. Debian will still be on
	the hard drive, but will no longer be accessible from the boot
	menu. You would then have to boot the Debian installation system in
	<userinput>rescue</userinput> mode to set up a less exclusive
	bootloader. This operation is described in detail in the
        installation manual.
        <ulink type="block" url="http://www.debian.org/releases/stable/amd64/ch08s07.html" />
        </para>
      </sidebar>

      <para>By default, the menu proposed by GRUB contains all the
      installed Linux kernels, as well as any other operating systems
      that were detected. This is why you should accept the offer to
      install it in the Master Boot Record. Since keeping older kernel
      versions preserves the ability to boot the same system if the
      most recently installed kernel is defective or poorly adapted to
      the hardware, it often makes sense to keep a few older kernel
      versions installed.</para>

      <para>GRUB is the default bootloader installed by Debian thanks to
      its technical superiority: it works with most filesystems and
      therefore doesn't require an update after each installation of a new
      kernel, since it reads its configuration during boot and finds the
      exact position of the new kernel. Version 1 of GRUB (now known as
      “Grub Legacy”) couldn't handle all combinations of LVM and
      software RAID; version 2, installed by default, is more complete.
      There may still be situations where it is more recommendable to
      install LILO (another bootloader); the installer will suggest it
      automatically.</para>

      <para>For more information on configuring GRUB, please refer to <xref linkend="sect.config-grub" />.</para>

      <sidebar>
        <title><emphasis>BEWARE</emphasis> Bootloaders and architectures</title>

	<para>LILO and GRUB, which are mentioned in this chapter, are
	bootloaders for <emphasis>i386</emphasis> and
	<emphasis>amd64</emphasis> architectures. If you install Debian on
	another architecture, you will need to use another bootloader.
	Among others, we can cite <command>yaboot</command> or
	<command>quik</command> for <emphasis>powerpc</emphasis>,
	<command>silo</command> for <emphasis>sparc</emphasis>,
	<command>aboot</command> for <emphasis>alpha</emphasis>,
	<command>arcboot</command> for <emphasis>mips</emphasis>.
	</para>
      </sidebar>
    </section>
    <section>
      <title>Finishing the Installation and Rebooting</title>

      <para>The installation is now complete, the program invites you to
      remove the CD-ROM from the reader and to restart the computer.</para>
    </section>
  </section>
  <section id="sect.after-first-boot">
    <title>After the First Boot</title>

    <para>If you activated the task “Debian desktop environment” without any
    explicit desktop choice (or with the “GNOME” choice), the computer
    will display the <command>gdm3</command> login manager.</para>

    <figure>
      <title>First boot</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/inst-gdm.png" scalefit="1" width="65%" />
        </imageobject>
      </mediaobject>
    </figure>

    <para>The user that has already been created can then log in and begin
    working immediately.</para>
    <section>
      <title>Installing Additional Software</title>

      <para>The installed packages correspond to the profiles selected
      during installation, but not necessarily to the use that will
      actually be made of the machine. As such, you might want to use
      a package management tool to refine the selection of installed
      packages. The two most frequently used tools (which are
      installed if the “Debian desktop environment” profile was
      chosen) are <command>apt</command> (accessible from the command
      line) and <command>synaptic</command> (“Synaptic Package Manager” in
      the menus).</para>

      <para>To facilitate the installation of coherent groups of programs,
      Debian creates “tasks” that are dedicated to specific uses (mail
      server, file server, etc.). You already had the opportunity to select
      them during installation, and you can access them again thanks to
      package management tools such as <command>aptitude</command> (the
      tasks are listed in a distinct section) and
      <command>synaptic</command> (through the menu <menuchoice>
      <guimenu>Edit</guimenu> <guimenuitem>Mark Packages by
      Task…</guimenuitem> </menuchoice>).</para>

      <para>Aptitude is an interface to APT in full-screen text mode. It
      allows the user to browse the list of available packages according to
      various categories (installed or not-installed packages, by task, by
      section, etc.), and to view all of the information available on each
      of them (dependencies, conflicts, description, etc.). Each package
      can be marked “install” (to be installed, <keycap>+</keycap> key)
      or “remove” (to be removed, <keycap>-</keycap> key). All of these
      operations will be conducted simultaneously once you've confirmed
      them by pressing the <keycap>g</keycap> key (“g” for “go!”).
      If you have forgotten some programs, no worries; you will be able to
      run <command>aptitude</command> again once the initial installation
      has been completed.</para>
      <indexterm><primary>aptitude</primary></indexterm>

      <sidebar>
        <title><emphasis>TIP</emphasis> Debian thinks of speakers of non-English languages</title>

	<para>Several tasks are dedicated to the localization of the system
	in other languages beyond English. They include translated
	documentation, dictionaries, and various other packages useful for
	speakers of different languages. The appropriate task is
	automatically selected if a non-English language was chosen during
	installation.</para>
      </sidebar>

      <sidebar>
        <title><emphasis>CULTURE</emphasis> <command>dselect</command>, the old interface to install packages</title>

	<para>Before <command>aptitude</command>, the standard program to
	select packages to be installed was <command>dselect</command>, the
	old graphical interface associated with <command>dpkg</command>. Being a
	difficult program for beginners to use, it is not
	recommended.</para>
        <indexterm><primary><command>dselect</command></primary></indexterm>
      </sidebar>

      <para>Of course, it is possible not to select any task to be
      installed. In this case, you can manually install the desired
      software with the <command>apt</command> or
      <command>aptitude</command> command (which are both accessible from
      the command line).</para>

      <sidebar>
        <title><emphasis>VOCABULARY</emphasis> Package dependencies, conflicts</title>

	<para>In the Debian packaging lingo, a “dependency” is another
	package necessary for the proper functioning of the package in
	question. Conversely, a “conflict” is a package that can not be
	installed side-by-side with another.</para>

	<para>These concepts are discussed in greater detail in <xref linkend="packaging-system" />.</para>
      </sidebar>
    </section>
    <section>
      <title>Upgrading the System</title>
      <indexterm><primary>safe-upgrade</primary></indexterm>

      <para>A first <command>apt upgrade</command> (a command
      used to automatically update installed programs) is generally
      required, especially for possible security updates issued since the
      release of the latest Debian stable version. These updates may
      involve some additional questions through <command>debconf</command>,
      the standard Debian configuration tool. For further information on
      these updates conducted by <command>apt</command>, please refer
      to <xref linkend="sect.apt-upgrade" />.</para>
    </section>
  </section>
</chapter>
