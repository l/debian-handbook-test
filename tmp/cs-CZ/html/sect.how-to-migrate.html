<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">3.2. Jak přejít</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-cs-CZ-1.0-1" /><meta
        name="keywords"
        content="Současné systémové nastavení, Znovupoužití, Přechod" /><link
        rel="home"
        href="index.html"
        title="The Debian Administrator's Handbook" /><link
        rel="up"
        href="existing-setup.html"
        title="Kapitola 3. Analýza současného systémového nastavení a přechodu" /><link
        rel="prev"
        href="existing-setup.html"
        title="Kapitola 3. Analýza současného systémového nastavení a přechodu" /><link
        rel="next"
        href="installation.html"
        title="Kapitola 4. Installation" /><meta
        xmlns=""
        name="flattr:id"
        content="4pz9jq" /><link
        xmlns=""
        rel="canonical"
        href="https://debian-handbook.info/browse/cs-CZ/stable/sect.how-to-migrate.html" /></head><body><div
        id="banner"><a
          href="http://debian-handbook.info/get/"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Předcházející</strong></a></li><li
          class="home">The Debian Administrator's Handbook</li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Další</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  xmlns=""
                  id="sect.how-to-migrate"></a>3.2. Jak přejít</h2></div></div></div><a
          id="id-1.6.5.2"
          class="indexterm"></a><div
          class="para">
			Za účelem pokračování služeb bez přerušení, musí být každý počítačový přechod naplánován a proveden podle plánu. Tato zásada platí pro použití jakéhokoliv operačního systému.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.4"></a>3.2.1. Průzkum a identifikace služeb</h3></div></div></div><div
            class="para">
				Jakkoliv se tento krok zdá jednoduchý, je zásadní. Správný správce skutečně zná základní funkce každého serveru, ale takové funkce se mohou změnit a někdy i zkušení uživatelé mohli nainstalovat “divoké” služby. Vědomí, že existují, vám může minimálně umožnit se rozhodnout jak s nimi naložit, spíše, než je nahodile vymazat.
			</div><div
            class="para">
				Za tímto účelem je moudré před přechodem serveru informovat uživatele o projektu. K jejich zapojení do projektu může být užitečné nainstalovat nejběžnější programy volného softwaru na jejich počítače ještě před přechodem, programy, se kterým přijdou do styku znovu po přechodu na Debian; Libre Office a sada Mozilla jsou zde nejlepšími příklady
			</div><div
            class="section"><div
              class="titlepage"><div><div><h4
                    class="title"><a
                      xmlns=""
                      id="id-1.6.5.4.4"></a>3.2.1.1. Síť a procesy</h4></div></div></div><a
              id="id-1.6.5.4.4.2"
              class="indexterm"></a><div
              class="para">
					Nástroj <code
                class="command">nmap</code> (v balíčku pod stejným jménem) rychle rozpozná internetové služby nacházející se na zařízení připojeného k síti bez toho, aniž by se k němu přihlásil. Jednoduše spusťte následující příkaz na jiném zařízení připojeného ke stejné síti:
				</div><pre
              class="screen">
<code
                class="computeroutput">$ </code><strong
                class="userinput"><code>nmap mirwiz</code></strong>
<code
                class="computeroutput">Starting Nmap 7.40 ( https://nmap.org ) at 2017-06-06 14:41 CEST
Nmap scan report for mirwiz (192.168.1.104)
Host is up (0.00062s latency).
Not shown: 992 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
25/tcp   open  smtp
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
5666/tcp open  nrpe
9999/tcp open  abyss

Nmap done: 1 IP address (1 host up) scanned in 0.06 seconds</code></pre><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>ALTERNATIVA</em></span> Použití <code
                          class="command">netstatu</code> k nalezení seznamu dostupných služeb</strong></p></div></div></div><div
                class="para">
					Na Linuxových zařízeních, příkaz <code
                  class="command">netstat -tupan</code> ukáže seznam aktivních nebo dosud nevyřízených TCP akcí, stejně jako UDP rozhraní (portů), na kterých běžící programy čekají na odezvu. To usnadňuje identifikaci služeb nabízených sítí.
				</div></div><div
              class="sidebar"><div
                class="titlepage"><div><div><p
                      class="title"><strong><span
                          class="emphasis"><em>JDEME DÁLE</em></span> IPv6</strong></p></div></div></div><div
                class="para">
					Některé síťové příkazy mohou fungovat buď s IPv4 (obyčejně výchozí) nebo s IPv6. Mezi ně patří příkazy <code
                  class="command">nmap</code> a <code
                  class="command">netstat</code>, ale také další, jako <code
                  class="command">route</code> nebo <code
                  class="command">ip</code>. Je zvykem, že toto chování je umožněno <em
                  class="parameter"><code>-6</code></em> volbou na příkazovém řádku.
				</div></div><div
              class="para">
					Pokud je serverem Unixové zařízení nabízející uživatelům shellové účty, je zajímavé určit, zda jsou procesy prováděny na pozadí za nepřítomnosti svých majitelů. Příkaz <code
                class="command">ps auxw</code> zobrazuje seznam všech procesů s jejich uživatelskou totožností. Kontrolou těchto informací s výstupem příkazu <code
                class="command">who</code>, který poskytuje seznam přihlášených uživatelů, je možné identifikovat škodlivé nebo nedeklarované servery nebo programy běžící na pozadí. Pohledem na <code
                class="filename">crontabs</code> (tabulka vypisující automatické akce naplánované uživateli) často poskytuje zajímavé informace o funkcích naplňovaných serverem (kompletní vysvětlení <code
                class="command">cron</code> je k dispozici na <a
                class="xref"
                href="sect.task-scheduling-cron-atd.html">9.7 – „Scheduling Tasks with <code
                  class="command">cron</code> and <code
                  class="command">atd</code>“</a>).
				</div><div
              class="para">
					V každém případě ja důležité zálohovat vaše servery: to umožní navrácení informací poté, co budou uživatelé hlásit určité problémy po přechodu.
				</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.5"></a>3.2.2. Zálohování nastavení</h3></div></div></div><div
            class="para">
				Je moudré ponechat si nastavení každé rozpoznané služby kvůli tomu, abychom byli schopni nainstalovat obdobu na aktualizovaný server. Nutné minimum je si udělat zálohovou kopii souborů nastavení.
			</div><div
            class="para">
				Pro Unixová zařízení jsou soubory nastavení obyčejně nalezeny v <code
              class="filename">/etc/</code>, ale mohou být umístěny i v podadresáři <code
              class="filename">/usr/local/</code>. Toto je případ, pokud byl program nainstalován ze zdrojových souborů a ne za pomoci balíčku. V některých případech se mohou nalézat také pod <code
              class="filename">/opt/</code>.
			</div><div
            class="para">
				Pro služby obhospodařující data (jako jsou databáze) se důrazně doporučuje vyexportovat data do standardního formátu, který se snadno vimportuje novým softwarem. Takový formát je obvykle v textovém režimu a je zdokumentován; může to být například výpis SQL pro databáze nebo soubor LDIF pro servery LDAP.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.5.5"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-2.png"
                  alt="Zálohy databáze" /></div></div><p
              class="title"><strong>Obrázek 3.2. Zálohy databáze</strong></p></div><div
            class="para">
				Každý serverový sofrware je jiný a je nemožné popsat všechny existující případy do detailu. Srovnejte dokumentaci současného a nového sofrwaru a identifikujte části, které je možno exportovat (tedy re-importovat) a části, které budou vyžadovat manuální činnost. Čtení této knihy objasní nastavení hlavních programů Linuxového serveru.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.6"></a>3.2.3. Převzetí současného Debianového serveru</h3></div></div></div><a
            id="id-1.6.5.6.2"
            class="indexterm"></a><a
            id="id-1.6.5.6.3"
            class="indexterm"></a><a
            id="id-1.6.5.6.4"
            class="indexterm"></a><div
            class="para">
				K efektivnímu převzetí údržby se dá zanalyzovat zařízení, na kterém už Debian běží.
			</div><div
            class="para">
				Prvním souborem ke kontrole by měl být <code
              class="filename">/etc/debian_version</code>, který obvykle obsahuje číslo verze nainstalovaného systému Debianu (je součástí balíčku <span
              class="emphasis"><em>base-files</em></span>). Pokud ukazuje <code
              class="literal"><em
                class="replaceable">kódové jméno</em>/sid</code>, znamená to, že systém byl aktualizovaný s balíčky pocházejících z jedné z vývojových distribucí (buď testovací nebo nestabilní).
			</div><div
            class="para">
				Program <code
              class="command">apt-show-versions</code> (z balíčku Debianu toho samého jména) kontroluje seznam nainstalovaných balíčků a rozpoznává dostupné verze. <code
              class="command">aptitude</code> může také zastat takové úkoly, třebaže méně systematickým způsobem.
			</div><div
            class="para">
				Nahlédnutí do souboru <code
              class="filename">/etc/apt/sources.list</code> (a adresáře <code
              class="filename">/etc/apt/sources.list.d/</code>) umožní zjistit, odkud nainstalované balíčky Debianu pravděpodobně pocházejí. Pokud se zde objeví hodně neznámých zdrojů, může správce zvolit kompletní reinstalaci počítačového systmému za účelem zajištění optimální kompatability se softwarem poskytovaným Debianem.
			</div><div
            class="para">
				Soubor <code
              class="filename">sources.list</code> je často dobrým ukazatelem: většina správců si uchovává, minimálně formou komentářů, seznam zdrojů APT, které byly dříve použity. Neměli by jste ovšem zapomínat, že zdroje použité v minulosti mohly být vymazány a že některé náhodné balíčky stáhnuté přes internet mohly být manuálně nainstalované (pomocí příkazu <code
              class="command">dpkg</code>). V tomto případě zařízení ve svém vzezření “standardního” Debian klame. To je důvod, proč by jste si měli dávat pozor na jakékoliv náznaky, které prozradí přítomnost externích balíčků (výskyt <code
              class="filename">deb</code> souborů v neobvyklých adresářích, čísla verzí balíčků se speciální příponou, která naznačuje, že balíček pochází z postředí mimo projekt Debian, jako je <code
              class="literal">ubuntu</code> nebo <code
              class="literal">lmde</code>, apod.)
			</div><div
            class="para">
				Podobně je zajímavé analyzovat obsah adresáře <code
              class="filename">/usr/local/</code>, jehož úkolem je shraňovat programy ručně přeložené a nainstalované. Vypsání seznamu softwaru nainstalovaného tímto způsobem je poučné, protože to podněcuje otázky na důvody nepoužití odpovídajícího balíčků Deabianu, podud takový existuje.
			</div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>RYCHLÝ NÁHLED</em></span> <span
                        class="pkg pkg">cruft</span></strong></p></div></div></div><div
              class="para">
				Balíček <span
                class="pkg pkg">cruft</span> přichází s vypsáním dostupných souborů, které nepatří žádnému balíčku. Má filtry (více či méně účinné a více či méně aktuální) k tomu, aby předešel hlášení legitimních souborů (souborů vytvořených balíčky Debianu) nebo vytvořených souborů nastavení nespravovaných <code
                class="command">dpkg</code>, apod.).
			</div><div
              class="para">
				Mějte se na pozoru a slepě namažte vše, co <code
                class="command">cruft</code> vypíše!
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.7"></a>3.2.4. Instalace Debianu</h3></div></div></div><div
            class="para">
				Jakmile jsou všechny informace o současném serveru známy, můžeme jej vypnout a začít na něm s instalací Debianu.
			</div><a
            id="id-1.6.5.7.3"
            class="indexterm"></a><div
            class="para">
				Abychom vybrali správnou verzi, je nutné znát architekturu daného počítače. Pokud to je, jak vidno, současné PC, potom to bude pravděpodobně amd64 (starší počítače byly obyčejně i386). V ostatních případech můžeme zúžit výběr podle systému, který byl použit předtím.
			</div><div
            class="para">
				<a
              class="xref"
              href="sect.how-to-migrate.html#tab-corresp">3.1</a> není zamýšleno být vyčerpávající, ale může pomoci. V každém případě, původní dokumentace počítače je nejspolehlivějším zdrojem takovýchto informací.
			</div><div
            class="table"><a
              xmlns=""
              id="tab-corresp"></a><p
              class="title"><strong>Tabulka 3.1. Spojení správného operačního systému se správnou architekturou</strong></p><div
              class="table-contents"><table
                xmlns:d="http://docbook.org/ns/docbook"
                class="lt-4-cols gt-7-rows"
                summary="Spojení správného operačního systému se správnou architekturou"><colgroup><col /><col /></colgroup><thead><tr><th>Operační systém</th><th>Architektura(y)</th></tr></thead><tbody><tr><td>DEC Unix (OSF/1)</td><td>alpha, mipsel</td></tr><tr><td>HP Unix</td><td>ia64, hppa</td></tr><tr><td>IBM AIX</td><td>powerpc</td></tr><tr><td>Irix</td><td>mips</td></tr><tr><td>OS X</td><td>amd64, powerpc, i386</td></tr><tr><td>z/OS, MVS</td><td>s390x, s390</td></tr><tr><td>Solaris, SunOS</td><td>sparc, i386, m68k</td></tr><tr><td>Ultrix</td><td>mips</td></tr><tr><td>VMS</td><td>alpha</td></tr><tr><td>Windows 95/98/ME</td><td>i386</td></tr><tr><td>Windows NT/2000</td><td>i386, alpha, ia64, mipsel</td></tr><tr><td>Windows XP / Windows Server 2008</td><td>i386, amd64, ia64</td></tr><tr><td>Windows RT</td><td>armel, armhf, arm64</td></tr><tr><td>Windows Vista / Windows 7-8-10</td><td>i386, amd64</td></tr></tbody></table></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>HARDWARE</em></span> 64 bit PC oproti 32 bit PC</strong></p></div></div></div><a
              id="id-1.6.5.7.7.2"
              class="indexterm"></a><a
              id="id-1.6.5.7.7.3"
              class="indexterm"></a><div
              class="para">
				Nejnovější počítače mají 64 bitové procesory Intel nebo AMD, kompatibilní se starými 32 bitovými procesory; software sestavený pro architekturu “i386” proto funguje. Na druhou stranu, tento kompatabilní mód plně nevyužívá schopností těchto nových procesorů. To je důvod, proč Debian poskytuje “amd64” architekturu, která funguje se současnými čipy AMD, stejně jako s procesory “em64t” Intelu (včetně většiny z Core série), které se AMD64 hodně podobají.
			</div></div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    xmlns=""
                    id="id-1.6.5.8"></a>3.2.5. Instalace a nastavení vybraných služeb</h3></div></div></div><div
            class="para">
				Jakmile je Debian nainstalován, musíme nainstalovat a nastavit jednu po druhé služby, které má tento počítač hostit. Nové nastavení musí brát v potaz to předešlé, aby byl zajištěn bezproblémový přechod. Všechny informace získané v prvních dvou krocích napomůžou k úspěšnému dokončení této části.
			</div><div
            class="figure"><a
              xmlns=""
              id="id-1.6.5.8.3"></a><div
              class="figure-contents"><div
                class="mediaobject"><img
                  src="images/existing-setup-4.png"
                  alt="Instalace vybraných služeb" /></div></div><p
              class="title"><strong>Obrázek 3.3. Instalace vybraných služeb</strong></p></div><div
            class="para">
				Než skočíte do akce oběma nohama, vřele doporučujeme si přečíst zbytek této knihy. Potom lépe porozumíte tomu, jak nastavit očekávané služby.
			</div><div
            class="para">
			</div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="existing-setup.html"><strong>Předcházející</strong>Kapitola 3. Analýza současného systémového nastav...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Nahoru</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Domů</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="installation.html"><strong>Další</strong>Kapitola 4. Installation</a></li></ul></body></html>
